{
  "contestId": 2087,
  "index": "G",
  "title": "Esports in Berland",
  "timeLimit": "2 seconds",
  "memoryLimit": "512 megabytes",
  "rating": null,
  "tags": [
    "*special",
    "*special",
    "greedy",
    "greedy"
  ],
  "statementHtml": "<p>Recently, esports has been recognized as an official sport in Berland, and regular competitions have begun to take place. Riding the wave of popularity, Monocarp also decided to participate in the upcoming competitions (besides, prizes have never hurt anyone).</p>\n<p>In each of the following <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 0.814em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.598em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.518em, 1000.6em, 2.275em, -999.997em); top: -2.108em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mi\" id=\"MathJax-Span-3\" style=\"font-family: MathJax_Math-italic;\">n</span></span><span style=\"display: inline-block; width: 0px; height: 2.113em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-1\">n</script> days, one competition will be held. Monocarp would like to participate in all of them, but unfortunately, his current skill level <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-2-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-4\" style=\"width: 0.652em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.49em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.518em, 1000.44em, 2.275em, -999.997em); top: -2.108em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-5\"><span class=\"mi\" id=\"MathJax-Span-6\" style=\"font-family: MathJax_Math-italic;\">s</span></span><span style=\"display: inline-block; width: 0px; height: 2.113em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>s</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-2\">s</script> is <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-3-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-7\" style=\"width: 0.652em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.49em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.356em, 1000.44em, 2.33em, -999.997em); top: -2.162em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-8\"><span class=\"mn\" id=\"MathJax-Span-9\" style=\"font-family: MathJax_Main;\">0</span></span><span style=\"display: inline-block; width: 0px; height: 2.167em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.075em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>0</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-3\">0</script>. At the same time, the prize money Monocarp can earn in competitions depends on his skill level. Therefore, Monocarp decided that he could sacrifice participating in some competitions to train and increase his skill level on those days.</p>\n<p>In general, on the <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-4-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-10\" style=\"width: 0.436em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.327em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.301em, 1000.27em, 2.275em, -999.997em); top: -2.108em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-11\"><span class=\"mi\" id=\"MathJax-Span-12\" style=\"font-family: MathJax_Math-italic;\">i</span></span><span style=\"display: inline-block; width: 0px; height: 2.113em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.004em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>i</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-4\">i</script>-th day, Monocarp can: </p>\n<p>Help Monocarp calculate his maximum total income and the number of training plans with such income. Two training plans are considered different if there exists a day that is a training day in one plan and a competition day in the other one.</p>",
  "inputSpecHtml": "<p>The first line contains a single integer <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-10-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-32\" style=\"width: 0.814em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.598em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.518em, 1000.6em, 2.275em, -999.997em); top: -2.108em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-33\"><span class=\"mi\" id=\"MathJax-Span-34\" style=\"font-family: MathJax_Math-italic;\">n</span></span><span style=\"display: inline-block; width: 0px; height: 2.113em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-10\">n</script> (<span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-11-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;&amp;#x2264;&lt;/mo&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;mo&gt;&amp;#x2264;&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;msup&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;/msup&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-35\" style=\"width: 8.444em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 6.388em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.139em, 1006.39em, 2.492em, -999.997em); top: -2.162em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-36\"><span class=\"mn\" id=\"MathJax-Span-37\" style=\"font-family: MathJax_Main;\">1</span><span class=\"mo\" id=\"MathJax-Span-38\" style=\"font-family: MathJax_Main; padding-left: 0.273em;\">≤</span><span class=\"mi\" id=\"MathJax-Span-39\" style=\"font-family: MathJax_Math-italic; padding-left: 0.273em;\">n</span><span class=\"mo\" id=\"MathJax-Span-40\" style=\"font-family: MathJax_Main; padding-left: 0.273em;\">≤</span><span class=\"mn\" id=\"MathJax-Span-41\" style=\"font-family: MathJax_Main; padding-left: 0.273em;\">2</span><span class=\"mo\" id=\"MathJax-Span-42\" style=\"font-family: MathJax_Main; padding-left: 0.219em;\">⋅</span><span class=\"msubsup\" id=\"MathJax-Span-43\" style=\"padding-left: 0.219em;\"><span style=\"display: inline-block; position: relative; width: 1.41em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.195em, 1000.98em, 4.169em, -999.997em); top: -4.002em; left: 0em;\"><span class=\"mn\" id=\"MathJax-Span-44\" style=\"font-family: MathJax_Main;\">10</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span><span style=\"position: absolute; top: -4.38em; left: 0.977em;\"><span class=\"mn\" id=\"MathJax-Span-45\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">5</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.167em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.504em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>1</mn><mo>≤</mo><mi>n</mi><mo>≤</mo><mn>2</mn><mo>⋅</mo><msup><mn>10</mn><mn>5</mn></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-11\">1 \\le n \\le 2 \\cdot 10^5</script>)&nbsp;— the number of days when competitions will take place.</p><p>The second line contains <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-12-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-46\" style=\"width: 0.814em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.598em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.518em, 1000.6em, 2.275em, -999.997em); top: -2.108em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-47\"><span class=\"mi\" id=\"MathJax-Span-48\" style=\"font-family: MathJax_Math-italic;\">n</span></span><span style=\"display: inline-block; width: 0px; height: 2.113em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 0.718em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>n</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-12\">n</script> integers <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-13-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-49\" style=\"width: 7.47em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.63em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.572em, 1005.63em, 2.546em, -999.997em); top: -2.162em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-50\"><span class=\"msubsup\" id=\"MathJax-Span-51\"><span style=\"display: inline-block; position: relative; width: 0.977em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.49em, 4.169em, -999.997em); top: -4.002em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-52\" style=\"font-family: MathJax_Math-italic;\">a</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span><span style=\"position: absolute; top: -3.839em; left: 0.544em;\"><span class=\"mn\" id=\"MathJax-Span-53\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-54\" style=\"font-family: MathJax_Main;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-55\" style=\"padding-left: 0.165em;\"><span style=\"display: inline-block; position: relative; width: 0.977em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.49em, 4.169em, -999.997em); top: -4.002em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-56\" style=\"font-family: MathJax_Math-italic;\">a</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span><span style=\"position: absolute; top: -3.839em; left: 0.544em;\"><span class=\"mn\" id=\"MathJax-Span-57\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-58\" style=\"font-family: MathJax_Main;\">,</span><span class=\"mo\" id=\"MathJax-Span-59\" style=\"font-family: MathJax_Main; padding-left: 0.165em;\">…</span><span class=\"mo\" id=\"MathJax-Span-60\" style=\"font-family: MathJax_Main; padding-left: 0.165em;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-61\" style=\"padding-left: 0.165em;\"><span style=\"display: inline-block; position: relative; width: 1.031em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.49em, 4.169em, -999.997em); top: -4.002em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-62\" style=\"font-family: MathJax_Math-italic;\">a</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span><span style=\"position: absolute; top: -3.839em; left: 0.544em;\"><span class=\"mi\" id=\"MathJax-Span-63\" style=\"font-size: 70.7%; font-family: MathJax_Math-italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.167em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.354em; border-left: 0px solid; width: 0px; height: 1.004em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>a</mi><mn>1</mn></msub><mo>,</mo><msub><mi>a</mi><mn>2</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>a</mi><mi>n</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-13\">a_1, a_2, \\dots, a_n</script> (<span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-14-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;&amp;#x2264;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2264;&lt;/mo&gt;&lt;msup&gt;&lt;mn&gt;10&lt;/mn&gt;&lt;mn&gt;6&lt;/mn&gt;&lt;/msup&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-64\" style=\"width: 7.146em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.414em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.139em, 1005.41em, 2.492em, -999.997em); top: -2.162em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-65\"><span class=\"mn\" id=\"MathJax-Span-66\" style=\"font-family: MathJax_Main;\">0</span><span class=\"mo\" id=\"MathJax-Span-67\" style=\"font-family: MathJax_Main; padding-left: 0.273em;\">≤</span><span class=\"msubsup\" id=\"MathJax-Span-68\" style=\"padding-left: 0.273em;\"><span style=\"display: inline-block; position: relative; width: 0.869em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.412em, 1000.49em, 4.169em, -999.997em); top: -4.002em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-69\" style=\"font-family: MathJax_Math-italic;\">a</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span><span style=\"position: absolute; top: -3.839em; left: 0.544em;\"><span class=\"mi\" id=\"MathJax-Span-70\" style=\"font-size: 70.7%; font-family: MathJax_Math-italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-71\" style=\"font-family: MathJax_Main; padding-left: 0.273em;\">≤</span><span class=\"msubsup\" id=\"MathJax-Span-72\" style=\"padding-left: 0.273em;\"><span style=\"display: inline-block; position: relative; width: 1.41em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.195em, 1000.98em, 4.169em, -999.997em); top: -4.002em; left: 0em;\"><span class=\"mn\" id=\"MathJax-Span-73\" style=\"font-family: MathJax_Main;\">10</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span><span style=\"position: absolute; top: -4.38em; left: 0.977em;\"><span class=\"mn\" id=\"MathJax-Span-74\" style=\"font-size: 70.7%; font-family: MathJax_Main;\">6</span><span style=\"display: inline-block; width: 0px; height: 4.007em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.167em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 1.504em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>0</mn><mo>≤</mo><msub><mi>a</mi><mi>i</mi></msub><mo>≤</mo><msup><mn>10</mn><mn>6</mn></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-14\">0 \\le a_i \\le 10^6</script>)&nbsp;— the base prize money that Monocarp can expect.</p>",
  "outputSpecHtml": "<p>Print two integers&nbsp;— the maximum total income that Monocarp can achieve with an optimal training plan and the number of such plans.</p><p>Since the number of plans may be too big, print it modulo <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-15-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;998&lt;/mn&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mn&gt;244&lt;/mn&gt;&lt;mspace width=&quot;thinmathspace&quot; /&gt;&lt;mn&gt;353&lt;/mn&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-75\" style=\"width: 6.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 4.819em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.301em, 1004.76em, 2.33em, -999.997em); top: -2.162em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-76\"><span class=\"mn\" id=\"MathJax-Span-77\" style=\"font-family: MathJax_Main;\">998</span><span class=\"mspace\" id=\"MathJax-Span-78\" style=\"height: 0em; vertical-align: 0em; width: 0.165em; display: inline-block; overflow: hidden;\"></span><span class=\"mn\" id=\"MathJax-Span-79\" style=\"font-family: MathJax_Main;\">244</span><span class=\"mspace\" id=\"MathJax-Span-80\" style=\"height: 0em; vertical-align: 0em; width: 0.165em; display: inline-block; overflow: hidden;\"></span><span class=\"mn\" id=\"MathJax-Span-81\" style=\"font-family: MathJax_Main;\">353</span></span><span style=\"display: inline-block; width: 0px; height: 2.167em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.075em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>998</mn><mspace width=\"thinmathspace\"></mspace><mn>244</mn><mspace width=\"thinmathspace\"></mspace><mn>353</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-15\">998\\,244\\,353</script>.</p>",
  "noteHtml": "<p>In the first example, Monocarp can either participate or skip the competition&nbsp;— in both cases he will get <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-16-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-82\" style=\"width: 0.652em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.49em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.356em, 1000.44em, 2.33em, -999.997em); top: -2.162em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-83\"><span class=\"mn\" id=\"MathJax-Span-84\" style=\"font-family: MathJax_Main;\">0</span></span><span style=\"display: inline-block; width: 0px; height: 2.167em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.068em; border-left: 0px solid; width: 0px; height: 1.075em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>0</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-16\">0</script> units.</p><p>In the second example, it is optimal to simply participate in the competition.</p><p>In the third example, there are two training plans. Monocarp can </p><ol> <li> either train for the first two days and then participate in the competitions on the remaining days: Monocarp will earn <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-17-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;6&lt;/mn&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-85\" style=\"width: 8.011em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 6.063em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.247em, 1006.01em, 2.6em, -999.997em); top: -2.162em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-86\"><span class=\"mn\" id=\"MathJax-Span-87\" style=\"font-family: MathJax_Main;\">3</span><span class=\"mo\" id=\"MathJax-Span-88\" style=\"font-family: MathJax_Main; padding-left: 0.219em;\">⋅</span><span class=\"mo\" id=\"MathJax-Span-89\" style=\"font-family: MathJax_Main; padding-left: 0.219em;\">(</span><span class=\"mn\" id=\"MathJax-Span-90\" style=\"font-family: MathJax_Main;\">0</span><span class=\"mo\" id=\"MathJax-Span-91\" style=\"font-family: MathJax_Main; padding-left: 0.219em;\">+</span><span class=\"mn\" id=\"MathJax-Span-92\" style=\"font-family: MathJax_Main; padding-left: 0.219em;\">2</span><span class=\"mo\" id=\"MathJax-Span-93\" style=\"font-family: MathJax_Main;\">)</span><span class=\"mo\" id=\"MathJax-Span-94\" style=\"font-family: MathJax_Main; padding-left: 0.273em;\">=</span><span class=\"mn\" id=\"MathJax-Span-95\" style=\"font-family: MathJax_Main; padding-left: 0.273em;\">6</span></span><span style=\"display: inline-block; width: 0px; height: 2.167em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.425em; border-left: 0px solid; width: 0px; height: 1.432em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>3</mn><mo>⋅</mo><mo stretchy=\"false\">(</mo><mn>0</mn><mo>+</mo><mn>2</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>6</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-17\">3 \\cdot (0 + 2) = 6</script> units; </li><li> or train for the first three days: Monocarp will earn <span class=\"MathJax_Preview\" style=\"color: inherit;\"></span><span class=\"MathJax\" id=\"MathJax-Element-18-Frame\" tabindex=\"0\" data-mathml=\"&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;6&lt;/mn&gt;&lt;/math&gt;\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-96\" style=\"width: 8.011em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 6.063em; height: 0px; font-size: 132%;\"><span style=\"position: absolute; clip: rect(1.247em, 1006.01em, 2.6em, -999.997em); top: -2.162em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-97\"><span class=\"mn\" id=\"MathJax-Span-98\" style=\"font-family: MathJax_Main;\">2</span><span class=\"mo\" id=\"MathJax-Span-99\" style=\"font-family: MathJax_Main; padding-left: 0.219em;\">⋅</span><span class=\"mo\" id=\"MathJax-Span-100\" style=\"font-family: MathJax_Main; padding-left: 0.219em;\">(</span><span class=\"mn\" id=\"MathJax-Span-101\" style=\"font-family: MathJax_Main;\">0</span><span class=\"mo\" id=\"MathJax-Span-102\" style=\"font-family: MathJax_Main; padding-left: 0.219em;\">+</span><span class=\"mn\" id=\"MathJax-Span-103\" style=\"font-family: MathJax_Main; padding-left: 0.219em;\">3</span><span class=\"mo\" id=\"MathJax-Span-104\" style=\"font-family: MathJax_Main;\">)</span><span class=\"mo\" id=\"MathJax-Span-105\" style=\"font-family: MathJax_Main; padding-left: 0.273em;\">=</span><span class=\"mn\" id=\"MathJax-Span-106\" style=\"font-family: MathJax_Main; padding-left: 0.273em;\">6</span></span><span style=\"display: inline-block; width: 0px; height: 2.167em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.425em; border-left: 0px solid; width: 0px; height: 1.432em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mn>2</mn><mo>⋅</mo><mo stretchy=\"false\">(</mo><mn>0</mn><mo>+</mo><mn>3</mn><mo stretchy=\"false\">)</mo><mo>=</mo><mn>6</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-18\">2 \\cdot (0 + 3) = 6</script> units. </li></ol><p>In the fourth example, Monocarp can either participate in all competitions or skip any one day.</p>",
  "samples": [
    {
      "input": "10",
      "output": "0 2"
    },
    {
      "input": "142",
      "output": "42 1"
    },
    {
      "input": "50 0 0 0 0",
      "output": "6 2"
    },
    {
      "input": "65 4 3 2 1 0",
      "output": "15 7"
    },
    {
      "input": "105 9 0 3 2 0 2 2 9 9",
      "output": "53 3"
    }
  ],
  "images": [],
  "url": "https://codeforces.com/contest/2087/problem/G",
  "tutorialHtml": "<div><div class=\"ttypography\"><div class=\"problem-statement\"><div><p>Suppose that Monocarp will train for exactly <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-395\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-396\">k</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-70\">k</script> days. How much can he earn?</p><p>To start, let's calculate how much Monocarp will earn, but in a slightly different way. If on the <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-397\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-398\">i</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-71\">i</script>-th day (0-indexed) he competed, we will add only <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-399\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-400\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-401\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-402\" style=\"vertical-align: -0.4em;\">i</span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-72\">a_i</script> to the score. If he trained, we will add exactly as much as this training will bring him in the future, namely <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-403\"><span class=\"MJXp-mo\" id=\"MJXp-Span-404\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-405\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-406\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-407\">i</span><span class=\"MJXp-mo\" id=\"MJXp-Span-408\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-409\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-410\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-411\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mo\" id=\"MJXp-Span-412\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mtext\" id=\"MJXp-Span-413\">number of trainings later</span><span class=\"MJXp-mo\" id=\"MJXp-Span-414\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-73\">(n - i - 1) - (\\text{number of trainings later})</script>. That is, for each subsequent day that is not a training day, he will receive an additional unit of money.</p><p>This makes it a bit easier to calculate, but it's still not enough. Notice that since Monocarp trains for exactly <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-415\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-416\">k</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-74\">k</script> days, regardless of which days they are, we will subtract <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-417\"><span class=\"MJXp-mo\" id=\"MJXp-Span-418\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-419\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-420\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-421\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-422\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-75\">(k - 1)</script> from the contribution of the first training, <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-423\"><span class=\"MJXp-mo\" id=\"MJXp-Span-424\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-425\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-426\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-427\">2</span><span class=\"MJXp-mo\" id=\"MJXp-Span-428\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-76\">(k - 2)</script> from the second, <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-429\"><span class=\"MJXp-mo\" id=\"MJXp-Span-430\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-431\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-432\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-433\">3</span><span class=\"MJXp-mo\" id=\"MJXp-Span-434\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-77\">(k - 3)</script> from the third, and so on. From the last one, we will subtract <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-435\"><span class=\"MJXp-mn\" id=\"MJXp-Span-436\">0</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-78\">0</script>.</p><p>In other words, we will subtract exactly <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-437\"><span class=\"MJXp-mfrac\" id=\"MJXp-Span-438\" style=\"vertical-align: 0.25em;\"><span class=\"MJXp-box MJXp-script\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-439\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-440\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-441\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-442\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-443\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-444\">)</span></span><span class=\"MJXp-box\" style=\"margin-top: -0.9em;\"><span class=\"MJXp-denom\"><span><span class=\"MJXp-rule\" style=\"height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;\"></span></span><span><span class=\"MJXp-box MJXp-script\"><span class=\"MJXp-mn\" id=\"MJXp-Span-445\">2</span></span></span></span></span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-79\">\\frac{k (k - 1)}{2}</script> from the contribution of all trainings, regardless of the choice of days. Thus, the total earnings can be expressed as <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math MJXp-display\" id=\"MJXp-Span-446\"><span class=\"MJXp-mrow\" id=\"MJXp-Span-447\"><span class=\"MJXp-mi\" id=\"MJXp-Span-448\">t</span><span class=\"MJXp-mi\" id=\"MJXp-Span-449\">o</span><span class=\"MJXp-mi\" id=\"MJXp-Span-450\">t</span><span class=\"MJXp-mi\" id=\"MJXp-Span-451\">a</span><span class=\"MJXp-mi\" id=\"MJXp-Span-452\">l</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-453\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-munderover\" id=\"MJXp-Span-454\"><span class=\"\"><span class=\"MJXp-mo\" id=\"MJXp-Span-455\" style=\"margin-left: 0.111em; margin-right: 0.167em;\"><span class=\"MJXp-largeop\">∑</span></span></span><span class=\" MJXp-script\"><span class=\"MJXp-mrow\" id=\"MJXp-Span-456\" style=\"margin-left: 0px;\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-457\">i</span><span class=\"MJXp-mo\" id=\"MJXp-Span-458\">∉</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-459\">T</span></span></span></span><span class=\"MJXp-mrow\" id=\"MJXp-Span-460\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-461\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-462\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-463\" style=\"vertical-align: -0.4em;\">i</span></span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-464\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-munderover\" id=\"MJXp-Span-465\"><span class=\"\"><span class=\"MJXp-mo\" id=\"MJXp-Span-466\" style=\"margin-left: 0.111em; margin-right: 0.167em;\"><span class=\"MJXp-largeop\">∑</span></span></span><span class=\" MJXp-script\"><span class=\"MJXp-mrow\" id=\"MJXp-Span-467\" style=\"margin-left: 0px;\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-468\">i</span><span class=\"MJXp-mo\" id=\"MJXp-Span-469\">∈</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-470\">T</span></span></span></span><span class=\"MJXp-mrow\" id=\"MJXp-Span-471\"><span class=\"MJXp-mo\" id=\"MJXp-Span-472\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-473\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-474\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-475\">i</span><span class=\"MJXp-mo\" id=\"MJXp-Span-476\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-477\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-478\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-479\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mfrac\" id=\"MJXp-Span-480\" style=\"vertical-align: 0.25em;\"><span class=\"MJXp-box\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-481\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-482\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-483\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-484\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-485\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-486\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span><span class=\"MJXp-box\" style=\"margin-top: -0.9em;\"><span class=\"MJXp-denom\"><span><span class=\"MJXp-rule\" style=\"height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;\"></span></span><span><span class=\"MJXp-box\"><span class=\"MJXp-mn\" id=\"MJXp-Span-487\">2</span></span></span></span></span></span></span></span><script type=\"math/tex; mode=display\" id=\"MathJax-Element-80\">\\mathrm{total} = \\sum_{i \\not\\in T}{a_i} + \\sum_{i \\in T}{(n - i - 1)} - \\frac{k (k - 1)}{2}</script> where <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-488\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-489\">T</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-81\">T</script> is the set of training days.</p><p>The last step is as follows: let's say that we first receive all <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-490\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-491\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-492\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-493\" style=\"vertical-align: -0.4em;\">i</span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-82\">a_i</script>. And when on the <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-494\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-495\">i</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-83\">i</script>-th day we decide to train, we will earn <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-496\"><span class=\"MJXp-mo\" id=\"MJXp-Span-497\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-498\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-499\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-500\">i</span><span class=\"MJXp-mo\" id=\"MJXp-Span-501\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-502\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-503\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-84\">(n - i - 1)</script>, but we will have to \"return\" <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-504\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-505\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-506\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-507\" style=\"vertical-align: -0.4em;\">i</span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-85\">a_i</script> back. Then the total earnings can be expressed as: <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math MJXp-display\" id=\"MJXp-Span-508\"><span class=\"MJXp-mrow\" id=\"MJXp-Span-509\"><span class=\"MJXp-mi\" id=\"MJXp-Span-510\">t</span><span class=\"MJXp-mi\" id=\"MJXp-Span-511\">o</span><span class=\"MJXp-mi\" id=\"MJXp-Span-512\">t</span><span class=\"MJXp-mi\" id=\"MJXp-Span-513\">a</span><span class=\"MJXp-mi\" id=\"MJXp-Span-514\">l</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-515\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-munderover\" id=\"MJXp-Span-516\"><span><span class=\"MJXp-over\"><span class=\" MJXp-script\"><span class=\"MJXp-mrow\" id=\"MJXp-Span-522\" style=\"margin-right: 0px; margin-left: 0px;\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-523\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-524\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-525\">1</span></span></span><span class=\"\"><span class=\"MJXp-mo\" id=\"MJXp-Span-517\" style=\"margin-left: 0.111em; margin-right: 0.167em;\"><span class=\"MJXp-largeop\">∑</span></span></span></span></span><span class=\" MJXp-script\"><span class=\"MJXp-mrow\" id=\"MJXp-Span-518\" style=\"margin-left: 0px;\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-519\">i</span><span class=\"MJXp-mo\" id=\"MJXp-Span-520\">=</span><span class=\"MJXp-mn\" id=\"MJXp-Span-521\">0</span></span></span></span><span class=\"MJXp-mrow\" id=\"MJXp-Span-526\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-527\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-528\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-529\" style=\"vertical-align: -0.4em;\">i</span></span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-530\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-munderover\" id=\"MJXp-Span-531\"><span class=\"\"><span class=\"MJXp-mo\" id=\"MJXp-Span-532\" style=\"margin-left: 0.111em; margin-right: 0.167em;\"><span class=\"MJXp-largeop\">∑</span></span></span><span class=\" MJXp-script\"><span class=\"MJXp-mrow\" id=\"MJXp-Span-533\" style=\"margin-left: 0px;\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-534\">i</span><span class=\"MJXp-mo\" id=\"MJXp-Span-535\">∈</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-536\">T</span></span></span></span><span class=\"MJXp-mrow\" id=\"MJXp-Span-537\"><span class=\"MJXp-mo\" id=\"MJXp-Span-538\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-539\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-540\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-541\">i</span><span class=\"MJXp-mo\" id=\"MJXp-Span-542\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-543\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-544\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-545\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-546\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-547\" style=\"vertical-align: -0.4em;\">i</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-548\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-549\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mfrac\" id=\"MJXp-Span-550\" style=\"vertical-align: 0.25em;\"><span class=\"MJXp-box\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-551\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-552\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-553\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-554\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-555\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-556\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span><span class=\"MJXp-box\" style=\"margin-top: -0.9em;\"><span class=\"MJXp-denom\"><span><span class=\"MJXp-rule\" style=\"height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;\"></span></span><span><span class=\"MJXp-box\"><span class=\"MJXp-mn\" id=\"MJXp-Span-557\">2</span></span></span></span></span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-558\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span></span></span><script type=\"math/tex; mode=display\" id=\"MathJax-Element-86\">\\mathrm{total} = \\sum_{i = 0}^{n - 1}{a_i} + \\sum_{i \\in T}{(n - i - 1 - a_i)} - \\frac{k (k - 1)}{2}.</script></p><p>Since the first and third terms of the sum do not depend on the choice of days, to maximize <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-559\"><span class=\"MJXp-mrow\" id=\"MJXp-Span-560\"><span class=\"MJXp-mi\" id=\"MJXp-Span-561\">t</span><span class=\"MJXp-mi\" id=\"MJXp-Span-562\">o</span><span class=\"MJXp-mi\" id=\"MJXp-Span-563\">t</span><span class=\"MJXp-mi\" id=\"MJXp-Span-564\">a</span><span class=\"MJXp-mi\" id=\"MJXp-Span-565\">l</span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-87\">\\mathrm{total}</script>, it is sufficient to maximize the sum in the middle. Let's construct an array <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-566\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-567\">d</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-88\">d</script>, where <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-568\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-569\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-570\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-571\" style=\"vertical-align: -0.4em;\">i</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-572\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-573\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-574\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-575\">i</span><span class=\"MJXp-mo\" id=\"MJXp-Span-576\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-577\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-578\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-579\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-580\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-581\" style=\"vertical-align: -0.4em;\">i</span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-89\">d_i = n - i - 1 - a_i</script>. Then, for a fixed <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-582\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-583\">k</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-90\">k</script>, we simply need to choose the <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-584\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-585\">k</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-91\">k</script> maximum values in <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-586\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-587\">d</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-92\">d</script>. To do this, it is enough to sort <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-588\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-589\">d</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-93\">d</script> in descending order once and take a prefix of length <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-590\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-591\">k</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-94\">k</script>.</p><p>Thus, we will construct the array <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-592\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-593\">d</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-95\">d</script>, sort it, and iterate through <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-594\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-595\">k</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-96\">k</script>, maintaining the sum of the first <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-596\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-597\">k</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-97\">k</script> elements in <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-598\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-599\">d</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-98\">d</script>.</p><p>Next, we need to understand how to count the number of ways to take the optimal answer for a given <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-600\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-601\">k</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-99\">k</script>. Since we need to maximize the sum of the selected <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-602\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-603\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-604\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-605\" style=\"vertical-align: -0.4em;\">i</span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-100\">d_i</script>, we should take all <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-606\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-607\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-608\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-609\" style=\"vertical-align: -0.4em;\">i</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-610\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">&gt;</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-611\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-612\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mrow MJXp-script\" id=\"MJXp-Span-613\" style=\"vertical-align: -0.4em;\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-614\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-615\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-616\">1</span></span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-101\">d_i > d_{k - 1}</script>. On the other hand, we shouldn't take any <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-617\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-618\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-619\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-620\" style=\"vertical-align: -0.4em;\">i</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-621\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">&lt;</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-622\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-623\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mrow MJXp-script\" id=\"MJXp-Span-624\" style=\"vertical-align: -0.4em;\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-625\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-626\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-627\">1</span></span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-102\">d_i < d_{k - 1}</script>.</p><p>However, from those <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-628\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-629\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-630\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-631\" style=\"vertical-align: -0.4em;\">i</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-632\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-633\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-634\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mrow MJXp-script\" id=\"MJXp-Span-635\" style=\"vertical-align: -0.4em;\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-636\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-637\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-638\">1</span></span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-103\">d_i = d_{k - 1}</script>, we can freely take any subset of the required size, as this will not affect the total sum. So let's maintain the interval <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-639\"><span class=\"MJXp-mo\" id=\"MJXp-Span-640\" style=\"margin-left: 0em; margin-right: 0em;\">[</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-641\">l</span><span class=\"MJXp-mo\" id=\"MJXp-Span-642\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-643\">r</span><span class=\"MJXp-mo\" id=\"MJXp-Span-644\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-104\">[l, r)</script>, where <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-645\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-646\">l</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-105\">l</script> is the minimum index for which <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-647\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-648\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-649\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-650\" style=\"vertical-align: -0.4em;\">l</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-651\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-652\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-653\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mrow MJXp-script\" id=\"MJXp-Span-654\" style=\"vertical-align: -0.4em;\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-655\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-656\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-657\">1</span></span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-106\">d_l \\le d_{k - 1}</script>, and <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-658\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-659\">r</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-107\">r</script> is the minimum index for which <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-660\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-661\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-662\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-663\" style=\"vertical-align: -0.4em;\">r</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-664\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">&lt;</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-665\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-666\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mrow MJXp-script\" id=\"MJXp-Span-667\" style=\"vertical-align: -0.4em;\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-668\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-669\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-670\">1</span></span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-108\">d_r < d_{k - 1}</script>. Both <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-671\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-672\">l</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-109\">l</script> and <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-673\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-674\">r</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-110\">r</script> can be maintained on the fly while we iterate through <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-675\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-676\">k</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-111\">k</script>.</p><p>In this case, all <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-677\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-678\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-679\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-680\" style=\"vertical-align: -0.4em;\">i</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-681\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-682\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-683\" style=\"margin-right: 0.05em;\">d</span><span class=\"MJXp-mrow MJXp-script\" id=\"MJXp-Span-684\" style=\"vertical-align: -0.4em;\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-685\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-686\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-687\">1</span></span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-112\">d_i = d_{k - 1}</script> will lie within the interval <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-688\"><span class=\"MJXp-mo\" id=\"MJXp-Span-689\" style=\"margin-left: 0em; margin-right: 0em;\">[</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-690\">l</span><span class=\"MJXp-mo\" id=\"MJXp-Span-691\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-692\">r</span><span class=\"MJXp-mo\" id=\"MJXp-Span-693\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-113\">[l, r)</script>. Thus, we need to choose exactly <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-694\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-695\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-696\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-697\">l</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-114\">k - l</script> elements from the segment of length <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-698\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-699\">r</span><span class=\"MJXp-mo\" id=\"MJXp-Span-700\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-701\">l</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-115\">r - l</script>, so there are exactly <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-702\"><span class=\"MJXp-mrow\" id=\"MJXp-Span-703\"><span class=\"MJXp-TeXmathchoice\" id=\"MJXp-Span-704\"><span class=\"MJXp-mstyle\" id=\"MJXp-Span-705\"><span class=\"MJXp-mrow\" id=\"MJXp-Span-706\"><span class=\"MJXp-mo\" id=\"MJXp-Span-707\" style=\"margin-left: 0em; margin-right: 0em; vertical-align: -0.083em;\"><span class=\"MJXp-right MJXp-scale10\" style=\"font-size: 1.333em; margin-left: 0.07em;\">(</span></span></span></span></span><span class=\"MJXp-mfrac\" id=\"MJXp-Span-708\"><span class=\"MJXp-box MJXp-script\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-709\">r</span><span class=\"MJXp-mo\" id=\"MJXp-Span-710\">−</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-711\">l</span></span><span class=\"MJXp-box\" style=\"margin-top: -0.7em;\"><span class=\"MJXp-denom\"><span><span class=\"MJXp-rule\" style=\"height: 1em;\"></span></span><span><span class=\"MJXp-box MJXp-script\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-712\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-713\">−</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-714\">l</span></span></span></span></span></span><span class=\"MJXp-TeXmathchoice\" id=\"MJXp-Span-715\"><span class=\"MJXp-mstyle\" id=\"MJXp-Span-716\"><span class=\"MJXp-mrow\" id=\"MJXp-Span-717\"><span class=\"MJXp-mo\" id=\"MJXp-Span-718\" style=\"margin-left: 0em; margin-right: 0em; vertical-align: -0.083em;\"><span class=\"MJXp-right MJXp-scale10\" style=\"font-size: 1.333em; margin-left: 0.07em;\">)</span></span></span></span></span></span></span></span><script type=\"math/tex\" id=\"MathJax-Element-116\">\\binom{r - l}{k - l}</script> ways to choose.</p><p>As a result, we will iterate through <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-719\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-720\">k</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-117\">k</script> and carefully combine the answers for all <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-721\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-722\">k</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-118\">k</script>, not forgetting the case <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-723\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-724\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-725\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mn\" id=\"MJXp-Span-726\">0</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-119\">k = 0</script>. For quick calculation of binomial coefficients, we will precompute all factorials and inverse factorials modulo the given module.</p><p>The complexity of the solution is <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-727\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-728\">O</span><span class=\"MJXp-mo\" id=\"MJXp-Span-729\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-730\">n</span><span class=\"MJXp-mi\" id=\"MJXp-Span-731\">log</span><span class=\"MJXp-mo\" id=\"MJXp-Span-732\" style=\"margin-left: 0em; margin-right: 0em;\"></span><span class=\"MJXp-mrow\" id=\"MJXp-Span-733\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-734\">n</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-735\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-120\">O(n \\log{n})</script> time and <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-736\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-737\">O</span><span class=\"MJXp-mo\" id=\"MJXp-Span-738\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-739\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-740\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><script type=\"math/tex\" id=\"MathJax-Element-121\">O(n)</script> space.</p></div></div></div></div>"
}