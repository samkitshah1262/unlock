{
  "contestId": 2106,
  "index": "G2",
  "title": "Baudelaire (hard version)",
  "timeLimit": "3 seconds",
  "memoryLimit": "256 megabytes",
  "rating": 2500,
  "tags": [
    "binary search",
    "dfs and similar",
    "divide and conquer",
    "implementation",
    "interactive",
    "trees"
  ],
  "statementHtml": "<p><span class=\"tex-font-style-bf\">This is the Hard Version of the problem. The only difference between the two versions is that in the Hard Version the tree may be of any shape.</span></p>\n<p><span class=\"tex-font-style-it\">This problem is interactive.</span></p>\n<p>Baudelaire is very rich, so he bought a tree of size <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-1\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-2\">n</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" style=\"\"></span><script type=\"math/tex\" id=\"MathJax-Element-1\">n</script>, rooted at some arbitrary node. Additionally, every node has a value of <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-3\"><span class=\"MJXp-mn\" id=\"MJXp-Span-4\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-2-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-2\">1</script> or <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-5\"><span class=\"MJXp-mo\" id=\"MJXp-Span-6\" style=\"margin-left: 0em; margin-right: 0.111em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-7\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-3-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-3\">-1</script>. </p>\n<p>Cow the Nerd saw the tree and fell in love with it. However, computer science doesn't pay him enough, so he can't afford to buy it. Baudelaire decided to play a game with Cow the Nerd, and if he won, he would gift him the tree.</p>\n<p>Cow the Nerd does not know which node is the root, and he doesn't know the values of the nodes either. However, he can ask Baudelaire queries of two types:</p>\n<p>Cow the Nerd wins if he guesses the value of every node correctly (the values of the final tree, <span class=\"tex-font-style-bf\">after</span> performing the queries) within <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-101\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-102\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-103\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-mn\" id=\"MJXp-Span-104\">200</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-23-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-23\">n + 200</script> total queries. Can you help him win?</p>",
  "inputSpecHtml": "<p>The first line of the input contains a single integer <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-105\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-106\">t</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-24-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-24\">t</script> <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-107\"><span class=\"MJXp-mo\" id=\"MJXp-Span-108\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-109\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-110\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-111\">t</span><span class=\"MJXp-mo\" id=\"MJXp-Span-112\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mn\" id=\"MJXp-Span-113\">100</span><span class=\"MJXp-mo\" id=\"MJXp-Span-114\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-25-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-25\">(1 \\le t \\le 100)</script>, the number of test cases.</p><p>The first line of each test case contains a single integer <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-115\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-116\">n</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-26-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-26\">n</script> <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-117\"><span class=\"MJXp-mo\" id=\"MJXp-Span-118\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-119\">2</span><span class=\"MJXp-mo\" id=\"MJXp-Span-120\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-121\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-122\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-123\"><span class=\"MJXp-mn\" id=\"MJXp-Span-124\" style=\"margin-right: 0.05em;\">10</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-125\" style=\"vertical-align: 0.5em;\">3</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-126\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-27-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-27\">(2 \\le n \\le 10^3)</script>, the size of the tree.</p><p>Each of the next <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-127\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-128\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-129\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-130\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-28-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-28\">n-1</script> lines contains two integers <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-131\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-132\">u</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-29-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-29\">u</script> and <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-133\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-134\">v</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-30-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-30\">v</script> <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-135\"><span class=\"MJXp-mo\" id=\"MJXp-Span-136\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-137\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-138\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-139\">u</span><span class=\"MJXp-mo\" id=\"MJXp-Span-140\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-141\">v</span><span class=\"MJXp-mo\" id=\"MJXp-Span-142\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-143\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-144\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-145\">u</span><span class=\"MJXp-mo\" id=\"MJXp-Span-146\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≠</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-147\">v</span><span class=\"MJXp-mo\" id=\"MJXp-Span-148\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-31-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-31\">(1 \\le u, v \\le n, u \\neq v)</script>, denoting an edge between nodes <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-149\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-150\">u</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-32-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-32\">u</script> and <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-151\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-152\">v</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-33-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-33\">v</script> in the tree.</p><p>It is guaranteed that the sum of <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-153\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-154\">n</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-34-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-34\">n</script> over all test cases does not exceed <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-155\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-156\"><span class=\"MJXp-mn\" id=\"MJXp-Span-157\" style=\"margin-right: 0.05em;\">10</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-158\" style=\"vertical-align: 0.5em;\">3</span></span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-35-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-35\">10^3</script> and that each graph provided is a valid tree.</p></div><div><div class=\"section-title\">Interaction</div><p>To ask a query of type <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-159\"><span class=\"MJXp-mn\" id=\"MJXp-Span-160\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-36-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-36\">1</script>, output a line in the following format (without the quotes):</p><ul> <li> <span class=\"tex-font-style-tt\">\"? 1 k <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-161\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-162\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-163\" style=\"margin-right: 0.05em;\">u</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-164\" style=\"vertical-align: -0.4em;\">1</span></span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-37-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-37\">u_1</script> <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-165\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-166\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-167\" style=\"margin-right: 0.05em;\">u</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-168\" style=\"vertical-align: -0.4em;\">2</span></span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-38-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-38\">u_2</script> <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-169\"><span class=\"MJXp-mo\" id=\"MJXp-Span-170\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span><span class=\"MJXp-mo\" id=\"MJXp-Span-171\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span><span class=\"MJXp-mo\" id=\"MJXp-Span-172\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-39-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-39\">...</script> <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-173\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-174\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-175\" style=\"margin-right: 0.05em;\">u</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-176\" style=\"vertical-align: -0.4em;\">k</span></span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-40-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-40\">u_k</script>\"</span>, (<span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-177\"><span class=\"MJXp-mn\" id=\"MJXp-Span-178\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-179\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-180\">k</span><span class=\"MJXp-mo\" id=\"MJXp-Span-181\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-182\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-183\" style=\"margin-right: 0.05em;\">u</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-184\" style=\"vertical-align: -0.4em;\">i</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-185\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-186\">n</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-41-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-41\">1 \\le k, u_i \\le n</script>) </li></ul><p>The jury will return a single integer, <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-187\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-188\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-189\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-190\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-191\" style=\"margin-right: 0.05em;\">u</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-192\" style=\"vertical-align: -0.4em;\">1</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-193\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-194\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-195\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-196\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-197\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-198\" style=\"margin-right: 0.05em;\">u</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-199\" style=\"vertical-align: -0.4em;\">2</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-200\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-201\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-mo\" id=\"MJXp-Span-202\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span><span class=\"MJXp-mo\" id=\"MJXp-Span-203\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span><span class=\"MJXp-mo\" id=\"MJXp-Span-204\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span><span class=\"MJXp-mo\" id=\"MJXp-Span-205\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-206\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-207\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-208\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-209\" style=\"margin-right: 0.05em;\">u</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-210\" style=\"vertical-align: -0.4em;\">k</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-211\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-42-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-42\">f(u_1) + f(u_2) + ... + f(u_k)</script>.</p><p>To ask a query of type <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-212\"><span class=\"MJXp-mn\" id=\"MJXp-Span-213\">2</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-43-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-43\">2</script>, output a line in the following format:</p><ul> <li> <span class=\"tex-font-style-tt\">\"? 2 <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-214\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-215\">u</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-44-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-44\">u</script>\"</span> (<span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-216\"><span class=\"MJXp-mn\" id=\"MJXp-Span-217\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-218\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-219\">u</span><span class=\"MJXp-mo\" id=\"MJXp-Span-220\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-221\">n</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-45-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-45\">1 \\le u \\le n</script>) </li></ul><p>The jury will toggle the value of node <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-222\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-223\">u</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-46-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-46\">u</script>: if its value is <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-224\"><span class=\"MJXp-mn\" id=\"MJXp-Span-225\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-47-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-47\">1</script>, it will become <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-226\"><span class=\"MJXp-mo\" id=\"MJXp-Span-227\" style=\"margin-left: 0em; margin-right: 0.111em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-228\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-48-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-48\">-1</script> and vice versa.</p><p>When you have found the answer, output a single line in the following format:</p><ul> <li> <span class=\"tex-font-style-tt\">\"! <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-229\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-230\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-231\" style=\"margin-right: 0.05em;\">v</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-232\" style=\"vertical-align: -0.4em;\">1</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-233\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-234\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-235\" style=\"margin-right: 0.05em;\">v</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-236\" style=\"vertical-align: -0.4em;\">2</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-237\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mo\" id=\"MJXp-Span-238\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span><span class=\"MJXp-mo\" id=\"MJXp-Span-239\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span><span class=\"MJXp-mo\" id=\"MJXp-Span-240\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span><span class=\"MJXp-mo\" id=\"MJXp-Span-241\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-242\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-243\" style=\"margin-right: 0.05em;\">v</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-244\" style=\"vertical-align: -0.4em;\">n</span></span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-49-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-49\">v_1, v_2, ..., v_n</script>\"</span> (<span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-245\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-246\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-247\" style=\"margin-right: 0.05em;\">v</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-248\" style=\"vertical-align: -0.4em;\">i</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-249\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mn\" id=\"MJXp-Span-250\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-50-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-50\">v_i = 1</script> or <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-251\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-252\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-253\" style=\"margin-right: 0.05em;\">v</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-254\" style=\"vertical-align: -0.4em;\">i</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-255\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mo\" id=\"MJXp-Span-256\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-257\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-51-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-51\">v_i = -1</script>, and <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-258\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-259\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-260\" style=\"margin-right: 0.05em;\">v</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-261\" style=\"vertical-align: -0.4em;\">i</span></span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-52-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-52\">v_i</script> is the value of node <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-262\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-263\">i</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-53-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-53\">i</script> after performing the queries) </li></ul><p>After that, proceed to process the next test case or terminate the program if it was the last test case. Printing the answer does not count as a query.</p><p>The interactor is <span class=\"tex-font-style-bf\">not</span> adaptive, meaning that the values of the tree are known before the participant asks the queries.</p><p>If your program makes more than <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-264\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-265\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-266\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-mn\" id=\"MJXp-Span-267\">200</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-54-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-54\">n + 200</script> queries, your program should immediately terminate to receive the verdict <span class=\"tex-font-style-tt\">Wrong Answer</span>. Otherwise, you can get an arbitrary verdict because your solution will continue to read from a closed stream.</p><p>After printing a query do not forget to output the end of line and flush the output. Otherwise, you may get the <span class=\"tex-font-style-tt\">Idleness Limit Exceeded</span> verdict. To do this, use:</p><ul> <li> <span class=\"tex-font-style-tt\">fflush(stdout)</span> or <span class=\"tex-font-style-tt\">cout.flush()</span> in C++ </li><li> <span class=\"tex-font-style-tt\">System.out.flush()</span> in Java; </li><li> <span class=\"tex-font-style-tt\">flush(output)</span> in Pascal; </li><li> <span class=\"tex-font-style-tt\">stdout.flush()</span> in Python; </li><li> see the documentation for other languages. </li></ul><p><span class=\"tex-font-style-bf\">Hacks</span></p><p>For hacks, use the following format.</p><p>The first line should contain a single integer <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-268\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-269\">t</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-55-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-55\">t</script> <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-270\"><span class=\"MJXp-mo\" id=\"MJXp-Span-271\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-272\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-273\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-274\">t</span><span class=\"MJXp-mo\" id=\"MJXp-Span-275\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mn\" id=\"MJXp-Span-276\">100</span><span class=\"MJXp-mo\" id=\"MJXp-Span-277\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-56-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-56\">(1 \\le t \\le 100)</script>&nbsp;— the number of test cases.</p><p>The first line of each test case must contain exactly two integers <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-278\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-279\">n</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-57-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-57\">n</script> and <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-280\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-281\">r</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-282\">o</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-283\">o</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-284\">t</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-58-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-58\">root</script> <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-285\"><span class=\"MJXp-mo\" id=\"MJXp-Span-286\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-287\">2</span><span class=\"MJXp-mo\" id=\"MJXp-Span-288\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-289\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-290\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-291\"><span class=\"MJXp-mn\" id=\"MJXp-Span-292\" style=\"margin-right: 0.05em;\">10</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-293\" style=\"vertical-align: 0.5em;\">3</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-294\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mn\" id=\"MJXp-Span-295\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-296\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-297\">r</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-298\">o</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-299\">o</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-300\">t</span><span class=\"MJXp-mo\" id=\"MJXp-Span-301\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-302\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-303\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-59-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-59\">(2 \\le n \\le 10^3, 1 \\le root \\le n)</script>&nbsp;— the size of the tree and the root of the tree.</p><p>The second line of each test case must contain exactly <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-304\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-305\">n</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-60-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-60\">n</script> integers <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-306\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-307\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-308\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-309\" style=\"vertical-align: -0.4em;\">1</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-310\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-311\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-312\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-313\" style=\"vertical-align: -0.4em;\">2</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-314\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mo\" id=\"MJXp-Span-315\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span><span class=\"MJXp-mo\" id=\"MJXp-Span-316\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span><span class=\"MJXp-mo\" id=\"MJXp-Span-317\" style=\"margin-left: 0em; margin-right: 0.222em;\">.</span><span class=\"MJXp-mo\" id=\"MJXp-Span-318\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-319\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-320\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-321\" style=\"vertical-align: -0.4em;\">n</span></span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-61-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-61\">a_1, a_2, ..., a_n</script> <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-322\"><span class=\"MJXp-mo\" id=\"MJXp-Span-323\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mrow\" id=\"MJXp-Span-324\"><span class=\"MJXp-mo\" id=\"MJXp-Span-325\" style=\"margin-left: 0.167em; margin-right: 0.167em;\">|</span></span><span class=\"MJXp-msubsup\" id=\"MJXp-Span-326\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-327\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-328\" style=\"vertical-align: -0.4em;\">i</span></span><span class=\"MJXp-mrow\" id=\"MJXp-Span-329\"><span class=\"MJXp-mo\" id=\"MJXp-Span-330\" style=\"margin-left: 0.167em; margin-right: 0.167em;\">|</span></span><span class=\"MJXp-mo\" id=\"MJXp-Span-331\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mn\" id=\"MJXp-Span-332\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-333\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-62-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-62\">(|a_i| = 1)</script>&nbsp;— where <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-334\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-335\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-336\" style=\"margin-right: 0.05em;\">a</span><span class=\"MJXp-mi MJXp-italic MJXp-script\" id=\"MJXp-Span-337\" style=\"vertical-align: -0.4em;\">i</span></span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-63-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-63\">a_i</script> is the value of node <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-338\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-339\">i</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-64-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-64\">i</script>.</p><p>Each of the following <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-340\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-341\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-342\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-343\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-65-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-65\">n-1</script> lines must contain exactly two integers <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-344\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-345\">u</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-66-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-66\">u</script> and <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-346\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-347\">v</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-67-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-67\">v</script> <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-348\"><span class=\"MJXp-mo\" id=\"MJXp-Span-349\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-350\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-351\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-352\">u</span><span class=\"MJXp-mo\" id=\"MJXp-Span-353\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-354\">v</span><span class=\"MJXp-mo\" id=\"MJXp-Span-355\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">≤</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-356\">n</span><span class=\"MJXp-mo\" id=\"MJXp-Span-357\" style=\"margin-left: 0em; margin-right: 0em;\">)</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-68-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-68\">(1 \\le u, v \\le n)</script>&nbsp;— denoting an edge of the tree between nodes <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-358\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-359\">u</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-69-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-69\">u</script> and <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-360\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-361\">v</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-70-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-70\">v</script>.</p><p>The sum of <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-362\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-363\">n</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-71-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-71\">n</script> over all test cases must not exceed <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-364\"><span class=\"MJXp-msubsup\" id=\"MJXp-Span-365\"><span class=\"MJXp-mn\" id=\"MJXp-Span-366\" style=\"margin-right: 0.05em;\">10</span><span class=\"MJXp-mn MJXp-script\" id=\"MJXp-Span-367\" style=\"vertical-align: 0.5em;\">3</span></span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-72-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-72\">10^3</script> and every graph provided must be a valid tree.</p>",
  "outputSpecHtml": "",
  "noteHtml": "<p>In the first example, the root of the tree is node <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-368\"><span class=\"MJXp-mn\" id=\"MJXp-Span-369\">4</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-73-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-73\">4</script> and the values are: <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-370\"><span class=\"MJXp-mo\" id=\"MJXp-Span-371\" style=\"margin-left: 0em; margin-right: 0em;\">[</span><span class=\"MJXp-mo\" id=\"MJXp-Span-372\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-373\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-374\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mo\" id=\"MJXp-Span-375\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-376\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-377\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mo\" id=\"MJXp-Span-378\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-379\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-380\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mn\" id=\"MJXp-Span-381\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-382\" style=\"margin-left: 0em; margin-right: 0em;\">]</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-74-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-74\">[-1, -1, -1, 1]</script> (the <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-383\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-384\">i</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-75-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-75\">i</script>-th value is the value of node <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-385\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-386\">i</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-76-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-76\">i</script>).</p><p>Initially, <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-387\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-388\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-389\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-390\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-391\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-392\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mn\" id=\"MJXp-Span-393\">0</span><span class=\"MJXp-mo\" id=\"MJXp-Span-394\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-395\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-396\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-397\">2</span><span class=\"MJXp-mo\" id=\"MJXp-Span-398\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-399\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mn\" id=\"MJXp-Span-400\">0</span><span class=\"MJXp-mo\" id=\"MJXp-Span-401\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-402\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-403\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-404\">3</span><span class=\"MJXp-mo\" id=\"MJXp-Span-405\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-406\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mo\" id=\"MJXp-Span-407\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-408\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-409\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-410\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-411\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-412\">4</span><span class=\"MJXp-mo\" id=\"MJXp-Span-413\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-414\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mn\" id=\"MJXp-Span-415\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-77-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-77\">f(1) = 0, f(2) = 0, f(3) = -1, f(4) = 1</script>. Therefore, the answer to our first query is <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-416\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-417\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-418\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-419\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-420\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-421\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-422\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-423\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-424\">2</span><span class=\"MJXp-mo\" id=\"MJXp-Span-425\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-426\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-427\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-428\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-429\">4</span><span class=\"MJXp-mo\" id=\"MJXp-Span-430\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-431\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mn\" id=\"MJXp-Span-432\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-78-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-78\">f(1) + f(2) + f(4) = 1</script>, and of the second query is <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-433\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-434\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-435\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-436\">3</span><span class=\"MJXp-mo\" id=\"MJXp-Span-437\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-438\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-439\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-440\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-441\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-442\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-443\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mo\" id=\"MJXp-Span-444\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-445\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-79-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-79\">f(3) + f(1) = -1</script>.</p><p>After toggling the value of node <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-446\"><span class=\"MJXp-mn\" id=\"MJXp-Span-447\">4</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-80-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-80\">4</script>, the values are <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-448\"><span class=\"MJXp-mo\" id=\"MJXp-Span-449\" style=\"margin-left: 0em; margin-right: 0em;\">[</span><span class=\"MJXp-mo\" id=\"MJXp-Span-450\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-451\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-452\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mo\" id=\"MJXp-Span-453\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-454\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-455\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mo\" id=\"MJXp-Span-456\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-457\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-458\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mo\" id=\"MJXp-Span-459\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-460\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-461\" style=\"margin-left: 0em; margin-right: 0em;\">]</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-81-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-81\">[-1, -1, -1, -1]</script>. In addition, <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-462\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-463\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-464\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-465\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-466\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-467\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mo\" id=\"MJXp-Span-468\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-469\">2</span><span class=\"MJXp-mo\" id=\"MJXp-Span-470\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-471\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-472\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-473\">2</span><span class=\"MJXp-mo\" id=\"MJXp-Span-474\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-475\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mo\" id=\"MJXp-Span-476\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-477\">2</span><span class=\"MJXp-mo\" id=\"MJXp-Span-478\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-479\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-480\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-481\">3</span><span class=\"MJXp-mo\" id=\"MJXp-Span-482\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-483\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mo\" id=\"MJXp-Span-484\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-485\">3</span><span class=\"MJXp-mo\" id=\"MJXp-Span-486\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-487\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-488\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-489\">4</span><span class=\"MJXp-mo\" id=\"MJXp-Span-490\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-491\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mo\" id=\"MJXp-Span-492\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-493\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-82-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-82\">f(1) = -2, f(2) = -2, f(3) = -3, f(4) = -1</script>. Therefore, <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-494\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-495\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-496\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-497\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-498\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-499\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-500\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-501\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-502\">2</span><span class=\"MJXp-mo\" id=\"MJXp-Span-503\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-504\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-505\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-506\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-507\">4</span><span class=\"MJXp-mo\" id=\"MJXp-Span-508\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-509\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mo\" id=\"MJXp-Span-510\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-511\">5</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-83-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-83\">f(1) + f(2) + f(4) = -5</script> and <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-512\"><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-513\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-514\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-515\">3</span><span class=\"MJXp-mo\" id=\"MJXp-Span-516\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-517\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">+</span><span class=\"MJXp-mi MJXp-italic\" id=\"MJXp-Span-518\">f</span><span class=\"MJXp-mo\" id=\"MJXp-Span-519\" style=\"margin-left: 0em; margin-right: 0em;\">(</span><span class=\"MJXp-mn\" id=\"MJXp-Span-520\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-521\" style=\"margin-left: 0em; margin-right: 0em;\">)</span><span class=\"MJXp-mo\" id=\"MJXp-Span-522\" style=\"margin-left: 0.333em; margin-right: 0.333em;\">=</span><span class=\"MJXp-mo\" id=\"MJXp-Span-523\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-524\">5</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-84-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-84\">f(3) + f(1) = -5</script>.</p><p>We answer that the final values of the nodes are <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-525\"><span class=\"MJXp-mo\" id=\"MJXp-Span-526\" style=\"margin-left: 0em; margin-right: 0em;\">[</span><span class=\"MJXp-mo\" id=\"MJXp-Span-527\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-528\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-529\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mo\" id=\"MJXp-Span-530\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-531\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-532\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mo\" id=\"MJXp-Span-533\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-534\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-535\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mo\" id=\"MJXp-Span-536\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-537\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-538\" style=\"margin-left: 0em; margin-right: 0em;\">]</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-85-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-85\">[-1, -1, -1, -1]</script>, which is correct. Notice that we report the values of the nodes <span class=\"tex-font-style-bf\">after</span> the changes, and not before.</p><p>In the second example, the root of the tree is <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-539\"><span class=\"MJXp-mn\" id=\"MJXp-Span-540\">2</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-86-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-86\">2</script> and the initial values are <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-541\"><span class=\"MJXp-mo\" id=\"MJXp-Span-542\" style=\"margin-left: 0em; margin-right: 0em;\">[</span><span class=\"MJXp-mn\" id=\"MJXp-Span-543\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-544\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mn\" id=\"MJXp-Span-545\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-546\" style=\"margin-left: 0em; margin-right: 0em;\">]</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-87-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-87\">[1, 1]</script>.</p><p>In the last example, the root of the tree is <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-547\"><span class=\"MJXp-mn\" id=\"MJXp-Span-548\">1</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-88-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-88\">1</script> and the initial values are <span class=\"MathJax_Preview\" style=\"color: inherit;\"><span class=\"MJXp-math\" id=\"MJXp-Span-549\"><span class=\"MJXp-mo\" id=\"MJXp-Span-550\" style=\"margin-left: 0em; margin-right: 0em;\">[</span><span class=\"MJXp-mo\" id=\"MJXp-Span-551\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-552\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-553\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mn\" id=\"MJXp-Span-554\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-555\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mn\" id=\"MJXp-Span-556\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-557\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mn\" id=\"MJXp-Span-558\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-559\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mn\" id=\"MJXp-Span-560\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-561\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mn\" id=\"MJXp-Span-562\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-563\" style=\"margin-left: 0em; margin-right: 0.222em;\">,</span><span class=\"MJXp-mo\" id=\"MJXp-Span-564\" style=\"margin-left: 0.267em; margin-right: 0.267em;\">−</span><span class=\"MJXp-mn\" id=\"MJXp-Span-565\">1</span><span class=\"MJXp-mo\" id=\"MJXp-Span-566\" style=\"margin-left: 0em; margin-right: 0em;\">]</span></span></span><span class=\"MathJax MathJax_Processing\" id=\"MathJax-Element-89-Frame\" tabindex=\"0\"></span><script type=\"math/tex\" id=\"MathJax-Element-89\">[-1, 1, 1, 1, 1, 1, -1]</script>.</p><p><span class=\"tex-font-style-bf\">Note that this is just an explanation of how the queries work, and it is not supposed to use any specific strategy to solve the problem.</span></p>",
  "samples": [
    {
      "input": "3\n4\n1 4\n4 2\n2 3\n\n1\n\n-1\n\n\n-5\n\n-5\n\n2\n1 2\n\n2\n\n7\n1 2\n2 7\n7 3\n7 4\n7 5\n7 6\n\n-1",
      "output": "? 1 3 1 2 4\n\n? 1 2 3 1\n\n? 2 4\n? 1 3 1 2 4\n\n? 1 2 3 1\n\n! -1 -1 -1 -1\n\n\n? 1 1 1\n\n! 1 1\n\n\n\n\n\n\n? 1 1 1\n\n! -1 1 1 1 1 1 -1"
    }
  ],
  "images": [],
  "url": "https://codeforces.com/contest/2106/problem/G2"
}