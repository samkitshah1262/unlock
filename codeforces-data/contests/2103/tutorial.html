<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tutorial</title>
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      line-height: 1.6;
      color: #333;
      background: #fafafa;
    }
    .ttypography {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    h3 {
      color: #1a1a1a;
      border-bottom: 2px solid #eee;
      padding-bottom: 10px;
    }
    h3 a {
      color: #0066cc;
      text-decoration: none;
    }
    h3 a:hover {
      text-decoration: underline;
    }
    .spoiler {
      margin: 15px 0;
      border: 1px solid #ddd;
      border-radius: 6px;
      overflow: hidden;
    }
    .spoiler-title {
      display: block;
      padding: 12px 15px;
      background: #f0f0f0;
      cursor: pointer;
      font-weight: 600;
      user-select: none;
      border-bottom: 1px solid #ddd;
    }
    .spoiler-title:hover {
      background: #e8e8e8;
    }
    .spoiler-title::before {
      content: '▶ ';
      font-size: 0.8em;
      transition: transform 0.2s;
      display: inline-block;
    }
    .spoiler.open .spoiler-title::before {
      content: '▼ ';
    }
    .spoiler-content {
      padding: 15px;
      background: #fff;
      display: none;
    }
    .spoiler.open .spoiler-content {
      display: block;
    }
    pre, code {
      background: #f5f5f5;
      font-family: 'Monaco', 'Menlo', 'Consolas', monospace;
      font-size: 0.85em;
    }
    pre {
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
    }
    code {
      padding: 2px 5px;
      border-radius: 3px;
    }
    p {
      margin: 10px 0;
    }
    .MathJax {
      font-size: 1.1em;
    }
  </style>
</head>
<body>
  <h1>Editorial</h1>
  <p><a href="https://codeforces.com/blog/entry/142149" target="_blank">View on Codeforces →</a></p>
  
  <div class="ttypography"><p><a href="https://codeforces.com/contest/2103/problem/A" title="Codeforces Round 1019 (Div. 2)">2103A - Common Multiple</a> </p><p>Author: <a class="rated-user user-red" href="https://codeforces.com/profile/NemanjaSo2005" title="Grandmaster NemanjaSo2005">NemanjaSo2005</a></p> <div class="spoiler"><b class="spoiler-title">Hint 0</b><div class="spoiler-content" style="display: block;"><p>We need to solve the same problem <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-2">t</span></span></span><script type="math/tex" id="MathJax-Element-1">t</script> times. We will make use of <a href="https://www.geeksforgeeks.org/loops-programming/">loops</a> to do so. From now we will focus on solving a problem for one test case, but remember that all of the following will be in a loop. </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 1</b><div class="spoiler-content" style="display: block;"><p>So the array <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-3"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-4">x</span></span></span><script type="math/tex" id="MathJax-Element-2">x</script> is beautiful if there exists an array of distinct elements <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-5"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-6">y</span></span></span><script type="math/tex" id="MathJax-Element-3">y</script> such that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-7"><span class="MJXp-msubsup" id="MJXp-Span-8"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-9" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-10" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-11" style="margin-left: 0.267em; margin-right: 0.267em;">⋅</span><span class="MJXp-msubsup" id="MJXp-Span-12"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-13" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-14" style="vertical-align: -0.4em;">i</span></span></span></span><script type="math/tex" id="MathJax-Element-4">x_i \cdot y_i</script> is the same for all <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-15"><span class="MJXp-mn" id="MJXp-Span-16">1</span><span class="MJXp-mo" id="MJXp-Span-17" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-18">i</span><span class="MJXp-mo" id="MJXp-Span-19" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-20">n</span></span></span><script type="math/tex" id="MathJax-Element-5">1 \le i \le n</script>. We will try to make the condition into something more understandable. Suppose that the common product is some constant <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-21"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-22">C</span></span></span><script type="math/tex" id="MathJax-Element-6">C</script>. How can you express each <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-23"><span class="MJXp-msubsup" id="MJXp-Span-24"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-25" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-26" style="vertical-align: -0.4em;">i</span></span></span></span><script type="math/tex" id="MathJax-Element-7">y_i</script> in terms of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-27"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-28">C</span></span></span><script type="math/tex" id="MathJax-Element-8">C</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-29"><span class="MJXp-msubsup" id="MJXp-Span-30"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-31" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-32" style="vertical-align: -0.4em;">i</span></span></span></span><script type="math/tex" id="MathJax-Element-9">x_i</script>? </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 2</b><div class="spoiler-content" style="display: block;"><p>It can be expressed as <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-33"><span class="MJXp-msubsup" id="MJXp-Span-34"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-35" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-36" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-37" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mfrac" id="MJXp-Span-38" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-39">C</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-msubsup" id="MJXp-Span-40"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-41" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-42" style="vertical-align: -0.4em;">i</span></span></span></span></span></span></span></span></span><script type="math/tex" id="MathJax-Element-10">y_i = \frac{C}{x_i}</script>. If all <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-43"><span class="MJXp-msubsup" id="MJXp-Span-44"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-45" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-46" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-47" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mfrac" id="MJXp-Span-48" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-49">C</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-msubsup" id="MJXp-Span-50"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-51" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-52" style="vertical-align: -0.4em;">i</span></span></span></span></span></span></span></span></span><script type="math/tex" id="MathJax-Element-11">y_i = \frac{C}{x_i}</script> must be all different, what does that force upon the array <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-53"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-54">x</span></span></span><script type="math/tex" id="MathJax-Element-12">x</script> for it to be beautiful? </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 3</b><div class="spoiler-content" style="display: block;"><p>Let <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-55"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-56">i</span></span></span><script type="math/tex" id="MathJax-Element-13">i</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-57"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-58">j</span></span></span><script type="math/tex" id="MathJax-Element-14">j</script> be indices of two arbitrary elements of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-59"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-60">x</span></span></span><script type="math/tex" id="MathJax-Element-15">x</script>. Then for array <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-61"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-62">x</span></span></span><script type="math/tex" id="MathJax-Element-16">x</script> to be beautiful the following needs to hold:</p><p><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-63"><span class="MJXp-msubsup" id="MJXp-Span-64"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-65" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-66" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-67" style="margin-left: 0.333em; margin-right: 0.333em;">≠</span><span class="MJXp-msubsup" id="MJXp-Span-68"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-69" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-70" style="vertical-align: -0.4em;">j</span></span></span></span><script type="math/tex" id="MathJax-Element-17">y_i \neq y_j</script></p><p><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-71"><span class="MJXp-mfrac" id="MJXp-Span-72" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-73">C</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-msubsup" id="MJXp-Span-74"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-75" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-76" style="vertical-align: -0.4em;">i</span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-77" style="margin-left: 0.333em; margin-right: 0.333em;">≠</span><span class="MJXp-mfrac" id="MJXp-Span-78" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-79">C</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-msubsup" id="MJXp-Span-80"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-81" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-82" style="vertical-align: -0.4em;">j</span></span></span></span></span></span></span></span></span><script type="math/tex" id="MathJax-Element-18">\frac{C}{x_i} \neq \frac{C}{x_j}</script>, divide both sides by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-83"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-84">C</span></span></span><script type="math/tex" id="MathJax-Element-19">C</script></p><p><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-85"><span class="MJXp-mfrac" id="MJXp-Span-86" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mn" id="MJXp-Span-87">1</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-msubsup" id="MJXp-Span-88"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-89" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-90" style="vertical-align: -0.4em;">i</span></span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-91" style="margin-left: 0.333em; margin-right: 0.333em;">≠</span><span class="MJXp-mfrac" id="MJXp-Span-92" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mn" id="MJXp-Span-93">1</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-msubsup" id="MJXp-Span-94"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-95" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-96" style="vertical-align: -0.4em;">j</span></span></span></span></span></span></span></span></span><script type="math/tex" id="MathJax-Element-20">\frac{1}{x_i} \neq \frac{1}{x_j}</script>, as neither <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-97"><span class="MJXp-msubsup" id="MJXp-Span-98"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-99" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-100" style="vertical-align: -0.4em;">i</span></span></span></span><script type="math/tex" id="MathJax-Element-21">x_i</script> nor <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-101"><span class="MJXp-msubsup" id="MJXp-Span-102"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-103" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-104" style="vertical-align: -0.4em;">j</span></span></span></span><script type="math/tex" id="MathJax-Element-22">x_j</script> are <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-105"><span class="MJXp-mn" id="MJXp-Span-106">0</span></span></span><script type="math/tex" id="MathJax-Element-23">0</script>, multiply by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-107"><span class="MJXp-msubsup" id="MJXp-Span-108"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-109" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-110" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-111" style="margin-left: 0.267em; margin-right: 0.267em;">⋅</span><span class="MJXp-msubsup" id="MJXp-Span-112"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-113" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-114" style="vertical-align: -0.4em;">j</span></span></span></span><script type="math/tex" id="MathJax-Element-24">x_i \cdot x_j</script></p><p><span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-115"><span class="MJXp-msubsup" id="MJXp-Span-116"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-117" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-118" style="vertical-align: -0.4em;">j</span></span><span class="MJXp-mo" id="MJXp-Span-119" style="margin-left: 0.333em; margin-right: 0.333em;">≠</span><span class="MJXp-msubsup" id="MJXp-Span-120"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-121" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-122" style="vertical-align: -0.4em;">i</span></span></span></span><script type="math/tex" id="MathJax-Element-25">x_j \neq x_i</script></p><p>Therefore, all values of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-123"><span class="MJXp-msubsup" id="MJXp-Span-124"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-125" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-126" style="vertical-align: -0.4em;">i</span></span></span></span><script type="math/tex" id="MathJax-Element-26">x_i</script> must be distinct. But is it enough just that all values of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-127"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-128">x</span></span></span><script type="math/tex" id="MathJax-Element-27">x</script> are distinct?</p><p>It is, and here is how to easily construct the integer array <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-129"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-130">y</span></span></span><script type="math/tex" id="MathJax-Element-28">y</script> that satisfies the constraints. Let <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-131"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-132">P</span></span></span><script type="math/tex" id="MathJax-Element-29">P</script> be the product of all elements of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-133"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-134">x</span></span></span><script type="math/tex" id="MathJax-Element-30">x</script>. Then make <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-135"><span class="MJXp-msubsup" id="MJXp-Span-136"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-137" style="margin-right: 0.05em;">y</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-138" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-139" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mfrac" id="MJXp-Span-140" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-141">P</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-msubsup" id="MJXp-Span-142"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-143" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-144" style="vertical-align: -0.4em;">i</span></span></span></span></span></span></span></span></span><script type="math/tex" id="MathJax-Element-31">y_i = \frac{P}{x_i}</script> for all <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-145"><span class="MJXp-mn" id="MJXp-Span-146">1</span><span class="MJXp-mo" id="MJXp-Span-147" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-148">i</span><span class="MJXp-mo" id="MJXp-Span-149" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-150">n</span></span></span><script type="math/tex" id="MathJax-Element-32">1 \le i \le n</script>. As all values of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-151"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-152">x</span></span></span><script type="math/tex" id="MathJax-Element-33">x</script> are distinct and nonzero, it is guaranteed that all values of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-153"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-154">y</span></span></span><script type="math/tex" id="MathJax-Element-34">y</script> will also be distinct.</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 4</b><div class="spoiler-content" style="display: block;"><p>The solution is the number of distinct values in <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-155"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-156">a</span></span></span><script type="math/tex" id="MathJax-Element-35">a</script>. How can we count that? </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 5</b><div class="spoiler-content" style="display: block;"><p>We can only count the first appearance of each value. So the problem is now how to check if the appearance of value at some position <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-157"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-158">i</span></span></span><script type="math/tex" id="MathJax-Element-36">i</script> is indeed the first appearance of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-159"><span class="MJXp-msubsup" id="MJXp-Span-160"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-161" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-162" style="vertical-align: -0.4em;">i</span></span></span></span><script type="math/tex" id="MathJax-Element-37">a_i</script>. </p></div></div> <div class="spoiler"><b class="spoiler-title">Solution</b><div class="spoiler-content" style="display: block;"><p>Read the hints.</p><p>The answer to the problem is the number of distinct elements in the array. There are many ways to find it; we will present one of the easiest. </p><p>We will count only the first appearances of every value. </p><p>That means that if array is for example [ <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-163"><span class="MJXp-mn" id="MJXp-Span-164">1</span></span></span><script type="math/tex" id="MathJax-Element-38">1</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-165"><span class="MJXp-mn" id="MJXp-Span-166">3</span></span></span><script type="math/tex" id="MathJax-Element-39">3</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-167"><span class="MJXp-mn" id="MJXp-Span-168">1</span></span></span><script type="math/tex" id="MathJax-Element-40">1</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-169"><span class="MJXp-mn" id="MJXp-Span-170">5</span></span></span><script type="math/tex" id="MathJax-Element-41">5</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-171"><span class="MJXp-mn" id="MJXp-Span-172">3</span></span></span><script type="math/tex" id="MathJax-Element-42">3</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-173"><span class="MJXp-mn" id="MJXp-Span-174">1</span></span></span><script type="math/tex" id="MathJax-Element-43">1</script>], we will only count <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-175"><span class="MJXp-mn" id="MJXp-Span-176">1</span></span></span><script type="math/tex" id="MathJax-Element-44">1</script> at position <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-177"><span class="MJXp-mn" id="MJXp-Span-178">1</span></span></span><script type="math/tex" id="MathJax-Element-45">1</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-179"><span class="MJXp-mn" id="MJXp-Span-180">3</span></span></span><script type="math/tex" id="MathJax-Element-46">3</script> at position <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-181"><span class="MJXp-mn" id="MJXp-Span-182">2</span></span></span><script type="math/tex" id="MathJax-Element-47">2</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-183"><span class="MJXp-mn" id="MJXp-Span-184">5</span></span></span><script type="math/tex" id="MathJax-Element-48">5</script> at position <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-185"><span class="MJXp-mn" id="MJXp-Span-186">4</span></span></span><script type="math/tex" id="MathJax-Element-49">4</script>. We will not count values <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-187"><span class="MJXp-mn" id="MJXp-Span-188">1</span></span></span><script type="math/tex" id="MathJax-Element-50">1</script> at positions <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-189"><span class="MJXp-mn" id="MJXp-Span-190">3</span></span></span><script type="math/tex" id="MathJax-Element-51">3</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-191"><span class="MJXp-mn" id="MJXp-Span-192">6</span></span></span><script type="math/tex" id="MathJax-Element-52">6</script>, nor the value <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-193"><span class="MJXp-mn" id="MJXp-Span-194">3</span></span></span><script type="math/tex" id="MathJax-Element-53">3</script> at position <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-195"><span class="MJXp-mn" id="MJXp-Span-196">5</span></span></span><script type="math/tex" id="MathJax-Element-54">5</script>, as they are not the first appearance of those values.</p><p>We will iterate through every element in <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-197"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-198">x</span></span></span><script type="math/tex" id="MathJax-Element-55">x</script> and for an element <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-199"><span class="MJXp-msubsup" id="MJXp-Span-200"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-201" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-202" style="vertical-align: -0.4em;">i</span></span></span></span><script type="math/tex" id="MathJax-Element-56">x_i</script>, check if there exists some <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-203"><span class="MJXp-msubsup" id="MJXp-Span-204"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-205" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-206" style="vertical-align: -0.4em;">j</span></span></span></span><script type="math/tex" id="MathJax-Element-57">x_j</script> <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-207"><span class="MJXp-mo" id="MJXp-Span-208" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-209">j</span><span class="MJXp-mo" id="MJXp-Span-210" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-211">i</span><span class="MJXp-mo" id="MJXp-Span-212" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-58">(j \lt i)</script> such that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-213"><span class="MJXp-msubsup" id="MJXp-Span-214"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-215" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-216" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-217" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-218"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-219" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-220" style="vertical-align: -0.4em;">j</span></span></span></span><script type="math/tex" id="MathJax-Element-59">x_i = x_j</script>. If we can't find such <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-221"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-222">j</span></span></span><script type="math/tex" id="MathJax-Element-60">j</script>, then that means it's the first appearance of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-223"><span class="MJXp-msubsup" id="MJXp-Span-224"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-225" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-226" style="vertical-align: -0.4em;">i</span></span></span></span><script type="math/tex" id="MathJax-Element-61">x_i</script>. </p><p>We can do it by having one loop iterate over <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-227"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-228">i</span></span></span><script type="math/tex" id="MathJax-Element-62">i</script>, and it will have a variable that says whether it is the first appearance, originally set to true. Then we will iterate in another loop over all indices <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-229"><span class="MJXp-mn" id="MJXp-Span-230">1</span><span class="MJXp-mo" id="MJXp-Span-231" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-232">j</span><span class="MJXp-mo" id="MJXp-Span-233" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-234">i</span></span></span><script type="math/tex" id="MathJax-Element-63">1 \le j < i</script> and if at any point <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-235"><span class="MJXp-msubsup" id="MJXp-Span-236"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-237" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-238" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-239" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-240"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-241" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-242" style="vertical-align: -0.4em;">j</span></span></span></span><script type="math/tex" id="MathJax-Element-64">a_i = a_j</script>, we will set the value of the variable to false. Then we increase the count of different values if the variable is still true.</p><p>Memory complexity is <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-243"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-244">O</span><span class="MJXp-mo" id="MJXp-Span-245" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-246">n</span><span class="MJXp-mo" id="MJXp-Span-247" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-65">O(n)</script>. Time complexity is <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-248"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-249">O</span><span class="MJXp-mo" id="MJXp-Span-250" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-251"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-252" style="margin-right: 0.05em;">n</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-253" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-254" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-66">O(n^2)</script> per testcase giving us a total time complexity of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-255"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-256">O</span><span class="MJXp-mo" id="MJXp-Span-257" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-258">t</span><span class="MJXp-msubsup" id="MJXp-Span-259"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-260" style="margin-right: 0.05em;">n</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-261" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-262" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-67">O(tn^2)</script>.</p></div></div> <div class="spoiler"><b class="spoiler-title">Implementation (c++)</b><div class="spoiler-content" style="display: block;"><pre><code class="prettyprint prettyprinted" style=""><span class="com">#include</span><span class="pun">&lt;</span><span class="pln">bits</span><span class="pun">/</span><span class="pln">stdc</span><span class="pun">++.</span><span class="pln">h</span><span class="pun">&gt;</span><span class="pln">
</span><span class="com">#define</span><span class="pln"> ll </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln">
</span><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> maxn</span><span class="pun">=</span><span class="lit">105</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">,</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">maxn</span><span class="pun">];</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> main</span><span class="pun">(){</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> T</span><span class="pun">;</span><span class="pln">
   cin</span><span class="pun">&gt;&gt;</span><span class="pln">T</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">T</span><span class="pun">--){</span><span class="pln">
      cin</span><span class="pun">&gt;&gt;</span><span class="pln">n</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
         cin</span><span class="pun">&gt;&gt;</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
      </span><span class="kwd">int</span><span class="pln"> ans</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span><span class="pln">
         </span><span class="kwd">int</span><span class="pln"> </span><span class="kwd">add</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
         </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">j</span><span class="pun">&lt;</span><span class="pln">i</span><span class="pun">;</span><span class="pln">j</span><span class="pun">++)</span><span class="pln">
            </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]==</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])</span><span class="pln">
               </span><span class="kwd">add</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
         ans</span><span class="pun">+=</span><span class="kwd">add</span><span class="pun">;</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
      cout</span><span class="pun">&lt;&lt;</span><span class="pln">ans</span><span class="pun">&lt;&lt;</span><span class="str">"\n"</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span></code></pre></div></div> <div class="spoiler"><b class="spoiler-title">Implementation (python)</b><div class="spoiler-content" style="display: block;"><pre><code class="prettyprint prettyprinted" style=""><span class="pln">t </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="pln">input</span><span class="pun">())</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">t</span><span class="pun">):</span><span class="pln">
    n </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="pln">input</span><span class="pun">())</span><span class="pln">
    a </span><span class="pun">=</span><span class="pln"> input</span><span class="pun">().</span><span class="pln">split</span><span class="pun">(</span><span class="str">" "</span><span class="pun">)</span><span class="pln">
    count </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> n</span><span class="pun">):</span><span class="pln">
        </span><span class="kwd">add</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> j </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> i</span><span class="pun">):</span><span class="pln">
            </span><span class="kwd">if</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]==</span><span class="pln">a</span><span class="pun">[</span><span class="pln">j</span><span class="pun">]:</span><span class="pln">
                </span><span class="kwd">add</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
        count </span><span class="pun">+=</span><span class="pln"> </span><span class="kwd">add</span><span class="pln">
    </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">count</span><span class="pun">)</span><span class="pln">
</span></code></pre></div></div> <div class="spoiler"><b class="spoiler-title">Bonus</b><div class="spoiler-content" style="display: block;"><p>Come up with more ways to count the number of different elements in the array.</p></div></div><p><a href="https://codeforces.com/contest/2103/problem/B" title="Codeforces Round 1019 (Div. 2)">2103B - Binary Typewriter</a></p><p>Author: <a class="rated-user user-blue" href="https://codeforces.com/profile/Blagoj" title="Expert Blagoj">Blagoj</a></p> <div class="spoiler"><b class="spoiler-title">Hint 1</b><div class="spoiler-content" style="display: block;"><p>Given the string <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-263"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-264">s</span></span></span><script type="math/tex" id="MathJax-Element-68">s</script>, how do we calculate the answer? </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 2</b><div class="spoiler-content" style="display: block;"><p>We know that we need to type a character (apply operation <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-265"><span class="MJXp-mn" id="MJXp-Span-266">1</span></span></span><script type="math/tex" id="MathJax-Element-69">1</script> exactly <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-267"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-268">n</span></span></span><script type="math/tex" id="MathJax-Element-70">n</script> times). How many switches do we do? </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 3</b><div class="spoiler-content" style="display: block;"><p>If the string <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-269"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-270">s</span></span></span><script type="math/tex" id="MathJax-Element-71">s</script> starts with a 1, we need to do a switch immediately. From that point on, we only switch if the current number in the string changes. We can assume that we start with a 0, as the other case can be handled by appending 0 to the start and subtracting <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-271"><span class="MJXp-mn" id="MJXp-Span-272">1</span></span></span><script type="math/tex" id="MathJax-Element-72">1</script> from the final answer. </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 4</b><div class="spoiler-content" style="display: block;"><p>We will assume that we only want to make the answer smaller, as for keeping the answer, we can pick any interval of size <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-273"><span class="MJXp-mn" id="MJXp-Span-274">1</span></span></span><script type="math/tex" id="MathJax-Element-73">1</script>. How does reversing some interval [ <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-275"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-276">l</span></span></span><script type="math/tex" id="MathJax-Element-74">l</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-277"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-278">r</span></span></span><script type="math/tex" id="MathJax-Element-75">r</script> ] change the answer? </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 5</b><div class="spoiler-content" style="display: block;"><p>Notice that all switches before <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-279"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-280">l</span><span class="MJXp-mo" id="MJXp-Span-281" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-282">1</span></span></span><script type="math/tex" id="MathJax-Element-76">l-1</script>, after <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-283"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-284">r</span><span class="MJXp-mo" id="MJXp-Span-285" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-286">1</span></span></span><script type="math/tex" id="MathJax-Element-77">r+1</script> and inbetween <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-287"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-288">l</span></span></span><script type="math/tex" id="MathJax-Element-78">l</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-289"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-290">r</span></span></span><script type="math/tex" id="MathJax-Element-79">r</script> will stay. So we only care about the values of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-291"><span class="MJXp-msubsup" id="MJXp-Span-292"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-293" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-294" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-295">l</span><span class="MJXp-mo" id="MJXp-Span-296">−</span><span class="MJXp-mn" id="MJXp-Span-297">1</span></span></span></span></span><script type="math/tex" id="MathJax-Element-80">s_{l-1}</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-298"><span class="MJXp-msubsup" id="MJXp-Span-299"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-300" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-301" style="vertical-align: -0.4em;">l</span></span></span></span><script type="math/tex" id="MathJax-Element-81">s_l</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-302"><span class="MJXp-msubsup" id="MJXp-Span-303"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-304" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-305" style="vertical-align: -0.4em;">r</span></span></span></span><script type="math/tex" id="MathJax-Element-82">s_r</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-306"><span class="MJXp-msubsup" id="MJXp-Span-307"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-308" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-309" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-310">r</span><span class="MJXp-mo" id="MJXp-Span-311">+</span><span class="MJXp-mn" id="MJXp-Span-312">1</span></span></span></span></span><script type="math/tex" id="MathJax-Element-83">s_{r+1}</script>. </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 6</b><div class="spoiler-content" style="display: block;"><p>Notice that if <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-313"><span class="MJXp-msubsup" id="MJXp-Span-314"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-315" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-316" style="vertical-align: -0.4em;">l</span></span><span class="MJXp-mo" id="MJXp-Span-317" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-318"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-319" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-320" style="vertical-align: -0.4em;">r</span></span></span></span><script type="math/tex" id="MathJax-Element-84">s_l = s_r</script>, then the swap does not change the number of changes. So we can assume that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-321"><span class="MJXp-msubsup" id="MJXp-Span-322"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-323" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-324" style="vertical-align: -0.4em;">l</span></span><span class="MJXp-mo" id="MJXp-Span-325" style="margin-left: 0.333em; margin-right: 0.333em;">≠</span><span class="MJXp-msubsup" id="MJXp-Span-326"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-327" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-328" style="vertical-align: -0.4em;">r</span></span></span></span><script type="math/tex" id="MathJax-Element-85">s_l \neq s_r</script> in the optimal swap. Now, to evaluate how good the swap is, we can observe the following:</p> <ul>   <li>if <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-329"><span class="MJXp-msubsup" id="MJXp-Span-330"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-331" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-332" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-333">l</span><span class="MJXp-mo" id="MJXp-Span-334">−</span><span class="MJXp-mn" id="MJXp-Span-335">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-336" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-337"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-338" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-339" style="vertical-align: -0.4em;">l</span></span></span></span><script type="math/tex" id="MathJax-Element-86">s_{l-1} = s_l</script>, the number of changes increases by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-340"><span class="MJXp-mn" id="MJXp-Span-341">1</span></span></span><script type="math/tex" id="MathJax-Element-87">1</script>, otherwise it decreases by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-342"><span class="MJXp-mn" id="MJXp-Span-343">1</span></span></span><script type="math/tex" id="MathJax-Element-88">1</script>.</li>   <li>if <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-344"><span class="MJXp-msubsup" id="MJXp-Span-345"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-346" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-347" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-348">r</span></span></span><span class="MJXp-mo" id="MJXp-Span-349" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-msubsup" id="MJXp-Span-350"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-351" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-352" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-353">r</span><span class="MJXp-mo" id="MJXp-Span-354">+</span><span class="MJXp-mn" id="MJXp-Span-355">1</span></span></span></span></span><script type="math/tex" id="MathJax-Element-89">s_{r} = s_{r+1}</script>, the number of changes increases by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-356"><span class="MJXp-mn" id="MJXp-Span-357">1</span></span></span><script type="math/tex" id="MathJax-Element-90">1</script>, otherwise it decreases by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-358"><span class="MJXp-mn" id="MJXp-Span-359">1</span></span></span><script type="math/tex" id="MathJax-Element-91">1</script>.</li> </ul><p>Those 2 changes stack. </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 7</b><div class="spoiler-content" style="display: block;"><p>From the previous hint, we can conclude that we can decrease the number of changes by at most <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-360"><span class="MJXp-mn" id="MJXp-Span-361">2</span></span></span><script type="math/tex" id="MathJax-Element-92">2</script>. For us to be able to decrease the number of changes by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-362"><span class="MJXp-mn" id="MJXp-Span-363">2</span></span></span><script type="math/tex" id="MathJax-Element-93">2</script>, it shall hold that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-364"><span class="MJXp-msubsup" id="MJXp-Span-365"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-366" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-367" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-368">l</span><span class="MJXp-mo" id="MJXp-Span-369">−</span><span class="MJXp-mn" id="MJXp-Span-370">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-371" style="margin-left: 0.333em; margin-right: 0.333em;">≠</span><span class="MJXp-msubsup" id="MJXp-Span-372"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-373" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-374" style="vertical-align: -0.4em;">l</span></span></span></span><script type="math/tex" id="MathJax-Element-94">s_{l-1} \neq s_l</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-375"><span class="MJXp-msubsup" id="MJXp-Span-376"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-377" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-378" style="vertical-align: -0.4em;">r</span></span><span class="MJXp-mo" id="MJXp-Span-379" style="margin-left: 0.333em; margin-right: 0.333em;">≠</span><span class="MJXp-msubsup" id="MJXp-Span-380"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-381" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-382" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-383">r</span><span class="MJXp-mo" id="MJXp-Span-384">+</span><span class="MJXp-mn" id="MJXp-Span-385">1</span></span></span></span></span><script type="math/tex" id="MathJax-Element-95">s_r \neq s_{r+1}</script>. </p><p>If we want to decrease the number of changes by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-386"><span class="MJXp-mn" id="MJXp-Span-387">1</span></span></span><script type="math/tex" id="MathJax-Element-96">1</script>, it is enough to make <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-388"><span class="MJXp-msubsup" id="MJXp-Span-389"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-390" style="margin-right: 0.05em;">s</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-391" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-392">l</span><span class="MJXp-mo" id="MJXp-Span-393">−</span><span class="MJXp-mn" id="MJXp-Span-394">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-395" style="margin-left: 0.333em; margin-right: 0.333em;">≠</span><span class="MJXp-msubsup" id="MJXp-Span-396"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-397" style="margin-right: 0.05em;">s</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-398" style="vertical-align: -0.4em;">l</span></span></span></span><script type="math/tex" id="MathJax-Element-97">s_{l-1} \neq s_l</script> and to make <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-399"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-400">r</span><span class="MJXp-mo" id="MJXp-Span-401" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-402">n</span></span></span><script type="math/tex" id="MathJax-Element-98">r=n</script>. </p><p>If we cannot do either of the previous two, the number of changes cannot be decreased.</p></div></div> <div class="spoiler"><b class="spoiler-title">Solution</b><div class="spoiler-content" style="display: block;"><p>Read the hints.</p><p>As said in the hints, we will assume that string <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-403"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-404">s</span></span></span><script type="math/tex" id="MathJax-Element-99">s</script> starts with a 0. Now we need to check if it is possible to pick indices <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-405"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-406">l</span></span></span><script type="math/tex" id="MathJax-Element-100">l</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-407"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-408">r</span></span></span><script type="math/tex" id="MathJax-Element-101">r</script> such that the number of changes after the swap decreases by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-409"><span class="MJXp-mn" id="MJXp-Span-410">2</span></span></span><script type="math/tex" id="MathJax-Element-102">2</script>. With some casework, we can see that it is always possible if the original number of changes is at least <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-411"><span class="MJXp-mn" id="MJXp-Span-412">3</span></span></span><script type="math/tex" id="MathJax-Element-103">3</script>. If the original number of changes is <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-413"><span class="MJXp-mn" id="MJXp-Span-414">2</span></span></span><script type="math/tex" id="MathJax-Element-104">2</script>, we cannot decrease it by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-415"><span class="MJXp-mn" id="MJXp-Span-416">2</span></span></span><script type="math/tex" id="MathJax-Element-105">2</script>, but we can decrease it by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-417"><span class="MJXp-mn" id="MJXp-Span-418">1</span></span></span><script type="math/tex" id="MathJax-Element-106">1</script>. If the original number of changes is <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-419"><span class="MJXp-mn" id="MJXp-Span-420">0</span></span></span><script type="math/tex" id="MathJax-Element-107">0</script> or <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-421"><span class="MJXp-mn" id="MJXp-Span-422">1</span></span></span><script type="math/tex" id="MathJax-Element-108">1</script>, we cannot decrease it.</p><p>Counting the number of changes can be done in a single pass of a loop. The time and memory complexities are <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-423"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-424">O</span><span class="MJXp-mo" id="MJXp-Span-425" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-426">n</span><span class="MJXp-mo" id="MJXp-Span-427" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-109">O(n)</script> per testcase.</p></div></div> <div class="spoiler"><b class="spoiler-title">Implementation (c++)</b><div class="spoiler-content" style="display: block;"><pre><code class="prettyprint prettyprinted" style=""><span class="com">#include</span><span class="pun">&lt;</span><span class="pln">bits</span><span class="pun">/</span><span class="pln">stdc</span><span class="pun">++.</span><span class="pln">h</span><span class="pun">&gt;</span><span class="pln">
</span><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> testCase</span><span class="pun">()</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
    </span><span class="kwd">string</span><span class="pln"> s</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">;</span><span class="pln">
    cin </span><span class="pun">&gt;&gt;</span><span class="pln"> n</span><span class="pun">;</span><span class="pln">
    cin </span><span class="pun">&gt;&gt;</span><span class="pln"> s</span><span class="pun">;</span><span class="pln">
    s</span><span class="pun">=</span><span class="str">"0"</span><span class="pun">+</span><span class="pln">s</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> ans </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">,</span><span class="pln"> cur </span><span class="pun">=</span><span class="pln"> s</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;=</span><span class="pln"> n</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">int</span><span class="pln"> dig </span><span class="pun">=</span><span class="pln"> s</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">cur </span><span class="pun">!=</span><span class="pln"> dig</span><span class="pun">)</span><span class="pln"> 
           ans</span><span class="pun">++;</span><span class="pln">
        cur </span><span class="pun">=</span><span class="pln"> dig</span><span class="pun">;</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">ans</span><span class="pun">&gt;=</span><span class="lit">3</span><span class="pun">)</span><span class="pln">
     cout</span><span class="pun">&lt;&lt;</span><span class="pln"> ans</span><span class="pun">-</span><span class="lit">2</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> n</span><span class="pun">&lt;&lt;</span><span class="str">"\n"</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">else</span><span class="pln"> </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">ans</span><span class="pun">==</span><span class="lit">2</span><span class="pun">)</span><span class="pln">
     cout</span><span class="pun">&lt;&lt;</span><span class="pln"> ans</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> n</span><span class="pun">&lt;&lt;</span><span class="str">"\n"</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">else</span><span class="pln"> 
     cout</span><span class="pun">&lt;&lt;</span><span class="pln">ans</span><span class="pun">+</span><span class="pln">n</span><span class="pun">&lt;&lt;</span><span class="str">"\n"</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> main</span><span class="pun">(){</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> t</span><span class="pun">;</span><span class="pln">
    cin</span><span class="pun">&gt;&gt;</span><span class="pln">t</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">t</span><span class="pun">--)</span><span class="pln">
        testCase</span><span class="pun">();</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div> <div class="spoiler"><b class="spoiler-title">Implementation (python)</b><div class="spoiler-content" style="display: block;"><pre><code class="prettyprint prettyprinted" style=""><span class="kwd">for</span><span class="pln"> _ </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">(</span><span class="pln">input</span><span class="pun">())):</span><span class="pln">
    n </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="pln">input</span><span class="pun">())</span><span class="pln">
    a </span><span class="pun">=</span><span class="pln"> input</span><span class="pun">().</span><span class="pln">strip</span><span class="pun">()</span><span class="pln">
    cnt </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">n</span><span class="pun">-</span><span class="lit">1</span><span class="pun">):</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">!=</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]:</span><span class="pln"> cnt </span><span class="pun">+=</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
    </span><span class="kwd">if</span><span class="pln"> cnt </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">n </span><span class="pun">+</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"1"</span><span class="pun">))</span><span class="pln">
    </span><span class="kwd">elif</span><span class="pln"> cnt </span><span class="pun">==</span><span class="pln"> </span><span class="lit">1</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">n </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">
    </span><span class="kwd">else</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">print</span><span class="pun">(</span><span class="pln">n</span><span class="pun">+</span><span class="pln">cnt</span><span class="pun">-</span><span class="lit">1</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="str">"0"</span><span class="pln"> </span><span class="kwd">and</span><span class="pln"> cnt </span><span class="pun">&gt;</span><span class="pln"> </span><span class="lit">2</span><span class="pun">))</span></code></pre></div></div> <div class="spoiler"><b class="spoiler-title">Bonus</b><div class="spoiler-content" style="display: block;"><p>Solve the problem if you were given <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-428"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-429">n</span></span></span><script type="math/tex" id="MathJax-Element-110">n</script> strings. You will swap their order however you want and then concatenate them all into one string <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-430"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-431">s</span></span></span><script type="math/tex" id="MathJax-Element-111">s</script>. What is the minimal number of operations needed to write <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-432"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-433">s</span></span></span><script type="math/tex" id="MathJax-Element-112">s</script> obtained in that way?</p></div></div><p><a href="https://codeforces.com/contest/2103/problem/C" title="Codeforces Round 1019 (Div. 2)">2103C - Median Splits</a></p><p>Author: <a class="rated-user user-red" href="https://codeforces.com/profile/NemanjaSo2005" title="Grandmaster NemanjaSo2005">NemanjaSo2005</a></p> <div class="spoiler"><b class="spoiler-title">Hint 1</b><div class="spoiler-content" style="display: block;"><p>We split our array into <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-434"><span class="MJXp-mn" id="MJXp-Span-435">3</span></span></span><script type="math/tex" id="MathJax-Element-113">3</script> subarrays, take their medians, and the final median needs to be <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-436"><span class="MJXp-mo" id="MJXp-Span-437" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-438">k</span></span></span><script type="math/tex" id="MathJax-Element-114">\le k</script>. That means that the median of at least <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-439"><span class="MJXp-mn" id="MJXp-Span-440">2</span></span></span><script type="math/tex" id="MathJax-Element-115">2</script> of those subarrays needs to be <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-441"><span class="MJXp-mo" id="MJXp-Span-442" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-443">k</span></span></span><script type="math/tex" id="MathJax-Element-116">\le k</script>. </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 2</b><div class="spoiler-content" style="display: block;"><p>For a given array <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-444"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-445">x</span></span></span><script type="math/tex" id="MathJax-Element-117">x</script> of length <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-446"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-447">m</span></span></span><script type="math/tex" id="MathJax-Element-118">m</script>, what is the condition that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-448"><span class="MJXp-mi" id="MJXp-Span-449">med</span><span class="MJXp-mo" id="MJXp-Span-450" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mo" id="MJXp-Span-451" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-452"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-453" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-454" style="vertical-align: -0.4em;">1</span></span><span class="MJXp-mo" id="MJXp-Span-455" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-456"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-457" style="margin-right: 0.05em;">x</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-458" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-459" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-460" style="margin-left: 0em; margin-right: 0em;">…</span><span class="MJXp-mo" id="MJXp-Span-461" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-462"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-463" style="margin-right: 0.05em;">x</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-464" style="vertical-align: -0.4em;">m</span></span><span class="MJXp-mo" id="MJXp-Span-465" style="margin-left: 0em; margin-right: 0em;">)</span><span class="MJXp-mo" id="MJXp-Span-466" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-467">k</span></span></span><script type="math/tex" id="MathJax-Element-119">\operatorname{med}(x_1, x_2, \ldots, x_m) \le k</script>? </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 3</b><div class="spoiler-content" style="display: block;"><p>There need to be at least as many elements in <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-468"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-469">x</span></span></span><script type="math/tex" id="MathJax-Element-120">x</script> that are <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-470"><span class="MJXp-mo" id="MJXp-Span-471" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-472">k</span></span></span><script type="math/tex" id="MathJax-Element-121">\le k</script> as those that are <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-473"><span class="MJXp-mo" id="MJXp-Span-474" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-475">k</span></span></span><script type="math/tex" id="MathJax-Element-122">>k</script>. How can we simplify this?</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 4</b><div class="spoiler-content" style="display: block;"><p>We can replace all elements that are <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-476"><span class="MJXp-mo" id="MJXp-Span-477" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-478">k</span></span></span><script type="math/tex" id="MathJax-Element-123">\le k</script> with <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-479"><span class="MJXp-mn" id="MJXp-Span-480">1</span></span></span><script type="math/tex" id="MathJax-Element-124">1</script> and all elementsthat are <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-481"><span class="MJXp-mo" id="MJXp-Span-482" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-483">k</span></span></span><script type="math/tex" id="MathJax-Element-125">> k</script> with <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-484"><span class="MJXp-mo" id="MJXp-Span-485" style="margin-left: 0em; margin-right: 0.111em;">−</span><span class="MJXp-mn" id="MJXp-Span-486">1</span></span></span><script type="math/tex" id="MathJax-Element-126">-1</script>. Now the median of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-487"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-488">x</span></span></span><script type="math/tex" id="MathJax-Element-127">x</script> is <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-489"><span class="MJXp-mo" id="MJXp-Span-490" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-491">k</span></span></span><script type="math/tex" id="MathJax-Element-128">\le k</script> if and only if the sum of elements in <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-492"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-493">x</span></span></span><script type="math/tex" id="MathJax-Element-129">x</script> is non-negative. </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 5</b><div class="spoiler-content" style="display: block;"><p>Now that we replaced the elements of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-494"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-495">a</span></span></span><script type="math/tex" id="MathJax-Element-130">a</script>, the question is if it is possible to split it into <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-496"><span class="MJXp-mn" id="MJXp-Span-497">3</span></span></span><script type="math/tex" id="MathJax-Element-131">3</script> subarrays, of which at least <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-498"><span class="MJXp-mn" id="MJXp-Span-499">2</span></span></span><script type="math/tex" id="MathJax-Element-132">2</script> have a non-negative sum. There are <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-500"><span class="MJXp-mn" id="MJXp-Span-501">3</span></span></span><script type="math/tex" id="MathJax-Element-133">3</script> cases:</p> <ol>   <li>The first and second subarrays have non-negative sums.</li>   <li>The second and third subarrays have non-negative sums.</li>   <li>The first and third subarrays have non-negative sums.</li> </ol></div></div> <div class="spoiler"><b class="spoiler-title">Hint 6</b><div class="spoiler-content" style="display: block;"><p>Use prefix/suffix sums and maximums/ minimums to help you compute the answer in linear time.</p></div></div> <div class="spoiler"><b class="spoiler-title">Solution</b><div class="spoiler-content" style="display: block;"><p>Read the hints.</p><p>Cases <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-502"><span class="MJXp-mn" id="MJXp-Span-503">1</span></span></span><script type="math/tex" id="MathJax-Element-134">1</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-504"><span class="MJXp-mn" id="MJXp-Span-505">2</span></span></span><script type="math/tex" id="MathJax-Element-135">2</script> from hint 5 are symmetric, so we will only explain how to do case <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-506"><span class="MJXp-mn" id="MJXp-Span-507">1</span></span></span><script type="math/tex" id="MathJax-Element-136">1</script>. Compute the prefix sum of the array, let it be array <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-508"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-509">p</span></span></span><script type="math/tex" id="MathJax-Element-137">p</script>. The subarray [$l$, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-510"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-511">r</span></span></span><script type="math/tex" id="MathJax-Element-138">r</script>] has non-negative sum if <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-512"><span class="MJXp-msubsup" id="MJXp-Span-513"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-514" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-515" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-516">l</span><span class="MJXp-mo" id="MJXp-Span-517">−</span><span class="MJXp-mn" id="MJXp-Span-518">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-519" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-msubsup" id="MJXp-Span-520"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-521" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-522" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-523">r</span></span></span></span></span><script type="math/tex" id="MathJax-Element-139">p_{l-1} \le p_{r}</script>. For each index <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-524"><span class="MJXp-mn" id="MJXp-Span-525">2</span><span class="MJXp-mo" id="MJXp-Span-526" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-527">i</span><span class="MJXp-mo" id="MJXp-Span-528" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-529">n</span></span></span><script type="math/tex" id="MathJax-Element-140">2 \le i < n</script> compute value <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-530"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-531">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-532">s</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-533">p</span></span></span><script type="math/tex" id="MathJax-Element-141">msp</script> (max suffix prefix), such that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-534"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-535">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-536">s</span><span class="MJXp-msubsup" id="MJXp-Span-537"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-538" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-539" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-540" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-541">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-542">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-543">x</span><span class="MJXp-mo" id="MJXp-Span-544" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-msubsup" id="MJXp-Span-545"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-546" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-547" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-548" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-549"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-550" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-551" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-552">i</span><span class="MJXp-mo" id="MJXp-Span-553">+</span><span class="MJXp-mn" id="MJXp-Span-554">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-555" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-mo" id="MJXp-Span-556" style="margin-left: 0em; margin-right: 0em;">…</span><span class="MJXp-mo" id="MJXp-Span-557" style="margin-left: 0em; margin-right: 0.222em;">,</span><span class="MJXp-msubsup" id="MJXp-Span-558"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-559" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-560" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-561">n</span><span class="MJXp-mo" id="MJXp-Span-562">−</span><span class="MJXp-mn" id="MJXp-Span-563">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-564" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-142">msp_i = max(p_i, p_{i+1},\ldots, p_{n-1})</script>. Then iterate over index <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-565"><span class="MJXp-mn" id="MJXp-Span-566">1</span><span class="MJXp-mo" id="MJXp-Span-567" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-568">i</span><span class="MJXp-mo" id="MJXp-Span-569" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-570">n</span><span class="MJXp-mo" id="MJXp-Span-571" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-572">2</span></span></span><script type="math/tex" id="MathJax-Element-143">1 \le i \le n-2</script> that will be the end of the first subarray. If <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-573"><span class="MJXp-msubsup" id="MJXp-Span-574"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-575" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-576" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-577" style="margin-left: 0.333em; margin-right: 0.333em;">≥</span><span class="MJXp-mn" id="MJXp-Span-578">0</span></span></span><script type="math/tex" id="MathJax-Element-144">p_i \ge 0</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-579"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-580">m</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-581">s</span><span class="MJXp-msubsup" id="MJXp-Span-582"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-583" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-584" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-585">i</span><span class="MJXp-mo" id="MJXp-Span-586">+</span><span class="MJXp-mn" id="MJXp-Span-587">1</span></span></span><span class="MJXp-mo" id="MJXp-Span-588" style="margin-left: 0.333em; margin-right: 0.333em;">≥</span><span class="MJXp-msubsup" id="MJXp-Span-589"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-590" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-591" style="vertical-align: -0.4em;">i</span></span></span></span><script type="math/tex" id="MathJax-Element-145">msp_{i+1} \ge p_i</script>, then it will be possible to split the array such that the medians of the first and second subarrays are <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-592"><span class="MJXp-mo" id="MJXp-Span-593" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-594">k</span></span></span><script type="math/tex" id="MathJax-Element-146">\le k</script>.</p><p>Case <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-595"><span class="MJXp-mn" id="MJXp-Span-596">3</span></span></span><script type="math/tex" id="MathJax-Element-147">3</script> is even easier. Find positions <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-597"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-598">x</span></span></span><script type="math/tex" id="MathJax-Element-148">x</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-599"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-600">y</span></span></span><script type="math/tex" id="MathJax-Element-149">y</script> such that [ <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-601"><span class="MJXp-mn" id="MJXp-Span-602">1</span></span></span><script type="math/tex" id="MathJax-Element-150">1</script> , <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-603"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-604">x</span></span></span><script type="math/tex" id="MathJax-Element-151">x</script> ] is the shortest prefix with median <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-605"><span class="MJXp-mo" id="MJXp-Span-606" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-607">k</span></span></span><script type="math/tex" id="MathJax-Element-152"> \le k</script> and [ <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-608"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-609">y</span></span></span><script type="math/tex" id="MathJax-Element-153">y</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-610"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-611">n</span></span></span><script type="math/tex" id="MathJax-Element-154">n</script> ] is the shortest suffix with median <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-612"><span class="MJXp-mo" id="MJXp-Span-613" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-614">k</span></span></span><script type="math/tex" id="MathJax-Element-155">\le k</script>. Then the split into three subarrays such that the first and third have median <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-615"><span class="MJXp-mo" id="MJXp-Span-616" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-617">k</span></span></span><script type="math/tex" id="MathJax-Element-156">\le k</script> is possible if and only if [ <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-618"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-619">x</span><span class="MJXp-mo" id="MJXp-Span-620" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-621">1</span></span></span><script type="math/tex" id="MathJax-Element-157">x+1</script> , <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-622"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-623">y</span><span class="MJXp-mo" id="MJXp-Span-624" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mn" id="MJXp-Span-625">1</span></span></span><script type="math/tex" id="MathJax-Element-158">y-1</script> ] is a valid subarray, in other words, if <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-626"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-627">x</span><span class="MJXp-mo" id="MJXp-Span-628" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mn" id="MJXp-Span-629">2</span><span class="MJXp-mo" id="MJXp-Span-630" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-631">y</span></span></span><script type="math/tex" id="MathJax-Element-159">x + 2 \le y</script>.</p><p>As both cases can be checked with a few array passes, the time and memory complexities are <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-632"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-633">O</span><span class="MJXp-mo" id="MJXp-Span-634" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-635">n</span><span class="MJXp-mo" id="MJXp-Span-636" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-160">O(n)</script> per testcase.</p></div></div> <div class="spoiler"><b class="spoiler-title">Implementation (c++)</b><div class="spoiler-content" style="display: block;"><pre><code class="prettyprint prettyprinted" style=""><span class="com">#include</span><span class="pun">&lt;</span><span class="pln">bits</span><span class="pun">/</span><span class="pln">stdc</span><span class="pun">++.</span><span class="pln">h</span><span class="pun">&gt;</span><span class="pln">
</span><span class="com">#define</span><span class="pln"> ll </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln">
</span><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> maxn</span><span class="pun">=</span><span class="lit">2e5</span><span class="pun">+</span><span class="lit">5</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">,</span><span class="pln">k</span><span class="pun">,</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">maxn</span><span class="pun">],</span><span class="pln">suf</span><span class="pun">[</span><span class="pln">maxn</span><span class="pun">],</span><span class="pln">minsuf</span><span class="pun">[</span><span class="pln">maxn</span><span class="pun">];</span><span class="pln">
</span><span class="kwd">bool</span><span class="pln"> check_prefix_and_middle</span><span class="pun">(){</span><span class="pln">
   suf</span><span class="pun">[</span><span class="pln">n</span><span class="pun">]=</span><span class="pln">minsuf</span><span class="pun">[</span><span class="pln">n</span><span class="pun">]=</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">n</span><span class="pun">];</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="pln">n</span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&gt;=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">--){</span><span class="pln">
      suf</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]=</span><span class="pln">suf</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]+</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
      minsuf</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]=</span><span class="pln">min</span><span class="pun">(</span><span class="pln">minsuf</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">],</span><span class="pln">suf</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]);</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> s</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">+</span><span class="lit">2</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span><span class="pln">
      s</span><span class="pun">+=</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">s</span><span class="pun">&lt;</span><span class="lit">0</span><span class="pun">)</span><span class="pln">
         </span><span class="kwd">continue</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">suf</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]&gt;=</span><span class="pln">minsuf</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">2</span><span class="pun">])</span><span class="pln">
         </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> solve</span><span class="pun">(){</span><span class="pln">
   cin</span><span class="pun">&gt;&gt;</span><span class="pln">n</span><span class="pun">&gt;&gt;</span><span class="pln">k</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      cin</span><span class="pun">&gt;&gt;</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]&lt;=</span><span class="pln">k</span><span class="pun">)</span><span class="pln">
         arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">else</span><span class="pln">
         arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]=-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">

   </span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">=</span><span class="pln">n</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">b</span><span class="pun">=-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> s</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span><span class="pln">
      s</span><span class="pun">+=</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">s</span><span class="pun">&gt;=</span><span class="lit">0</span><span class="pun">){</span><span class="pln">
         a</span><span class="pun">=</span><span class="pln">i</span><span class="pun">;</span><span class="pln">
         </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   s</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&gt;=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">--){</span><span class="pln">
      s</span><span class="pun">+=</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">s</span><span class="pun">&gt;=</span><span class="lit">0</span><span class="pun">){</span><span class="pln">
         b</span><span class="pun">=</span><span class="pln">i</span><span class="pun">;</span><span class="pln">
         </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">a</span><span class="pun">+</span><span class="lit">1</span><span class="pun">&lt;</span><span class="pln">b</span><span class="pun">){</span><span class="pln">
      cout</span><span class="pun">&lt;&lt;</span><span class="str">"YES\n"</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">check_prefix_and_middle</span><span class="pun">()){</span><span class="pln">
      cout</span><span class="pun">&lt;&lt;</span><span class="str">"YES\n"</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;</span><span class="pln">n</span><span class="pun">-</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      swap</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">],</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">n</span><span class="pun">-</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]);</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">check_prefix_and_middle</span><span class="pun">()){</span><span class="pln">
      cout</span><span class="pun">&lt;&lt;</span><span class="str">"YES\n"</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   cout</span><span class="pun">&lt;&lt;</span><span class="str">"NO\n"</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> main</span><span class="pun">(){</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> t</span><span class="pun">;</span><span class="pln">
   cin</span><span class="pun">&gt;&gt;</span><span class="pln">t</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">t</span><span class="pun">--)</span><span class="pln">
      solve</span><span class="pun">();</span><span class="pln">
   </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div> <div class="spoiler"><b class="spoiler-title">Implementation (python)</b><div class="spoiler-content" style="display: block;"><pre><code class="prettyprint prettyprinted" style=""><span class="kwd">def</span><span class="pln"> check_prefix_and_middle</span><span class="pun">(</span><span class="pln">n</span><span class="pun">,</span><span class="pln"> arr</span><span class="pun">):</span><span class="pln">
    suf </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">n </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">
    minsuf </span><span class="pun">=</span><span class="pln"> </span><span class="pun">[</span><span class="lit">0</span><span class="pun">]</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">n </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln">
    suf</span><span class="pun">[</span><span class="pln">n</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> minsuf</span><span class="pun">[</span><span class="pln">n</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> arr</span><span class="pun">[</span><span class="pln">n </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln">

    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">n </span><span class="pun">-</span><span class="pln"> </span><span class="lit">2</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">):</span><span class="pln">
        suf</span><span class="pun">[</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> suf</span><span class="pun">[</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln">
        minsuf</span><span class="pun">[</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> min</span><span class="pun">(</span><span class="pln">minsuf</span><span class="pun">[</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">],</span><span class="pln"> suf</span><span class="pun">[</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">])</span><span class="pln">

    s </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">n </span><span class="pun">-</span><span class="pln"> </span><span class="lit">2</span><span class="pun">):</span><span class="pln">
        s </span><span class="pun">+=</span><span class="pln"> arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> s </span><span class="pun">&lt;</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span><span class="pln">
            </span><span class="kwd">continue</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> suf</span><span class="pun">[</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&gt;=</span><span class="pln"> minsuf</span><span class="pun">[</span><span class="pln">i </span><span class="pun">+</span><span class="pln"> </span><span class="lit">3</span><span class="pun">]:</span><span class="pln">
            </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">True</span><span class="pln">

    </span><span class="kwd">return</span><span class="pln"> </span><span class="kwd">False</span><span class="pln">

</span><span class="kwd">def</span><span class="pln"> solve</span><span class="pun">():</span><span class="pln">
    n</span><span class="pun">,</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> map</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">,</span><span class="pln"> input</span><span class="pun">().</span><span class="pln">split</span><span class="pun">())</span><span class="pln">
    arr </span><span class="pun">=</span><span class="pln"> list</span><span class="pun">(</span><span class="pln">map</span><span class="pun">(</span><span class="kwd">int</span><span class="pun">,</span><span class="pln"> input</span><span class="pun">().</span><span class="pln">split</span><span class="pun">()))</span><span class="pln">

    </span><span class="com"># Transform the array based on the value of k</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">n</span><span class="pun">):</span><span class="pln">
        arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> k </span><span class="kwd">else</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln">

    a</span><span class="pun">,</span><span class="pln"> b </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pln">
    s </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">

    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">n</span><span class="pun">):</span><span class="pln">
        s </span><span class="pun">+=</span><span class="pln"> arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> s </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span><span class="pln">
            a </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
            </span><span class="kwd">break</span><span class="pln">

    s </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">n </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">,</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">):</span><span class="pln">
        s </span><span class="pun">+=</span><span class="pln"> arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln">
        </span><span class="kwd">if</span><span class="pln"> s </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">:</span><span class="pln">
            b </span><span class="pun">=</span><span class="pln"> i </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pln">
            </span><span class="kwd">break</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> a </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pln"> </span><span class="pun">&lt;</span><span class="pln"> b</span><span class="pun">:</span><span class="pln">
        </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"YES"</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> check_prefix_and_middle</span><span class="pun">(</span><span class="pln">n</span><span class="pun">,</span><span class="pln"> arr</span><span class="pun">):</span><span class="pln">
        </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"YES"</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln">

    arr</span><span class="pun">.</span><span class="pln">reverse</span><span class="pun">()</span><span class="pln">

    </span><span class="kwd">if</span><span class="pln"> check_prefix_and_middle</span><span class="pun">(</span><span class="pln">n</span><span class="pun">,</span><span class="pln"> arr</span><span class="pun">):</span><span class="pln">
        </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"YES"</span><span class="pun">)</span><span class="pln">
        </span><span class="kwd">return</span><span class="pln">

    </span><span class="kwd">print</span><span class="pun">(</span><span class="str">"NO"</span><span class="pun">)</span><span class="pln">

t </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">int</span><span class="pun">(</span><span class="pln">input</span><span class="pun">())</span><span class="pln">
</span><span class="kwd">for</span><span class="pln"> _ </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">t</span><span class="pun">):</span><span class="pln">
    solve</span><span class="pun">()</span></code></pre></div></div> <div class="spoiler"><b class="spoiler-title">Bonus</b><div class="spoiler-content" style="display: block;"><p>Solve the problem if you need to find the smallest <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-637"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-638">k</span></span></span><script type="math/tex" id="MathJax-Element-161">k</script> for which the answer is YES.</p></div></div><p><a href="https://codeforces.com/contest/2103/problem/D" title="Codeforces Round 1019 (Div. 2)">2103D - Local Construction</a></p><p>Author:<a class="rated-user user-red" href="https://codeforces.com/profile/NemanjaSo2005" title="Grandmaster NemanjaSo2005">NemanjaSo2005</a></p> <div class="spoiler"><b class="spoiler-title">Hint 1</b><div class="spoiler-content" style="display: block;"><p>Try to prove the claim that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-639"><span class="MJXp-msubsup" id="MJXp-Span-640"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-641" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-642" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-643" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mo" id="MJXp-Span-644" style="margin-left: 0em; margin-right: 0em;">⌈</span><span class="MJXp-msubsup" id="MJXp-Span-645"><span class="MJXp-mi" id="MJXp-Span-646" style="margin-right: 0.05em;">log</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-647" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-648" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-649">n</span><span class="MJXp-mo" id="MJXp-Span-650" style="margin-left: 0em; margin-right: 0em;">⌉</span></span></span><script type="math/tex" id="MathJax-Element-162">a_i \le \lceil \log_2 n\rceil</script>. It also shall help you understand when the construction is possible, which is often a good way to think about constructive problems. </p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 2</b><div class="spoiler-content" style="display: block;"><p>We can notice that among any two consecutive elements <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-651"><span class="MJXp-msubsup" id="MJXp-Span-652"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-653" style="margin-right: 0.05em;">p</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-654" style="vertical-align: -0.4em;">i</span></span></span></span><script type="math/tex" id="MathJax-Element-163">p_i</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-655"><span class="MJXp-msubsup" id="MJXp-Span-656"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-657" style="margin-right: 0.05em;">p</span><span class="MJXp-mrow MJXp-script" id="MJXp-Span-658" style="vertical-align: -0.4em;"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-659">i</span><span class="MJXp-mo" id="MJXp-Span-660">+</span><span class="MJXp-mn" id="MJXp-Span-661">1</span></span></span></span></span><script type="math/tex" id="MathJax-Element-164">p_{i+1}</script>, one of them has to be deleted. That means that after each operation, around half of the elements are deleted, therefore giving us the bound <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-662"><span class="MJXp-msubsup" id="MJXp-Span-663"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-664" style="margin-right: 0.05em;">a</span><span class="MJXp-mi MJXp-italic MJXp-script" id="MJXp-Span-665" style="vertical-align: -0.4em;">i</span></span><span class="MJXp-mo" id="MJXp-Span-666" style="margin-left: 0.333em; margin-right: 0.333em;">≤</span><span class="MJXp-mo" id="MJXp-Span-667" style="margin-left: 0em; margin-right: 0em;">⌈</span><span class="MJXp-msubsup" id="MJXp-Span-668"><span class="MJXp-mi" id="MJXp-Span-669" style="margin-right: 0.05em;">log</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-670" style="vertical-align: -0.4em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-671" style="margin-left: 0em; margin-right: 0em;"></span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-672">n</span><span class="MJXp-mo" id="MJXp-Span-673" style="margin-left: 0em; margin-right: 0em;">⌉</span></span></span><script type="math/tex" id="MathJax-Element-165">a_i \le \lceil \log_2 n\rceil</script>. It also means that for array <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-674"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-675">a</span></span></span><script type="math/tex" id="MathJax-Element-166">a</script> to describe a possible permutation, it must not contain two consecutive elements on any layer that do not get deleted in next iteration.</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 3</b><div class="spoiler-content" style="display: block;"><p>The whole function on going to next layer is defined in recursive way. Also, WLOG we can assume that local maximums stay, as it is symmetrical for local minimums. It makes sense to think about how to arrange elements on current layer and select those that do and those that do not get deleted. Then we will apply recursive step on next layer to arrange those that do not get deleted. </p><p>But how can we guarantee elements at some position will not get deleted?</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 4</b><div class="spoiler-content" style="display: block;"><p>If there are <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-676"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-677">k</span></span></span><script type="math/tex" id="MathJax-Element-167">k</script> positions at which elements that should not be deleted go, then we can just select the <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-678"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-679">k</span></span></span><script type="math/tex" id="MathJax-Element-168">k</script> biggest elements to go there and the rest of the array we fill in with smaller ones. But how do we guarantee that one of the smaller ones does not become a local maximum?</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 5</b><div class="spoiler-content" style="display: block;"><p>We can sort the smaller elements in increasing/ decreasing order, so none of them will be local maximum. However, there is an edge case of the smallest elements that form a prefix/ suffix. The part of smallest elements that form a prefix must be sorted in increasing order and the part of smallest elements that form a suffix must be sorted in decreasing order. Otherwise we might get that elements at first or last positions are local maximum when we do not want them to be.</p></div></div> <div class="spoiler"><b class="spoiler-title">Solution</b><div class="spoiler-content" style="display: block;"><p>Read the hints.</p><p>We process each layer separately and WLOG assume that we delete those that are not local maximums. We will have some elements that go onto next layer, and we will get their order when we process the next layer, for now we just know their positions. Say exactly <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-680"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-681">k</span></span></span><script type="math/tex" id="MathJax-Element-169">k</script> elements are going to next layer, then we can select them to be the largest <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-682"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-683">k</span></span></span><script type="math/tex" id="MathJax-Element-170">k</script> elements, which guarantees they will be local maximums. </p><p>Now the question is how to place smaller elements. We can imagine that bigger elements divide the layer into subarrays of indices that will be deleted. It does not matter how we fill in those subarrays with smaller elements, as long as they are in sorted order. If the subarray is the prefix of a layer, it must be sorted increasingly, and if it is the suffix of the layer, it must be sorted decreasingly.</p><p>Depending on implementation time complexity is either <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-684"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-685">O</span><span class="MJXp-mo" id="MJXp-Span-686" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-687">n</span><span class="MJXp-mo" id="MJXp-Span-688" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-171">O(n)</script> or <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-689"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-690">O</span><span class="MJXp-mo" id="MJXp-Span-691" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-692">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-693">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-694">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-695">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-696">n</span><span class="MJXp-mo" id="MJXp-Span-697" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-172">O(n log n)</script>, both of which are fast enough to pass. Memory complexity is <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-698"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-699">O</span><span class="MJXp-mo" id="MJXp-Span-700" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-701">n</span><span class="MJXp-mo" id="MJXp-Span-702" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-173">O(n)</script>.</p></div></div> <div class="spoiler"><b class="spoiler-title">Implementation O(N)</b><div class="spoiler-content" style="display: block;"><pre><code class="prettyprint prettyprinted" style=""><span class="com">#include</span><span class="pun">&lt;</span><span class="pln">bits</span><span class="pun">/</span><span class="pln">stdc</span><span class="pun">++.</span><span class="pln">h</span><span class="pun">&gt;</span><span class="pln">
</span><span class="com">#define</span><span class="pln"> ll </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln">
</span><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> maxn</span><span class="pun">=</span><span class="lit">2e5</span><span class="pun">+</span><span class="lit">5</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">,</span><span class="pln">a</span><span class="pun">[</span><span class="pln">maxn</span><span class="pun">],</span><span class="pln">p</span><span class="pun">[</span><span class="pln">maxn</span><span class="pun">];</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> construct</span><span class="pun">(</span><span class="pln">vector</span><span class="str">&lt;int&gt;</span><span class="pln"> pos</span><span class="pun">,</span><span class="pln">vector</span><span class="str">&lt;int&gt;</span><span class="pln"> nums</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> layer</span><span class="pun">){</span><span class="pln">
   sort</span><span class="pun">(</span><span class="pln">nums</span><span class="pun">.</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln">nums</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">());</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()==</span><span class="lit">1</span><span class="pun">){</span><span class="pln">
      p</span><span class="pun">[</span><span class="pln">pos</span><span class="pun">[</span><span class="lit">0</span><span class="pun">]]=</span><span class="pln">nums</span><span class="pun">[</span><span class="lit">0</span><span class="pun">];</span><span class="pln">
      </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   vector</span><span class="str">&lt;int&gt;</span><span class="pln"> keep</span><span class="pun">,</span><span class="pln">rem</span><span class="pun">;</span><span class="pln">
   vector</span><span class="str">&lt;bool&gt;</span><span class="pln"> spec</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">:</span><span class="pln">pos</span><span class="pun">)</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]&gt;</span><span class="pln">layer</span><span class="pun">){</span><span class="pln">
         keep</span><span class="pun">.</span><span class="pln">push_back</span><span class="pun">(</span><span class="pln">x</span><span class="pun">);</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">layer</span><span class="pun">%</span><span class="lit">2</span><span class="pun">==</span><span class="lit">1</span><span class="pun">)</span><span class="pln">
      reverse</span><span class="pun">(</span><span class="pln">nums</span><span class="pun">.</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln">nums</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">());</span><span class="pln">
   vector</span><span class="str">&lt;int&gt;</span><span class="pln"> newnums</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> it</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">it</span><span class="pun">&lt;=</span><span class="pln">keep</span><span class="pun">.</span><span class="pln">size</span><span class="pun">();</span><span class="pln">it</span><span class="pun">++){</span><span class="pln">
      newnums</span><span class="pun">.</span><span class="pln">push_back</span><span class="pun">(</span><span class="pln">nums</span><span class="pun">.</span><span class="pln">back</span><span class="pun">());</span><span class="pln">
      nums</span><span class="pun">.</span><span class="pln">pop_back</span><span class="pun">();</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   construct</span><span class="pun">(</span><span class="pln">keep</span><span class="pun">,</span><span class="pln">newnums</span><span class="pun">,</span><span class="pln">layer</span><span class="pun">+</span><span class="lit">1</span><span class="pun">);</span><span class="pln">
   reverse</span><span class="pun">(</span><span class="pln">nums</span><span class="pun">.</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln">nums</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">());</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> </span><span class="kwd">last</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">:</span><span class="pln">pos</span><span class="pun">){</span><span class="pln">
      </span><span class="kwd">last</span><span class="pun">=</span><span class="pln">x</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]&gt;</span><span class="pln">layer</span><span class="pun">)</span><span class="pln">
         </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
      p</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]=</span><span class="pln">nums</span><span class="pun">.</span><span class="pln">back</span><span class="pun">();</span><span class="pln">
      nums</span><span class="pun">.</span><span class="pln">pop_back</span><span class="pun">();</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   reverse</span><span class="pun">(</span><span class="pln">nums</span><span class="pun">.</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln">nums</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">());</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">:</span><span class="pln">pos</span><span class="pun">){</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">x</span><span class="pun">&lt;</span><span class="kwd">last</span><span class="pun">)</span><span class="pln">
         </span><span class="kwd">continue</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]&gt;</span><span class="pln">layer</span><span class="pun">)</span><span class="pln">
         </span><span class="kwd">continue</span><span class="pun">;</span><span class="pln">
      p</span><span class="pun">[</span><span class="pln">x</span><span class="pun">]=</span><span class="pln">nums</span><span class="pun">.</span><span class="pln">back</span><span class="pun">();</span><span class="pln">
      nums</span><span class="pun">.</span><span class="pln">pop_back</span><span class="pun">();</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> solve</span><span class="pun">(){</span><span class="pln">
   cin</span><span class="pun">&gt;&gt;</span><span class="pln">n</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      cin</span><span class="pun">&gt;&gt;</span><span class="pln">a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]&lt;=</span><span class="lit">0</span><span class="pun">)</span><span class="pln">
         a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]=</span><span class="lit">1e9</span><span class="pun">;</span><span class="pln">
   vector</span><span class="str">&lt;int&gt;</span><span class="pln"> A</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      A</span><span class="pun">.</span><span class="pln">push_back</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span><span class="pln">
   construct</span><span class="pun">(</span><span class="pln">A</span><span class="pun">,</span><span class="pln">A</span><span class="pun">,</span><span class="lit">1</span><span class="pun">);</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      cout</span><span class="pun">&lt;&lt;</span><span class="pln">p</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]&lt;&lt;</span><span class="str">" \n"</span><span class="pun">[</span><span class="pln">i</span><span class="pun">==</span><span class="pln">n</span><span class="pun">];</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> main</span><span class="pun">(){</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> T</span><span class="pun">;</span><span class="pln">
   cin</span><span class="pun">&gt;&gt;</span><span class="pln">T</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">T</span><span class="pun">--)</span><span class="pln">
      solve</span><span class="pun">();</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div> <div class="spoiler"><b class="spoiler-title">Implementation O(n log n) (prvocislo)</b><div class="spoiler-content" style="display: block;"><pre><code class="prettyprint prettyprinted" style=""><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;algorithm&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;bitset&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;cassert&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;chrono&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;cmath&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;deque&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;iomanip&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;iostream&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;map&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;queue&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;random&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;set&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;string&gt;</span><span class="pln">
</span><span class="com">#include</span><span class="pln"> </span><span class="str">&lt;vector&gt;</span><span class="pln">
</span><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> ll</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">typedef</span><span class="pln"> </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">double</span><span class="pln"> ld</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span><span class="pln">
 
</span><span class="kwd">int</span><span class="pln"> main</span><span class="pun">()</span><span class="pln">
</span><span class="pun">{</span><span class="pln">
    ios</span><span class="pun">::</span><span class="pln">sync_with_stdio</span><span class="pun">(</span><span class="kwd">false</span><span class="pun">);</span><span class="pln">
    cin</span><span class="pun">.</span><span class="pln">tie</span><span class="pun">(</span><span class="lit">0</span><span class="pun">);</span><span class="pln">
    </span><span class="kwd">int</span><span class="pln"> t</span><span class="pun">;</span><span class="pln">
    cin </span><span class="pun">&gt;&gt;</span><span class="pln"> t</span><span class="pun">;</span><span class="pln">
    </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">t</span><span class="pun">--)</span><span class="pln">
    </span><span class="pun">{</span><span class="pln">
        </span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">;</span><span class="pln">
        cin </span><span class="pun">&gt;&gt;</span><span class="pln"> n</span><span class="pun">;</span><span class="pln">
        vector</span><span class="str">&lt;int&gt;</span><span class="pln"> a</span><span class="pun">(</span><span class="pln">n</span><span class="pun">),</span><span class="pln"> p</span><span class="pun">(</span><span class="pln">n</span><span class="pun">);</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> n</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> cin </span><span class="pun">&gt;&gt;</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
        </span><span class="kwd">int</span><span class="pln"> mx </span><span class="pun">=</span><span class="pln"> max</span><span class="pun">(</span><span class="lit">0</span><span class="pun">,</span><span class="pln"> </span><span class="pun">*</span><span class="pln">max_element</span><span class="pun">(</span><span class="pln">a</span><span class="pun">.</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln"> a</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">()))</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> n</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> mx</span><span class="pun">;</span><span class="pln">
 
        </span><span class="kwd">int</span><span class="pln"> l </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">,</span><span class="pln"> r </span><span class="pun">=</span><span class="pln"> n</span><span class="pun">;</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> k </span><span class="pun">=</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> k </span><span class="pun">&lt;=</span><span class="pln"> mx</span><span class="pun">;</span><span class="pln"> k</span><span class="pun">++)</span><span class="pln">
        </span><span class="pun">{</span><span class="pln">
            </span><span class="kwd">int</span><span class="pln"> mr </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln">
            </span><span class="kwd">while</span><span class="pln"> </span><span class="pun">(</span><span class="pln">mr </span><span class="pun">&gt;=</span><span class="pln"> </span><span class="lit">0</span><span class="pln"> </span><span class="pun">&amp;&amp;</span><span class="pln"> a</span><span class="pun">[</span><span class="pln">mr</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;=</span><span class="pln"> k</span><span class="pun">)</span><span class="pln"> mr</span><span class="pun">--;</span><span class="pln">
            </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> mr</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln">
            </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> k</span><span class="pun">)</span><span class="pln">
                </span><span class="pun">{</span><span class="pln">
                    p</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">((</span><span class="pln">k </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> r</span><span class="pun">--</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> l</span><span class="pun">++);</span><span class="pln">
                </span><span class="pun">}</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
            </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&gt;</span><span class="pln"> mr</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">--)</span><span class="pln">
            </span><span class="pun">{</span><span class="pln">
                </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">a</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> k</span><span class="pun">)</span><span class="pln">
                </span><span class="pun">{</span><span class="pln">
                    p</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">((</span><span class="pln">k </span><span class="pun">&amp;</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> r</span><span class="pun">--</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> l</span><span class="pun">++);</span><span class="pln">
                </span><span class="pun">}</span><span class="pln">
            </span><span class="pun">}</span><span class="pln">
        </span><span class="pun">}</span><span class="pln">
        </span><span class="kwd">for</span><span class="pln"> </span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i </span><span class="pun">=</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln"> i </span><span class="pun">&lt;</span><span class="pln"> n</span><span class="pun">;</span><span class="pln"> i</span><span class="pun">++)</span><span class="pln"> cout </span><span class="pun">&lt;&lt;</span><span class="pln"> p</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">&lt;&lt;</span><span class="pln"> </span><span class="str">" \n"</span><span class="pun">[</span><span class="pln">i </span><span class="pun">==</span><span class="pln"> n </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">];</span><span class="pln">
    </span><span class="pun">}</span><span class="pln">
    </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div> <div class="spoiler"><b class="spoiler-title">Bonus</b><div class="spoiler-content" style="display: block;"><p>I came up with this problem while writing the generator for <a href="https://codeforces.com/contest/1900/problem/F" title="Codeforces Round 911 (Div. 2)">1900F - Local Deletions</a>.</p></div></div><p><a href="https://codeforces.com/contest/2103/problem/E" title="Codeforces Round 1019 (Div. 2)">2103E - Keep the Sum</a></p><p>Author:<a class="rated-user user-red" href="https://codeforces.com/profile/NemanjaSo2005" title="Grandmaster NemanjaSo2005">NemanjaSo2005</a></p> <div class="spoiler"><b class="spoiler-title">Hint 1</b><div class="spoiler-content" style="display: block;"><p>When is the solution trivially -1?</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 2</b><div class="spoiler-content" style="display: block;"><p>When it is impossible to do any operation and array is not sorted in the beginning. Is that enough though?</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 3</b><div class="spoiler-content" style="display: block;"><p>It is enough. If we have even a single pair of values that sums up to <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-703"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-704">k</span></span></span><script type="math/tex" id="MathJax-Element-174">k</script>, we can make the array non-decreasing. From now assume there is only one such pair as we can ignore other pairs.</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 4</b><div class="spoiler-content" style="display: block;"><p>The constraint of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-705"><span class="MJXp-mn" id="MJXp-Span-706">3</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-707">n</span></span></span><script type="math/tex" id="MathJax-Element-175">3n</script> hints that a solution is linear. Maybe we are actually supposed to sort the array? Let's assume indices of values that sum up to <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-708"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-709">k</span></span></span><script type="math/tex" id="MathJax-Element-176">k</script> are <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-710"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-711">a</span></span></span><script type="math/tex" id="MathJax-Element-177">a</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-712"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-713">b</span></span></span><script type="math/tex" id="MathJax-Element-178">b</script>. How do we swap values at some other two indices <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-714"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-715">c</span></span></span><script type="math/tex" id="MathJax-Element-179">c</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-716"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-717">d</span></span></span><script type="math/tex" id="MathJax-Element-180">d</script>.</p></div></div> <div class="spoiler"><b class="spoiler-title">Solution part 1</b><div class="spoiler-content" style="display: block;"><p>We can do the following sequence of operations. It could change values of elements at positions <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-718"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-719">a</span></span></span><script type="math/tex" id="MathJax-Element-181">a</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-720"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-721">b</span></span></span><script type="math/tex" id="MathJax-Element-182">b</script>, but their sum will remain <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-722"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-723">k</span></span></span><script type="math/tex" id="MathJax-Element-183">k</script> and values at indices <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-724"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-725">c</span></span></span><script type="math/tex" id="MathJax-Element-184">c</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-726"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-727">d</span></span></span><script type="math/tex" id="MathJax-Element-185">d</script> will be swapped.</p> <ul>   <li>We do operation on indices <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-728"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-729">a</span></span></span><script type="math/tex" id="MathJax-Element-186">a</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-730"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-731">b</span></span></span><script type="math/tex" id="MathJax-Element-187">b</script> and we make it so that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-732"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-733">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-734">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-735">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-736">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-737">e</span><span class="MJXp-mo" id="MJXp-Span-738" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-739">a</span><span class="MJXp-mo" id="MJXp-Span-740" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-741" style="margin-left: 0.111em; margin-right: 0.167em;">:=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-742">k</span><span class="MJXp-mo" id="MJXp-Span-743" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-744">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-745">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-746">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-747">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-748">e</span><span class="MJXp-mo" id="MJXp-Span-749" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-750">c</span><span class="MJXp-mo" id="MJXp-Span-751" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-188">value[a] := k - value[c]</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-752"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-753">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-754">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-755">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-756">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-757">e</span><span class="MJXp-mo" id="MJXp-Span-758" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-759">b</span><span class="MJXp-mo" id="MJXp-Span-760" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-761" style="margin-left: 0.111em; margin-right: 0.167em;">:=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-762">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-763">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-764">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-765">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-766">e</span><span class="MJXp-mo" id="MJXp-Span-767" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-768">c</span><span class="MJXp-mo" id="MJXp-Span-769" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-189">value[b] := value[c]</script>.</li>   <li>We do operation on indices <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-770"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-771">a</span></span></span><script type="math/tex" id="MathJax-Element-190">a</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-772"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-773">c</span></span></span><script type="math/tex" id="MathJax-Element-191">c</script> and we make it so that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-774"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-775">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-776">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-777">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-778">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-779">e</span><span class="MJXp-mo" id="MJXp-Span-780" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-781">a</span><span class="MJXp-mo" id="MJXp-Span-782" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-783" style="margin-left: 0.111em; margin-right: 0.167em;">:=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-784">k</span><span class="MJXp-mo" id="MJXp-Span-785" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-786">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-787">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-788">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-789">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-790">e</span><span class="MJXp-mo" id="MJXp-Span-791" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-792">d</span><span class="MJXp-mo" id="MJXp-Span-793" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-192">value[a] := k - value[d]</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-794"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-795">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-796">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-797">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-798">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-799">e</span><span class="MJXp-mo" id="MJXp-Span-800" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-801">c</span><span class="MJXp-mo" id="MJXp-Span-802" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-803" style="margin-left: 0.111em; margin-right: 0.167em;">:=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-804">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-805">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-806">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-807">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-808">e</span><span class="MJXp-mo" id="MJXp-Span-809" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-810">d</span><span class="MJXp-mo" id="MJXp-Span-811" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-193">value[c] := value[d]</script>.</li>   <li>We do operation on indices <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-812"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-813">a</span></span></span><script type="math/tex" id="MathJax-Element-194">a</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-814"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-815">d</span></span></span><script type="math/tex" id="MathJax-Element-195">d</script> and we make it so that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-816"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-817">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-818">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-819">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-820">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-821">e</span><span class="MJXp-mo" id="MJXp-Span-822" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-823">a</span><span class="MJXp-mo" id="MJXp-Span-824" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-825" style="margin-left: 0.111em; margin-right: 0.167em;">:=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-826">k</span><span class="MJXp-mo" id="MJXp-Span-827" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-828">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-829">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-830">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-831">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-832">e</span><span class="MJXp-mo" id="MJXp-Span-833" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-834">b</span><span class="MJXp-mo" id="MJXp-Span-835" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-196">value[a] := k - value[b]</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-836"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-837">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-838">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-839">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-840">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-841">e</span><span class="MJXp-mo" id="MJXp-Span-842" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-843">d</span><span class="MJXp-mo" id="MJXp-Span-844" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-845" style="margin-left: 0.111em; margin-right: 0.167em;">:=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-846">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-847">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-848">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-849">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-850">e</span><span class="MJXp-mo" id="MJXp-Span-851" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-852">b</span><span class="MJXp-mo" id="MJXp-Span-853" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-197">value[d] := value[b]</script>.</li> </ul><p>Notice that after this sequence of operations we swapped values at positions <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-854"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-855">c</span></span></span><script type="math/tex" id="MathJax-Element-198">c</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-856"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-857">d</span></span></span><script type="math/tex" id="MathJax-Element-199">d</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-858"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-859">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-860">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-861">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-862">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-863">e</span><span class="MJXp-mo" id="MJXp-Span-864" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-865">a</span><span class="MJXp-mo" id="MJXp-Span-866" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-867" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-868">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-869">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-870">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-871">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-872">e</span><span class="MJXp-mo" id="MJXp-Span-873" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-874">b</span><span class="MJXp-mo" id="MJXp-Span-875" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-200">value[a] + value[b]</script> is still <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-876"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-877">k</span></span></span><script type="math/tex" id="MathJax-Element-201">k</script>. We can now sort the rest of the array (without <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-878"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-879">a</span></span></span><script type="math/tex" id="MathJax-Element-202">a</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-880"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-881">b</span></span></span><script type="math/tex" id="MathJax-Element-203">b</script>) and then adjust values of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-882"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-883">a</span></span></span><script type="math/tex" id="MathJax-Element-204">a</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-884"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-885">b</span></span></span><script type="math/tex" id="MathJax-Element-205">b</script> at the end. However, there is still a problem.</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 5</b><div class="spoiler-content" style="display: block;"><p>It might be impossible to adjust values of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-886"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-887">a</span></span></span><script type="math/tex" id="MathJax-Element-206">a</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-888"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-889">b</span></span></span><script type="math/tex" id="MathJax-Element-207">b</script>. Take <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-890"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-891">k</span><span class="MJXp-mo" id="MJXp-Span-892" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-893">5</span></span></span><script type="math/tex" id="MathJax-Element-208">k=5</script> and array [$1$, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-894"><span class="MJXp-mn" id="MJXp-Span-895">3</span></span></span><script type="math/tex" id="MathJax-Element-209">3</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-896"><span class="MJXp-mn" id="MJXp-Span-897">2</span></span></span><script type="math/tex" id="MathJax-Element-210">2</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-898"><span class="MJXp-mn" id="MJXp-Span-899">3</span></span></span><script type="math/tex" id="MathJax-Element-211">3</script>, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-900"><span class="MJXp-mn" id="MJXp-Span-901">5</span></span></span><script type="math/tex" id="MathJax-Element-212">5</script>] for example, with <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-902"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-903">a</span><span class="MJXp-mo" id="MJXp-Span-904" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-905">3</span></span></span><script type="math/tex" id="MathJax-Element-213">a = 3</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-906"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-907">b</span><span class="MJXp-mo" id="MJXp-Span-908" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-909">4</span></span></span><script type="math/tex" id="MathJax-Element-214">b = 4</script>. How do we avoid such problems?</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 6</b><div class="spoiler-content" style="display: block;"><p>If <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-910"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-911">a</span><span class="MJXp-mo" id="MJXp-Span-912" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-913">1</span></span></span><script type="math/tex" id="MathJax-Element-215">a = 1</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-914"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-915">b</span><span class="MJXp-mo" id="MJXp-Span-916" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-917">n</span></span></span><script type="math/tex" id="MathJax-Element-216">b = n</script> we can just make <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-918"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-919">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-920">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-921">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-922">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-923">e</span><span class="MJXp-mo" id="MJXp-Span-924" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-925">a</span><span class="MJXp-mo" id="MJXp-Span-926" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-927" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-928">0</span></span></span><script type="math/tex" id="MathJax-Element-217">value[a]=0</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-929"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-930">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-931">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-932">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-933">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-934">e</span><span class="MJXp-mo" id="MJXp-Span-935" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-936">b</span><span class="MJXp-mo" id="MJXp-Span-937" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-938" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-939">k</span></span></span><script type="math/tex" id="MathJax-Element-218">value[b] = k</script> and as all other elements are between <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-940"><span class="MJXp-mn" id="MJXp-Span-941">0</span></span></span><script type="math/tex" id="MathJax-Element-219">0</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-942"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-943">k</span></span></span><script type="math/tex" id="MathJax-Element-220">k</script>, it is guaranteed that array is sorted. How do we do it?</p></div></div> <div class="spoiler"><b class="spoiler-title">Solution part 2</b><div class="spoiler-content" style="display: block;"><p>We will assume that both <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-944"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-945">a</span></span></span><script type="math/tex" id="MathJax-Element-221">a</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-946"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-947">b</span></span></span><script type="math/tex" id="MathJax-Element-222">b</script> are neither <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-948"><span class="MJXp-mn" id="MJXp-Span-949">1</span></span></span><script type="math/tex" id="MathJax-Element-223">1</script> nor <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-950"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-951">n</span></span></span><script type="math/tex" id="MathJax-Element-224">n</script>. If they are, then we will skip some steps. The following sequence of operations makes <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-952"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-953">a</span><span class="MJXp-mo" id="MJXp-Span-954" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-955">1</span></span></span><script type="math/tex" id="MathJax-Element-225">a=1</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-956"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-957">b</span><span class="MJXp-mo" id="MJXp-Span-958" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-959">n</span></span></span><script type="math/tex" id="MathJax-Element-226">b=n</script> a valid choice. Note that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-960"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-961">a</span></span></span><script type="math/tex" id="MathJax-Element-227">a</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-962"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-963">b</span></span></span><script type="math/tex" id="MathJax-Element-228">b</script> are referring to their original indices.</p> <ul>   <li>We do operation on indices <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-964"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-965">a</span></span></span><script type="math/tex" id="MathJax-Element-229">a</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-966"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-967">b</span></span></span><script type="math/tex" id="MathJax-Element-230">b</script> and we make it so that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-968"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-969">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-970">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-971">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-972">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-973">e</span><span class="MJXp-mo" id="MJXp-Span-974" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-975">a</span><span class="MJXp-mo" id="MJXp-Span-976" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-977" style="margin-left: 0.111em; margin-right: 0.167em;">:=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-978">k</span><span class="MJXp-mo" id="MJXp-Span-979" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-980">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-981">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-982">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-983">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-984">e</span><span class="MJXp-mo" id="MJXp-Span-985" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-986">1</span><span class="MJXp-mo" id="MJXp-Span-987" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-231">value[a] := k - value[1]</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-988"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-989">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-990">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-991">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-992">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-993">e</span><span class="MJXp-mo" id="MJXp-Span-994" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-995">b</span><span class="MJXp-mo" id="MJXp-Span-996" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-997" style="margin-left: 0.111em; margin-right: 0.167em;">:=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-998">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-999">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1000">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1001">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1002">e</span><span class="MJXp-mo" id="MJXp-Span-1003" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-1004">1</span><span class="MJXp-mo" id="MJXp-Span-1005" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-232">value[b] := value[1]</script>.</li>   <li>We do operation on indices <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1006"><span class="MJXp-mn" id="MJXp-Span-1007">1</span></span></span><script type="math/tex" id="MathJax-Element-233">1</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1008"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1009">a</span></span></span><script type="math/tex" id="MathJax-Element-234">a</script> and we make it so that <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1010"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1011">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1012">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1013">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1014">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1015">e</span><span class="MJXp-mo" id="MJXp-Span-1016" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-1017">1</span><span class="MJXp-mo" id="MJXp-Span-1018" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-1019" style="margin-left: 0.111em; margin-right: 0.167em;">:=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1020">k</span><span class="MJXp-mo" id="MJXp-Span-1021" style="margin-left: 0.267em; margin-right: 0.267em;">−</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1022">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1023">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1024">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1025">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1026">e</span><span class="MJXp-mo" id="MJXp-Span-1027" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1028">n</span><span class="MJXp-mo" id="MJXp-Span-1029" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-235">value[1] := k - value[n]</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1030"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1031">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1032">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1033">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1034">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1035">e</span><span class="MJXp-mo" id="MJXp-Span-1036" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1037">a</span><span class="MJXp-mo" id="MJXp-Span-1038" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-1039" style="margin-left: 0.111em; margin-right: 0.167em;">:=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1040">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1041">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1042">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1043">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1044">e</span><span class="MJXp-mo" id="MJXp-Span-1045" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1046">n</span><span class="MJXp-mo" id="MJXp-Span-1047" style="margin-left: 0em; margin-right: 0em;">]</span></span></span><script type="math/tex" id="MathJax-Element-236">value[a] := value[n]</script>.</li> </ul><p>After those two operations we can just sort the rest of the array with sequence of <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1048"><span class="MJXp-mn" id="MJXp-Span-1049">3</span></span></span><script type="math/tex" id="MathJax-Element-237">3</script> operations previously described. Then at the end, we do operation to make <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1050"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1051">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1052">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1053">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1054">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1055">e</span><span class="MJXp-mo" id="MJXp-Span-1056" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mn" id="MJXp-Span-1057">1</span><span class="MJXp-mo" id="MJXp-Span-1058" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-1059" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mn" id="MJXp-Span-1060">0</span></span></span><script type="math/tex" id="MathJax-Element-238">value[1] = 0</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1061"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1062">v</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1063">a</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1064">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1065">u</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1066">e</span><span class="MJXp-mo" id="MJXp-Span-1067" style="margin-left: 0em; margin-right: 0em;">[</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1068">n</span><span class="MJXp-mo" id="MJXp-Span-1069" style="margin-left: 0em; margin-right: 0em;">]</span><span class="MJXp-mo" id="MJXp-Span-1070" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1071">k</span></span></span><script type="math/tex" id="MathJax-Element-239">value[n] = k</script>. Due to <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1072"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1073">n</span><span class="MJXp-mo" id="MJXp-Span-1074" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mn" id="MJXp-Span-1075">4</span></span></span><script type="math/tex" id="MathJax-Element-240">n>4</script> in total we use a bit less than <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1076"><span class="MJXp-mn" id="MJXp-Span-1077">3</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1078">n</span></span></span><script type="math/tex" id="MathJax-Element-241">3n</script> operations in the worst case.</p></div></div> <div class="spoiler"><b class="spoiler-title">Implementation</b><div class="spoiler-content" style="display: block;"><pre><code class="prettyprint prettyprinted" style=""><span class="com">#include</span><span class="pun">&lt;</span><span class="pln">bits</span><span class="pun">/</span><span class="pln">stdc</span><span class="pun">++.</span><span class="pln">h</span><span class="pun">&gt;</span><span class="pln">
</span><span class="com">#define</span><span class="pln"> ll </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln">
</span><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> maxn</span><span class="pun">=</span><span class="lit">2e5</span><span class="pun">+</span><span class="lit">5</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> n</span><span class="pun">,</span><span class="pln">k</span><span class="pun">,</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">maxn</span><span class="pun">],</span><span class="pln">A</span><span class="pun">,</span><span class="pln">B</span><span class="pun">,</span><span class="pln">p</span><span class="pun">[</span><span class="pln">maxn</span><span class="pun">];</span><span class="pln">
map</span><span class="pun">&lt;</span><span class="kwd">int</span><span class="pun">,</span><span class="kwd">int</span><span class="pun">&gt;</span><span class="pln"> pos</span><span class="pun">;</span><span class="pln">
vector</span><span class="pun">&lt;</span><span class="pln">tuple</span><span class="pun">&lt;</span><span class="kwd">int</span><span class="pun">,</span><span class="kwd">int</span><span class="pun">,</span><span class="kwd">int</span><span class="pun">&gt;&gt;</span><span class="pln"> V</span><span class="pun">;</span><span class="pln"> </span><span class="com">/// All operations</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> dooperation</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> b</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">){</span><span class="pln">
   arr</span><span class="pun">[</span><span class="pln">a</span><span class="pun">]-=</span><span class="pln">x</span><span class="pun">;</span><span class="pln">
   arr</span><span class="pun">[</span><span class="pln">b</span><span class="pun">]+=</span><span class="pln">x</span><span class="pun">;</span><span class="pln">
   V</span><span class="pun">.</span><span class="pln">push_back</span><span class="pun">(</span><span class="pln">make_tuple</span><span class="pun">(</span><span class="pln">a</span><span class="pun">,</span><span class="pln">b</span><span class="pun">,</span><span class="pln">x</span><span class="pun">));</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> setvalue</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> pos</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> b</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> target</span><span class="pun">){</span><span class="pln"> </span><span class="com">/// Does operation on (pos, b) such that value of pos becomes target</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">pos</span><span class="pun">]==</span><span class="pln">target</span><span class="pun">)</span><span class="pln">
      </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> dif</span><span class="pun">=</span><span class="pln">target</span><span class="pun">-</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">pos</span><span class="pun">];</span><span class="pln">
   dooperation</span><span class="pun">(</span><span class="pln">b</span><span class="pun">,</span><span class="pln">pos</span><span class="pun">,</span><span class="pln">dif</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> performswap</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> y</span><span class="pun">){</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> vx</span><span class="pun">=</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">x</span><span class="pun">],</span><span class="pln">vy</span><span class="pun">=</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">y</span><span class="pun">];</span><span class="pln">
   setvalue</span><span class="pun">(</span><span class="pln">A</span><span class="pun">,</span><span class="pln">B</span><span class="pun">,</span><span class="pln">k</span><span class="pun">-</span><span class="pln">vx</span><span class="pun">);</span><span class="pln">
   setvalue</span><span class="pun">(</span><span class="pln">x</span><span class="pun">,</span><span class="pln">A</span><span class="pun">,</span><span class="pln">vy</span><span class="pun">);</span><span class="pln">
   setvalue</span><span class="pun">(</span><span class="pln">y</span><span class="pun">,</span><span class="pln">A</span><span class="pun">,</span><span class="pln">vx</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">bool</span><span class="pln"> cmp</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> b</span><span class="pun">){</span><span class="pln">
   </span><span class="kwd">return</span><span class="pln"> arr</span><span class="pun">[</span><span class="pln">a</span><span class="pun">]&lt;</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">b</span><span class="pun">];</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> solve</span><span class="pun">(){</span><span class="pln">
   pos</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">();</span><span class="pln">
   V</span><span class="pun">.</span><span class="pln">clear</span><span class="pun">();</span><span class="pln">
   A</span><span class="pun">=</span><span class="pln">B</span><span class="pun">=-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
   cin</span><span class="pun">&gt;&gt;</span><span class="pln">n</span><span class="pun">&gt;&gt;</span><span class="pln">k</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      cin</span><span class="pun">&gt;&gt;</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">
   </span><span class="kwd">bool</span><span class="pln"> issorted</span><span class="pun">=</span><span class="kwd">true</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">2</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]&lt;</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">])</span><span class="pln">
         issorted</span><span class="pun">=</span><span class="kwd">false</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">issorted</span><span class="pun">){</span><span class="pln">
      cout</span><span class="pun">&lt;&lt;</span><span class="str">"0\n"</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">.</span><span class="pln">find</span><span class="pun">(</span><span class="pln">k</span><span class="pun">-</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">])!=</span><span class="pln">pos</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">()){</span><span class="pln">
         B</span><span class="pun">=</span><span class="pln">i</span><span class="pun">;</span><span class="pln">
         A</span><span class="pun">=</span><span class="pln">pos</span><span class="pun">[</span><span class="pln">k</span><span class="pun">-</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]];</span><span class="pln">
         </span><span class="kwd">break</span><span class="pun">;</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
      pos</span><span class="pun">[</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]]=</span><span class="pln">i</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">A</span><span class="pun">==-</span><span class="lit">1</span><span class="pun">){</span><span class="pln">
      cout</span><span class="pun">&lt;&lt;</span><span class="str">"-1\n"</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">A</span><span class="pun">!=</span><span class="lit">1</span><span class="pun">){</span><span class="pln">
      setvalue</span><span class="pun">(</span><span class="pln">A</span><span class="pun">,</span><span class="pln">B</span><span class="pun">,</span><span class="pln">k</span><span class="pun">-</span><span class="pln">arr</span><span class="pun">[</span><span class="lit">1</span><span class="pun">]);</span><span class="pln">
      setvalue</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln">A</span><span class="pun">,</span><span class="pln">k</span><span class="pun">-</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">B</span><span class="pun">]);</span><span class="pln">
      A</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">B</span><span class="pun">!=</span><span class="pln">n</span><span class="pun">){</span><span class="pln">
      setvalue</span><span class="pun">(</span><span class="pln">B</span><span class="pun">,</span><span class="pln">A</span><span class="pun">,</span><span class="pln">k</span><span class="pun">-</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">n</span><span class="pun">]);</span><span class="pln">
      setvalue</span><span class="pun">(</span><span class="pln">n</span><span class="pun">,</span><span class="pln">B</span><span class="pun">,</span><span class="pln">k</span><span class="pun">-</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">A</span><span class="pun">]);</span><span class="pln">
      B</span><span class="pun">=</span><span class="pln">n</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   vector</span><span class="str">&lt;int&gt;</span><span class="pln"> invp</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">2</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      invp</span><span class="pun">.</span><span class="pln">push_back</span><span class="pun">(</span><span class="pln">i</span><span class="pun">);</span><span class="pln">
   sort</span><span class="pun">(</span><span class="pln">invp</span><span class="pun">.</span><span class="kwd">begin</span><span class="pun">(),</span><span class="pln">invp</span><span class="pun">.</span><span class="kwd">end</span><span class="pun">(),</span><span class="pln">cmp</span><span class="pun">);</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;</span><span class="pln">invp</span><span class="pun">.</span><span class="pln">size</span><span class="pun">();</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      p</span><span class="pun">[</span><span class="pln">invp</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]]=</span><span class="pln">i</span><span class="pun">+</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">2</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;</span><span class="pln">n</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">p</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]==</span><span class="pln">i</span><span class="pun">)</span><span class="pln">
         </span><span class="kwd">continue</span><span class="pun">;</span><span class="pln">
      performswap</span><span class="pun">(</span><span class="pln">p</span><span class="pun">[</span><span class="pln">i</span><span class="pun">],</span><span class="pln">i</span><span class="pun">);</span><span class="pln">
      swap</span><span class="pun">(</span><span class="pln">p</span><span class="pun">[</span><span class="pln">p</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]],</span><span class="pln">p</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]);</span><span class="pln">
      i</span><span class="pun">--;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   setvalue</span><span class="pun">(</span><span class="pln">B</span><span class="pun">,</span><span class="pln">A</span><span class="pun">,</span><span class="pln">k</span><span class="pun">);</span><span class="pln">
   cout</span><span class="pun">&lt;&lt;</span><span class="pln">V</span><span class="pun">.</span><span class="pln">size</span><span class="pun">()&lt;&lt;</span><span class="str">"\n"</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">auto</span><span class="pln"> x</span><span class="pun">:</span><span class="pln">V</span><span class="pun">)</span><span class="pln">
      cout</span><span class="pun">&lt;&lt;(</span><span class="kwd">get</span><span class="pun">&lt;</span><span class="lit">0</span><span class="pun">&gt;(</span><span class="pln">x</span><span class="pun">))&lt;&lt;</span><span class="str">" "</span><span class="pun">&lt;&lt;(</span><span class="kwd">get</span><span class="pun">&lt;</span><span class="lit">1</span><span class="pun">&gt;(</span><span class="pln">x</span><span class="pun">))&lt;&lt;</span><span class="str">" "</span><span class="pun">&lt;&lt;(</span><span class="kwd">get</span><span class="pun">&lt;</span><span class="lit">2</span><span class="pun">&gt;(</span><span class="pln">x</span><span class="pun">))&lt;&lt;</span><span class="str">"\n"</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> main</span><span class="pun">(){</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> T</span><span class="pun">;</span><span class="pln">
   cin</span><span class="pun">&gt;&gt;</span><span class="pln">T</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">T</span><span class="pun">--)</span><span class="pln">
      solve</span><span class="pun">();</span><span class="pln">
   </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div> <div class="spoiler"><b class="spoiler-title">Bonus</b><div class="spoiler-content" style="display: block;"><p>Solve the problem in <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1079"><span class="MJXp-mo" id="MJXp-Span-1080" style="margin-left: 0em; margin-right: 0em;">⌈</span><span class="MJXp-mfrac" id="MJXp-Span-1081" style="vertical-align: 0.25em;"><span class="MJXp-box MJXp-script"><span class="MJXp-mn" id="MJXp-Span-1082">3</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1083">n</span></span><span class="MJXp-box" style="margin-top: -0.9em;"><span class="MJXp-denom"><span><span class="MJXp-rule" style="height: 1em; border-top: none; border-bottom: 1px solid; margin: 0.1em 0px;"></span></span><span><span class="MJXp-box MJXp-script"><span class="MJXp-mn" id="MJXp-Span-1084">2</span></span></span></span></span></span><span class="MJXp-mo" id="MJXp-Span-1085" style="margin-left: 0em; margin-right: 0em;">⌉</span></span></span><script type="math/tex" id="MathJax-Element-242">\lceil \frac{3n}{2} \rceil</script> queries.</p></div></div><p><a href="https://codeforces.com/contest/2103/problem/F" title="Codeforces Round 1019 (Div. 2)">2103F - Maximize Nor</a></p><p>Author: <a class="rated-user user-red" href="https://codeforces.com/profile/NemanjaSo2005" title="Grandmaster NemanjaSo2005">NemanjaSo2005</a></p> <div class="spoiler"><b class="spoiler-title">Hint 1</b><div class="spoiler-content" style="display: block;"><p>If problem had queries of form "What is nor of some interval [$l$, $r$]", how would you answer them?</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 2</b><div class="spoiler-content" style="display: block;"><p>You can look at all the bits separately and answer for each.</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 3</b><div class="spoiler-content" style="display: block;"><p>For each bit, we only care about the position of the last <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1086"><span class="MJXp-mn" id="MJXp-Span-1087">1</span></span></span><script type="math/tex" id="MathJax-Element-243">1</script> on it before <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1088"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1089">r</span></span></span><script type="math/tex" id="MathJax-Element-244">r</script>. Let that position be <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1090"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1091">x</span></span></span><script type="math/tex" id="MathJax-Element-245">x</script>. If <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1092"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1093">x</span><span class="MJXp-mo" id="MJXp-Span-1094" style="margin-left: 0.333em; margin-right: 0.333em;">&gt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1095">l</span></span></span><script type="math/tex" id="MathJax-Element-246">x>l</script>, then if <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1096"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1097">x</span></span></span><script type="math/tex" id="MathJax-Element-247">x</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1098"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1099">r</span></span></span><script type="math/tex" id="MathJax-Element-248">r</script> are of the same parity, the bit will be <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1100"><span class="MJXp-mn" id="MJXp-Span-1101">0</span></span></span><script type="math/tex" id="MathJax-Element-249">0</script>; otherwise, it will be <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1102"><span class="MJXp-mn" id="MJXp-Span-1103">1</span></span></span><script type="math/tex" id="MathJax-Element-250">1</script>. </p><p>If <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1104"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1105">x</span><span class="MJXp-mo" id="MJXp-Span-1106" style="margin-left: 0.333em; margin-right: 0.333em;">=</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1107">l</span></span></span><script type="math/tex" id="MathJax-Element-251">x=l</script>, the bit will be <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1108"><span class="MJXp-mn" id="MJXp-Span-1109">1</span></span></span><script type="math/tex" id="MathJax-Element-252">1</script> if <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1110"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1111">l</span></span></span><script type="math/tex" id="MathJax-Element-253">l</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1112"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1113">r</span></span></span><script type="math/tex" id="MathJax-Element-254">r</script> are the same parity and otherwise <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1114"><span class="MJXp-mn" id="MJXp-Span-1115">0</span></span></span><script type="math/tex" id="MathJax-Element-255">0</script>.</p><p>If <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1116"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1117">x</span><span class="MJXp-mo" id="MJXp-Span-1118" style="margin-left: 0.333em; margin-right: 0.333em;">&lt;</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1119">l</span></span></span><script type="math/tex" id="MathJax-Element-256">x<l</script>, the bit will be <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1120"><span class="MJXp-mn" id="MJXp-Span-1121">1</span></span></span><script type="math/tex" id="MathJax-Element-257">1</script> if <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1122"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1123">l</span></span></span><script type="math/tex" id="MathJax-Element-258">l</script> and <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1124"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1125">r</span></span></span><script type="math/tex" id="MathJax-Element-259">r</script> are different parity and otherwise <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1126"><span class="MJXp-mn" id="MJXp-Span-1127">0</span></span></span><script type="math/tex" id="MathJax-Element-260">0</script>.</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 4</b><div class="spoiler-content" style="display: block;"><p>From the previous hint we conclude that for a fixed <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1128"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1129">r</span></span></span><script type="math/tex" id="MathJax-Element-261">r</script>, the values of interval [$l$, <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1130"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1131">r</span></span></span><script type="math/tex" id="MathJax-Element-262">r</script>] repeat when you increase <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1132"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1133">l</span></span></span><script type="math/tex" id="MathJax-Element-263">l</script> by <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1134"><span class="MJXp-mn" id="MJXp-Span-1135">2</span></span></span><script type="math/tex" id="MathJax-Element-264">2</script>, except at positions near where last <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1136"><span class="MJXp-mn" id="MJXp-Span-1137">1</span></span></span><script type="math/tex" id="MathJax-Element-265">1</script> is for some bit.</p></div></div> <div class="spoiler"><b class="spoiler-title">Hint 5</b><div class="spoiler-content" style="display: block;"><p>That means there will be only <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1138"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1139">O</span><span class="MJXp-mo" id="MJXp-Span-1140" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1141">k</span><span class="MJXp-mo" id="MJXp-Span-1142" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-266">O(k)</script> different values of nor of an interval ending at some <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1143"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1144">r</span></span></span><script type="math/tex" id="MathJax-Element-267">r</script>.</p></div></div> <div class="spoiler"><b class="spoiler-title">Solution</b><div class="spoiler-content" style="display: block;"><p>Read the hints.</p><p>We can go from beginning to the end of the array and keep all the possible nor values of intervals ending at <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1145"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1146">r</span></span></span><script type="math/tex" id="MathJax-Element-268">r</script> in some vector. For each value we will also remember the highest position <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1147"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1148">l</span></span></span><script type="math/tex" id="MathJax-Element-269">l</script> for which we can obtain such value. When we find all those intervals for some <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1149"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1150">r</span></span></span><script type="math/tex" id="MathJax-Element-270">r</script>, we use segment tree to set answer to all positions in this interval to max of current answer and nor of our interval. Time complexity is <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1151"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1152">O</span><span class="MJXp-mo" id="MJXp-Span-1153" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1154">n</span><span class="MJXp-msubsup" id="MJXp-Span-1155"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1156" style="margin-right: 0.05em;">k</span><span class="MJXp-mn MJXp-script" id="MJXp-Span-1157" style="vertical-align: 0.5em;">2</span></span><span class="MJXp-mo" id="MJXp-Span-1158" style="margin-left: 0.267em; margin-right: 0.267em;">+</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1159">n</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1160">k</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1161">l</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1162">o</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1163">g</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1164">n</span><span class="MJXp-mo" id="MJXp-Span-1165" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-271">O(nk^2 + nk log n)</script> and memory complexity is <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1166"><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1167">O</span><span class="MJXp-mo" id="MJXp-Span-1168" style="margin-left: 0em; margin-right: 0em;">(</span><span class="MJXp-mi MJXp-italic" id="MJXp-Span-1169">n</span><span class="MJXp-mo" id="MJXp-Span-1170" style="margin-left: 0em; margin-right: 0em;">)</span></span></span><script type="math/tex" id="MathJax-Element-272">O(n)</script>.</p></div></div> <div class="spoiler"><b class="spoiler-title">Implementation</b><div class="spoiler-content" style="display: block;"><pre><code class="prettyprint prettyprinted" style=""><span class="com">#include</span><span class="pun">&lt;</span><span class="pln">bits</span><span class="pun">/</span><span class="pln">stdc</span><span class="pun">++.</span><span class="pln">h</span><span class="pun">&gt;</span><span class="pln">
</span><span class="com">#define</span><span class="pln"> ll </span><span class="kwd">long</span><span class="pln"> </span><span class="kwd">long</span><span class="pln">
</span><span class="kwd">using</span><span class="pln"> </span><span class="kwd">namespace</span><span class="pln"> std</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">const</span><span class="pln"> </span><span class="kwd">int</span><span class="pln"> maxn</span><span class="pun">=</span><span class="lit">2e5</span><span class="pun">+</span><span class="lit">5</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> N</span><span class="pun">,</span><span class="pln">M</span><span class="pun">,</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">maxn</span><span class="pun">],</span><span class="pln">pref</span><span class="pun">[</span><span class="pln">maxn</span><span class="pun">][</span><span class="lit">25</span><span class="pun">],</span><span class="pln">logg</span><span class="pun">,</span><span class="pln">st</span><span class="pun">[</span><span class="lit">4</span><span class="pun">*</span><span class="pln">maxn</span><span class="pun">],</span><span class="pln">stk</span><span class="pun">;</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> nor</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> a</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> b</span><span class="pun">){</span><span class="pln">
   </span><span class="kwd">return</span><span class="pln"> M</span><span class="pun">^(</span><span class="pln">a</span><span class="pun">|</span><span class="pln">b</span><span class="pun">);</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> getlog</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">){</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> ans</span><span class="pun">=-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">x</span><span class="pun">){</span><span class="pln">
      ans</span><span class="pun">+=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
      x</span><span class="pun">/=</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">return</span><span class="pln"> ans</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> internor</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> l</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r</span><span class="pun">){</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">l</span><span class="pun">&lt;=</span><span class="lit">0</span><span class="pln"> </span><span class="kwd">or</span><span class="pln"> l</span><span class="pun">&gt;</span><span class="pln">r</span><span class="pun">)</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">l</span><span class="pun">==</span><span class="pln">r</span><span class="pun">)</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> arr</span><span class="pun">[</span><span class="pln">r</span><span class="pun">];</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> ans</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">j</span><span class="pun">&lt;=</span><span class="pln">logg</span><span class="pun">;</span><span class="pln">j</span><span class="pun">++){</span><span class="pln">
      </span><span class="kwd">int</span><span class="pln"> bit</span><span class="pun">=(</span><span class="lit">1</span><span class="pun">&lt;&lt;</span><span class="pln">j</span><span class="pun">);</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">pref</span><span class="pun">[</span><span class="pln">r</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]&lt;</span><span class="pln">l</span><span class="pun">)</span><span class="pln">
         </span><span class="kwd">if</span><span class="pun">((</span><span class="pln">r</span><span class="pun">-</span><span class="pln">l</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)%</span><span class="lit">2</span><span class="pun">==</span><span class="lit">1</span><span class="pun">)</span><span class="pln">
            bit</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">pref</span><span class="pun">[</span><span class="pln">r</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]==</span><span class="pln">l</span><span class="pun">)</span><span class="pln">
         </span><span class="kwd">if</span><span class="pun">((</span><span class="pln">r</span><span class="pun">-</span><span class="pln">l</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)%</span><span class="lit">2</span><span class="pun">==</span><span class="lit">0</span><span class="pun">)</span><span class="pln">
            bit</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">pref</span><span class="pun">[</span><span class="pln">r</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]&gt;</span><span class="pln">l</span><span class="pun">)</span><span class="pln">
         </span><span class="kwd">if</span><span class="pun">((</span><span class="pln">r</span><span class="pun">-</span><span class="pln">pref</span><span class="pun">[</span><span class="pln">r</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]+</span><span class="lit">1</span><span class="pun">)%</span><span class="lit">2</span><span class="pun">==</span><span class="lit">1</span><span class="pun">)</span><span class="pln">
            bit</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
      ans</span><span class="pun">+=</span><span class="pln">bit</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">return</span><span class="pln"> ans</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> update</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> lb</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> rb</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> x</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> pos</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> l</span><span class="pun">=</span><span class="lit">1</span><span class="pun">,</span><span class="kwd">int</span><span class="pln"> r</span><span class="pun">=</span><span class="pln">stk</span><span class="pun">){</span><span class="pln">
   lb</span><span class="pun">=</span><span class="pln">max</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln">lb</span><span class="pun">);</span><span class="pln">
   rb</span><span class="pun">=</span><span class="pln">min</span><span class="pun">(</span><span class="pln">N</span><span class="pun">,</span><span class="pln">rb</span><span class="pun">);</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">rb</span><span class="pun">&lt;</span><span class="pln">lb</span><span class="pun">)</span><span class="pln">
      </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">l</span><span class="pun">==</span><span class="pln">lb </span><span class="kwd">and</span><span class="pln"> r</span><span class="pun">==</span><span class="pln">rb</span><span class="pun">){</span><span class="pln">
      st</span><span class="pun">[</span><span class="pln">pos</span><span class="pun">]=</span><span class="pln">max</span><span class="pun">(</span><span class="pln">st</span><span class="pun">[</span><span class="pln">pos</span><span class="pun">],</span><span class="pln">x</span><span class="pun">);</span><span class="pln">
      </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> mid</span><span class="pun">=(</span><span class="pln">l</span><span class="pun">+</span><span class="pln">r</span><span class="pun">)/</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">rb</span><span class="pun">&lt;=</span><span class="pln">mid</span><span class="pun">)</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> update</span><span class="pun">(</span><span class="pln">lb</span><span class="pun">,</span><span class="pln">rb</span><span class="pun">,</span><span class="pln">x</span><span class="pun">,</span><span class="pln">pos</span><span class="pun">*</span><span class="lit">2</span><span class="pun">,</span><span class="pln">l</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">);</span><span class="pln">
   </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">lb</span><span class="pun">&gt;</span><span class="pln">mid</span><span class="pun">)</span><span class="pln">
      </span><span class="kwd">return</span><span class="pln"> update</span><span class="pun">(</span><span class="pln">lb</span><span class="pun">,</span><span class="pln">rb</span><span class="pun">,</span><span class="pln">x</span><span class="pun">,</span><span class="pln">pos</span><span class="pun">*</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">r</span><span class="pun">);</span><span class="pln">
   update</span><span class="pun">(</span><span class="pln">lb</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">,</span><span class="pln">x</span><span class="pun">,</span><span class="pln">pos</span><span class="pun">*</span><span class="lit">2</span><span class="pun">,</span><span class="pln">l</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">);</span><span class="pln">
   update</span><span class="pun">(</span><span class="pln">mid</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">rb</span><span class="pun">,</span><span class="pln">x</span><span class="pun">,</span><span class="pln">pos</span><span class="pun">*</span><span class="lit">2</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">mid</span><span class="pun">+</span><span class="lit">1</span><span class="pun">,</span><span class="pln">r</span><span class="pun">);</span><span class="pln">
   </span><span class="kwd">return</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> </span><span class="kwd">get</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> pos</span><span class="pun">){</span><span class="pln">
   pos</span><span class="pun">+=</span><span class="pln">stk</span><span class="pun">-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> v</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">pos</span><span class="pun">){</span><span class="pln">
      v</span><span class="pun">=</span><span class="pln">max</span><span class="pun">(</span><span class="pln">v</span><span class="pun">,</span><span class="pln">st</span><span class="pun">[</span><span class="pln">pos</span><span class="pun">]);</span><span class="pln">
      pos</span><span class="pun">/=</span><span class="lit">2</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">return</span><span class="pln"> v</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> solve</span><span class="pun">(){</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> K</span><span class="pun">;</span><span class="pln">
   cin</span><span class="pun">&gt;&gt;</span><span class="pln">N</span><span class="pun">&gt;&gt;</span><span class="pln">K</span><span class="pun">;</span><span class="pln">
   stk</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">stk</span><span class="pun">&lt;</span><span class="pln">N</span><span class="pun">)</span><span class="pln">
      stk</span><span class="pun">&lt;&lt;=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
   M</span><span class="pun">=(</span><span class="lit">1</span><span class="pun">&lt;&lt;</span><span class="pln">K</span><span class="pun">)-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">N</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      cin</span><span class="pun">&gt;&gt;</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">];</span><span class="pln">

   logg</span><span class="pun">=</span><span class="pln">getlog</span><span class="pun">(</span><span class="pln">M</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)-</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">N</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span><span class="pln">
      </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">j</span><span class="pun">&lt;=</span><span class="pln">logg</span><span class="pun">;</span><span class="pln">j</span><span class="pun">++)</span><span class="pln">
         </span><span class="kwd">if</span><span class="pun">(</span><span class="pln">arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]&amp;(</span><span class="lit">1</span><span class="pun">&lt;&lt;</span><span class="pln">j</span><span class="pun">))</span><span class="pln">
            pref</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]=</span><span class="pln">i</span><span class="pun">;</span><span class="pln">
         </span><span class="kwd">else</span><span class="pln">
            pref</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]=</span><span class="pln">pref</span><span class="pun">[</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">][</span><span class="pln">j</span><span class="pun">];</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">N</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span><span class="pln">
      </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">j</span><span class="pun">&lt;=</span><span class="pln">logg</span><span class="pun">;</span><span class="pln">j</span><span class="pun">++){</span><span class="pln">
         </span><span class="kwd">int</span><span class="pln"> p</span><span class="pun">=</span><span class="pln">pref</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">];</span><span class="pln">
         </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> </span><span class="kwd">add</span><span class="pun">=-</span><span class="lit">2</span><span class="pun">;</span><span class="kwd">add</span><span class="pun">&lt;=</span><span class="lit">2</span><span class="pun">;</span><span class="kwd">add</span><span class="pun">++)</span><span class="pln">
            update</span><span class="pun">(</span><span class="pln">p</span><span class="pun">+</span><span class="kwd">add</span><span class="pun">,</span><span class="pln">i</span><span class="pun">,</span><span class="pln">internor</span><span class="pun">(</span><span class="pln">p</span><span class="pun">+</span><span class="kwd">add</span><span class="pun">,</span><span class="pln">i</span><span class="pun">));</span><span class="pln">
      </span><span class="pun">}</span><span class="pln">
      update</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln">i</span><span class="pun">,</span><span class="pln">internor</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln">i</span><span class="pun">));</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">N</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      cout</span><span class="pun">&lt;&lt;</span><span class="kwd">get</span><span class="pun">(</span><span class="pln">i</span><span class="pun">)&lt;&lt;</span><span class="str">" \n"</span><span class="pun">[</span><span class="pln">i</span><span class="pun">==</span><span class="pln">N</span><span class="pun">];</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">void</span><span class="pln"> reset</span><span class="pun">(){</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">N</span><span class="pun">+</span><span class="lit">2</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++){</span><span class="pln">
      arr</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
      </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> j</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">j</span><span class="pun">&lt;=</span><span class="pln">logg</span><span class="pun">+</span><span class="lit">2</span><span class="pun">;</span><span class="pln">j</span><span class="pun">++)</span><span class="pln">
         pref</span><span class="pun">[</span><span class="pln">i</span><span class="pun">][</span><span class="pln">j</span><span class="pun">]=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   logg</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">for</span><span class="pun">(</span><span class="kwd">int</span><span class="pln"> i</span><span class="pun">=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">i</span><span class="pun">&lt;=</span><span class="pln">stk</span><span class="pun">+</span><span class="pln">stk</span><span class="pun">;</span><span class="pln">i</span><span class="pun">++)</span><span class="pln">
      st</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]=</span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span><span class="pln">
</span><span class="kwd">int</span><span class="pln"> main</span><span class="pun">(){</span><span class="pln">
   </span><span class="kwd">int</span><span class="pln"> T</span><span class="pun">=</span><span class="lit">1</span><span class="pun">;</span><span class="pln">
   cin</span><span class="pun">&gt;&gt;</span><span class="pln">T</span><span class="pun">;</span><span class="pln">
   </span><span class="kwd">while</span><span class="pun">(</span><span class="pln">T</span><span class="pun">--){</span><span class="pln">
      solve</span><span class="pun">();</span><span class="pln">
      reset</span><span class="pun">();</span><span class="pln">
   </span><span class="pun">}</span><span class="pln">
   </span><span class="kwd">return</span><span class="pln"> </span><span class="lit">0</span><span class="pun">;</span><span class="pln">
</span><span class="pun">}</span></code></pre></div></div> <div class="spoiler"><b class="spoiler-title">Bonus</b><div class="spoiler-content" style="display: block;"><p>Nor and Nand are well known for being able to mimic any bitwise operation if applied enough times. Make a circuit to add three <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1171"><span class="MJXp-mn" id="MJXp-Span-1172">1</span></span></span><script type="math/tex" id="MathJax-Element-273">1</script>-bit numbers (those are zero and one) using <span class="MathJax_Preview" style="color: inherit;"><span class="MJXp-math" id="MJXp-Span-1173"><span class="MJXp-mn" id="MJXp-Span-1174">9</span></span></span><script type="math/tex" id="MathJax-Element-274">9</script> NAND gates.</p></div></div></div>

    </div>


        <div style="font-size: 1.1rem;line-height: 1.1rem;padding-bottom: 0.5em;">
            <img src="https://codeforces.com//codeforces.com/codeforces.org/s/52448/images/icons/paperclip-16x16.png" style="vertical-align: middle;"> <span style="padding: 0 0.35em;">Tutorial of <a href="https://codeforces.com/contest/2103" class="notice" style="text-decoration: none;">Codeforces Round 1019 (Div. 2)</a> </span>
        </div>
        
            

  <script>
    // Make all spoilers toggleable
    document.querySelectorAll('.spoiler-title').forEach(title => {
      title.addEventListener('click', function() {
        const spoiler = this.closest('.spoiler');
        spoiler.classList.toggle('open');
      });
    });
    
    // Open all spoilers by default for easier reading
    document.querySelectorAll('.spoiler').forEach(spoiler => {
      spoiler.classList.add('open');
    });
  </script>
</body>
</html>