[
  {
    "id": "ai-bayes-theorem-drug-screening-1",
    "domain": "ai_primers",
    "category": "Miscellaneous",
    "article": "Bayes’ Theorem",
    "articleSlug": "bayes-theorem",
    "chapter": "Practical Example with Python Code",
    "title": "Drug Screening",
    "subtitle": "Practical Example with Python Code",
    "contentHtml": "<ul>\n  <li>\n    <p>As an example, let’s apply Bayes’ rule to a problem of drug screening (e.g. mandatory testing for federal or many other jobs which promise a drug-free work environment).</p>\n  </li>\n  <li>\n    <p>Suppose that a test for using a particular drug is 97% sensitive and 95% specific. That is, the test will produce 97% true positive results for drug users and 95% true negative results for non-drug users. These are the pieces of data that any screening test will have from their history of tests. Bayes’ rule allows us to use this kind of data-driven knowledge to calculate the final probability.</p>\n  </li>\n  <li>\n    <p>Suppose, we also know that 0.5% of the general population are users of the drug. What is the probability that a randomly selected individual with a positive test is a drug user?</p>\n  </li>\n  <li>\n    <p><strong>Note, this is the crucial piece of ‘Prior’</strong> which is a piece of generalized knowledge about the common prevalence rate. This is our prior belief about the probability of a random test subject being a drug user. That means if <strong>we choose a random person from the general population, without any testing, we can only say that there is a 0.5% chance of that person being a drug-user.</strong></p>\n  </li>\n  <li>\n    <p>How to use Bayes’ rule then, in this situation?</p>\n  </li>\n  <li>\n    <p>We will write a custom function that accepts the test capabilities and the prior knowledge of drug user percentage as input and produces the output probability of a test-taker being a user based on a positive result.</p>\n  </li>\n  <li>\n    <p>Here is the formula for computing as per the Bayes’ rule:</p>\n  </li>\n</ul>\n<p>As an example, let’s apply Bayes’ rule to a problem of drug screening (e.g. mandatory testing for federal or many other jobs which promise a drug-free work environment).</p>\n<p>Suppose that a test for using a particular drug is 97% sensitive and 95% specific. That is, the test will produce 97% true positive results for drug users and 95% true negative results for non-drug users. These are the pieces of data that any screening test will have from their history of tests. Bayes’ rule allows us to use this kind of data-driven knowledge to calculate the final probability.</p>\n<p>Suppose, we also know that 0.5% of the general population are users of the drug. What is the probability that a randomly selected individual with a positive test is a drug user?</p>\n<p><strong>Note, this is the crucial piece of ‘Prior’</strong> which is a piece of generalized knowledge about the common prevalence rate. This is our prior belief about the probability of a random test subject being a drug user. That means if <strong>we choose a random person from the general population, without any testing, we can only say that there is a 0.5% chance of that person being a drug-user.</strong></p>\n<p>How to use Bayes’ rule then, in this situation?</p>\n<p>We will write a custom function that accepts the test capabilities and the prior knowledge of drug user percentage as input and produces the output probability of a test-taker being a user based on a positive result.</p>\n<p>Here is the formula for computing as per the Bayes’ rule:</p>\n<p><img src=\"/primers/ai/assets/bayes-theorem/bayes5.png\" alt=\"\"></p>\n<ul>\n  <li>If we run the function with the given data, we get the following result,</li>\n</ul>\n<p><img src=\"/primers/ai/assets/bayes-theorem/bayes10.png\" alt=\"\"></p>",
    "contentMarkdown": "*   As an example, let’s apply Bayes’ rule to a problem of drug screening (e.g. mandatory testing for federal or many other jobs which promise a drug-free work environment).\n    \n*   Suppose that a test for using a particular drug is 97% sensitive and 95% specific. That is, the test will produce 97% true positive results for drug users and 95% true negative results for non-drug users. These are the pieces of data that any screening test will have from their history of tests. Bayes’ rule allows us to use this kind of data-driven knowledge to calculate the final probability.\n    \n*   Suppose, we also know that 0.5% of the general population are users of the drug. What is the probability that a randomly selected individual with a positive test is a drug user?\n    \n*   **Note, this is the crucial piece of ‘Prior’** which is a piece of generalized knowledge about the common prevalence rate. This is our prior belief about the probability of a random test subject being a drug user. That means if **we choose a random person from the general population, without any testing, we can only say that there is a 0.5% chance of that person being a drug-user.**\n    \n*   How to use Bayes’ rule then, in this situation?\n    \n*   We will write a custom function that accepts the test capabilities and the prior knowledge of drug user percentage as input and produces the output probability of a test-taker being a user based on a positive result.\n    \n*   Here is the formula for computing as per the Bayes’ rule:\n    \n\nAs an example, let’s apply Bayes’ rule to a problem of drug screening (e.g. mandatory testing for federal or many other jobs which promise a drug-free work environment).\n\nSuppose that a test for using a particular drug is 97% sensitive and 95% specific. That is, the test will produce 97% true positive results for drug users and 95% true negative results for non-drug users. These are the pieces of data that any screening test will have from their history of tests. Bayes’ rule allows us to use this kind of data-driven knowledge to calculate the final probability.\n\nSuppose, we also know that 0.5% of the general population are users of the drug. What is the probability that a randomly selected individual with a positive test is a drug user?\n\n**Note, this is the crucial piece of ‘Prior’** which is a piece of generalized knowledge about the common prevalence rate. This is our prior belief about the probability of a random test subject being a drug user. That means if **we choose a random person from the general population, without any testing, we can only say that there is a 0.5% chance of that person being a drug-user.**\n\nHow to use Bayes’ rule then, in this situation?\n\nWe will write a custom function that accepts the test capabilities and the prior knowledge of drug user percentage as input and produces the output probability of a test-taker being a user based on a positive result.\n\nHere is the formula for computing as per the Bayes’ rule:\n\n![](/primers/ai/assets/bayes-theorem/bayes5.png)\n\n*   If we run the function with the given data, we get the following result,\n\n![](/primers/ai/assets/bayes-theorem/bayes10.png)",
    "order": 1,
    "orderInChapter": 1,
    "difficulty": 2,
    "estimatedMinutes": 3,
    "tags": [
      "miscellaneous"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": true,
      "wordCount": 532,
      "contentLength": 3437
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/bayes-theorem/#drug-screening",
    "scrapedAt": "2025-12-28T11:57:01.819Z"
  },
  {
    "id": "ai-bayes-theorem-what-is-fascinating-here-2",
    "domain": "ai_primers",
    "category": "Miscellaneous",
    "article": "Bayes’ Theorem",
    "articleSlug": "bayes-theorem",
    "chapter": "Practical Example with Python Code",
    "title": "What is Fascinating Here?",
    "subtitle": "Practical Example with Python Code",
    "contentHtml": "<ul>\n  <li>\n    <p>Even with a test that is 97% correct for catching positive cases, and 95% correct for rejecting negative cases, the true probability of being a drug-user with a positive result is only 8.9%!</p>\n  </li>\n  <li>\n    <p>If you look at the computations, this is because of the extremely low prevalence rate. <strong>The number of false positives outweighs the number of true positives.</strong></p>\n  </li>\n  <li>\n    <p>For example, if 1000 individuals are tested, there are expected to be 995 non-users and 5 users. From the 995 non-users, 0.05 × 995 ≃ 50 false positives are expected. From the 5 users, 0.95 × 5 ≈ 5 true positives are expected. Out of 55 positive results, only 5 are genuine!</p>\n  </li>\n  <li>\n    <p>Let’s see how the probability changes with the prevalence rate.</p>\n  </li>\n</ul>\n<p>Even with a test that is 97% correct for catching positive cases, and 95% correct for rejecting negative cases, the true probability of being a drug-user with a positive result is only 8.9%!</p>\n<p>If you look at the computations, this is because of the extremely low prevalence rate. <strong>The number of false positives outweighs the number of true positives.</strong></p>\n<p>For example, if 1000 individuals are tested, there are expected to be 995 non-users and 5 users. From the 995 non-users, 0.05 × 995 ≃ 50 false positives are expected. From the 5 users, 0.95 × 5 ≈ 5 true positives are expected. Out of 55 positive results, only 5 are genuine!</p>\n<p>Let’s see how the probability changes with the prevalence rate.</p>\n<p><img src=\"/primers/ai/assets/bayes-theorem/bayes6.png\" alt=\"\"></p>\n<ul>\n  <li>Note, your decision depends on the probability threshold. Currently, it is set to 0.5. You can lower it if necessary. But, at the threshold of 0.5, <strong>you need to have an almost 4.8% prevalence rate to catch a user with a single positive test result.</strong></li>\n</ul>",
    "contentMarkdown": "*   Even with a test that is 97% correct for catching positive cases, and 95% correct for rejecting negative cases, the true probability of being a drug-user with a positive result is only 8.9%!\n    \n*   If you look at the computations, this is because of the extremely low prevalence rate. **The number of false positives outweighs the number of true positives.**\n    \n*   For example, if 1000 individuals are tested, there are expected to be 995 non-users and 5 users. From the 995 non-users, 0.05 × 995 ≃ 50 false positives are expected. From the 5 users, 0.95 × 5 ≈ 5 true positives are expected. Out of 55 positive results, only 5 are genuine!\n    \n*   Let’s see how the probability changes with the prevalence rate.\n    \n\nEven with a test that is 97% correct for catching positive cases, and 95% correct for rejecting negative cases, the true probability of being a drug-user with a positive result is only 8.9%!\n\nIf you look at the computations, this is because of the extremely low prevalence rate. **The number of false positives outweighs the number of true positives.**\n\nFor example, if 1000 individuals are tested, there are expected to be 995 non-users and 5 users. From the 995 non-users, 0.05 × 995 ≃ 50 false positives are expected. From the 5 users, 0.95 × 5 ≈ 5 true positives are expected. Out of 55 positive results, only 5 are genuine!\n\nLet’s see how the probability changes with the prevalence rate.\n\n![](/primers/ai/assets/bayes-theorem/bayes6.png)\n\n*   Note, your decision depends on the probability threshold. Currently, it is set to 0.5. You can lower it if necessary. But, at the threshold of 0.5, **you need to have an almost 4.8% prevalence rate to catch a user with a single positive test result.**",
    "order": 2,
    "orderInChapter": 2,
    "difficulty": 2,
    "estimatedMinutes": 2,
    "tags": [
      "miscellaneous"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": true,
      "wordCount": 293,
      "contentLength": 1907
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/bayes-theorem/#what-is-fascinating-here?",
    "scrapedAt": "2025-12-28T11:57:01.820Z"
  },
  {
    "id": "ai-bayes-theorem-what-level-of-test-capability-is-needed-to-improve-3",
    "domain": "ai_primers",
    "category": "Miscellaneous",
    "article": "Bayes’ Theorem",
    "articleSlug": "bayes-theorem",
    "chapter": "Practical Example with Python Code",
    "title": "What Level of Test Capability is Needed to Improve This Scenario?",
    "subtitle": "Practical Example with Python Code",
    "contentHtml": "<ul>\n  <li>We saw that the test sensitivity and specificity impact this computation strongly. So, we may like to see what kind of capabilities are needed to improve the likelihood of catching drug users.</li>\n</ul>\n<p><img src=\"../assets/bayes-theorem/bayes7.png\" align=\"center\" style=\"background-color: #fff; margin: 10px auto\"></p>\n<p><img src=\"../assets/bayes-theorem/bayes8.png\" align=\"center\" style=\"background-color: #fff; margin: 10px auto\"></p>\n<ul>\n  <li>\n    <p>The plots above clearly show that even with close to 100% sensitivity, we don’t gain much at all. However, <strong>the probability response is highly non-linear with respect to the specificity of the test</strong> and as it reaches perfection, we get a large increase in the probability. Therefore, <strong>all R&amp;D efforts should be focused on how to improve the specificity of the test.</strong></p>\n  </li>\n  <li>\n    <p>This conclusion can be intuitively derived from the fact that the main issue with having low probability is the low prevalence rate. Therefore, catching non-users correctly (i.e., improving specificity) is the area where we should focus on because they are much larger in numbers than the user.</p>\n  </li>\n  <li>\n    <p>Negative examples are much higher in number than the Positive examples in this problem. Therefore, the True Negative performance of the test should be excellent.</p>\n  </li>\n</ul>\n<p>The plots above clearly show that even with close to 100% sensitivity, we don’t gain much at all. However, <strong>the probability response is highly non-linear with respect to the specificity of the test</strong> and as it reaches perfection, we get a large increase in the probability. Therefore, <strong>all R&amp;D efforts should be focused on how to improve the specificity of the test.</strong></p>\n<p>This conclusion can be intuitively derived from the fact that the main issue with having low probability is the low prevalence rate. Therefore, catching non-users correctly (i.e., improving specificity) is the area where we should focus on because they are much larger in numbers than the user.</p>\n<p>Negative examples are much higher in number than the Positive examples in this problem. Therefore, the True Negative performance of the test should be excellent.</p>",
    "contentMarkdown": "*   We saw that the test sensitivity and specificity impact this computation strongly. So, we may like to see what kind of capabilities are needed to improve the likelihood of catching drug users.\n\n![](../assets/bayes-theorem/bayes7.png)\n\n![](../assets/bayes-theorem/bayes8.png)\n\n*   The plots above clearly show that even with close to 100% sensitivity, we don’t gain much at all. However, **the probability response is highly non-linear with respect to the specificity of the test** and as it reaches perfection, we get a large increase in the probability. Therefore, **all R&D efforts should be focused on how to improve the specificity of the test.**\n    \n*   This conclusion can be intuitively derived from the fact that the main issue with having low probability is the low prevalence rate. Therefore, catching non-users correctly (i.e., improving specificity) is the area where we should focus on because they are much larger in numbers than the user.\n    \n*   Negative examples are much higher in number than the Positive examples in this problem. Therefore, the True Negative performance of the test should be excellent.\n    \n\nThe plots above clearly show that even with close to 100% sensitivity, we don’t gain much at all. However, **the probability response is highly non-linear with respect to the specificity of the test** and as it reaches perfection, we get a large increase in the probability. Therefore, **all R&D efforts should be focused on how to improve the specificity of the test.**\n\nThis conclusion can be intuitively derived from the fact that the main issue with having low probability is the low prevalence rate. Therefore, catching non-users correctly (i.e., improving specificity) is the area where we should focus on because they are much larger in numbers than the user.\n\nNegative examples are much higher in number than the Positive examples in this problem. Therefore, the True Negative performance of the test should be excellent.",
    "order": 3,
    "orderInChapter": 3,
    "difficulty": 2,
    "estimatedMinutes": 2,
    "tags": [
      "miscellaneous"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": true,
      "wordCount": 306,
      "contentLength": 2278
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/bayes-theorem/#what-level-of-test-capability-is-needed-to-improve-this-scenario?",
    "scrapedAt": "2025-12-28T11:57:01.820Z"
  }
]