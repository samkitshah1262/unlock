<!DOCTYPE html><html lang="en"><head><style type="text/css" id="nanobarcss">.nanobar{width:100%;height:4px;z-index:9999;top:0}.bar{width:0;height:100%;transition:height .3s;background:#000}</style><style>#back-to-top{background:#fff;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;bottom:20px;-webkit-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);-moz-box-shadow:0 2px 5px 0 rgba(0,0,0,.26);box-shadow:0 2px 5px 0 rgba(0,0,0,.26);color:#333;cursor:pointer;display:block;height:56px;opacity:1;outline:0;position:fixed;right:20px;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none;-webkit-transition:bottom .2s,opacity .2s;-o-transition:bottom .2s,opacity .2s;-moz-transition:bottom .2s,opacity .2s;transition:bottom .2s,opacity .2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:56px;z-index:1}#back-to-top svg{display:block;fill:currentColor;height:24px;margin:16px auto 0;width:24px}#back-to-top.hidden{bottom:-56px;opacity:0}</style>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Aman's AI Journal • Primers • LLM-as-a-Judge / Autoraters</title>
  <meta name="viewport" content="width=device-width">
  <meta name="description" content="Aman's AI Journal | Course notes and learning material for Artificial Intelligence and Deep Learning Stanford classes.">
  <link rel="canonical" href="https://aman.ai/primers/ai/LLM-as-a-judge/">

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/main.css">

  <!-- Google fonts -->
  <!-- <link href='https://fonts.googleapis.com/css?family=Roboto:400,300' rel='stylesheet' type='text/css'>-->

  <!-- RSS feed -->
  <link rel="alternate" type="application/atom+xml" title="Aman’s AI Journal" href="/feed.xml">  
  
  <link href="https://aman.ai/favicon.jpg" rel="shortcut icon">

  <!-- Google ads -->
  <script src="https://pagead2.googlesyndication.com/pagead/managed/js/adsense/m202512100101/show_ads_impl.js"></script><script async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5905744527956213" crossorigin="anonymous" data-checked-head="true"></script>
<meta http-equiv="origin-trial" content="AlK2UR5SkAlj8jjdEc9p3F3xuFYlF6LYjAML3EOqw1g26eCwWPjdmecULvBH5MVPoqKYrOfPhYVL71xAXI1IBQoAAAB8eyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="><meta http-equiv="origin-trial" content="Amm8/NmvvQfhwCib6I7ZsmUxiSCfOxWxHayJwyU1r3gRIItzr7bNQid6O8ZYaE1GSQTa69WwhPC9flq/oYkRBwsAAACCeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiV2ViVmlld1hSZXF1ZXN0ZWRXaXRoRGVwcmVjYXRpb24iLCJleHBpcnkiOjE3NTgwNjcxOTksImlzU3ViZG9tYWluIjp0cnVlfQ=="><meta http-equiv="origin-trial" content="A9nrunKdU5m96PSN1XsSGr3qOP0lvPFUB2AiAylCDlN5DTl17uDFkpQuHj1AFtgWLxpLaiBZuhrtb2WOu7ofHwEAAACKeyJvcmlnaW4iOiJodHRwczovL2RvdWJsZWNsaWNrLm5ldDo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A93bovR+QVXNx2/38qDbmeYYf1wdte9EO37K9eMq3r+541qo0byhYU899BhPB7Cv9QqD7wIbR1B6OAc9kEfYCA4AAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXN5bmRpY2F0aW9uLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><meta http-equiv="origin-trial" content="A1S5fojrAunSDrFbD8OfGmFHdRFZymSM/1ss3G+NEttCLfHkXvlcF6LGLH8Mo5PakLO1sCASXU1/gQf6XGuTBgwAAACQeyJvcmlnaW4iOiJodHRwczovL2dvb2dsZXRhZ3NlcnZpY2VzLmNvbTo0NDMiLCJmZWF0dXJlIjoiQUlQcm9tcHRBUElNdWx0aW1vZGFsSW5wdXQiLCJleHBpcnkiOjE3NzQzMTA0MDAsImlzU3ViZG9tYWluIjp0cnVlLCJpc1RoaXJkUGFydHkiOnRydWV9"><style type="text/css">.MathJax_Hover_Frame {border-radius: .25em; -webkit-border-radius: .25em; -moz-border-radius: .25em; -khtml-border-radius: .25em; box-shadow: 0px 0px 15px #83A; -webkit-box-shadow: 0px 0px 15px #83A; -moz-box-shadow: 0px 0px 15px #83A; -khtml-box-shadow: 0px 0px 15px #83A; border: 1px solid #A6D ! important; display: inline-block; position: absolute}
.MathJax_Menu_Button .MathJax_Hover_Arrow {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 4px; -webkit-border-radius: 4px; -moz-border-radius: 4px; -khtml-border-radius: 4px; font-family: 'Courier New',Courier; font-size: 9px; color: #F0F0F0}
.MathJax_Menu_Button .MathJax_Hover_Arrow span {display: block; background-color: #AAA; border: 1px solid; border-radius: 3px; line-height: 0; padding: 4px}
.MathJax_Hover_Arrow:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_Hover_Arrow:hover span {background-color: #CCC!important}
</style><style type="text/css">#MathJax_About {position: fixed; left: 50%; width: auto; text-align: center; border: 3px outset; padding: 1em 2em; background-color: #DDDDDD; color: black; cursor: default; font-family: message-box; font-size: 120%; font-style: normal; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 15px; -webkit-border-radius: 15px; -moz-border-radius: 15px; -khtml-border-radius: 15px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_About.MathJax_MousePost {outline: none}
.MathJax_Menu {position: absolute; background-color: white; color: black; width: auto; padding: 5px 0px; border: 1px solid #CCCCCC; margin: 0; cursor: default; font: menu; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; z-index: 201; border-radius: 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; -khtml-border-radius: 5px; box-shadow: 0px 10px 20px #808080; -webkit-box-shadow: 0px 10px 20px #808080; -moz-box-shadow: 0px 10px 20px #808080; -khtml-box-shadow: 0px 10px 20px #808080; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
.MathJax_MenuItem {padding: 1px 2em; background: transparent}
.MathJax_MenuArrow {position: absolute; right: .5em; padding-top: .25em; color: #666666; font-size: .75em}
.MathJax_MenuActive .MathJax_MenuArrow {color: white}
.MathJax_MenuArrow.RTL {left: .5em; right: auto}
.MathJax_MenuCheck {position: absolute; left: .7em}
.MathJax_MenuCheck.RTL {right: .7em; left: auto}
.MathJax_MenuRadioCheck {position: absolute; left: .7em}
.MathJax_MenuRadioCheck.RTL {right: .7em; left: auto}
.MathJax_MenuLabel {padding: 1px 2em 3px 1.33em; font-style: italic}
.MathJax_MenuRule {border-top: 1px solid #DDDDDD; margin: 4px 3px}
.MathJax_MenuDisabled {color: GrayText}
.MathJax_MenuActive {background-color: #606872; color: white}
.MathJax_MenuDisabled:focus, .MathJax_MenuLabel:focus {background-color: #E8E8E8}
.MathJax_ContextMenu:focus {outline: none}
.MathJax_ContextMenu .MathJax_MenuItem:focus {outline: none}
#MathJax_AboutClose {top: .2em; right: .2em}
.MathJax_Menu .MathJax_MenuClose {top: -10px; left: -10px}
.MathJax_MenuClose {position: absolute; cursor: pointer; display: inline-block; border: 2px solid #AAA; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; font-family: 'Courier New',Courier; font-size: 24px; color: #F0F0F0}
.MathJax_MenuClose span {display: block; background-color: #AAA; border: 1.5px solid; border-radius: 18px; -webkit-border-radius: 18px; -moz-border-radius: 18px; -khtml-border-radius: 18px; line-height: 0; padding: 8px 0 6px}
.MathJax_MenuClose:hover {color: white!important; border: 2px solid #CCC!important}
.MathJax_MenuClose:hover span {background-color: #CCC!important}
.MathJax_MenuClose:hover:focus {outline: none}
</style><style type="text/css">.MathJax_Preview .MJXf-math {color: inherit!important}
</style><style type="text/css">.MJX_Assistive_MathML {position: absolute!important; top: 0; left: 0; clip: rect(1px, 1px, 1px, 1px); padding: 1px 0 0 0!important; border: 0!important; height: 1px!important; width: 1px!important; overflow: hidden!important; display: block!important; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none}
.MJX_Assistive_MathML.MJX_Assistive_MathML_Block {width: 100%!important}
</style><style type="text/css">#MathJax_Zoom {position: absolute; background-color: #F0F0F0; overflow: auto; display: block; z-index: 301; padding: .5em; border: 1px solid black; margin: 0; font-weight: normal; font-style: normal; text-align: left; text-indent: 0; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; -webkit-box-sizing: content-box; -moz-box-sizing: content-box; box-sizing: content-box; box-shadow: 5px 5px 15px #AAAAAA; -webkit-box-shadow: 5px 5px 15px #AAAAAA; -moz-box-shadow: 5px 5px 15px #AAAAAA; -khtml-box-shadow: 5px 5px 15px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true')}
#MathJax_ZoomOverlay {position: absolute; left: 0; top: 0; z-index: 300; display: inline-block; width: 100%; height: 100%; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
#MathJax_ZoomFrame {position: relative; display: inline-block; height: 0; width: 0}
#MathJax_ZoomEventTrap {position: absolute; left: 0; top: 0; z-index: 302; display: inline-block; border: 0; padding: 0; margin: 0; background-color: white; opacity: 0; filter: alpha(opacity=0)}
</style><style type="text/css">.MathJax_Preview {color: #888}
#MathJax_Message {position: fixed; left: 1em; bottom: 1.5em; background-color: #E6E6E6; border: 1px solid #959595; margin: 0px; padding: 2px 8px; z-index: 102; color: black; font-size: 80%; width: auto; white-space: nowrap}
#MathJax_MSIE_Frame {position: absolute; top: 0; left: 0; width: 0px; z-index: 101; border: 0px; margin: 0px; padding: 0px}
.MathJax_Error {color: #CC0000; font-style: italic}
</style><style type="text/css">.MJXp-script {font-size: .8em}
.MJXp-right {-webkit-transform-origin: right; -moz-transform-origin: right; -ms-transform-origin: right; -o-transform-origin: right; transform-origin: right}
.MJXp-bold {font-weight: bold}
.MJXp-italic {font-style: italic}
.MJXp-scr {font-family: MathJax_Script,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-frak {font-family: MathJax_Fraktur,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-sf {font-family: MathJax_SansSerif,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-cal {font-family: MathJax_Caligraphic,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-mono {font-family: MathJax_Typewriter,'Times New Roman',Times,STIXGeneral,serif}
.MJXp-largeop {font-size: 150%}
.MJXp-largeop.MJXp-int {vertical-align: -.2em}
.MJXp-math {display: inline-block; line-height: 1.2; text-indent: 0; font-family: 'Times New Roman',Times,STIXGeneral,serif; white-space: nowrap; border-collapse: collapse}
.MJXp-display {display: block; text-align: center; margin: 1em 0}
.MJXp-math span {display: inline-block}
.MJXp-box {display: block!important; text-align: center}
.MJXp-box:after {content: " "}
.MJXp-rule {display: block!important; margin-top: .1em}
.MJXp-char {display: block!important}
.MJXp-mo {margin: 0 .15em}
.MJXp-mfrac {margin: 0 .125em; vertical-align: .25em}
.MJXp-denom {display: inline-table!important; width: 100%}
.MJXp-denom > * {display: table-row!important}
.MJXp-surd {vertical-align: top}
.MJXp-surd > * {display: block!important}
.MJXp-script-box > *  {display: table!important; height: 50%}
.MJXp-script-box > * > * {display: table-cell!important; vertical-align: top}
.MJXp-script-box > *:last-child > * {vertical-align: bottom}
.MJXp-script-box > * > * > * {display: block!important}
.MJXp-mphantom {visibility: hidden}
.MJXp-munderover {display: inline-table!important}
.MJXp-over {display: inline-block!important; text-align: center}
.MJXp-over > * {display: block!important}
.MJXp-munderover > * {display: table-row!important}
.MJXp-mtable {vertical-align: .25em; margin: 0 .125em}
.MJXp-mtable > * {display: inline-table!important; vertical-align: middle}
.MJXp-mtr {display: table-row!important}
.MJXp-mtd {display: table-cell!important; text-align: center; padding: .5em 0 0 .5em}
.MJXp-mtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-mlabeledtr {display: table-row!important}
.MJXp-mlabeledtr > .MJXp-mtd:first-child {padding-left: 0}
.MJXp-mlabeledtr:first-child > .MJXp-mtd {padding-top: 0}
.MJXp-merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MJXp-scale0 {-webkit-transform: scaleX(.0); -moz-transform: scaleX(.0); -ms-transform: scaleX(.0); -o-transform: scaleX(.0); transform: scaleX(.0)}
.MJXp-scale1 {-webkit-transform: scaleX(.1); -moz-transform: scaleX(.1); -ms-transform: scaleX(.1); -o-transform: scaleX(.1); transform: scaleX(.1)}
.MJXp-scale2 {-webkit-transform: scaleX(.2); -moz-transform: scaleX(.2); -ms-transform: scaleX(.2); -o-transform: scaleX(.2); transform: scaleX(.2)}
.MJXp-scale3 {-webkit-transform: scaleX(.3); -moz-transform: scaleX(.3); -ms-transform: scaleX(.3); -o-transform: scaleX(.3); transform: scaleX(.3)}
.MJXp-scale4 {-webkit-transform: scaleX(.4); -moz-transform: scaleX(.4); -ms-transform: scaleX(.4); -o-transform: scaleX(.4); transform: scaleX(.4)}
.MJXp-scale5 {-webkit-transform: scaleX(.5); -moz-transform: scaleX(.5); -ms-transform: scaleX(.5); -o-transform: scaleX(.5); transform: scaleX(.5)}
.MJXp-scale6 {-webkit-transform: scaleX(.6); -moz-transform: scaleX(.6); -ms-transform: scaleX(.6); -o-transform: scaleX(.6); transform: scaleX(.6)}
.MJXp-scale7 {-webkit-transform: scaleX(.7); -moz-transform: scaleX(.7); -ms-transform: scaleX(.7); -o-transform: scaleX(.7); transform: scaleX(.7)}
.MJXp-scale8 {-webkit-transform: scaleX(.8); -moz-transform: scaleX(.8); -ms-transform: scaleX(.8); -o-transform: scaleX(.8); transform: scaleX(.8)}
.MJXp-scale9 {-webkit-transform: scaleX(.9); -moz-transform: scaleX(.9); -ms-transform: scaleX(.9); -o-transform: scaleX(.9); transform: scaleX(.9)}
.MathJax_PHTML .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><style type="text/css">.MathJax_Display {text-align: center; margin: 1em 0em; position: relative; display: block!important; text-indent: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; width: 100%}
.MathJax .merror {background-color: #FFFF88; color: #CC0000; border: 1px solid #CC0000; padding: 1px 3px; font-style: normal; font-size: 90%}
.MathJax .MJX-monospace {font-family: monospace}
.MathJax .MJX-sans-serif {font-family: sans-serif}
#MathJax_Tooltip {background-color: InfoBackground; color: InfoText; border: 1px solid black; box-shadow: 2px 2px 5px #AAAAAA; -webkit-box-shadow: 2px 2px 5px #AAAAAA; -moz-box-shadow: 2px 2px 5px #AAAAAA; -khtml-box-shadow: 2px 2px 5px #AAAAAA; filter: progid:DXImageTransform.Microsoft.dropshadow(OffX=2, OffY=2, Color='gray', Positive='true'); padding: 3px 4px; z-index: 401; position: absolute; left: 0; top: 0; width: auto; height: auto; display: none}
.MathJax {display: inline; font-style: normal; font-weight: normal; line-height: normal; font-size: 100%; font-size-adjust: none; text-indent: 0; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0; min-height: 0; border: 0; padding: 0; margin: 0}
.MathJax:focus, body :focus .MathJax {display: inline-table}
.MathJax.MathJax_FullWidth {text-align: center; display: table-cell!important; width: 10000em!important}
.MathJax img, .MathJax nobr, .MathJax a {border: 0; padding: 0; margin: 0; max-width: none; max-height: none; min-width: 0; min-height: 0; vertical-align: 0; line-height: normal; text-decoration: none}
img.MathJax_strut {border: 0!important; padding: 0!important; margin: 0!important; vertical-align: 0!important}
.MathJax span {display: inline; position: static; border: 0; padding: 0; margin: 0; vertical-align: 0; line-height: normal; text-decoration: none}
.MathJax nobr {white-space: nowrap!important}
.MathJax img {display: inline!important; float: none!important}
.MathJax * {transition: none; -webkit-transition: none; -moz-transition: none; -ms-transition: none; -o-transition: none}
.MathJax_Processing {visibility: hidden; position: fixed; width: 0; height: 0; overflow: hidden}
.MathJax_Processed {display: none!important}
.MathJax_ExBox {display: block!important; overflow: hidden; width: 1px; height: 60ex; min-height: 0; max-height: none}
.MathJax .MathJax_EmBox {display: block!important; overflow: hidden; width: 1px; height: 60em; min-height: 0; max-height: none}
.MathJax_LineBox {display: table!important}
.MathJax_LineBox span {display: table-cell!important; width: 10000em!important; min-width: 0; max-width: none; padding: 0; border: 0; margin: 0}
.MathJax .MathJax_HitBox {cursor: text; background: white; opacity: 0; filter: alpha(opacity=0)}
.MathJax .MathJax_HitBox * {filter: none; opacity: 1; background: transparent}
#MathJax_Tooltip * {filter: none; opacity: 1; background: transparent}
@font-face {font-family: MathJax_Blank; src: url('about:blank')}
.MathJax .noError {vertical-align: ; font-size: 90%; text-align: left; color: black; padding: 1px 3px; border: 1px solid}
</style><script async="" src="https://fundingchoicesmessages.google.com/i/ca-pub-5905744527956213?href=https%3A%2F%2Faman.ai%2Fprimers%2Fai%2FLLM-as-a-judge&amp;ers=2"></script><script async="" src="https://fundingchoicesmessages.google.com/f/AGSKWxVxqrEOdl_Vs4p7NLASnGHVL4puzIcP2hex6J1QTqKJOqK5c08SJUKgAyPuyFLGqTvc50CLfPYTOGn8hHL_hiV7Ba3CteWNMYCJ7HEAaw3KgSQ9smffGrd8G99zsVqBYdHjYu_oNg==?fccs=W1siQUtzUm9sOGpRTl9ZQW51eFpYTTU5M2RYeE1wNnQ4ZFFReFg2NjNBb0I3ZmRRY0puY3EwbXlxaEpDVmtRWXRjMlZSeFpkNWFIeHA2d2lScjRhSDdUMUVqdG1mc3F2X0RzSjJqT3lieHRnYk5LUGEzOG5YSmZYbHVPbXJGdXJtUG1QY0JfUHcyRE96UUctQlpLY2k3bXRXUWwzQmdnQThKRHh3PT0iXSxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsWzE3NjY5MjI0NTksMjY2MDAwMDAwXSxudWxsLG51bGwsbnVsbCxbbnVsbCxbN11dLCJodHRwczovL2FtYW4uYWkvcHJpbWVycy9haS9MTE0tYXMtYS1qdWRnZS8iLG51bGwsW1s4LCJzQ2hOSDVPc2FrMCJdLFs5LCJlbi1VUyJdLFsxOSwiMiJdLFsxNywiWzBdIl0sWzI0LCIiXSxbMjksImZhbHNlIl1dXQ"></script><script async="" src="https://fundingchoicesmessages.google.com/f/AGSKWxWWqVXnDUvoA3AoCYjroR1PrX_c10WdB7FmkpFEC-VCfrQgN90j32D6KhQg41IJfG6yAidunqmV-41RZuxUzPUPaC_lvMHuB7yjhdIQHd4v3CACdjPAYjsGpxWvC1Nwq9LKPrVgyQ==?fccs=W1siQUtzUm9sOGpRTl9ZQW51eFpYTTU5M2RYeE1wNnQ4ZFFReFg2NjNBb0I3ZmRRY0puY3EwbXlxaEpDVmtRWXRjMlZSeFpkNWFIeHA2d2lScjRhSDdUMUVqdG1mc3F2X0RzSjJqT3lieHRnYk5LUGEzOG5YSmZYbHVPbXJGdXJtUG1QY0JfUHcyRE96UUctQlpLY2k3bXRXUWwzQmdnQThKRHh3PT0iXSxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsWzE3NjY5MjI0NTksNDA1MDAwMDAwXSxudWxsLG51bGwsbnVsbCxbbnVsbCxbNyw5XSxudWxsLDIsbnVsbCwiZW4iXSwiaHR0cHM6Ly9hbWFuLmFpL3ByaW1lcnMvYWkvTExNLWFzLWEtanVkZ2UvIixudWxsLFtbOCwic0NoTkg1T3NhazAiXSxbOSwiZW4tVVMiXSxbMTksIjIiXSxbMTcsIlswXSJdLFsyNCwiIl0sWzI5LCJmYWxzZSJdXV0"></script><script async="" src="https://fundingchoicesmessages.google.com/f/AGSKWxUAzQ7dp-kSgob-PraXfFW1mD-L0GHC6BDdnJnBg1CSOid8MQKj5QRnli45ReFRoF7OxPldaLfDL7fRQGGQJnIYZZs-6VC8Wa9VeimVsW98AEyek8tyZ9KsWzumMcM4HVFYTftD_w==?fccs=W1siQUtzUm9sOGpRTl9ZQW51eFpYTTU5M2RYeE1wNnQ4ZFFReFg2NjNBb0I3ZmRRY0puY3EwbXlxaEpDVmtRWXRjMlZSeFpkNWFIeHA2d2lScjRhSDdUMUVqdG1mc3F2X0RzSjJqT3lieHRnYk5LUGEzOG5YSmZYbHVPbXJGdXJtUG1QY0JfUHcyRE96UUctQlpLY2k3bXRXUWwzQmdnQThKRHh3PT0iXSxudWxsLG51bGwsbnVsbCxudWxsLG51bGwsWzE3NjY5MjI0NjAsMjYxMDAwMDAwXSxudWxsLG51bGwsbnVsbCxbbnVsbCxbNyw5LDZdLG51bGwsMixudWxsLCJlbiIsbnVsbCxudWxsLG51bGwsbnVsbCxudWxsLDFdLCJodHRwczovL2FtYW4uYWkvcHJpbWVycy9haS9MTE0tYXMtYS1qdWRnZS8iLG51bGwsW1s4LCJzQ2hOSDVPc2FrMCJdLFs5LCJlbi1VUyJdLFsxOSwiMiJdLFsxNywiWzBdIl0sWzI0LCIiXSxbMjksImZhbHNlIl1dXQ"></script></head>


    <body><div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_Hidden"></div></div><div id="MathJax_Message" style="display: none;"></div>

      <script src="https://unpkg.com/vanilla-back-to-top@7.2.1/dist/vanilla-back-to-top.min.js"></script>
      <script>addBackToTop({
        backgroundColor: '#fff',
        innerHTML: 'Back to Top',
        textColor: '#333'
      })</script><div id="back-to-top" class="hidden">Back to Top</div>
      <style>
        #back-to-top {
          border: 1px solid #ccc;
          border-radius: 0;
          font-family: sans-serif;
          font-size: 14px;
          width: 100px;
          text-align: center;
          line-height: 30px;
          height: 30px;
        }
      </style>   

    <header class="site-header">

  <a class="site-title" href="../">Distilled AI</a>

  <a class="site-link" href="https://aman.ai">Back to aman.ai</a>

  <!-- Html Elements for Search -->
  <div id="search-container">
  <input class="site-search-box" type="text" autocomplete="off" id="search-input" placeholder="search...">
  <div id="results-container"></div>
  </div>

  <!-- Script pointing to aman-script.js -->
  <script src="https://aman.ai/js/aman-search.min.js" type="text/javascript"></script>

  <!-- Configuration -->
  <script>
  document.getElementById('search-input').value='';
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    exclude: ["cs231a"],
    searchResultTemplate: '<div class="site-search-results"><a href="{url}">{title}</a></div>',
    noResultsText: '<div class="site-search-results"><p>No results found</p></div>',
    json: 'https://aman.ai/search.json',
    limit: 5,
    fuzzy: false,
  })
  </script>    

</header>     

    <div class="page-content">
      <div class="wrap">
      <div class="post">

  <header class="post-header">
    <h1>Primers • LLM-as-a-Judge / Autoraters</h1>
  </header>

  <article class="post-content">
  <ul id="markdown-toc">
  <li><a href="#overview" id="markdown-toc-overview">Overview</a></li>
  <li><a href="#motivation-why-llm-as-a-judge-is-needed-beyond-traditional-metrics" id="markdown-toc-motivation-why-llm-as-a-judge-is-needed-beyond-traditional-metrics">Motivation: Why LLM-as-a-Judge is Needed Beyond Traditional Metrics</a>    <ul>
      <li><a href="#limitations-of-traditional-evaluation-metrics" id="markdown-toc-limitations-of-traditional-evaluation-metrics">Limitations of Traditional Evaluation Metrics</a></li>
      <li><a href="#the-rise-of-human-evaluationand-its-costs" id="markdown-toc-the-rise-of-human-evaluationand-its-costs">The Rise of Human Evaluation—and Its Costs</a></li>
      <li><a href="#llm-as-a-judge-as-a-scalable-approximation-to-human-judgment" id="markdown-toc-llm-as-a-judge-as-a-scalable-approximation-to-human-judgment">LLM-as-a-Judge As a Scalable Approximation to Human Judgment</a></li>
      <li><a href="#why-this-matters-for-modern-llm-tasks" id="markdown-toc-why-this-matters-for-modern-llm-tasks">Why This Matters for Modern LLM Tasks</a></li>
      <li><a href="#from-evaluation-to-ranking-and-learning" id="markdown-toc-from-evaluation-to-ranking-and-learning">From Evaluation to Ranking and Learning</a></li>
    </ul>
  </li>
  <li><a href="#background-learning-to-rank-ltr-paradigms" id="markdown-toc-background-learning-to-rank-ltr-paradigms">Background: Learning-to-Rank (LTR) Paradigms</a>    <ul>
      <li><a href="#pointwise-ranking" id="markdown-toc-pointwise-ranking">Pointwise Ranking</a></li>
      <li><a href="#pairwise-ranking" id="markdown-toc-pairwise-ranking">Pairwise Ranking</a></li>
      <li><a href="#listwise-ranking" id="markdown-toc-listwise-ranking">Listwise Ranking</a></li>
    </ul>
  </li>
  <li><a href="#pointwise-llm-as-a-judge-in-practice" id="markdown-toc-pointwise-llm-as-a-judge-in-practice">Pointwise LLM-as-a-Judge in Practice</a>    <ul>
      <li><a href="#how-llm-as-a-judge-fits-into-ltr" id="markdown-toc-how-llm-as-a-judge-fits-into-ltr">How LLM-as-a-Judge Fits Into LTR</a></li>
      <li><a href="#pointwise-ltr-framing-for-llm-as-a-judge" id="markdown-toc-pointwise-ltr-framing-for-llm-as-a-judge">Pointwise LTR Framing for LLM-as-a-Judge</a></li>
      <li><a href="#design-principles-for-reliable-judge-prompts" id="markdown-toc-design-principles-for-reliable-judge-prompts">Design Principles for Reliable Judge Prompts</a></li>
      <li><a href="#example-pointwise-llm-as-a-judge-prompt" id="markdown-toc-example-pointwise-llm-as-a-judge-prompt">Example Pointwise LLM-as-a-Judge Prompt</a>        <ul>
          <li><a href="#why-this-is-pointwise-ltr" id="markdown-toc-why-this-is-pointwise-ltr">Why This is Pointwise LTR</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#fine-tuning-encoder-encoderdecoder-and-decoder-only-models-for-ltr" id="markdown-toc-fine-tuning-encoder-encoderdecoder-and-decoder-only-models-for-ltr">Fine-Tuning Encoder, Encoder–Decoder, and Decoder-Only Models for LTR</a>    <ul>
      <li><a href="#why-fine-tune-models-for-ltr" id="markdown-toc-why-fine-tune-models-for-ltr">Why Fine-Tune Models for LTR?</a>        <ul>
          <li><a href="#scalability-and-latency-constraints" id="markdown-toc-scalability-and-latency-constraints">Scalability and Latency Constraints</a></li>
          <li><a href="#direct-optimization-of-ranking-metrics" id="markdown-toc-direct-optimization-of-ranking-metrics">Direct Optimization of Ranking Metrics</a></li>
          <li><a href="#stability-calibration-and-reproducibility" id="markdown-toc-stability-calibration-and-reproducibility">Stability, Calibration, and Reproducibility</a></li>
          <li><a href="#integration-into-retrieval-and-rag-pipelines" id="markdown-toc-integration-into-retrieval-and-rag-pipelines">Integration Into Retrieval and RAG Pipelines</a></li>
        </ul>
      </li>
      <li><a href="#how-ltr-fine-tuning-works-a-unified-view" id="markdown-toc-how-ltr-fine-tuning-works-a-unified-view">How LTR Fine-Tuning Works: a Unified View</a></li>
      <li><a href="#architectural-choices-and-their-implications" id="markdown-toc-architectural-choices-and-their-implications">Architectural Choices and Their Implications</a>        <ul>
          <li><a href="#encoder-only-models" id="markdown-toc-encoder-only-models">Encoder-Only Models</a></li>
          <li><a href="#encoderdecoder-models" id="markdown-toc-encoderdecoder-models">Encoder–Decoder Models</a></li>
          <li><a href="#decoder-only-models" id="markdown-toc-decoder-only-models">Decoder-Only Models</a></li>
        </ul>
      </li>
      <li><a href="#the-role-of-llm-as-a-judge-in-ltr-fine-tuning" id="markdown-toc-the-role-of-llm-as-a-judge-in-ltr-fine-tuning">The Role of LLM-as-a-Judge in LTR Fine-Tuning</a></li>
      <li><a href="#encoder-only-models-for-ltr" id="markdown-toc-encoder-only-models-for-ltr">Encoder-Only Models for LTR</a>        <ul>
          <li><a href="#pointwise-encoder-only-ranking" id="markdown-toc-pointwise-encoder-only-ranking">Pointwise Encoder-Only Ranking</a>            <ul>
              <li><a href="#architecture" id="markdown-toc-architecture">Architecture</a></li>
              <li><a href="#example-monobert" id="markdown-toc-example-monobert">Example: MonoBERT</a></li>
              <li><a href="#loss-function" id="markdown-toc-loss-function">Loss Function</a></li>
              <li><a href="#inputoutput-example" id="markdown-toc-inputoutput-example">Input–Output Example</a></li>
            </ul>
          </li>
          <li><a href="#pairwise-encoder-only-ranking" id="markdown-toc-pairwise-encoder-only-ranking">Pairwise Encoder-Only Ranking</a>            <ul>
              <li><a href="#architecture-1" id="markdown-toc-architecture-1">Architecture</a></li>
              <li><a href="#example-duobert" id="markdown-toc-example-duobert">Example: DuoBERT</a></li>
              <li><a href="#loss-function-1" id="markdown-toc-loss-function-1">Loss Function</a></li>
              <li><a href="#inputoutput-example-1" id="markdown-toc-inputoutput-example-1">Input–Output Example</a></li>
            </ul>
          </li>
          <li><a href="#listwise-encoder-only-ranking" id="markdown-toc-listwise-encoder-only-ranking">Listwise Encoder-Only Ranking</a>            <ul>
              <li><a href="#architecture-2" id="markdown-toc-architecture-2">Architecture</a></li>
              <li><a href="#example-listbert" id="markdown-toc-example-listbert">Example: ListBERT</a></li>
            </ul>
          </li>
          <li><a href="#direct-and-approximate-optimization-of-ndcg" id="markdown-toc-direct-and-approximate-optimization-of-ndcg">Direct and Approximate Optimization of NDCG</a>            <ul>
              <li><a href="#ndcg-definition" id="markdown-toc-ndcg-definition">NDCG Definition</a></li>
              <li><a href="#common-listwise-losses" id="markdown-toc-common-listwise-losses">Common Listwise Losses</a></li>
            </ul>
          </li>
          <li><a href="#relationship-to-llm-as-a-judge-supervision" id="markdown-toc-relationship-to-llm-as-a-judge-supervision">Relationship to LLM-as-a-Judge Supervision</a></li>
          <li><a href="#takeaways" id="markdown-toc-takeaways">Takeaways</a></li>
        </ul>
      </li>
      <li><a href="#encoderdecoder-models-for-learning-to-rank-ltr-listwise-reasoning-at-decode-time" id="markdown-toc-encoderdecoder-models-for-learning-to-rank-ltr-listwise-reasoning-at-decode-time">Encoder–Decoder Models for Learning-to-Rank (LTR): Listwise Reasoning at Decode Time</a>        <ul>
          <li><a href="#why-encoderdecoder-for-ranking" id="markdown-toc-why-encoderdecoder-for-ranking">Why Encoder–Decoder for Ranking?</a></li>
          <li><a href="#fusion-in-decoder-fid-the-core-pattern" id="markdown-toc-fusion-in-decoder-fid-the-core-pattern">Fusion-in-Decoder (FiD): the Core Pattern</a>            <ul>
              <li><a href="#architecture-3" id="markdown-toc-architecture-3">Architecture</a></li>
            </ul>
          </li>
          <li><a href="#listt5-encoderdecoder-listwise-re-ranking" id="markdown-toc-listt5-encoderdecoder-listwise-re-ranking">ListT5: Encoder–Decoder Listwise Re-Ranking</a>            <ul>
              <li><a href="#architecture-4" id="markdown-toc-architecture-4">Architecture</a></li>
              <li><a href="#output-representation" id="markdown-toc-output-representation">Output Representation</a></li>
            </ul>
          </li>
          <li><a href="#training-objectives-for-encoderdecoder-ranking" id="markdown-toc-training-objectives-for-encoderdecoder-ranking">Training Objectives for Encoder–Decoder Ranking</a>            <ul>
              <li><a href="#sequence-cross-entropy-loss" id="markdown-toc-sequence-cross-entropy-loss">Sequence Cross-Entropy Loss</a></li>
              <li><a href="#connection-to-ndcg-optimization" id="markdown-toc-connection-to-ndcg-optimization">Connection to NDCG Optimization</a></li>
            </ul>
          </li>
          <li><a href="#advantages-over-encoder-only-listwise-models" id="markdown-toc-advantages-over-encoder-only-listwise-models">Advantages Over Encoder-Only Listwise Models</a></li>
          <li><a href="#using-llm-as-a-judge-for-encoderdecoder-supervision" id="markdown-toc-using-llm-as-a-judge-for-encoderdecoder-supervision">Using LLM-as-a-Judge for Encoder–Decoder Supervision</a></li>
          <li><a href="#when-to-use-encoderdecoder-rankers" id="markdown-toc-when-to-use-encoderdecoder-rankers">When to Use Encoder–Decoder Rankers</a></li>
          <li><a href="#takeaways-1" id="markdown-toc-takeaways-1">Takeaways</a></li>
        </ul>
      </li>
      <li><a href="#decoder-based-llm-as-a-judge-for-ltr" id="markdown-toc-decoder-based-llm-as-a-judge-for-ltr">Decoder-Based LLM-as-a-Judge for LTR</a>        <ul>
          <li><a href="#pointwise-prompt-based-llm-as-a-judge" id="markdown-toc-pointwise-prompt-based-llm-as-a-judge">Pointwise Prompt-Based LLM-as-a-Judge</a>            <ul>
              <li><a href="#prompt-pattern" id="markdown-toc-prompt-pattern">Prompt Pattern</a></li>
              <li><a href="#interpretation-as-pointwise-ltr" id="markdown-toc-interpretation-as-pointwise-ltr">Interpretation As Pointwise LTR</a></li>
              <li><a href="#implicit-losses" id="markdown-toc-implicit-losses">Implicit Losses</a></li>
            </ul>
          </li>
          <li><a href="#pairwise-prompt-based-llm-as-a-judge" id="markdown-toc-pairwise-prompt-based-llm-as-a-judge">Pairwise Prompt-Based LLM-as-a-Judge</a>            <ul>
              <li><a href="#prompt-pattern-1" id="markdown-toc-prompt-pattern-1">Prompt Pattern</a></li>
              <li><a href="#pairwise-ltr-interpretation" id="markdown-toc-pairwise-ltr-interpretation">Pairwise LTR Interpretation</a></li>
              <li><a href="#associated-loss-when-used-for-training" id="markdown-toc-associated-loss-when-used-for-training">Associated Loss (When Used for Training)</a></li>
            </ul>
          </li>
          <li><a href="#listwise-prompt-based-llm-as-a-judge" id="markdown-toc-listwise-prompt-based-llm-as-a-judge">Listwise Prompt-Based LLM-as-a-Judge</a>            <ul>
              <li><a href="#prompt-patterns" id="markdown-toc-prompt-patterns">Prompt Patterns</a></li>
              <li><a href="#listwise-ltr-interpretation" id="markdown-toc-listwise-ltr-interpretation">Listwise LTR Interpretation</a></li>
            </ul>
          </li>
          <li><a href="#listwise-loss-functions-and-ndcg-optimization" id="markdown-toc-listwise-loss-functions-and-ndcg-optimization">Listwise Loss Functions and NDCG Optimization</a>            <ul>
              <li><a href="#normalized-discounted-cumulative-gain-ndcg" id="markdown-toc-normalized-discounted-cumulative-gain-ndcg">Normalized Discounted Cumulative Gain (NDCG)</a></li>
              <li><a href="#optimizing-ndcg" id="markdown-toc-optimizing-ndcg">Optimizing NDCG</a>                <ul>
                  <li><a href="#listwise-surrogate-losses" id="markdown-toc-listwise-surrogate-losses">Listwise Surrogate Losses</a></li>
                  <li><a href="#gradient-based-approximations-to-ndcg" id="markdown-toc-gradient-based-approximations-to-ndcg">Gradient-Based Approximations to NDCG</a></li>
                  <li><a href="#using-llm-judges-to-approximate-ndcg" id="markdown-toc-using-llm-judges-to-approximate-ndcg">Using LLM Judges to Approximate NDCG</a></li>
                </ul>
              </li>
              <li><a href="#can-categorical-cross-entropy-be-used-for-listwise-ranking" id="markdown-toc-can-categorical-cross-entropy-be-used-for-listwise-ranking">Can Categorical Cross-Entropy be Used for Listwise Ranking?</a>                <ul>
                  <li><a href="#when-categorical-cross-entropy-applies" id="markdown-toc-when-categorical-cross-entropy-applies">When Categorical Cross-Entropy Applies</a></li>
                  <li><a href="#limitations-of-categorical-cross-entropy-for-ranking" id="markdown-toc-limitations-of-categorical-cross-entropy-for-ranking">Limitations of Categorical Cross-Entropy for Ranking</a></li>
                  <li><a href="#relationship-to-ndcg" id="markdown-toc-relationship-to-ndcg">Relationship to NDCG</a></li>
                </ul>
              </li>
              <li><a href="#inputoutput-example-listwise" id="markdown-toc-inputoutput-example-listwise">Input–Output Example (Listwise)</a></li>
            </ul>
          </li>
          <li><a href="#takeaways-2" id="markdown-toc-takeaways-2">Takeaways</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#putting-it-all-together-llm-as-a-judge-in-modern-evaluation-and-rag-pipelines" id="markdown-toc-putting-it-all-together-llm-as-a-judge-in-modern-evaluation-and-rag-pipelines">Putting It All Together: LLM-as-a-Judge in Modern Evaluation and RAG Pipelines</a>    <ul>
      <li><a href="#end-to-end-evaluation-pipelines-with-llm-as-a-judge" id="markdown-toc-end-to-end-evaluation-pipelines-with-llm-as-a-judge">End-to-End Evaluation Pipelines with LLM-as-a-Judge</a></li>
      <li><a href="#llm-as-a-judge-inside-retrieval-augmented-generation-rag" id="markdown-toc-llm-as-a-judge-inside-retrieval-augmented-generation-rag">LLM-as-a-Judge Inside Retrieval-Augmented Generation (RAG)</a>        <ul>
          <li><a href="#rag-reranking-with-ltr--llm-judges" id="markdown-toc-rag-reranking-with-ltr--llm-judges">RAG Reranking with LTR + LLM Judges</a></li>
        </ul>
      </li>
      <li><a href="#combining-prompted-judges-with-trained-rankers" id="markdown-toc-combining-prompted-judges-with-trained-rankers">Combining Prompted Judges with Trained Rankers</a></li>
      <li><a href="#failure-modes-and-limitations-of-llm-as-a-judge" id="markdown-toc-failure-modes-and-limitations-of-llm-as-a-judge">Failure Modes and Limitations of LLM-as-a-Judge</a>        <ul>
          <li><a href="#bias-and-positional-effects" id="markdown-toc-bias-and-positional-effects">Bias and Positional Effects</a></li>
          <li><a href="#prompt-sensitivity-and-variance" id="markdown-toc-prompt-sensitivity-and-variance">Prompt Sensitivity and Variance</a></li>
          <li><a href="#over-optimization-and-reward-hacking" id="markdown-toc-over-optimization-and-reward-hacking">Over-Optimization and Reward Hacking</a></li>
        </ul>
      </li>
      <li><a href="#best-practices-for-production-use" id="markdown-toc-best-practices-for-production-use">Best Practices for Production Use</a></li>
      <li><a href="#summary-and-outlook" id="markdown-toc-summary-and-outlook">Summary and Outlook</a></li>
    </ul>
  </li>
  <li><a href="#panel--jury-of-llms-as-judges" id="markdown-toc-panel--jury-of-llms-as-judges">Panel / Jury of LLMs-as-Judges</a>    <ul>
      <li><a href="#motivation-why-a-single-judge-is-not-enough" id="markdown-toc-motivation-why-a-single-judge-is-not-enough">Motivation: Why a Single Judge is Not Enough</a></li>
      <li><a href="#panel-of-llm-evaluators-poll-core-concept" id="markdown-toc-panel-of-llm-evaluators-poll-core-concept">Panel of LLM Evaluators (PoLL): Core Concept</a></li>
      <li><a href="#judge-diversity-and-panel-composition" id="markdown-toc-judge-diversity-and-panel-composition">Judge Diversity and Panel Composition</a></li>
      <li><a href="#aggregation-and-voting-strategies" id="markdown-toc-aggregation-and-voting-strategies">Aggregation and Voting Strategies</a>        <ul>
          <li><a href="#binary-judgments-eg-qa-correctness" id="markdown-toc-binary-judgments-eg-qa-correctness">Binary Judgments (e.g., QA Correctness)</a></li>
          <li><a href="#ordinal-or-likert-type-scores-eg-15-ratings" id="markdown-toc-ordinal-or-likert-type-scores-eg-15-ratings">Ordinal or Likert-Type Scores (e.g., 1–5 Ratings)</a></li>
          <li><a href="#pairwise-preference-judgments" id="markdown-toc-pairwise-preference-judgments">Pairwise Preference Judgments</a></li>
        </ul>
      </li>
      <li><a href="#empirical-results-and-human-correlation" id="markdown-toc-empirical-results-and-human-correlation">Empirical Results and Human Correlation</a></li>
      <li><a href="#cost-and-latency-advantages" id="markdown-toc-cost-and-latency-advantages">Cost and Latency Advantages</a></li>
      <li><a href="#relationship-to-llm-as-a-judge-and-ltr-paradigms" id="markdown-toc-relationship-to-llm-as-a-judge-and-ltr-paradigms">Relationship to LLM-as-a-Judge and LTR Paradigms</a></li>
      <li><a href="#practical-guidance-when-to-use-a-panel-of-judges" id="markdown-toc-practical-guidance-when-to-use-a-panel-of-judges">Practical Guidance: When to Use a Panel of Judges</a></li>
      <li><a href="#takeaways-3" id="markdown-toc-takeaways-3">Takeaways</a></li>
    </ul>
  </li>
  <li><a href="#multimodal-llms-as-judges-lmm--vlm-as-a-judge" id="markdown-toc-multimodal-llms-as-judges-lmm--vlm-as-a-judge">Multimodal LLMs-as-Judges (LMM / VLM-as-a-Judge)</a>    <ul>
      <li><a href="#why-multimodal-judges-are-necessary" id="markdown-toc-why-multimodal-judges-are-necessary">Why Multimodal Judges are Necessary</a></li>
      <li><a href="#paradigm-vlm--lmm-as-a-judge" id="markdown-toc-paradigm-vlm--lmm-as-a-judge">Paradigm: VLM / LMM-as-a-Judge</a></li>
      <li><a href="#llava-critic-generalist-multimodal-judge" id="markdown-toc-llava-critic-generalist-multimodal-judge">LLaVA-Critic: Generalist Multimodal Judge</a>        <ul>
          <li><a href="#overview-1" id="markdown-toc-overview-1">Overview</a></li>
          <li><a href="#key-contributions" id="markdown-toc-key-contributions">Key Contributions</a></li>
          <li><a href="#training-data-and-setup" id="markdown-toc-training-data-and-setup">Training Data and Setup</a></li>
          <li><a href="#architecture-5" id="markdown-toc-architecture-5">Architecture</a></li>
          <li><a href="#evaluation-scenarios" id="markdown-toc-evaluation-scenarios">Evaluation Scenarios</a></li>
        </ul>
      </li>
      <li><a href="#prometheus-vision-fine-grained-multimodal-evaluation" id="markdown-toc-prometheus-vision-fine-grained-multimodal-evaluation">Prometheus-Vision: Fine-Grained Multimodal Evaluation</a>        <ul>
          <li><a href="#overview-2" id="markdown-toc-overview-2">Overview</a></li>
          <li><a href="#core-idea" id="markdown-toc-core-idea">Core Idea</a></li>
          <li><a href="#architecture-and-training" id="markdown-toc-architecture-and-training">Architecture and Training</a></li>
          <li><a href="#dataset-perception-collection" id="markdown-toc-dataset-perception-collection">Dataset: Perception Collection</a></li>
          <li><a href="#empirical-results" id="markdown-toc-empirical-results">Empirical Results</a></li>
        </ul>
      </li>
      <li><a href="#multimodal-judges-in-preference-learning" id="markdown-toc-multimodal-judges-in-preference-learning">Multimodal Judges in Preference Learning</a></li>
      <li><a href="#when-to-use-multimodal-judges" id="markdown-toc-when-to-use-multimodal-judges">When to Use Multimodal Judges</a></li>
    </ul>
  </li>
  <li><a href="#reinforcement-learning-for-llms-as-judges" id="markdown-toc-reinforcement-learning-for-llms-as-judges">Reinforcement Learning for LLMs-as-Judges</a>    <ul>
      <li><a href="#motivation-why-rl-for-judges" id="markdown-toc-motivation-why-rl-for-judges">Motivation: Why RL for Judges?</a></li>
      <li><a href="#core-idea-thinking-llm-as-a-judge-via-rl" id="markdown-toc-core-idea-thinking-llm-as-a-judge-via-rl">Core Idea: Thinking-LLM-as-a-Judge Via RL</a></li>
      <li><a href="#unified-verifiable-training-via-synthetic-data" id="markdown-toc-unified-verifiable-training-via-synthetic-data">Unified Verifiable Training Via Synthetic Data</a></li>
      <li><a href="#reward-design-optimizing-judgment-quality" id="markdown-toc-reward-design-optimizing-judgment-quality">Reward Design: Optimizing Judgment Quality</a>        <ul>
          <li><a href="#verdict-correctness-reward" id="markdown-toc-verdict-correctness-reward">Verdict Correctness Reward</a></li>
          <li><a href="#consistency-reward-mitigating-positional-bias" id="markdown-toc-consistency-reward-mitigating-positional-bias">Consistency Reward (Mitigating Positional Bias)</a></li>
        </ul>
      </li>
      <li><a href="#rl-algorithm-grpo" id="markdown-toc-rl-algorithm-grpo">RL Algorithm: GRPO</a></li>
      <li><a href="#judge-formulations-trained-with-rl" id="markdown-toc-judge-formulations-trained-with-rl">Judge Formulations Trained with RL</a></li>
      <li><a href="#learned-reasoning-behaviors" id="markdown-toc-learned-reasoning-behaviors">Learned Reasoning Behaviors</a></li>
      <li><a href="#empirical-performance" id="markdown-toc-empirical-performance">Empirical Performance</a>        <ul>
          <li><a href="#rewardbench-v2" id="markdown-toc-rewardbench-v2">RewardBench V2</a>            <ul>
              <li><a href="#key-differences-between-rewardbench-v1-and-rewardbench-v2" id="markdown-toc-key-differences-between-rewardbench-v1-and-rewardbench-v2">Key Differences Between RewardBench V1 and RewardBench V2</a></li>
              <li><a href="#implications-for-j1-and-llm-as-a-judge-systems" id="markdown-toc-implications-for-j1-and-llm-as-a-judge-systems">Implications for J1 and LLM-as-a-Judge Systems</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#relationship-to-panels-and-multimodal-judges" id="markdown-toc-relationship-to-panels-and-multimodal-judges">Relationship to Panels and Multimodal Judges</a></li>
      <li><a href="#key-takeaways" id="markdown-toc-key-takeaways">Key Takeaways</a></li>
    </ul>
  </li>
  <li><a href="#biases-and-mitigation-strategies" id="markdown-toc-biases-and-mitigation-strategies">Biases and Mitigation Strategies</a>    <ul>
      <li><a href="#length-and-verbosity-bias" id="markdown-toc-length-and-verbosity-bias">Length and Verbosity Bias</a>        <ul>
          <li><a href="#description" id="markdown-toc-description">Description</a></li>
          <li><a href="#why-it-happens" id="markdown-toc-why-it-happens">Why It Happens</a></li>
          <li><a href="#mitigation-strategies" id="markdown-toc-mitigation-strategies">Mitigation Strategies</a></li>
        </ul>
      </li>
      <li><a href="#positional-and-ordering-bias" id="markdown-toc-positional-and-ordering-bias">Positional and Ordering Bias</a>        <ul>
          <li><a href="#description-1" id="markdown-toc-description-1">Description</a></li>
          <li><a href="#why-it-happens-1" id="markdown-toc-why-it-happens-1">Why It Happens</a></li>
          <li><a href="#mitigation-strategies-1" id="markdown-toc-mitigation-strategies-1">Mitigation Strategies</a></li>
        </ul>
      </li>
      <li><a href="#self-preference-and-model-identity-bias" id="markdown-toc-self-preference-and-model-identity-bias">Self-Preference and Model Identity Bias</a>        <ul>
          <li><a href="#description-2" id="markdown-toc-description-2">Description</a></li>
          <li><a href="#why-it-happens-2" id="markdown-toc-why-it-happens-2">Why It Happens</a></li>
          <li><a href="#mitigation-strategies-2" id="markdown-toc-mitigation-strategies-2">Mitigation Strategies</a></li>
        </ul>
      </li>
      <li><a href="#over-confidence-and-hallucination-blindness" id="markdown-toc-over-confidence-and-hallucination-blindness">Over-Confidence and Hallucination Blindness</a>        <ul>
          <li><a href="#description-3" id="markdown-toc-description-3">Description</a></li>
          <li><a href="#why-it-happens-3" id="markdown-toc-why-it-happens-3">Why It Happens</a></li>
          <li><a href="#mitigation-strategies-3" id="markdown-toc-mitigation-strategies-3">Mitigation Strategies</a></li>
        </ul>
      </li>
      <li><a href="#prompt-sensitivity-and-calibration-drift" id="markdown-toc-prompt-sensitivity-and-calibration-drift">Prompt Sensitivity and Calibration Drift</a>        <ul>
          <li><a href="#description-4" id="markdown-toc-description-4">Description</a></li>
          <li><a href="#why-it-happens-4" id="markdown-toc-why-it-happens-4">Why It Happens</a></li>
          <li><a href="#mitigation-strategies-4" id="markdown-toc-mitigation-strategies-4">Mitigation Strategies</a></li>
        </ul>
      </li>
      <li><a href="#reward-hacking-and-over-optimization" id="markdown-toc-reward-hacking-and-over-optimization">Reward Hacking and Over-Optimization</a>        <ul>
          <li><a href="#description-5" id="markdown-toc-description-5">Description</a></li>
          <li><a href="#why-it-happens-5" id="markdown-toc-why-it-happens-5">Why It Happens</a></li>
          <li><a href="#mitigation-strategies-5" id="markdown-toc-mitigation-strategies-5">Mitigation Strategies</a></li>
        </ul>
      </li>
      <li><a href="#takeaways-4" id="markdown-toc-takeaways-4">Takeaways</a></li>
    </ul>
  </li>
  <li><a href="#when-to-use-which-paradigm-a-practical-decision-guide" id="markdown-toc-when-to-use-which-paradigm-a-practical-decision-guide">When to Use Which Paradigm: a Practical Decision Guide</a>    <ul>
      <li><a href="#pointwise-evaluation-when-absolute-scoring-is-enough" id="markdown-toc-pointwise-evaluation-when-absolute-scoring-is-enough">Pointwise Evaluation: When Absolute Scoring is Enough</a>        <ul>
          <li><a href="#when-to-use-pointwise" id="markdown-toc-when-to-use-pointwise">When to Use Pointwise</a></li>
          <li><a href="#why-pointwise-works-well" id="markdown-toc-why-pointwise-works-well">Why Pointwise Works Well</a></li>
          <li><a href="#extensions-panels-and-multimodal-judges-in-pointwise-settings" id="markdown-toc-extensions-panels-and-multimodal-judges-in-pointwise-settings">Extensions: Panels and Multimodal Judges in Pointwise Settings</a></li>
          <li><a href="#when-pointwise-breaks-down" id="markdown-toc-when-pointwise-breaks-down">When Pointwise Breaks Down</a></li>
        </ul>
      </li>
      <li><a href="#pairwise-evaluation-when-relative-preference-matters" id="markdown-toc-pairwise-evaluation-when-relative-preference-matters">Pairwise Evaluation: When Relative Preference Matters</a>        <ul>
          <li><a href="#when-to-use-pairwise" id="markdown-toc-when-to-use-pairwise">When to Use Pairwise</a></li>
          <li><a href="#why-pairwise-often-improves-reliability" id="markdown-toc-why-pairwise-often-improves-reliability">Why Pairwise Often Improves Reliability</a></li>
          <li><a href="#panels-and-multimodal-pairwise-evaluation" id="markdown-toc-panels-and-multimodal-pairwise-evaluation">Panels and Multimodal Pairwise Evaluation</a></li>
          <li><a href="#trade-offs" id="markdown-toc-trade-offs">Trade-offs</a></li>
        </ul>
      </li>
      <li><a href="#listwise-evaluation-when-global-ranking-quality-matters" id="markdown-toc-listwise-evaluation-when-global-ranking-quality-matters">Listwise Evaluation: When Global Ranking Quality Matters</a>        <ul>
          <li><a href="#when-to-use-listwise" id="markdown-toc-when-to-use-listwise">When to Use Listwise</a></li>
          <li><a href="#why-listwise-is-powerful" id="markdown-toc-why-listwise-is-powerful">Why Listwise is Powerful</a></li>
          <li><a href="#panels-and-multimodal-listwise-evaluation" id="markdown-toc-panels-and-multimodal-listwise-evaluation">Panels and Multimodal Listwise Evaluation</a></li>
          <li><a href="#trade-offs-1" id="markdown-toc-trade-offs-1">Trade-offs</a></li>
        </ul>
      </li>
      <li><a href="#a-simple-escalation-strategy-including-judges-and-modalities" id="markdown-toc-a-simple-escalation-strategy-including-judges-and-modalities">A Simple Escalation Strategy (Including Judges and Modalities)</a></li>
      <li><a href="#comparative-analysis-across-evaluation-dimensions" id="markdown-toc-comparative-analysis-across-evaluation-dimensions">Comparative Analysis Across Evaluation Dimensions</a></li>
      <li><a href="#practical-tips" id="markdown-toc-practical-tips">Practical Tips</a>        <ul>
          <li><a href="#use-pointwise-evaluation-by-default" id="markdown-toc-use-pointwise-evaluation-by-default">Use Pointwise Evaluation by Default</a></li>
          <li><a href="#add-judge-panels-before-changing-paradigms" id="markdown-toc-add-judge-panels-before-changing-paradigms">Add Judge Panels Before Changing Paradigms</a></li>
          <li><a href="#use-pairwise-evaluation-when-relative-preference-matters" id="markdown-toc-use-pairwise-evaluation-when-relative-preference-matters">Use Pairwise Evaluation When Relative Preference Matters</a></li>
          <li><a href="#introduce-multimodal-judges-only-when-grounding-is-required" id="markdown-toc-introduce-multimodal-judges-only-when-grounding-is-required">Introduce Multimodal Judges Only When Grounding is Required</a></li>
          <li><a href="#use-listwise-evaluation-sparingly-when-ranking-quality-outweighs-cost" id="markdown-toc-use-listwise-evaluation-sparingly-when-ranking-quality-outweighs-cost">Use Listwise Evaluation Sparingly, When Ranking Quality Outweighs Cost</a></li>
          <li><a href="#the-core-principle" id="markdown-toc-the-core-principle">The Core Principle</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#references" id="markdown-toc-references">References</a>    <ul>
      <li><a href="#llm-as-a-judge-foundations-and-bias-analysis" id="markdown-toc-llm-as-a-judge-foundations-and-bias-analysis">LLM-as-a-Judge Foundations and Bias Analysis</a></li>
      <li><a href="#panels--juries-of-llms-as-judges" id="markdown-toc-panels--juries-of-llms-as-judges">Panels / Juries of LLMs-as-Judges</a></li>
      <li><a href="#multimodal-llms-as-judges" id="markdown-toc-multimodal-llms-as-judges">Multimodal LLMs-as-Judges</a></li>
      <li><a href="#learning-to-rank-ltr-and-neural-re-ranking" id="markdown-toc-learning-to-rank-ltr-and-neural-re-ranking">Learning-to-Rank (LTR) and Neural Re-ranking</a></li>
      <li><a href="#reinforcement-learning-for-llms-as-judges-and-reward-modeling" id="markdown-toc-reinforcement-learning-for-llms-as-judges-and-reward-modeling">Reinforcement Learning for LLMs-as-Judges and Reward Modeling</a></li>
      <li><a href="#reward-model-and-judge-benchmarks" id="markdown-toc-reward-model-and-judge-benchmarks">Reward Model and Judge Benchmarks</a></li>
    </ul>
  </li>
  <li><a href="#citation" id="markdown-toc-citation">Citation</a></li>
</ul>

<h2 id="overview">Overview</h2>

<ul>
  <li>
    <p>LLM-as-a-Judge (also known as an “autorater”) refers to the use of Large Language Models (LLMs) as automated evaluators of model-generated outputs. Instead of relying on static, rule-based, or purely statistical evaluation metrics, an LLM is prompted to assess the quality of an output with respect to a task definition, evaluation criteria, and scoring rubric. The judge model produces structured judgments such as scores (i.e., ratings), rankings, and rationales (i.e, explanations behind choice of rating/ranking).</p>
  </li>
  <li>
    <p>At a high level, an LLM-as-a-Judge system consists of:</p>

    <ul>
      <li>A task specification describing what the evaluated model was asked to do</li>
      <li>A rubric defining evaluation criteria and scoring scales</li>
      <li>One or more candidate outputs to be evaluated</li>
      <li>A judge model that applies the rubric to produce scores or rankings</li>
    </ul>
  </li>
  <li>
    <p>This paradigm has gained traction because modern LLMs possess strong capabilities in instruction following, semantic understanding, and comparative reasoning, allowing them to approximate human evaluators across a wide range of tasks.</p>
  </li>
  <li>
    <p>Early large-scale validation of this idea was presented in <a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a> by Zheng et al. (2023), which demonstrated that GPT-4-based judges show high agreement with human preferences across conversational tasks. Subsequent work has extended this approach to reasoning, summarization, code generation, safety evaluation, and Retrieval-Augmented Generation (RAG).</p>
  </li>
  <li>
    <p>LLM-as-a-Judge evaluations are now widely used in:</p>

    <ul>
      <li>Model development and ablation studies</li>
      <li>Offline evaluation of generative systems</li>
      <li>Reinforcement learning from AI feedback (RLAIF)</li>
      <li>Ranking and reranking pipelines</li>
      <li>Continuous evaluation in production systems</li>
    </ul>
  </li>
  <li>
    <p>Prominent industry adoption includes OpenAI’s evaluation framework (<a href="https://openai.com/blog/evals">Introducing OpenAI Evals</a>), Anthropic’s use of AI feedback for alignment (<a href="https://www.anthropic.com/news/constitutional-ai">Constitutional AI</a>), and Google’s large-scale preference modeling pipelines.</p>
  </li>
  <li>
    <p>Conceptually, LLM-as-a-Judge reframes evaluation as a learned inference problem rather than a handcrafted metric. Instead of computing overlap statistics or heuristic scores, the judge model directly reasons about whether an output satisfies task-specific criteria.</p>
  </li>
  <li>
    <p>The following figure (<a href="https://arxiv.org/abs/2306.05685">source</a>) shows an example of an LLM-based evaluation loop, where multi-turn dialogues between a user and two AI assistants—LLaMA-13B (Assistant A) and Vicuna-13B (Assistant B)—initiated by a question from the MMLU benchmark and a follow-up instruction. GPT-4 is then presented with the context to determine which assistant answers better.</p>
  </li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/mtbench_pipeline.jpg" alt=""></p>

<ul>
  <li>
    <p>In practice, LLM-as-a-Judge setups vary along several dimensions:</p>

    <ul>
      <li><a href="#background-learning-to-rank-ltr-paradigms">Pointwise vs. pairwise vs. listwise evaluation</a></li>
      <li><a href="#design-principles-for-reliable-judge-prompts">Discrete vs. continuous scoring</a></li>
      <li><a href="#design-principles-for-reliable-judge-prompts">Free-form vs. schema-constrained outputs</a></li>
      <li><a href="#fine-tuning-encoder-encoderdecoder-and-decoder-only-models-for-ltr">Zero-shot vs. fine-tuned judge models</a></li>
    </ul>
  </li>
  <li>
    <p>Despite these variations, most systems share a common principle: the judge model is treated as an approximate oracle for human judgment, with explicit instructions and structure used to reduce variance and bias.</p>
  </li>
  <li>
    <p>In the next section, we will examine <strong>why LLM-as-a-Judge is needed</strong>, and why traditional automatic metrics (e.g., BLEU, ROUGE, exact match) are insufficient for modern generative tasks.</p>
  </li>
</ul>

<h2 id="motivation-why-llm-as-a-judge-is-needed-beyond-traditional-metrics">Motivation: Why LLM-as-a-Judge is Needed Beyond Traditional Metrics</h2>

<h3 id="limitations-of-traditional-evaluation-metrics">Limitations of Traditional Evaluation Metrics</h3>

<ul>
  <li>
    <p>Traditional evaluation metrics were designed for narrow, well-defined tasks with deterministic or near-deterministic outputs. Examples include BLEU for machine translation, ROUGE for summarization, Exact Match (EM) for question answering, and accuracy or F1 for classification. While these metrics are easy to compute, fast, and reproducible, they fail to capture many properties that matter for modern LLM outputs.</p>
  </li>
  <li>
    <p>Key limitations include:</p>

    <ul>
      <li><strong>Surface-form dependence</strong>: Metrics like BLEU and ROUGE rely on n-gram overlap, penalizing valid paraphrases and rewarding shallow lexical similarity. This was extensively analyzed in <a href="https://aclanthology.org/W17-2602/">On the Limitations of Automatic Metrics for Evaluating Natural Language Generation</a> by Novikova et al. (2017).</li>
      <li><strong>Inability to measure reasoning quality</strong>: Exact match and token overlap metrics cannot distinguish between correct reasoning and lucky guessing, or between flawed reasoning and correct final answers.</li>
      <li><strong>Poor alignment with human judgment</strong>: Numerous studies show weak correlation between traditional metrics and human preferences for tasks like summarization and dialogue, e.g., <a href="https://aclanthology.org/D19-1389/">Re-evaluating Automatic Metrics for Natural Language Generation</a> by Reiter (2019).</li>
      <li><strong>Single-reference bias</strong>: Many benchmarks rely on one or a few reference outputs, even though generative tasks are inherently one-to-many.</li>
      <li><strong>Task brittleness</strong>: Metrics must be redesigned for each task, making them difficult to generalize across domains such as reasoning, safety, instruction following, or creativity.</li>
    </ul>
  </li>
  <li>
    <p>As LLMs began to outperform reference-based baselines while producing diverse and high-quality outputs, these weaknesses became critical bottlenecks to progress.</p>
  </li>
</ul>

<h3 id="the-rise-of-human-evaluationand-its-costs">The Rise of Human Evaluation—and Its Costs</h3>

<ul>
  <li>
    <p>To address these shortcomings, the community increasingly relied on human evaluation. Human judges can assess:</p>

    <ul>
      <li>Semantic correctness</li>
      <li>Factuality</li>
      <li>Coherence and clarity</li>
      <li>Helpfulness and safety</li>
      <li>Preference between multiple outputs</li>
    </ul>
  </li>
  <li>
    <p>However, human evaluation introduces its own challenges:</p>

    <ul>
      <li><strong>Cost and latency</strong>: Large-scale human evaluation is expensive and slow.</li>
      <li><strong>Inconsistency</strong>: Inter-annotator agreement can be low, especially for subjective criteria.</li>
      <li><strong>Limited scalability</strong>: Continuous evaluation during training or deployment is impractical.</li>
      <li><strong>Reproducibility issues</strong>: Results depend heavily on annotator pools and instructions.</li>
    </ul>
  </li>
  <li>
    <p>These issues are discussed in detail in <a href="https://arxiv.org/abs/2307.03109">How to Evaluate Language Models: A Survey</a> by Chang et al. (2023).</p>
  </li>
</ul>

<h3 id="llm-as-a-judge-as-a-scalable-approximation-to-human-judgment">LLM-as-a-Judge As a Scalable Approximation to Human Judgment</h3>

<ul>
  <li>
    <p>LLM-as-a-Judge emerged as a pragmatic compromise between brittle automatic metrics and expensive human evaluation. The core insight is that strong LLMs already encode many of the same linguistic and semantic priors that humans use when judging outputs.</p>
  </li>
  <li>
    <p>Empirical evidence supporting this idea includes:</p>

    <ul>
      <li>High agreement between GPT-4 judges and human annotators on dialogue quality and reasoning tasks, shown in <a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a> by Zheng et al. (2023).</li>
      <li>Strong correlation between AI preference models and human feedback in Reinforcement Learning (RL) pipelines, as demonstrated in <a href="https://arxiv.org/abs/2203.02155">Training language models to follow instructions with human feedback</a> by Ouyang et al. (2022).</li>
      <li>Effective use of AI-generated feedback in place of human annotations in <a href="https://www.anthropic.com/news/constitutional-ai">Constitutional AI</a>.</li>
    </ul>
  </li>
  <li>
    <p>LLM-as-a-Judge offers several advantages:</p>

    <ul>
      <li><strong>Semantic sensitivity</strong>: Judges reason about meaning, not surface form.</li>
      <li><strong>Task flexibility</strong>: New tasks can be evaluated by changing prompts rather than metrics.</li>
      <li><strong>Low marginal cost</strong>: Once deployed, evaluations scale cheaply.</li>
      <li><strong>Structured output</strong>: Judges can emit scores, rankings, and rationales.</li>
      <li><strong>Fast iteration</strong>: Enables rapid offline evaluation during model development.</li>
    </ul>
  </li>
</ul>

<h3 id="why-this-matters-for-modern-llm-tasks">Why This Matters for Modern LLM Tasks</h3>

<ul>
  <li>
    <p>Modern LLM applications—reasoning, tool use, code generation, RAG, safety alignment—often lack clear ground truth. Evaluation becomes inherently subjective or context-dependent.</p>
  </li>
  <li>
    <p>Examples where traditional metrics fail but LLM-as-a-Judge succeeds include:</p>

    <ul>
      <li><strong>Chain-of-thought reasoning</strong>: Evaluating whether reasoning is valid, not just whether the final answer matches.</li>
      <li><strong>Summarization faithfulness</strong>: Detecting subtle hallucinations that ROUGE cannot capture, as shown in <a href="https://arxiv.org/abs/2008.01415">Evaluating the Factual Consistency of Summaries</a> by Kryściński et al. (2020).</li>
      <li><strong>Instruction following</strong>: Determining whether constraints were followed, even when outputs differ lexically.</li>
      <li><strong>Safety and policy compliance</strong>: Judging nuanced violations where keyword matching fails.</li>
    </ul>
  </li>
  <li>
    <p>As a result, LLM-as-a-Judge has become a foundational component of modern evaluation pipelines.</p>
  </li>
</ul>

<h3 id="from-evaluation-to-ranking-and-learning">From Evaluation to Ranking and Learning</h3>

<ul>
  <li>
    <p>Crucially, LLM-as-a-Judge is not limited to scalar scoring. It naturally connects to <strong>Learning-to-Rank (LTR)</strong> formulations:</p>

    <ul>
      <li>Scoring an output independently (pointwise)</li>
      <li>Comparing two outputs relatively (pairwise)</li>
      <li>Ranking lists of outputs holistically (listwise)</li>
    </ul>
  </li>
  <li>
    <p><a href="#background-learning-to-rank-ltr-paradigms">Background: Learning-to-Rank (LTR) Paradigms</a> offers a detailed discourse on this topic, covering each paradigm in detail.</p>
  </li>
  <li>
    <p>This connection enables downstream use cases such as:</p>

    <ul>
      <li>Model selection and benchmarking</li>
      <li>Dataset filtering and curriculum construction</li>
      <li>Reward modeling for RL</li>
      <li>Reranking in retrieval and generation pipelines</li>
    </ul>
  </li>
  <li>
    <p>In the next section, we will formally introduce <strong>Learning-to-Rank paradigms (pointwise, pairwise, listwise)</strong> and explain how LLM-as-a-Judge fits naturally into these frameworks.</p>
  </li>
</ul>

<h2 id="background-learning-to-rank-ltr-paradigms">Background: Learning-to-Rank (LTR) Paradigms</h2>

<ul>
  <li>
    <p>LTR provides the formal framework that underlies many modern evaluation, ranking, and reranking systems. While LTR originated in information retrieval and search, its abstractions map cleanly onto LLM-as-a-Judge setups, where the “query” is a task specification and the “documents” are candidate model outputs.</p>
  </li>
  <li>
    <p>At a high level, LTR methods differ in <strong>how relevance or quality is modeled and optimized</strong>. The three dominant paradigms are pointwise, pairwise, and listwise ranking.</p>
  </li>
</ul>

<h3 id="pointwise-ranking">Pointwise Ranking</h3>

<ul>
  <li>
    <p>In pointwise LTR, each candidate is scored independently (i.e., in an absolute manner) with respect to the query. The model learns a function:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1" style="width: 6.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.159em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1005.16em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span class="mo" id="MathJax-Span-4" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-5" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-6" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-7" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-8" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-9" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-10" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-11" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">→</span><span class="msubsup" id="MathJax-Span-12" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-13" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-14" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>f</mi><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">→</mo><msub><mi>s</mi><mi>i</mi></msub></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-1">f(q, x_i) \rightarrow s_i</script>

    <ul>
      <li>where <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-15" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-16"><span class="mi" id="MathJax-Span-17" style="font-family: STIXGeneral-Italic;">q</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>q</mi></math></span></span><script type="math/tex" id="MathJax-Element-2">q</script> is the query (or task), <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-18" style="width: 0.888em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.73em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-19"><span class="msubsup" id="MathJax-Span-20"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-21" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-22" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-3">x_i</script> is a candidate output, and <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-23" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.68em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-24"><span class="msubsup" id="MathJax-Span-25"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-26" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-27" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>s</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-4">s_i</script> is an absolute relevance or quality score.</li>
    </ul>
  </li>
  <li>
    <p>Classic examples include regression or classification approaches, where the model predicts relevance labels or probabilities. Early neural formulations include <a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/MSR-TR-2010-82.pdf">RankNet</a> by Burges et al. (2010) and later transformer-based rankers such as <a href="https://arxiv.org/abs/1910.14424">monoBERT</a> by Nogueira et al. (2019).</p>
  </li>
  <li>
    <p>In the context of LLM-as-a-Judge:</p>

    <ul>
      <li>The judge scores each output independently</li>
      <li>Scores may be binary, ordinal, or continuous</li>
      <li>No explicit comparison between outputs is required</li>
    </ul>
  </li>
  <li>
    <p>This is the <strong>most common formulation</strong> used in practice, because it is simple, parallelizable, and easy to operationalize.</p>
  </li>
</ul>

<h3 id="pairwise-ranking">Pairwise Ranking</h3>

<ul>
  <li>Pairwise LTR models learn relative preferences between two candidates at a time. Instead of predicting absolute scores, the model predicts which of two candidates is better:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x227B;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-28" style="width: 11.513em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.586em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1009.53em, 2.711em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-29"><span class="mi" id="MathJax-Span-30" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span class="mo" id="MathJax-Span-31" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-32" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-33" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-34" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-35" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-36" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-37" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-38" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-39" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-40" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-41" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-42" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">→</span><span class="mi" id="MathJax-Span-43" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">P</span><span class="mo" id="MathJax-Span-44" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-45"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-46" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-47" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-48" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">≻</span><span class="msubsup" id="MathJax-Span-49" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-50" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-51" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-52" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>f</mi><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">)</mo><mo stretchy="false">→</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>≻</mo><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-5">f(q, x_i, x_j) \rightarrow P(x_i \succ x_j)</script>

<ul>
  <li>
    <p>Training data consists of ordered pairs <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-53" style="width: 3.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.607em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1002.55em, 2.659em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-54"><span class="mo" id="MathJax-Span-55" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-56"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-57" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-58" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-59" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-60" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-61" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-62" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-63" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>x</mi><mi>j</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-6">(x_i, x_j)</script> labeled according to preference. Optimization typically minimizes a pairwise loss such as logistic loss:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-7-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;pairwise&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mi&gt;&amp;#x03C3;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-64" style="width: 12.451em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.367em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1010.32em, 2.659em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-65"><span class="msubsup" id="MathJax-Span-66"><span style="display: inline-block; position: relative; width: 3.18em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-67"><span class="mrow" id="MathJax-Span-68"><span class="mi" id="MathJax-Span-69" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-70"><span class="mrow" id="MathJax-Span-71"><span class="mtext" id="MathJax-Span-72" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">pairwise</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-73" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mo" id="MathJax-Span-74" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">−</span><span class="mi" id="MathJax-Span-75" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">log</span><span class="mo" id="MathJax-Span-76"></span><span class="mi" id="MathJax-Span-77" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mo" id="MathJax-Span-78" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-79"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-80" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-81" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-82" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">−</span><span class="msubsup" id="MathJax-Span-83" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-84" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-85" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-86" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>pairwise</mtext></mrow></msub><mo>=</mo><mo>−</mo><mi>log</mi><mo>⁡</mo><mi>σ</mi><mo stretchy="false">(</mo><msub><mi>s</mi><mi>i</mi></msub><mo>−</mo><msub><mi>s</mi><mi>j</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-7">\mathcal{L}_{\text{pairwise}} = - \log \sigma(s_i - s_j)</script>

    <ul>
      <li>where <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-8-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03C3;&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-87" style="width: 0.784em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.628em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.63em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-88"><span class="mi" id="MathJax-Span-89" style="font-family: STIXGeneral-Italic;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>σ</mi></math></span></span><script type="math/tex" id="MathJax-Element-8">\sigma</script> is the sigmoid function.</li>
    </ul>
  </li>
  <li>
    <p>Examples include <a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/MSR-TR-2010-82.pdf">RankNet</a> by Burges et al. (2010) and pairwise extensions of transformer models such as <a href="https://arxiv.org/abs/1910.14424">duoBERT</a> by Nogueira et al. (2019).</p>
  </li>
  <li>
    <p>In LLM-as-a-Judge systems, pairwise evaluation appears when:</p>

    <ul>
      <li>The judge is asked “Which output is better?”</li>
      <li>Human-like preference judgments are required</li>
      <li>Absolute scoring is difficult or ill-defined</li>
    </ul>
  </li>
  <li>
    <p>Pairwise judgments often exhibit <strong>higher inter-annotator agreement</strong> than absolute ratings, a phenomenon discussed in <a href="https://arxiv.org/abs/2305.17926">A Large-Scale Analysis of Evaluation Biases in LLMs</a> by Wang et al. (2023).</p>
  </li>
</ul>

<h3 id="listwise-ranking">Listwise Ranking</h3>

<ul>
  <li>
    <p>Listwise LTR methods consider the entire candidate set jointly and optimize a loss defined over permutations or ranked lists:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-9-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-90" style="width: 9.951em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.284em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1008.28em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-91"><span class="mi" id="MathJax-Span-92" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span class="mo" id="MathJax-Span-93" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-94" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-95" style="font-family: STIXGeneral-Regular;">,</span><span class="texatom" id="MathJax-Span-96" style="padding-left: 0.211em;"><span class="mrow" id="MathJax-Span-97"><span class="msubsup" id="MathJax-Span-98"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-99" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-100" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-101" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-102" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">…</span><span class="mo" id="MathJax-Span-103" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">,</span><span class="msubsup" id="MathJax-Span-104" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-105" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-106" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-107" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-108" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">→</span><span class="mi" id="MathJax-Span-109" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>f</mi><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><mrow class="MJX-TeXAtom-ORD"><msub><mi>x</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>x</mi><mi>n</mi></msub></mrow><mo stretchy="false">)</mo><mo stretchy="false">→</mo><mi>π</mi></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-9">f(q, {x_1, \dots, x_n}) \rightarrow \pi</script>

    <ul>
      <li>where <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-10-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-110" style="width: 0.784em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.628em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.63em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-111"><span class="mi" id="MathJax-Span-112" style="font-family: STIXGeneral-Italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>π</mi></math></span></span><script type="math/tex" id="MathJax-Element-10">\pi</script> is an ordering of the candidates.</li>
    </ul>
  </li>
  <li>
    <p>Listwise approaches directly optimize ranking metrics such as NDCG or MAP using differentiable approximations. Well-known listwise losses include ListMLE proposed in <a href="https://icml.cc/Conferences/2008/papers/167.pdf">Listwise Approach to Learning to Rank - Theory and Algorithm</a> by Xia et al. (2008) and softmax cross-entropy over permutations, introduced in <a href="https://dl.acm.org/doi/10.1145/1277741.1277800">Listwise Approach to Learning to Rank</a> by Cao et al. (2007).</p>
  </li>
  <li>
    <p>More recent transformer-based listwise models include:</p>

    <ul>
      <li><a href="https://arxiv.org/abs/2206.15198">ListBERT</a> by Kumar et al. (2022)</li>
      <li><a href="https://arxiv.org/abs/2402.15838">ListT5</a> by Yoon et al. (2024)</li>
      <li>Agentic rerankers such as <a href="https://arxiv.org/abs/2505.20046">REARANK</a> by Zhang et al. (2025)</li>
    </ul>
  </li>
  <li>
    <p>In LLM-as-a-Judge settings, listwise evaluation arises when:</p>

    <ul>
      <li>The judge must rank multiple outputs at once</li>
      <li>Relative ordering matters more than absolute scores</li>
      <li>Global consistency across outputs is important</li>
    </ul>
  </li>
</ul>

<h2 id="pointwise-llm-as-a-judge-in-practice">Pointwise LLM-as-a-Judge in Practice</h2>

<ul>
  <li>This section explains how pointwise LTR is realized in practice using LLM-as-a-Judge, and introduces a concrete, production-ready judge prompt.</li>
</ul>

<h3 id="how-llm-as-a-judge-fits-into-ltr">How LLM-as-a-Judge Fits Into LTR</h3>

<ul>
  <li>
    <p>LLM-as-a-Judge can be viewed as an <strong>instantiation of LTR</strong>, where the judge model implicitly implements an LTR paradigm (pointwise, pairwise, and listwise) via prompting or fine-tuning.</p>
  </li>
  <li>
    <p>Crucially:</p>
  </li>
</ul>

<blockquote>
  <p>LLM-as-a-judge models most commonly perform <strong>pointwise</strong> evaluation (scoring each output independently against a rubric), though pairwise or listwise ranking is also used in some settings.</p>
</blockquote>

<ul>
  <li>
    <p>This design choice reflects practical trade-offs:</p>

    <ul>
      <li>Pointwise judging is simpler and cheaper</li>
      <li>Pairwise judging reduces calibration issues</li>
      <li>Listwise judging captures global consistency but is more expensive</li>
    </ul>
  </li>
  <li>
    <p>In the next section, we will how an LLM-as-a-Judge operationalizes <strong>pointwise LTR</strong>, introduce the judge prompt, and discuss design principles for reliable judge prompts before moving on to fine-tuning encoder and decoder models for LTR.</p>
  </li>
</ul>

<h3 id="pointwise-ltr-framing-for-llm-as-a-judge">Pointwise LTR Framing for LLM-as-a-Judge</h3>

<ul>
  <li>
    <p>Under a pointwise formulation, the judge estimates an absolute quality score for each candidate output <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-11-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-113" style="width: 0.888em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.73em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-114"><span class="msubsup" id="MathJax-Span-115"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-116" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-117" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-11">x_i</script>, conditioned on the task <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-12-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-118" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-119"><span class="mi" id="MathJax-Span-120" style="font-family: STIXGeneral-Italic;">q</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>q</mi></math></span></span><script type="math/tex" id="MathJax-Element-12">q</script>:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-13-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mi&gt;&amp;#x03B8;&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-121" style="width: 5.888em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.898em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1004.85em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-122"><span class="msubsup" id="MathJax-Span-123"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-124" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-125" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-126" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="msubsup" id="MathJax-Span-127" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-128" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.263em;"><span class="mi" id="MathJax-Span-129" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">θ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-130" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-131" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-132" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-133" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-134" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-135" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-136" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>s</mi><mi>i</mi></msub><mo>=</mo><msub><mi>f</mi><mi>θ</mi></msub><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-13">s_i = f_\theta(q, x_i)</script>

    <ul>
      <li>
        <p>where:</p>

        <ul>
          <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-14-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-137" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-138"><span class="mi" id="MathJax-Span-139" style="font-family: STIXGeneral-Italic;">q</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>q</mi></math></span></span><script type="math/tex" id="MathJax-Element-14">q</script> encodes the task description and evaluation criteria</li>
          <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-15-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-140" style="width: 0.888em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.73em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-141"><span class="msubsup" id="MathJax-Span-142"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-143" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-144" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-15">x_i</script> is a single model-generated output</li>
          <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-16-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-145" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.68em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-146"><span class="msubsup" id="MathJax-Span-147"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-148" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-149" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>s</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-16">s_i</script> may be binary, ordinal, or scalar</li>
          <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-17-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mi&gt;&amp;#x03B8;&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-150" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1000.68em, 2.503em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-151"><span class="msubsup" id="MathJax-Span-152"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-153" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.263em;"><span class="mi" id="MathJax-Span-154" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">θ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>f</mi><mi>θ</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-17">f_\theta</script> is implemented via an LLM prompted as a judge</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Unlike traditional neural rankers, the scoring function is not hard-coded or trained from scratch; instead, it is <strong>induced via natural language instructions</strong>. This makes prompt design the critical interface between evaluation intent and model behavior.</p>
  </li>
  <li>
    <p>Pointwise LLM-as-a-Judge is especially well-suited for:</p>

    <ul>
      <li>Offline evaluation of generated outputs</li>
      <li>Reward modeling bootstrapping (in RL-based policy/preference optimization pipelines)</li>
      <li>Dataset filtering and quality control</li>
      <li>Continuous evaluation in CI pipelines</li>
    </ul>
  </li>
  <li>
    <p>Empirically, pointwise judging has been shown to correlate strongly with human ratings when prompts are carefully structured, as demonstrated in <a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a> by Zheng et al. (2023).</p>
  </li>
</ul>

<h3 id="design-principles-for-reliable-judge-prompts">Design Principles for Reliable Judge Prompts</h3>

<ul>
  <li>
    <p>Several best practices have emerged for robust pointwise judge prompts:</p>

    <ol>
      <li>
        <p><strong>Explicit role definition</strong>: The judge should be instructed to behave as an impartial evaluator, not a helper or teacher.</p>
      </li>
      <li>
        <p><strong>Clear separation of task and evaluation</strong>: The prompt must distinguish between what the model was asked to do and how it should be judged.</p>
      </li>
      <li>
        <p><strong>Structured criteria with explicit scales</strong>: Binary, ternary, ordinal, and Likert-type scales should be clearly labeled to reduce ambiguity.</p>
      </li>
      <li>
        <p><strong>Anchored examples</strong>: Providing example inputs for each score level stabilizes calibration and reduces variance, similar to rater training in human evaluation.</p>
      </li>
      <li>
        <p><strong>Schema-constrained outputs</strong>: Enforcing JSON or schema-based outputs reduces parsing errors and improves reproducibility.</p>
      </li>
      <li>
        <p><strong>Omission of improvement suggestions</strong>: Judges should evaluate, not coach, unless explicitly instructed.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>These principles are echoed in industry evaluation frameworks such as <a href="https://openai.com/blog/evals">OpenAI Evals</a> and preference modeling pipelines described in <a href="https://arxiv.org/abs/2203.02155">Training language models to follow instructions with human feedback</a> by Ouyang et al. (2022).</p>
  </li>
</ul>

<h3 id="example-pointwise-llm-as-a-judge-prompt">Example Pointwise LLM-as-a-Judge Prompt</h3>

<ul>
  <li>Below is an <strong>example pointwise LLM-as-a-Judge prompt</strong> for evaluating a summarization task, implementing the principles above. This prompt instantiates a mixed-scale, rubric-driven evaluator and corresponds directly to a pointwise LTR model that scores each output independently.</li>
  <li>Importantly, the prompt includes <strong>anchored example inputs for each evaluation criterion and each rubric level</strong>, which serve as calibration references for the judge. Multiple such examples can be provided per rubric level, enabling <strong>few-shot learning</strong> that improves scale consistency, reduces ambiguity between adjacent scores, and stabilizes judgments across different criteria.</li>
  <li>Example prompt for an LLM-as-Judge for evaluating a summarization task (mixed scales, JSON output):</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><div><button class="btn-copy" data-clipboard-action="copy" data-clipboard-target="#code0"><img src="https://aman.ai/images/copy.png" style="margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;"></button></div><code id="code0"># Role Definition

You are an impartial, highly rigorous evaluator acting as a judge for assessing model-generated summaries of technical articles. 
Your role is to assess whether a given model-generated summary successfully fulfills the task of producing a concise, accurate synthesis of a technical article, capturing its main claims, key supporting points, and overall conclusion while remaining faithful to the original content. 
All evaluations must be conducted strictly according to the specified evaluation criteria and scoring rubrics, with the expectation that the target summary length is 120–150 words.

# Evaluation Criteria and Scales

* Accuracy (binary yes/no)
* Coverage (ordinal scale: 0–3)
* Faithfulness (ternary ordinal scale: 0–2)
* Clarity (Likert-type ordinal scale: 1–5)
* Conciseness (ternary ordinal scale: 0–2)

# Scoring Rubrics with Anchored Example Inputs

## Accuracy (yes/no)

Whether the summary contains any factual errors relative to the source.

* yes: No factual errors are present.  
  Example input that should be rated yes:  
  “The paper evaluates a transformer-based model on three benchmarks and reports consistent performance improvements across all of them,” when the source article states exactly this.

* no: One or more factual errors are present.  
  Example input that should be rated no:  
  “The authors conducted a large-scale human trial to validate the approach,” when the source explicitly states that no human experiments were performed.

## Coverage (0–3)

The extent to which major points of the source are included.

* 3: All major points are included.  
  Example input that should be rated 3:  
  A summary that describes the problem motivation, the proposed method, the experimental setup, the main results, and the stated limitations.

* 2: Most major points are included with one minor omission.  
  Example input that should be rated 2:  
  A summary that explains the method and results but omits a short discussion of future work mentioned at the end of the article.

* 1: Some major points are missing.  
  Example input that should be rated 1:  
  A summary that reports numerical results but does not explain what method or model produced them.

* 0: The summary is largely incomplete.  
  Example input that should be rated 0:  
  A summary that only provides background context and never mentions the method, results, or conclusions.

## Faithfulness (0–2)

Whether the summary introduces unsupported information or interpretations.

* 2: All statements are directly supported by the source.  
  Example input that should be rated 2:  
  A summary that paraphrases the article’s claims without adding interpretations or conclusions beyond what is stated.

* 1: The summary contains a minor unsubstantiated inference.  
  Example input that should be rated 1:  
  A summary that claims the method is “likely to generalize to all domains,” when the paper only reports results in a limited setting.

* 0: The summary is unfaithful.  
  Example input that should be rated 0:  
  A summary that introduces a recommendation, application, or claim that does not appear anywhere in the source article.

## Clarity (Likert-type ordinal scale: 1–5)

The organization, readability, and coherence of the summary.

* 5: Exceptionally clear and well-structured.  
  Example input that should be rated 5:  
  A summary with a clear logical flow from motivation to method to results, written in precise and unambiguous language.

* 4: Mostly clear with minor issues.  
  Example input that should be rated 4:  
  A summary that is easy to understand overall but contains one awkward transition or slightly unclear sentence.

* 3: Adequately clear but uneven.  
  Example input that should be rated 3:  
  A summary that is generally understandable but includes several vague phrases or mildly confusing sentences.

* 2: Hard to follow.  
  Example input that should be rated 2:  
  A summary that jumps between ideas without clear transitions, making the structure difficult to follow.

* 1: Unclear or incoherent.  
  Example input that should be rated 1:  
  A summary with disorganized sentences, unclear references, and no apparent structure.

## Conciseness (0–2)

Adherence to the target length and avoidance of unnecessary detail.

* 2: Fully concise.  
  Example input that should be rated 2:  
  A summary within 120–150 words that avoids repetition and includes only essential information.

* 1: Minor conciseness issues.  
  Example input that should be rated 1:  
  A summary that slightly exceeds the word limit or repeats one idea unnecessarily.

* 0: Not concise.  
  Example input that should be rated 0:  
  A summary that is substantially longer than the target length or includes extensive irrelevant detail.

# Model Outputs to Evaluate

You will be given a single model-generated summary of a source article. Evaluate this summary according to the evaluation criteria.

# Evaluation Instructions

1. Read the role definition, evaluation criteria, and scoring rubrics carefully.  
2. For the given model-generated summary, assign a score for each criterion using the defined scales.  
3. For each assigned score, provide a clear, evidence-based rationale explaining why the summary merits that score according to the rubric.  
4. Judge only what is present in the summary.  
5. Base decisions strictly on the rubric descriptions, using the example inputs only as anchors.  
6. Apply scales consistently across all evaluated summaries.

# Required Output Format (Strict JSON)

For each model-generated summary, output a single JSON object with the following structure and keys exactly as specified:

{
  "accuracy": {
    "score": "yes | no",
    "justification": "&lt;string&gt;"
  },
  "coverage": {
    "score": &lt;integer 0–3&gt;,
    "justification": "&lt;string&gt;"
  },
  "faithfulness": {
    "score": &lt;integer 0–2&gt;,
    "justification": "&lt;string&gt;"
  },
  "clarity": {
    "score": &lt;integer 1–5&gt;,
    "justification": "&lt;string&gt;"
  },
  "conciseness": {
    "score": &lt;integer 0–2&gt;,
    "justification": "&lt;string&gt;"
  },

  // OPTIONAL BLOCK: include only if critical errors or violations are present
  "errors_or_violations": [
    "&lt;string&gt;",
    "&lt;string&gt;"
  ]
}

# Additional Requirements

* If no errors or violations are identified, omit the errors_or_violations field entirely.
* If included, errors_or_violations must be a non-empty array of concise, concrete descriptions.
* Each justification should be concise and evidence-based, typically 1–2 sentences.
* Do not include placeholder text.
* Do not include any keys not explicitly specified above.
* Do not include any text outside the JSON object.

# Tone and Constraints

* Maintain a neutral, professional, and analytical tone.
* Do not suggest improvements.
* Do not include any content outside the required JSON structure.
</code></pre></div></div>

<h4 id="why-this-is-pointwise-ltr">Why This is Pointwise LTR</h4>

<ul>
  <li>
    <p>This prompt implements pointwise ranking because:</p>

    <ul>
      <li>Each output is scored independently</li>
      <li>No cross-output comparisons are required</li>
      <li>Scores can be aggregated or thresholded downstream</li>
      <li>The judge function approximates <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-18-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-155" style="width: 3.44em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.867em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1002.82em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-156"><span class="mi" id="MathJax-Span-157" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span class="mo" id="MathJax-Span-158" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-159" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-160" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-161" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-162" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-163" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-164" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-18">f(q, x_i)</script> directly</li>
    </ul>
  </li>
  <li>
    <p>This formulation enables simple extensions such as:</p>

    <ul>
      <li>Ranking outputs by weighted sums of criteria</li>
      <li>Filtering low-quality outputs</li>
      <li>Training reward models via supervised regression</li>
    </ul>
  </li>
  <li>
    <p>In the next section, we move beyond prompting and examine <strong>fine-tuning encoder-only and encoder–decoder models for LTR</strong>, covering pointwise, pairwise, and listwise objectives with architectures, loss functions, and concrete input–output examples.</p>
  </li>
</ul>

<h2 id="fine-tuning-encoder-encoderdecoder-and-decoder-only-models-for-ltr">Fine-Tuning Encoder, Encoder–Decoder, and Decoder-Only Models for LTR</h2>

<ul>
  <li>Modern ranking systems sit at the intersection of <strong>information retrieval</strong>, <strong>generation</strong>, and <strong>evaluation</strong>. While prompt-based LLM-as-a-Judge systems provide flexibility and fast iteration, many real-world applications require <strong>fine-tuned ranking models</strong> that are efficient, stable, and explicitly optimized for ranking objectives.</li>
  <li>This section provides an overarching view of <strong>why</strong> encoder-only, encoder–decoder, and decoder-only models are fine-tuned for LTR, and <strong>how</strong> each architecture supports pointwise, pairwise, and listwise ranking paradigms.</li>
</ul>

<h3 id="why-fine-tune-models-for-ltr">Why Fine-Tune Models for LTR?</h3>

<ul>
  <li>Fine-tuning ranking models is motivated by fundamental limitations of purely prompt-based or heuristic evaluation approaches.</li>
</ul>

<h4 id="scalability-and-latency-constraints">Scalability and Latency Constraints</h4>

<ul>
  <li>
    <p>Prompt-based LLM judges are expensive at inference time and do not scale well to scenarios involving:</p>

    <ul>
      <li>Millions of query–candidate comparisons</li>
      <li>Low-latency retrieval and reranking pipelines</li>
      <li>Online serving with strict SLA requirements</li>
    </ul>
  </li>
  <li>
    <p>In contrast, fine-tuned rankers—especially encoder-only models—can score thousands of candidates per second on commodity hardware. This trade-off is extensively discussed in <a href="https://arxiv.org/abs/1707.08690">Neural Information Retrieval: A Literature Review</a> by Mitra et al. (2018).</p>
  </li>
</ul>

<h4 id="direct-optimization-of-ranking-metrics">Direct Optimization of Ranking Metrics</h4>

<ul>
  <li>
    <p>Traditional prompt-based evaluation yields <strong>scores or preferences</strong>, but does not directly optimize ranking metrics such as NDCG, MAP, or MRR.</p>
  </li>
  <li>
    <p>Fine-tuned LTR models enable:</p>

    <ul>
      <li>Approximate or direct optimization of ranking metrics</li>
      <li>Use of differentiable surrogate losses</li>
      <li>Consistent behavior across training and inference</li>
    </ul>
  </li>
  <li>
    <p>The importance of metric-aware optimization was established in early LTR work such as <a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/MSR-TR-2005-82.pdf">Learning to Rank Using Gradient Descent</a> by Burges et al. (2005).</p>
  </li>
</ul>

<h4 id="stability-calibration-and-reproducibility">Stability, Calibration, and Reproducibility</h4>

<ul>
  <li>
    <p>Prompt-based LLM judges can exhibit:</p>

    <ul>
      <li>Sensitivity to prompt wording</li>
      <li>Drift across model versions</li>
      <li>Stochastic variance in outputs</li>
    </ul>
  </li>
  <li>
    <p>Fine-tuned ranking models provide:</p>

    <ul>
      <li>Fixed decision boundaries</li>
      <li>Calibrated score distributions</li>
      <li>Reproducible evaluation results</li>
    </ul>
  </li>
  <li>
    <p>This is critical for production evaluation pipelines and benchmarking, as noted in <a href="https://arxiv.org/abs/2307.03109">How to Evaluate Language Models: A Survey</a> by Chang et al. (2023).</p>
  </li>
</ul>

<h4 id="integration-into-retrieval-and-rag-pipelines">Integration Into Retrieval and RAG Pipelines</h4>

<ul>
  <li>
    <p>Ranking models are core components of:</p>

    <ul>
      <li>Multi-stage retrieval pipelines</li>
      <li>Reranking for dense and hybrid search</li>
      <li>Retrieval-augmented generation (RAG)</li>
    </ul>
  </li>
  <li>
    <p>Fine-tuned rankers can be tightly integrated into these systems, unlike prompt-based judges that operate externally. Practical examples are detailed in <a href="https://arxiv.org/abs/2004.04906">Dense Passage Retrieval for Open-Domain Question Answering</a> by Karpukhin et al. (2020) and <a href="https://arxiv.org/abs/2005.11401">Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks</a> by Lewis et al. (2020).</p>
  </li>
</ul>

<h3 id="how-ltr-fine-tuning-works-a-unified-view">How LTR Fine-Tuning Works: a Unified View</h3>

<ul>
  <li>
    <p>Across architectures, LTR fine-tuning follows a common conceptual pattern:</p>

    <ol>
      <li>
        <p><strong>Define a query</strong>: The query may be a user query, a task description, or an evaluation prompt.</p>
      </li>
      <li>
        <p><strong>Define candidates</strong>: Candidates may be documents, passages, model-generated outputs, or tool responses.</p>
      </li>
      <li>
        <p><strong>Define a relevance signal</strong>: Relevance may come from:</p>

        <ul>
          <li>Human annotations</li>
          <li>LLM-as-a-Judge outputs</li>
          <li>Implicit feedback (clicks, dwell time)</li>
        </ul>
      </li>
      <li>
        <p><strong>Optimize a ranking objective</strong>: Using pointwise, pairwise, or listwise loss functions.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>This abstraction allows LTR techniques to generalize across search, evaluation, and generation tasks.</p>
  </li>
</ul>

<h3 id="architectural-choices-and-their-implications">Architectural Choices and Their Implications</h3>

<ul>
  <li>Different transformer architectures support LTR in different ways.</li>
</ul>

<h4 id="encoder-only-models">Encoder-Only Models</h4>

<ul>
  <li>
    <p>Encoder-only models (e.g., BERT-style transformers) map inputs to contextual embeddings and produce scalar scores.</p>

    <ul>
      <li>Best suited for <strong>pointwise and pairwise ranking</strong></li>
      <li>High precision due to joint encoding</li>
      <li>Computationally expensive for large candidate sets</li>
    </ul>
  </li>
  <li>
    <p>These models dominate <strong>late-stage reranking</strong>, as exemplified by monoBERT and duoBERT (<a href="https://arxiv.org/abs/1910.14424">Multi-Stage Document Ranking with BERT</a> by Nogueira et al. (2019)).</p>
  </li>
</ul>

<h4 id="encoderdecoder-models">Encoder–Decoder Models</h4>

<ul>
  <li>
    <p>Encoder–decoder models enable <strong>list-level reasoning</strong> by separating representation and aggregation.</p>

    <ul>
      <li>Encoder processes each candidate independently</li>
      <li>Decoder jointly attends over all candidates</li>
      <li>Supports listwise objectives naturally</li>
    </ul>
  </li>
  <li>
    <p>This design underpins architectures such as FiD (<a href="https://arxiv.org/abs/2007.01282">Fusion-in-Decoder for Open-Domain Question Answering</a> by Izacard et al. (2021)) and ListT5 (<a href="https://arxiv.org/abs/2402.15838">ListT5: Listwise Re-ranking with Fusion-in-Decoder Improves Zero-shot Retrieval</a> by Yoon et al. (2024)).</p>
  </li>
</ul>

<h4 id="decoder-only-models">Decoder-Only Models</h4>

<ul>
  <li>
    <p>Decoder-only models perform ranking via <strong>generation or classification over text</strong>.</p>

    <ul>
      <li>Can be prompted for pointwise, pairwise, or listwise judgments</li>
      <li>Support reasoning-intensive ranking</li>
      <li>Often used without fine-tuning, but can also be trained</li>
    </ul>
  </li>
  <li>
    <p>Prompt-based ranking with decoder-only models is explored in <a href="https://arxiv.org/abs/2304.09542">RankGPT: A Prompt-Based Pairwise Ranking Framework for LLMs</a> by Sun et al. (2023) and large-scale evaluation studies such as <a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a> by Zheng et al. (2023).</p>
  </li>
</ul>

<h3 id="the-role-of-llm-as-a-judge-in-ltr-fine-tuning">The Role of LLM-as-a-Judge in LTR Fine-Tuning</h3>

<ul>
  <li>
    <p>LLM-as-a-Judge acts as a <strong>scalable supervision source</strong> across architectures:</p>

    <ul>
      <li>Pointwise scores <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-19-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-165" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-166"><span class="mo" id="MathJax-Span-167" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-19">\rightarrow</script> regression targets</li>
      <li>Pairwise preferences <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-20-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-168" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-169"><span class="mo" id="MathJax-Span-170" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-20">\rightarrow</script> ranking constraints</li>
      <li>Listwise rankings <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-21-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-171" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-172"><span class="mo" id="MathJax-Span-173" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-21">\rightarrow</script> permutation supervision</li>
    </ul>
  </li>
  <li>
    <p>This enables <strong>weakly supervised LTR</strong>, reducing reliance on expensive human labels, as demonstrated in <a href="https://arxiv.org/abs/2302.08582">Training Language Models from AI Feedback</a> by Bai et al. (2023).</p>
  </li>
</ul>

<h3 id="encoder-only-models-for-ltr">Encoder-Only Models for LTR</h3>

<ul>
  <li>
    <p>Encoder-only transformer models form the backbone of most <strong>high-precision neural ranking systems</strong> used today. These models take structured inputs (queries, documents, or generated outputs) and map them to contextual representations that are then converted into relevance scores. Their strength lies in <strong>token-level interaction modeling</strong>, which makes them especially effective for reranking small candidate sets.</p>
  </li>
  <li>
    <p>Canonical encoder-only architectures are based on transformers such as <a href="https://arxiv.org/abs/1810.04805">BERT</a> by Devlin et al. (2018), <a href="https://arxiv.org/abs/1907.11692">RoBERTa</a> by Liu et al. (2019), and <a href="https://arxiv.org/abs/2003.10555">ELECTRA</a> by Clark et al. (2020).</p>
  </li>
  <li>
    <p>Encoder-only rankers are most commonly implemented as <strong>cross-encoders</strong>, where the query and candidate are jointly encoded, enabling full self-attention across tokens.</p>
  </li>
</ul>

<h4 id="pointwise-encoder-only-ranking">Pointwise Encoder-Only Ranking</h4>

<h5 id="architecture">Architecture</h5>

<ul>
  <li>
    <p>In pointwise ranking, the model independently scores each query–candidate pair.</p>
  </li>
  <li><strong>Architecture:</strong> <strong>Cross-encoder</strong></li>
  <li>
    <p><strong>Input format:</strong></p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-22-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;[CLS] q [SEP] d_i [SEP]&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-174" style="width: 13.909em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.565em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1011.46em, 2.867em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-175"><span class="texatom" id="MathJax-Span-176"><span class="mrow" id="MathJax-Span-177"><span class="mtext" id="MathJax-Span-178" style="font-family: STIXGeneral-Regular;">[𝙲𝙻𝚂]<span style="font-family: STIXVariants; font-style: normal; font-weight: normal;"> <span style="margin-left: 0.263em;"></span></span>𝚚<span style="font-family: STIXVariants; font-style: normal; font-weight: normal;"> <span style="margin-left: 0.263em;"></span></span>[𝚂𝙴𝙿]<span style="font-family: STIXVariants; font-style: normal; font-weight: normal;"> <span style="margin-left: 0.263em;"></span></span>𝚍_𝚒<span style="font-family: STIXVariants; font-style: normal; font-weight: normal;"> <span style="margin-left: 0.263em;"></span></span>[𝚂𝙴𝙿]</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">[CLS] q [SEP] d_i [SEP]</mtext></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-22">\texttt{[CLS] q [SEP] d_i [SEP]}</script>
  </li>
  <li>
    <p><strong>Output:</strong> scalar relevance score derived from the final <code class="language-plaintext highlighter-rouge">[CLS]</code> embedding</p>
  </li>
  <li>This joint encoding allows the model to capture fine-grained semantic interactions such as negation, entity alignment, and discourse structure, which are inaccessible to bi-encoders.</li>
</ul>

<h5 id="example-monobert">Example: MonoBERT</h5>

<ul>
  <li>
    <p><a href="https://arxiv.org/abs/1910.14424">Multi-Stage Document Ranking with BERT</a> by Nogueira et al. (2019)</p>
  </li>
  <li>
    <p>monoBERT estimates an absolute relevance probability:</p>
  </li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-23-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mtext&gt;relevant&lt;/mtext&gt;&lt;mo&gt;&amp;#x2223;&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-179" style="width: 10.784em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.961em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1008.91em, 2.607em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-180"><span class="msubsup" id="MathJax-Span-181"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-182" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-183" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-184" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mi" id="MathJax-Span-185" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">P</span><span class="mo" id="MathJax-Span-186" style="font-family: STIXGeneral-Regular;">(</span><span class="mtext" id="MathJax-Span-187" style="font-family: STIXGeneral-Regular;">relevant</span><span class="mo" id="MathJax-Span-188" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∣</span><span class="mi" id="MathJax-Span-189" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">q</span><span class="mo" id="MathJax-Span-190" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-191" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-192" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-193" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-194" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>s</mi><mi>i</mi></msub><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><mtext>relevant</mtext><mo>∣</mo><mi>q</mi><mo>,</mo><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-23">s_i = P(\text{relevant} \mid q, d_i)</script>

<ul>
  <li>Although originally designed for document retrieval, monoBERT-style models are now widely used to rank <strong>generated outputs</strong>, including summaries, answers, and tool responses.</li>
</ul>

<h5 id="loss-function">Loss Function</h5>

<ul>
  <li>
    <p>Pointwise models are typically trained using <strong>binary cross-entropy</strong> or regression losses:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-24-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;pointwise&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-195" style="width: 21.513em; display: inline-block;"><span style="display: inline-block; position: relative; width: 17.919em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.878em, 1017.76em, 3.44em, -999.997em); top: -2.914em; left: 0em;"><span class="mrow" id="MathJax-Span-196"><span class="msubsup" id="MathJax-Span-197"><span style="display: inline-block; position: relative; width: 3.544em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-198"><span class="mrow" id="MathJax-Span-199"><span class="mi" id="MathJax-Span-200" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-201"><span class="mrow" id="MathJax-Span-202"><span class="mtext" id="MathJax-Span-203" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">pointwise</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-204" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mo" id="MathJax-Span-205" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">−</span><span class="mrow" id="MathJax-Span-206" style="padding-left: 0.211em;"><span class="mo" id="MathJax-Span-207" style="vertical-align: -0.206em;"><span style="font-family: STIXSizeOneSym;">[</span></span><span class="mrow" id="MathJax-Span-208"><span class="msubsup" id="MathJax-Span-209"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-210" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-211" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mi" id="MathJax-Span-212" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">log</span><span class="mo" id="MathJax-Span-213"></span><span class="msubsup" id="MathJax-Span-214" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-215" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-216" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-217" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">+</span><span class="mo" id="MathJax-Span-218" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">(</span><span class="mn" id="MathJax-Span-219" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-220" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">−</span><span class="msubsup" id="MathJax-Span-221" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-222" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-223" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-224" style="font-family: STIXGeneral-Regular;">)</span><span class="mi" id="MathJax-Span-225" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">log</span><span class="mo" id="MathJax-Span-226"></span><span class="mo" id="MathJax-Span-227" style="font-family: STIXGeneral-Regular;">(</span><span class="mn" id="MathJax-Span-228" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-229" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">−</span><span class="msubsup" id="MathJax-Span-230" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-231" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-232" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-233" style="font-family: STIXGeneral-Regular;">)</span></span><span class="mo" id="MathJax-Span-234" style="vertical-align: -0.206em;"><span style="font-family: STIXSizeOneSym;">]</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.919em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.628em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>pointwise</mtext></mrow></msub><mo>=</mo><mo>−</mo><mrow><mo>[</mo><mrow><msub><mi>y</mi><mi>i</mi></msub><mi>log</mi><mo>⁡</mo><msub><mi>s</mi><mi>i</mi></msub><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo><mi>log</mi><mo>⁡</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy="false">)</mo></mrow><mo>]</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-24">\mathcal{L}_{\text{pointwise}} =
  -\left[y_i \log s_i + (1 - y_i)\log(1 - s_i)\right]</script>

    <ul>
      <li>where <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-25-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2208;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-235" style="width: 4.065em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.388em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1003.28em, 2.607em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-236"><span class="msubsup" id="MathJax-Span-237"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-238" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-239" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-240" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∈</span><span class="texatom" id="MathJax-Span-241" style="padding-left: 0.315em;"><span class="mrow" id="MathJax-Span-242"><span class="mn" id="MathJax-Span-243" style="font-family: STIXGeneral-Regular;">0</span><span class="mo" id="MathJax-Span-244" style="font-family: STIXGeneral-Regular;">,</span><span class="mn" id="MathJax-Span-245" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">1</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>y</mi><mi>i</mi></msub><mo>∈</mo><mrow class="MJX-TeXAtom-ORD"><mn>0</mn><mo>,</mo><mn>1</mn></mrow></math></span></span><script type="math/tex" id="MathJax-Element-25">y_i \in {0,1}</script> is a relevance label.</li>
    </ul>
  </li>
  <li>
    <p>When supervision comes from LLM-as-a-Judge, labels may be:</p>

    <ul>
      <li>Binary (acceptable / unacceptable)</li>
      <li>Ordinal (Likert-style scores)</li>
      <li>Continuous (normalized quality scores)</li>
    </ul>
  </li>
</ul>

<h5 id="inputoutput-example">Input–Output Example</h5>

<ul>
  <li><strong>Input:</strong>
    <ul>
      <li><strong>Query:</strong> “Summarize the paper”</li>
      <li><strong>Candidate:</strong> model-generated summary</li>
    </ul>
  </li>
  <li>
    <p><strong>Output:</strong> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-26-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;0.91&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-246" style="width: 4.378em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.648em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1003.54em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-247"><span class="msubsup" id="MathJax-Span-248"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-249" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-250" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-251" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mn" id="MathJax-Span-252" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">0.91</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>s</mi><mi>i</mi></msub><mo>=</mo><mn>0.91</mn></math></span></span><script type="math/tex" id="MathJax-Element-26">s_i = 0.91</script></p>
  </li>
  <li>This setup directly mirrors a <strong>pointwise LLM-as-a-Judge</strong>, where each output is scored independently.</li>
</ul>

<h4 id="pairwise-encoder-only-ranking">Pairwise Encoder-Only Ranking</h4>

<ul>
  <li>Pairwise ranking reframes relevance as a <strong>relative preference</strong> between two candidates under the same query.</li>
</ul>

<h5 id="architecture-1">Architecture</h5>

<ul>
  <li>Cross-encoder</li>
  <li>
    <p>Input format:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-27-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext mathvariant=&quot;monospace&quot;&gt;[CLS] q [SEP] d_i [SEP] d_j [SEP]&lt;/mtext&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-253" style="width: 20.003em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.669em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1016.57em, 2.867em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-254"><span class="texatom" id="MathJax-Span-255"><span class="mrow" id="MathJax-Span-256"><span class="mtext" id="MathJax-Span-257" style="font-family: STIXGeneral-Regular;">[𝙲𝙻𝚂]<span style="font-family: STIXVariants; font-style: normal; font-weight: normal;"> <span style="margin-left: 0.263em;"></span></span>𝚚<span style="font-family: STIXVariants; font-style: normal; font-weight: normal;"> <span style="margin-left: 0.263em;"></span></span>[𝚂𝙴𝙿]<span style="font-family: STIXVariants; font-style: normal; font-weight: normal;"> <span style="margin-left: 0.263em;"></span></span>𝚍_𝚒<span style="font-family: STIXVariants; font-style: normal; font-weight: normal;"> <span style="margin-left: 0.263em;"></span></span>[𝚂𝙴𝙿]<span style="font-family: STIXVariants; font-style: normal; font-weight: normal;"> <span style="margin-left: 0.263em;"></span></span>𝚍_𝚓<span style="font-family: STIXVariants; font-style: normal; font-weight: normal;"> <span style="margin-left: 0.263em;"></span></span>[𝚂𝙴𝙿]</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><mtext mathvariant="monospace">[CLS] q [SEP] d_i [SEP] d_j [SEP]</mtext></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-27">\texttt{[CLS] q [SEP] d_i [SEP] d_j [SEP]}</script>
  </li>
  <li>The model processes both candidates jointly and produces a score indicating which is preferred.</li>
</ul>

<h5 id="example-duobert">Example: DuoBERT</h5>

<ul>
  <li>Proposed in <a href="https://arxiv.org/abs/1910.14424">Multi-Stage Document Ranking with BERT</a> by Nogueira et al. (2019), duoBERT estimates:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-28-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x227B;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2223;&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-258" style="width: 9.273em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.711em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1007.66em, 2.711em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-259"><span class="msubsup" id="MathJax-Span-260"><span style="display: inline-block; position: relative; width: 1.148em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-261" style="font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="texatom" id="MathJax-Span-262"><span class="mrow" id="MathJax-Span-263"><span class="mi" id="MathJax-Span-264" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-265" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-266" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-267" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mi" id="MathJax-Span-268" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">P</span><span class="mo" id="MathJax-Span-269" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-270"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-271" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-272" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-273" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">≻</span><span class="msubsup" id="MathJax-Span-274" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-275" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-276" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-277" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∣</span><span class="mi" id="MathJax-Span-278" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">q</span><span class="mo" id="MathJax-Span-279" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>p</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>=</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>d</mi><mi>i</mi></msub><mo>≻</mo><msub><mi>d</mi><mi>j</mi></msub><mo>∣</mo><mi>q</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-28">p_{i,j} = P(d_i \succ d_j \mid q)</script>

<ul>
  <li>Unlike pointwise models, pairwise models are invariant to absolute score calibration, which often leads to more stable training.</li>
</ul>

<h5 id="loss-function-1">Loss Function</h5>

<ul>
  <li>A common choice is <strong>pairwise logistic loss</strong> (introduced in <a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/MSR-TR-2010-82.pdf">RankNet</a> by Burges et al. (2010)):</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-29-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;pairwise&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mi&gt;&amp;#x03C3;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-280" style="width: 12.451em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.367em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1010.32em, 2.659em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-281"><span class="msubsup" id="MathJax-Span-282"><span style="display: inline-block; position: relative; width: 3.18em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-283"><span class="mrow" id="MathJax-Span-284"><span class="mi" id="MathJax-Span-285" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-286"><span class="mrow" id="MathJax-Span-287"><span class="mtext" id="MathJax-Span-288" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">pairwise</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-289" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mo" id="MathJax-Span-290" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">−</span><span class="mi" id="MathJax-Span-291" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">log</span><span class="mo" id="MathJax-Span-292"></span><span class="mi" id="MathJax-Span-293" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mo" id="MathJax-Span-294" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-295"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-296" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-297" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-298" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">−</span><span class="msubsup" id="MathJax-Span-299" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-300" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-301" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-302" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>pairwise</mtext></mrow></msub><mo>=</mo><mo>−</mo><mi>log</mi><mo>⁡</mo><mi>σ</mi><mo stretchy="false">(</mo><msub><mi>s</mi><mi>i</mi></msub><mo>−</mo><msub><mi>s</mi><mi>j</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-29">\mathcal{L}_{\text{pairwise}} = -\log \sigma(s_i - s_j)</script>

<ul>
  <li>This loss encourages the score of the preferred candidate to exceed that of the non-preferred one.</li>
</ul>

<h5 id="inputoutput-example-1">Input–Output Example</h5>

<ul>
  <li><strong>Input:</strong> Query + Summary A + Summary B</li>
  <li>
    <p><strong>Output:</strong> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-30-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;A&lt;/mi&gt;&lt;mo&gt;&amp;#x227B;&lt;/mo&gt;&lt;mi&gt;B&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;0.78&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-303" style="width: 8.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.773em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1006.72em, 2.555em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-304"><span class="mi" id="MathJax-Span-305" style="font-family: STIXGeneral-Italic;">P</span><span class="mo" id="MathJax-Span-306" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-307" style="font-family: STIXGeneral-Italic;">A</span><span class="mo" id="MathJax-Span-308" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">≻</span><span class="mi" id="MathJax-Span-309" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">B</span><span class="mo" id="MathJax-Span-310" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-311" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mn" id="MathJax-Span-312" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">0.78</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>P</mi><mo stretchy="false">(</mo><mi>A</mi><mo>≻</mo><mi>B</mi><mo stretchy="false">)</mo><mo>=</mo><mn>0.78</mn></math></span></span><script type="math/tex" id="MathJax-Element-30">P(A \succ B) = 0.78</script></p>
  </li>
  <li>
    <p>Pairwise supervision aligns closely with <strong>pairwise LLM-as-a-Judge prompts</strong> (“Which output is better?”), which have been shown to yield higher agreement than absolute ratings, as discussed in <a href="https://arxiv.org/abs/2305.17926">A Large-Scale Analysis of Evaluation Biases in LLMs</a> by Wang et al. (2023).</p>
  </li>
  <li>The following figure (<a href="https://arxiv.org/abs/1910.14424">source</a>) shows an illustration of a multi-stage ranking architecture involving BM25 as the first stage, monoBERT as the second stage, and duoBERT as the third stage. In the first stage <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-31-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-313" style="width: 1.409em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.148em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.15em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-314"><span class="msubsup" id="MathJax-Span-315"><span style="display: inline-block; position: relative; width: 1.148em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-316" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.732em;"><span class="mn" id="MathJax-Span-317" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>H</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-31">H_0</script>, given a query <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-32-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-318" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-319"><span class="mi" id="MathJax-Span-320" style="font-family: STIXGeneral-Italic;">q</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>q</mi></math></span></span><script type="math/tex" id="MathJax-Element-32">q</script>, the top-<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-33-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-321" style="width: 1.096em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1000.89em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-322"><span class="msubsup" id="MathJax-Span-323"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-324" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-325" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-33">k_0</script> (<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-34-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-326" style="width: 3.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.607em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1002.55em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-327"><span class="msubsup" id="MathJax-Span-328"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-329" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-330" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-331" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mn" id="MathJax-Span-332" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">5</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mn>0</mn></msub><mo>=</mo><mn>5</mn></math></span></span><script type="math/tex" id="MathJax-Element-34">k_0 = 5</script> in the figure) candidate documents <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-35-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-333" style="width: 1.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.04em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-334"><span class="msubsup" id="MathJax-Span-335"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.58em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-336" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.628em;"><span class="mn" id="MathJax-Span-337" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>R</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-35">R_0</script> are retrieved using BM25. In the second stage <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-36-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-338" style="width: 1.409em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.148em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.15em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-339"><span class="msubsup" id="MathJax-Span-340"><span style="display: inline-block; position: relative; width: 1.148em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-341" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.732em;"><span class="mn" id="MathJax-Span-342" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>H</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-36">H_1</script>, monoBERT produces a relevance score <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-37-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-343" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.68em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-344"><span class="msubsup" id="MathJax-Span-345"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-346" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-347" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>s</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-37">s_i</script> for each pair of query <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-38-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-348" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-349"><span class="mi" id="MathJax-Span-350" style="font-family: STIXGeneral-Italic;">q</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>q</mi></math></span></span><script type="math/tex" id="MathJax-Element-38">q</script> and candidate <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-39-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2208;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-351" style="width: 3.648em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.023em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1003.02em, 2.555em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-352"><span class="msubsup" id="MathJax-Span-353"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-354" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-355" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-356" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∈</span><span class="msubsup" id="MathJax-Span-357" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.58em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-358" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.628em;"><span class="mn" id="MathJax-Span-359" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">0</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>d</mi><mi>i</mi></msub><mo>∈</mo><msub><mi>R</mi><mn>0</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-39">d_i \in R_0</script>. The top-<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-40-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-360" style="width: 1.096em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1000.89em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-361"><span class="msubsup" id="MathJax-Span-362"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-363" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-364" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mn>1</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-40">k_1</script> (<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-41-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-365" style="width: 3.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.607em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1002.55em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-366"><span class="msubsup" id="MathJax-Span-367"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-368" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-369" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-370" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mn" id="MathJax-Span-371" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">3</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>k</mi><mn>1</mn></msub><mo>=</mo><mn>3</mn></math></span></span><script type="math/tex" id="MathJax-Element-41">k_1 = 3</script> in the figure) candidates with respect to these relevance scores are passed to the last stage <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-42-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;H&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-372" style="width: 1.409em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.148em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.15em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-373"><span class="msubsup" id="MathJax-Span-374"><span style="display: inline-block; position: relative; width: 1.148em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.78em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-375" style="font-family: STIXGeneral-Italic;">H<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.732em;"><span class="mn" id="MathJax-Span-376" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>H</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-42">H_2</script>, in which duoBERT computes a relevance score <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-43-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;p&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-377" style="width: 1.409em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.148em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1001.15em, 2.607em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-378"><span class="msubsup" id="MathJax-Span-379"><span style="display: inline-block; position: relative; width: 1.148em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-380" style="font-family: STIXGeneral-Italic;">p</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="texatom" id="MathJax-Span-381"><span class="mrow" id="MathJax-Span-382"><span class="mi" id="MathJax-Span-383" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-384" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-385" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>p</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-43">p_{i,j}</script> for each triple <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-44-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-386" style="width: 4.378em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.648em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1003.6em, 2.659em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-387"><span class="mo" id="MathJax-Span-388" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-389" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-390" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-391" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-392" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-393" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-394" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-395" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-396" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-397" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-398" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><msub><mi>d</mi><mi>i</mi></msub><mo>,</mo><msub><mi>d</mi><mi>j</mi></msub><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-44">(q, d_i, d_j)</script>. The final list of candidates <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-45-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;R&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-399" style="width: 1.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.04em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-400"><span class="msubsup" id="MathJax-Span-401"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.58em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-402" style="font-family: STIXGeneral-Italic;">R</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.628em;"><span class="mn" id="MathJax-Span-403" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>R</mi><mn>2</mn></msub></math></span></span><script type="math/tex" id="MathJax-Element-45">R_2</script> is formed by re-ranking the candidates according to these scores (see Section 3.3 for a description of how these pairwise scores are aggregated).</li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/monoBERT-duoBERT.jpg" alt=""></p>

<h4 id="listwise-encoder-only-ranking">Listwise Encoder-Only Ranking</h4>

<ul>
  <li>Listwise ranking considers an entire candidate set jointly and optimizes ranking quality at the list level.</li>
</ul>

<h5 id="architecture-2">Architecture</h5>

<ul>
  <li>Extended cross-encoder</li>
  <li>Input includes multiple candidates (often truncated for efficiency)</li>
  <li>
    <p>Output is a list of scores or a permutation distribution</p>
  </li>
  <li>Listwise methods aim to optimize ranking metrics directly rather than approximating them via pairwise comparisons.</li>
</ul>

<h5 id="example-listbert">Example: ListBERT</h5>

<ul>
  <li>
    <p><a href="https://arxiv.org/abs/2206.15198">ListBERT: Learning to Rank E-commerce Products with Listwise BERT</a> by Kumar et al. (2022)</p>
  </li>
  <li>
    <p>The following figure (<a href="https://arxiv.org/abs/2206.15198">source</a>) shows the ListBERT architecture.</p>
  </li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/ListBERT.jpg" alt=""></p>

<h4 id="direct-and-approximate-optimization-of-ndcg">Direct and Approximate Optimization of NDCG</h4>

<ul>
  <li>A central motivation for listwise ranking is <strong>directly optimizing ranking metrics</strong> such as Normalized Discounted Cumulative Gain (NDCG).</li>
</ul>

<h5 id="ndcg-definition">NDCG Definition</h5>

<ul>
  <li>Given a ranked list, DCG is defined as:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-46-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtext&gt;DCG&lt;/mtext&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;munderover&gt;&lt;mo&gt;&amp;#x2211;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;/munderover&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-404" style="width: 11.461em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.534em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.419em, 1009.53em, 3.596em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-405"><span class="mtext" id="MathJax-Span-406" style="font-family: STIXGeneral-Regular;">DCG</span><span class="mo" id="MathJax-Span-407" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="munderover" id="MathJax-Span-408" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 1.305em; height: 0px;"><span style="position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-409" style="font-family: STIXSizeOneSym; vertical-align: -0.518em;">∑</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.388em, 1000.94em, 4.273em, -999.997em); top: -2.862em; left: 0.107em;"><span class="texatom" id="MathJax-Span-410"><span class="mrow" id="MathJax-Span-411"><span class="mi" id="MathJax-Span-412" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-413" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">=</span><span class="mn" id="MathJax-Span-414" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.44em, 1000.32em, 4.169em, -999.997em); top: -5.206em; left: 0.471em;"><span class="texatom" id="MathJax-Span-415"><span class="mrow" id="MathJax-Span-416"><span class="mi" id="MathJax-Span-417" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mfrac" id="MathJax-Span-418" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 4.482em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;"><span style="position: absolute; clip: rect(2.971em, 1003.18em, 4.326em, -999.997em); top: -4.685em; left: 50%; margin-left: -1.612em;"><span class="mrow" id="MathJax-Span-419"><span class="msubsup" id="MathJax-Span-420"><span style="display: inline-block; position: relative; width: 1.565em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mn" id="MathJax-Span-421" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.523em;"><span class="texatom" id="MathJax-Span-422"><span class="mrow" id="MathJax-Span-423"><span class="mi" id="MathJax-Span-424" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-425" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">e</span><span class="msubsup" id="MathJax-Span-426"><span style="display: inline-block; position: relative; width: 0.367em; height: 0px;"><span style="position: absolute; clip: rect(3.388em, 1000.21em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-427" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.904em; left: 0.211em;"><span class="mi" id="MathJax-Span-428" style="font-size: 50%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-429" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">−</span><span class="mn" id="MathJax-Span-430" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">1</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.18em, 1004.33em, 4.43em, -999.997em); top: -3.331em; left: 50%; margin-left: -2.185em;"><span class="mrow" id="MathJax-Span-431"><span class="msubsup" id="MathJax-Span-432"><span style="display: inline-block; position: relative; width: 1.721em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1001.25em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-433" style="font-family: STIXGeneral-Regular;">log</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.747em; left: 1.305em;"><span class="mn" id="MathJax-Span-434" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-435"></span><span class="mo" id="MathJax-Span-436" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-437" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-438" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">+</span><span class="mn" id="MathJax-Span-439" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">1</span><span class="mo" id="MathJax-Span-440" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.836em, 1004.48em, 1.201em, -999.997em); top: -1.247em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 4.482em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.559em; border-left: 0px solid; width: 0px; height: 3.566em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>DCG</mtext><mo>=</mo><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow></munderover><mfrac><mrow><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mi>r</mi><mi>e</mi><msub><mi>l</mi><mi>i</mi></msub></mrow></msup><mo>−</mo><mn>1</mn></mrow><mrow><msub><mi>log</mi><mn>2</mn></msub><mo>⁡</mo><mo stretchy="false">(</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mfrac></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-46">\text{DCG} = \sum_{i=1}^{n} \frac{2^{rel_i} - 1}{\log_2(i + 1)}</script>

<ul>
  <li>
    <p>… and NDCG is:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-47-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtext&gt;NDCG&lt;/mtext&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mtext&gt;DCG&lt;/mtext&gt;&lt;mtext&gt;IDCG&lt;/mtext&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-441" style="width: 8.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.773em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.68em, 1006.77em, 3.023em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-442"><span class="mtext" id="MathJax-Span-443" style="font-family: STIXGeneral-Regular;">NDCG</span><span class="mo" id="MathJax-Span-444" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mfrac" id="MathJax-Span-445" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 2.555em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;"><span style="position: absolute; clip: rect(3.18em, 1002.09em, 4.169em, -999.997em); top: -4.685em; left: 50%; margin-left: -1.039em;"><span class="mtext" id="MathJax-Span-446" style="font-family: STIXGeneral-Regular;">DCG</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.18em, 1002.45em, 4.169em, -999.997em); top: -3.331em; left: 50%; margin-left: -1.195em;"><span class="mtext" id="MathJax-Span-447" style="font-family: STIXGeneral-Regular;">IDCG</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.836em, 1002.55em, 1.201em, -999.997em); top: -1.247em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.555em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.872em; border-left: 0px solid; width: 0px; height: 2.566em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>NDCG</mtext><mo>=</mo><mfrac><mtext>DCG</mtext><mtext>IDCG</mtext></mfrac></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-47">\text{NDCG} = \frac{\text{DCG}}{\text{IDCG}}</script>

    <ul>
      <li>where IDCG is the DCG of the ideal ranking.</li>
    </ul>
  </li>
  <li>
    <p>Because NDCG is non-differentiable, encoder-only models rely on <strong>surrogate losses</strong>.</p>
  </li>
</ul>

<h5 id="common-listwise-losses">Common Listwise Losses</h5>

<ul>
  <li><strong>ListMLE</strong> (<a href="https://dl.acm.org/doi/10.1145/1277741.1277800">Listwise Approach to Learning to Rank</a> by Cao et al. (2007)):</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-48-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;ListMLE&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;/msup&gt;&lt;mo&gt;&amp;#x2223;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;msub&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-448" style="width: 16.826em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.013em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1013.96em, 2.607em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-449"><span class="msubsup" id="MathJax-Span-450"><span style="display: inline-block; position: relative; width: 3.388em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-451"><span class="mrow" id="MathJax-Span-452"><span class="mi" id="MathJax-Span-453" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-454"><span class="mrow" id="MathJax-Span-455"><span class="mtext" id="MathJax-Span-456" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">ListMLE</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-457" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mo" id="MathJax-Span-458" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">−</span><span class="mi" id="MathJax-Span-459" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">log</span><span class="mo" id="MathJax-Span-460"></span><span class="mi" id="MathJax-Span-461" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">P</span><span class="mo" id="MathJax-Span-462" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-463"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-464" style="font-family: STIXGeneral-Italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.576em;"><span class="mo" id="MathJax-Span-465" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∗</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-466" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∣</span><span class="texatom" id="MathJax-Span-467" style="padding-left: 0.315em;"><span class="mrow" id="MathJax-Span-468"><span class="msubsup" id="MathJax-Span-469"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-470" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mn" id="MathJax-Span-471" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-472" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-473" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">…</span><span class="mo" id="MathJax-Span-474" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">,</span><span class="msubsup" id="MathJax-Span-475" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-476" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-477" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-478" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>ListMLE</mtext></mrow></msub><mo>=</mo><mo>−</mo><mi>log</mi><mo>⁡</mo><mi>P</mi><mo stretchy="false">(</mo><msup><mi>π</mi><mo>∗</mo></msup><mo>∣</mo><mrow class="MJX-TeXAtom-ORD"><msub><mi>d</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>d</mi><mi>n</mi></msub></mrow><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-48">\mathcal{L}_{\text{ListMLE}} = -\log P(\pi^* \mid {d_1,\dots,d_n})</script>

<ul>
  <li><strong>Softmax Cross-Entropy over relevance labels</strong></li>
  <li>
    <p><strong>LambdaRank / LambdaLoss</strong>, which approximate gradients of NDCG (<a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/MSR-TR-2005-82.pdf">Learning to Rank Using Gradient Descent</a> by Burges et al. (2005))</p>
  </li>
  <li>These methods weight gradient updates by estimated changes in NDCG, allowing encoder-only models to optimize ranking quality more directly.</li>
</ul>

<h4 id="relationship-to-llm-as-a-judge-supervision">Relationship to LLM-as-a-Judge Supervision</h4>

<ul>
  <li>
    <p>Encoder-only rankers are often trained using supervision derived from LLM-as-a-Judge:</p>

    <ul>
      <li>Pointwise judge scores <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-49-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-479" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-480"><span class="mo" id="MathJax-Span-481" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-49">\rightarrow</script> regression or classification labels</li>
      <li>Pairwise judge preferences <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-50-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-482" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-483"><span class="mo" id="MathJax-Span-484" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-50">\rightarrow</script> ordered pairs</li>
      <li>Aggregated judge rankings <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-51-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-485" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-486"><span class="mo" id="MathJax-Span-487" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-51">\rightarrow</script> listwise permutations</li>
    </ul>
  </li>
  <li>
    <p>This weak supervision strategy is increasingly common in large-scale systems where human labels are scarce, and is conceptually aligned with RLAIF pipelines such as <a href="https://arxiv.org/abs/2302.08582">Training Language Models from AI Feedback</a> by Bai et al. (2023).</p>
  </li>
</ul>

<h4 id="takeaways">Takeaways</h4>

<ul>
  <li>
    <p><strong>Cross-encoder architectures enable high-precision ranking</strong> by jointly encoding the query and candidate output, allowing full token-level interaction and capturing fine-grained relevance signals that simpler models miss.</p>
  </li>
  <li>
    <p><strong>All major LTR paradigms are supported</strong>—pointwise (absolute scoring), pairwise (relative preferences), and listwise (global ordering)—with different trade-offs in supervision complexity, stability, and alignment with ranking objectives.</p>
  </li>
  <li>
    <p><strong>Listwise training methods enable approximate or direct optimization of NDCG</strong>, using surrogate losses such as ListMLE or gradient-based approaches like LambdaRank to overcome the non-differentiability of ranking metrics.</p>
  </li>
  <li>
    <p><strong>LLM-as-a-Judge provides scalable, high-quality supervision signals</strong> that can replace or augment human annotations, enabling efficient fine-tuning of encoder-based LTR models across pointwise, pairwise, and listwise settings.</p>
  </li>
</ul>

<h3 id="encoderdecoder-models-for-learning-to-rank-ltr-listwise-reasoning-at-decode-time">Encoder–Decoder Models for Learning-to-Rank (LTR): Listwise Reasoning at Decode Time</h3>

<ul>
  <li>
    <p>Encoder–decoder architectures extend encoder-only rankers by enabling <strong>list-level reasoning during decoding</strong>, rather than relying solely on encoder-side interactions. This shift is especially powerful for <strong>listwise ranking</strong>, where the objective depends on the <em>entire ordering</em> of candidates (e.g., NDCG), and where global trade-offs across candidates matter.</p>
  </li>
  <li>
    <p>Foundational encoder–decoder models include <a href="https://arxiv.org/abs/1910.10683">T5</a> by Raffel et al. (2019) and <a href="https://arxiv.org/abs/1910.13461">BART</a> by Lewis et al. (2019). In ranking settings, these models are adapted to ingest multiple candidates and produce <strong>ranking-aware outputs</strong>—scores, permutations, or ordered tokens—via the decoder.</p>
  </li>
</ul>

<h4 id="why-encoderdecoder-for-ranking">Why Encoder–Decoder for Ranking?</h4>

<ul>
  <li>
    <p>Encoder-only listwise rankers face two core limitations:</p>

    <ol>
      <li><strong>Quadratic encoder cost</strong> when jointly encoding many candidates.</li>
      <li><strong>Weak global reasoning</strong>, since most listwise losses still rely on per-item scores.</li>
    </ol>
  </li>
  <li>
    <p>Encoder–decoder models address both by:</p>

    <ul>
      <li>Encoding each candidate independently (linear in list size).</li>
      <li>Performing <strong>global interaction in the decoder</strong>, which attends over <em>all</em> candidate encodings.</li>
    </ul>
  </li>
  <li>
    <p>This design enables richer list-level dependencies while keeping computation tractable.</p>
  </li>
</ul>

<h4 id="fusion-in-decoder-fid-the-core-pattern">Fusion-in-Decoder (FiD): the Core Pattern</h4>

<ul>
  <li>The canonical architecture for encoder–decoder ranking is <strong>Fusion-in-Decoder (FiD)</strong>, introduced in
<a href="https://arxiv.org/abs/2007.01282">Fusion-in-Decoder for Open-Domain Question Answering</a> by Izacard et al. (2021).</li>
</ul>

<h5 id="architecture-3">Architecture</h5>

<ul>
  <li><strong>Encoder</strong>: independently encodes each (query, candidate) pair</li>
  <li><strong>Decoder</strong>: attends jointly over all encoded representations</li>
  <li>
    <p><strong>Output</strong>: sequence conditioned on the <em>entire candidate set</em></p>
  </li>
  <li>The following figure (<a href="https://arxiv.org/abs/2007.01282">source</a>) shows the architecture of the FiD architecture, where multiple embedded documents are fused at decoding time.</li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/FID.jpg" alt=""></p>

<ul>
  <li>Formally, each candidate <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-52-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-488" style="width: 0.94em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1000.78em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-489"><span class="msubsup" id="MathJax-Span-490"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-491" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-492" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>d</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-52">d_i</script> is encoded as:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-53-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mtext&gt;Enc&lt;/mtext&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-493" style="width: 7.138em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.94em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1005.89em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-494"><span class="msubsup" id="MathJax-Span-495"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-496" style="font-family: STIXGeneral-Italic;">h</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-497" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-498" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mtext" id="MathJax-Span-499" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">Enc</span><span class="mo" id="MathJax-Span-500" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-501" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-502" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-503" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-504" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-505" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-506" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>h</mi><mi>i</mi></msub><mo>=</mo><mtext>Enc</mtext><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><msub><mi>d</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-53">h_i = \text{Enc}(q, d_i)</script>

<ul>
  <li>The decoder then conditions on the set <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-54-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;msub&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;h&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-507" style="width: 4.846em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.013em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1004.01em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-508"><span class="texatom" id="MathJax-Span-509"><span class="mrow" id="MathJax-Span-510"><span class="msubsup" id="MathJax-Span-511"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-512" style="font-family: STIXGeneral-Italic;">h</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mn" id="MathJax-Span-513" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-514" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-515" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">…</span><span class="mo" id="MathJax-Span-516" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">,</span><span class="msubsup" id="MathJax-Span-517" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-518" style="font-family: STIXGeneral-Italic;">h</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-519" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mrow class="MJX-TeXAtom-ORD"><msub><mi>h</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>h</mi><mi>n</mi></msub></mrow></math></span></span><script type="math/tex" id="MathJax-Element-54">{h_1, \dots, h_n}</script> to produce outputs.</li>
</ul>

<h4 id="listt5-encoderdecoder-listwise-re-ranking">ListT5: Encoder–Decoder Listwise Re-Ranking</h4>

<ul>
  <li>
    <p>A representative ranking system built on FiD is <strong>ListT5</strong>.</p>
  </li>
  <li>
    <p><a href="https://arxiv.org/abs/2402.15838">ListT5: Listwise Re-ranking with Fusion-in-Decoder Improves Zero-shot Retrieval</a> by Yoon et al. (2024)</p>
  </li>
</ul>

<h5 id="architecture-4">Architecture</h5>

<ul>
  <li><strong>Backbone:</strong> T5-style encoder–decoder</li>
  <li><strong>Encoder input:</strong> multiple (query, document) pairs</li>
  <li>
    <p><strong>Decoder output:</strong> <strong>ranking tokens</strong> representing an ordering</p>
  </li>
  <li>Unlike encoder-only models that emit scalar scores, ListT5 generates a <strong>sequence that encodes the ranking itself</strong>.</li>
</ul>

<h5 id="output-representation">Output Representation</h5>

<ul>
  <li>
    <p>For a list of <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-55-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-520" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1000.52em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-521"><span class="mi" id="MathJax-Span-522" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-55">k</script> candidates, the decoder emits a sequence such as:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><div><button class="btn-copy" data-clipboard-action="copy" data-clipboard-target="#code1"><img src="https://aman.ai/images/copy.png" style="margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;"></button></div><code id="code1">  3 &gt; 7 &gt; 1 &gt; 5 &gt; ...
</code></pre></div>    </div>
  </li>
  <li>
    <p>This sequence represents a permutation <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-56-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-523" style="width: 0.784em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.628em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.63em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-524"><span class="mi" id="MathJax-Span-525" style="font-family: STIXGeneral-Italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>π</mi></math></span></span><script type="math/tex" id="MathJax-Element-56">\pi</script> over candidates.</p>
  </li>
</ul>

<h4 id="training-objectives-for-encoderdecoder-ranking">Training Objectives for Encoder–Decoder Ranking</h4>

<ul>
  <li>Encoder–decoder rankers are naturally trained with <strong>sequence-level objectives</strong>, which align well with listwise metrics.</li>
</ul>

<h5 id="sequence-cross-entropy-loss">Sequence Cross-Entropy Loss</h5>

<ul>
  <li>Given a target permutation <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-57-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;/msup&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-526" style="width: 1.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.04em, 2.294em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-527"><span class="msubsup" id="MathJax-Span-528"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-529" style="font-family: STIXGeneral-Italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.372em; left: 0.576em;"><span class="mo" id="MathJax-Span-530" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∗</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>π</mi><mo>∗</mo></msup></math></span></span><script type="math/tex" id="MathJax-Element-57">\pi^*</script>, training minimizes:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-58-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;listwise&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;munderover&gt;&lt;mo&gt;&amp;#x2211;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/mrow&gt;&lt;/munderover&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msubsup&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;/msubsup&gt;&lt;mo&gt;&amp;#x2223;&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;msub&gt;&lt;mi&gt;d&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msubsup&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;&amp;lt;&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;/msubsup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-531" style="width: 17.398em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.482em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.315em, 1014.43em, 3.648em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-532"><span class="msubsup" id="MathJax-Span-533"><span style="display: inline-block; position: relative; width: 2.919em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-534"><span class="mrow" id="MathJax-Span-535"><span class="mi" id="MathJax-Span-536" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-537"><span class="mrow" id="MathJax-Span-538"><span class="mtext" id="MathJax-Span-539" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">listwise</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-540" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mo" id="MathJax-Span-541" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">−</span><span class="munderover" id="MathJax-Span-542" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 1.305em; height: 0px;"><span style="position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-543" style="font-family: STIXSizeOneSym; vertical-align: -0.518em;">∑</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.388em, 1000.99em, 4.273em, -999.997em); top: -2.862em; left: 0.107em;"><span class="texatom" id="MathJax-Span-544"><span class="mrow" id="MathJax-Span-545"><span class="mi" id="MathJax-Span-546" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-547" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">=</span><span class="mn" id="MathJax-Span-548" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.284em, 1000.32em, 4.169em, -999.997em); top: -5.206em; left: 0.471em;"><span class="texatom" id="MathJax-Span-549"><span class="mrow" id="MathJax-Span-550"><span class="mi" id="MathJax-Span-551" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mi" id="MathJax-Span-552" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">log</span><span class="mo" id="MathJax-Span-553"></span><span class="mi" id="MathJax-Span-554" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">P</span><span class="mo" id="MathJax-Span-555" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-556"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-557" style="font-family: STIXGeneral-Italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.544em, 1000.47em, 4.169em, -999.997em); top: -4.32em; left: 0.576em;"><span class="mo" id="MathJax-Span-558" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∗</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.492em, 1000.26em, 4.169em, -999.997em); top: -3.799em; left: 0.523em;"><span class="mi" id="MathJax-Span-559" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-560" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∣</span><span class="mi" id="MathJax-Span-561" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">q</span><span class="mo" id="MathJax-Span-562" style="font-family: STIXGeneral-Regular;">,</span><span class="texatom" id="MathJax-Span-563" style="padding-left: 0.211em;"><span class="mrow" id="MathJax-Span-564"><span class="msubsup" id="MathJax-Span-565"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-566" style="font-family: STIXGeneral-Italic;">d<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-567" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-568" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-569" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 1.253em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-570" style="font-family: STIXGeneral-Italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.544em, 1000.47em, 4.169em, -999.997em); top: -4.32em; left: 0.576em;"><span class="mo" id="MathJax-Span-571" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∗</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.492em, 1000.78em, 4.169em, -999.997em); top: -3.799em; left: 0.523em;"><span class="texatom" id="MathJax-Span-572"><span class="mrow" id="MathJax-Span-573"><span class="mo" id="MathJax-Span-574" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">&lt;</span><span class="mi" id="MathJax-Span-575" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-576" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.559em; border-left: 0px solid; width: 0px; height: 3.753em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>listwise</mtext></mrow></msub><mo>=</mo><mo>−</mo><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>t</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi></mrow></munderover><mi>log</mi><mo>⁡</mo><mi>P</mi><mo stretchy="false">(</mo><msubsup><mi>π</mi><mi>t</mi><mo>∗</mo></msubsup><mo>∣</mo><mi>q</mi><mo>,</mo><mrow class="MJX-TeXAtom-ORD"><msub><mi>d</mi><mi>i</mi></msub></mrow><mo>,</mo><msubsup><mi>π</mi><mrow class="MJX-TeXAtom-ORD"><mo>&lt;</mo><mi>t</mi></mrow><mo>∗</mo></msubsup><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-58">\mathcal{L}_{\text{listwise}} =
-\sum_{t=1}^{k} \log P(\pi^*_t \mid q, {d_i}, \pi^*_{<t})</script>

<ul>
  <li>This loss encourages the model to generate the correct ranking order token by token.</li>
</ul>

<h5 id="connection-to-ndcg-optimization">Connection to NDCG Optimization</h5>

<ul>
  <li>
    <p>While NDCG is non-differentiable, encoder–decoder models approximate it by:</p>

    <ul>
      <li>Training on permutations sorted by relevance labels</li>
      <li>Emphasizing early positions in the sequence (higher DCG weight)</li>
      <li>Using curriculum strategies that prioritize top-ranked correctness</li>
    </ul>
  </li>
  <li>
    <p>Some systems additionally <strong>reweight token-level losses</strong> by DCG discounts:</p>
  </li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-59-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;w&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-577" style="width: 8.232em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.826em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.68em, 1006.83em, 3.284em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-578"><span class="msubsup" id="MathJax-Span-579"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.63em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-580" style="font-family: STIXGeneral-Italic;">w</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="mi" id="MathJax-Span-581" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-582" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mfrac" id="MathJax-Span-583" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 4.482em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;"><span style="position: absolute; clip: rect(3.18em, 1000.42em, 4.169em, -999.997em); top: -4.685em; left: 50%; margin-left: -0.258em;"><span class="mn" id="MathJax-Span-584" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.18em, 1004.33em, 4.43em, -999.997em); top: -3.331em; left: 50%; margin-left: -2.185em;"><span class="mrow" id="MathJax-Span-585"><span class="msubsup" id="MathJax-Span-586"><span style="display: inline-block; position: relative; width: 1.721em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1001.25em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-587" style="font-family: STIXGeneral-Regular;">log</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.747em; left: 1.305em;"><span class="mn" id="MathJax-Span-588" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-589"></span><span class="mo" id="MathJax-Span-590" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-591" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-592" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">+</span><span class="mn" id="MathJax-Span-593" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">1</span><span class="mo" id="MathJax-Span-594" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.836em, 1004.48em, 1.201em, -999.997em); top: -1.247em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 4.482em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.184em; border-left: 0px solid; width: 0px; height: 2.878em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>w</mi><mi>t</mi></msub><mo>=</mo><mfrac><mn>1</mn><mrow><msub><mi>log</mi><mn>2</mn></msub><mo>⁡</mo><mo stretchy="false">(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mfrac></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-59">w_t = \frac{1}{\log_2(t + 1)}</script>

<ul>
  <li>so that early ranking errors incur larger penalties, approximating NDCG optimization.</li>
</ul>

<h4 id="advantages-over-encoder-only-listwise-models">Advantages Over Encoder-Only Listwise Models</h4>

<ul>
  <li>
    <p>Encoder–decoder rankers offer several advantages:</p>

    <ul>
      <li><strong>True listwise reasoning</strong> at decode time</li>
      <li><strong>No need for score calibration</strong></li>
      <li><strong>Direct permutation generation</strong></li>
      <li><strong>Better alignment with ranking metrics</strong></li>
    </ul>
  </li>
  <li>
    <p>Empirically, ListT5 shows strong performance in <strong>zero-shot and low-supervision</strong> settings, outperforming encoder-only baselines on retrieval benchmarks, as reported in <a href="https://arxiv.org/abs/2402.15838">ListT5: Listwise Reranking with Fusion-in-Decoder Improves Zero-shot Retrieval</a> Yoon et al. (2024).</p>
  </li>
</ul>

<h4 id="using-llm-as-a-judge-for-encoderdecoder-supervision">Using LLM-as-a-Judge for Encoder–Decoder Supervision</h4>

<ul>
  <li>
    <p>Encoder–decoder rankers are particularly well-suited to supervision from LLM-as-a-Judge:</p>

    <ul>
      <li><strong>Pointwise judges</strong> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-60-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-595" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-596"><span class="mo" id="MathJax-Span-597" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-60">\rightarrow</script> relevance labels used to construct permutations</li>
      <li><strong>Pairwise judges</strong> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-61-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-598" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-599"><span class="mo" id="MathJax-Span-600" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-61">\rightarrow</script> partial order constraints</li>
      <li><strong>Listwise judges</strong> <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-62-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-601" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-602"><span class="mo" id="MathJax-Span-603" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-62">\rightarrow</script> direct target sequences</li>
    </ul>
  </li>
  <li>
    <p>This pipeline mirrors weak-supervision strategies used in <a href="https://arxiv.org/abs/2302.08582">Training Language Models from AI Feedback</a> by Bai et al. (2023), where AI-generated preferences replace or augment human labels.</p>
  </li>
</ul>

<h4 id="when-to-use-encoderdecoder-rankers">When to Use Encoder–Decoder Rankers</h4>

<ul>
  <li>
    <p>Encoder–decoder ranking is most appropriate when:</p>

    <ul>
      <li>Ranking quality matters more than latency</li>
      <li>Candidate sets are moderate in size (e.g., 10–100)</li>
      <li>List-level consistency is critical</li>
      <li>Outputs must be globally coherent</li>
    </ul>
  </li>
  <li>
    <p>These models are increasingly used in <strong>RAG pipelines</strong>, <strong>evaluation benchmarks</strong>, and <strong>zero-shot reranking</strong> scenarios.</p>
  </li>
</ul>

<h4 id="takeaways-1">Takeaways</h4>

<ul>
  <li>
    <p><strong>Encoder–decoder architectures enable listwise reasoning during decoding</strong>, allowing global comparison across all candidates rather than independent scoring.</p>
  </li>
  <li>
    <p><strong>Fusion-in-Decoder (FiD) is the dominant architectural pattern for listwise LTR</strong>, as it encodes each query–document pair independently and fuses all representations in the decoder. This avoids quadratic encoder costs while preserving the ability to compare and weigh all candidates jointly during ranking.</p>
  </li>
  <li>
    <p><strong>ListT5 demonstrates strong listwise ranking performance in low- and zero-shot settings</strong> by adapting the T5 encoder–decoder architecture with FiD-style decoding and listwise objectives. Its results show that encoder–decoder rankers can generalize effectively even with limited supervised ranking data.</p>
  </li>
  <li>
    <p><strong>Sequence-level losses act as practical surrogates for direct NDCG optimization</strong> because they encourage correct global orderings over candidate lists. Although NDCG itself is non-differentiable, sequence cross-entropy and permutation-based losses approximate its behavior by penalizing incorrect relative positions throughout the ranked list.</p>
  </li>
  <li>
    <p><strong>LLM-as-a-Judge enables scalable supervision</strong>, supplying listwise training signals without extensive human annotation.</p>
  </li>
</ul>

<h3 id="decoder-based-llm-as-a-judge-for-ltr">Decoder-Based LLM-as-a-Judge for LTR</h3>

<ul>
  <li>
    <p>Decoder-only LLMs, such as GPT-style architectures, can act directly as ranking judges through prompting, without explicit parameter fine-tuning. In these setups, ranking behavior is induced at inference time via natural language instructions rather than learned scoring heads. Prompt-based LLM-as-a-Judge systems naturally support pointwise, pairwise, and listwise LTR formulations.</p>
  </li>
  <li>
    <p>This section describes how each paradigm is realized with decoder-only judges and explains, in depth, how listwise losses and NDCG-based objectives arise when listwise judgments are used for optimization or supervision.</p>
  </li>
  <li>
    <p>Recent work demonstrates that decoder-based judges can be specialized into evaluator LLMs that closely match human and proprietary-LLM judgments under both pointwise and pairwise formulations. Notably, Prometheus-style evaluators formalize LLM-as-a-Judge as rubric-conditioned scoring within a decoder-only architecture (<a href="https://arxiv.org/abs/2310.08491">Prometheus: Inducing Fine-grained Evaluation Capability in Language Models</a> by Kim et al. (2023); <a href="https://arxiv.org/abs/2405.01535">Prometheus 2: An Open Source Language Model Specialized in Evaluating Other Language Models</a> by Kim et al. (2024)).</p>
  </li>
  <li>
    <p>These systems treat evaluation as a conditional generation problem over instructions, candidate outputs, optional reference answers, and explicit evaluation criteria, grounding ranking behavior in structured supervision rather than implicit prompting alone.</p>
  </li>
</ul>

<h4 id="pointwise-prompt-based-llm-as-a-judge">Pointwise Prompt-Based LLM-as-a-Judge</h4>

<ul>
  <li>In pointwise evaluation, each candidate output is judged independently against a rubric.</li>
</ul>

<h5 id="prompt-pattern">Prompt Pattern</h5>

<ul>
  <li>
    <p>A typical pointwise judge prompt instructs the LLM to:</p>

    <ul>
      <li>Read the task and evaluation criteria</li>
      <li>Evaluate a single candidate output</li>
      <li>Return a discrete label or numeric score</li>
    </ul>
  </li>
  <li>
    <p>Example:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><div><button class="btn-copy" data-clipboard-action="copy" data-clipboard-target="#code2"><img src="https://aman.ai/images/copy.png" style="margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;"></button></div><code id="code2">  You are a judge. Based on the rubric below, assign a score from 1–5.
  Task: &lt;task description&gt;
  Output: &lt;candidate&gt;
  Rubric: &lt;criteria&gt;
  Score:
</code></pre></div>    </div>
  </li>
</ul>

<h5 id="interpretation-as-pointwise-ltr">Interpretation As Pointwise LTR</h5>

<ul>
  <li>
    <p>This corresponds to estimating an absolute relevance or quality score:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-63-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-604" style="width: 5.732em; display: inline-block;"><span style="display: inline-block; position: relative; width: 4.742em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1004.69em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-605"><span class="msubsup" id="MathJax-Span-606"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-607" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-608" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-609" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mi" id="MathJax-Span-610" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span class="mo" id="MathJax-Span-611" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-612" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-613" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-614" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-615" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-616" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-617" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>s</mi><mi>i</mi></msub><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-63">s_i = f(q, x_i)</script>

    <ul>
      <li>where <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-64-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-618" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-619"><span class="mi" id="MathJax-Span-620" style="font-family: STIXGeneral-Italic;">q</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>q</mi></math></span></span><script type="math/tex" id="MathJax-Element-64">q</script> is the task specification and <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-65-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-621" style="width: 0.888em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.73em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-622"><span class="msubsup" id="MathJax-Span-623"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-624" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-625" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>x</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-65">x_i</script> is a single output.</li>
    </ul>
  </li>
  <li>
    <p>This formulation underlies many practical LLM-as-a-Judge systems, including MT-Bench-style evaluations described in <a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a> by Zheng et al. (2023).</p>
  </li>
  <li>
    <p>Beyond pure prompting, pointwise judging has been explicitly modeled via supervised evaluator LLMs trained to emit both natural-language rationales and scalar scores conditioned on user-defined rubrics and reference answers, as demonstrated in <a href="https://arxiv.org/abs/2310.08491">Prometheus: Inducing Fine-grained Evaluation Capability in Language Models</a> by Kim et al. (2023).</p>
  </li>
  <li>
    <p>In this formulation, the scoring function is extended to include reference material and evaluation criteria:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-66-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;direct&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;:&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-626" style="width: 13.44em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.201em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1011.15em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-627"><span class="msubsup" id="MathJax-Span-628"><span style="display: inline-block; position: relative; width: 1.982em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-629" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.263em;"><span class="texatom" id="MathJax-Span-630"><span class="mrow" id="MathJax-Span-631"><span class="mtext" id="MathJax-Span-632" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">direct</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-633" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">:</span><span class="mo" id="MathJax-Span-634" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">(</span><span class="mi" id="MathJax-Span-635" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-636" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-637" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-638" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-639" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-640" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-641" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">a</span><span class="mo" id="MathJax-Span-642" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-643" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">e</span><span class="mo" id="MathJax-Span-644" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-645" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">→</span><span class="mo" id="MathJax-Span-646" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">(</span><span class="msubsup" id="MathJax-Span-647"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-648" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-649" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-650" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-651" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-652" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-653" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-654" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>f</mi><mrow class="MJX-TeXAtom-ORD"><mtext>direct</mtext></mrow></msub><mo>:</mo><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><mi>a</mi><mo>,</mo><mi>e</mi><mo stretchy="false">)</mo><mo stretchy="false">→</mo><mo stretchy="false">(</mo><msub><mi>r</mi><mi>i</mi></msub><mo>,</mo><msub><mi>s</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-66">f_{\text{direct}} : (q, x_i, a, e) \rightarrow (r_i, s_i)</script>

    <ul>
      <li>where <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-67-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-655" style="width: 0.576em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-656"><span class="mi" id="MathJax-Span-657" style="font-family: STIXGeneral-Italic;">a</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-67">a</script> denotes a reference answer, <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-68-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-658" style="width: 0.576em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.42em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-659"><span class="mi" id="MathJax-Span-660" style="font-family: STIXGeneral-Italic;">e</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>e</mi></math></span></span><script type="math/tex" id="MathJax-Element-68">e</script> a structured score rubric, <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-69-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-661" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.68em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-662"><span class="msubsup" id="MathJax-Span-663"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-664" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-665" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>r</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-69">r_i</script> a verbal justification, and <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-70-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2208;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;3&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;4&lt;/mn&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mn&gt;5&lt;/mn&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-666" style="width: 7.503em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.253em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1006.2em, 2.555em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-667"><span class="msubsup" id="MathJax-Span-668"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-669" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-670" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-671" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∈</span><span class="texatom" id="MathJax-Span-672" style="padding-left: 0.315em;"><span class="mrow" id="MathJax-Span-673"><span class="mn" id="MathJax-Span-674" style="font-family: STIXGeneral-Regular;">1</span><span class="mo" id="MathJax-Span-675" style="font-family: STIXGeneral-Regular;">,</span><span class="mn" id="MathJax-Span-676" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">2</span><span class="mo" id="MathJax-Span-677" style="font-family: STIXGeneral-Regular;">,</span><span class="mn" id="MathJax-Span-678" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">3</span><span class="mo" id="MathJax-Span-679" style="font-family: STIXGeneral-Regular;">,</span><span class="mn" id="MathJax-Span-680" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">4</span><span class="mo" id="MathJax-Span-681" style="font-family: STIXGeneral-Regular;">,</span><span class="mn" id="MathJax-Span-682" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">5</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>s</mi><mi>i</mi></msub><mo>∈</mo><mrow class="MJX-TeXAtom-ORD"><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mn>3</mn><mo>,</mo><mn>4</mn><mo>,</mo><mn>5</mn></mrow></math></span></span><script type="math/tex" id="MathJax-Element-70">s_i \in {1,2,3,4,5}</script> the pointwise relevance score, enabling fine-grained, rubric-aligned supervision (cf. <a href="https://arxiv.org/abs/2310.08491">Prometheus</a> by Kim et al. (2023)).</li>
    </ul>
  </li>
  <li>
    <p>Empirically, <a href="https://arxiv.org/abs/2310.08491">Prometheus: Inducing Fine-grained Evaluation Capability in Language Models</a> by Kim et al. (2023) shows that rubric-conditioned pointwise judgments substantially improve correlation with human evaluators, achieving Pearson correlations comparable to GPT-4 on MT-Bench and Vicuna Bench.</p>
  </li>
  <li>
    <p>The following figure (<a href="https://arxiv.org/abs/2310.08491">source</a>) shows that compared to conventional, coarse-grained LLM evaluation, a fine-grained approach that takes user-defined score rubrics as input.</p>
  </li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/Prometheus_1.jpg" alt=""></p>

<h5 id="implicit-losses">Implicit Losses</h5>

<ul>
  <li>
    <p>While prompt-based judging does not itself involve optimization, pointwise judge outputs are commonly reused as supervision signals when training downstream evaluators or reward models.</p>
  </li>
  <li>
    <p>In practice, scalar scores produced by judges are treated as regression targets and optimized using mean squared error:</p>
  </li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-71-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;MSE&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-683" style="width: 8.388em; display: inline-block;"><span style="display: inline-block; position: relative; width: 6.982em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.148em, 1006.98em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-684"><span class="msubsup" id="MathJax-Span-685"><span style="display: inline-block; position: relative; width: 2.242em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-686"><span class="mrow" id="MathJax-Span-687"><span class="mi" id="MathJax-Span-688" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-689"><span class="mrow" id="MathJax-Span-690"><span class="mtext" id="MathJax-Span-691" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">MSE</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-692" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mo" id="MathJax-Span-693" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">(</span><span class="msubsup" id="MathJax-Span-694"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-695" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-696" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-697" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">−</span><span class="msubsup" id="MathJax-Span-698" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-699"><span class="mrow" id="MathJax-Span-700"><span class="munderover" id="MathJax-Span-701"><span style="display: inline-block; position: relative; width: 0.367em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-702" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.06em; left: 0.055em;"><span style="height: 0em; vertical-align: 0em; width: 0.367em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-703" style="font-family: STIXGeneral-Regular;">̂&nbsp;<span style="height: 0em; vertical-align: 0em; margin-left: -0.258em;"></span></span><span style="display: inline-block; overflow: hidden; height: 1px; width: 0em;"></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-704" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-705"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.26em, 4.326em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-706" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.315em;"><span class="mn" id="MathJax-Span-707" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.441em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>MSE</mtext></mrow></msub><mo>=</mo><mo stretchy="false">(</mo><msub><mi>s</mi><mi>i</mi></msub><mo>−</mo><msub><mrow class="MJX-TeXAtom-ORD"><mover><mi>s</mi><mo stretchy="false">^</mo></mover></mrow><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-71">\mathcal{L}_{\text{MSE}} = (s_i - \hat{s}_i)^2</script>

<ul>
  <li>
    <p>When scores are discretized into ordinal buckets (e.g., 1–5), cross-entropy over score classes is also sometimes used, though regression losses are more common in evaluator training.</p>
  </li>
  <li>
    <p>Evaluator LLMs such as Prometheus are trained directly on rubric-conditioned pointwise supervision by minimizing the expected squared error between predicted and reference scores:</p>
  </li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-72-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;direct&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi mathvariant=&quot;double-struck&quot;&gt;E&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mover&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x005E;&lt;/mo&gt;&lt;/mover&gt;&lt;/mrow&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msup&gt;&lt;/mrow&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-708" style="width: 13.388em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.148em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.878em, 1010.99em, 3.44em, -999.997em); top: -2.914em; left: 0em;"><span class="mrow" id="MathJax-Span-709"><span class="msubsup" id="MathJax-Span-710"><span style="display: inline-block; position: relative; width: 2.398em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-711"><span class="mrow" id="MathJax-Span-712"><span class="mi" id="MathJax-Span-713" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-714"><span class="mrow" id="MathJax-Span-715"><span class="mtext" id="MathJax-Span-716" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">direct</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-717" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="msubsup" id="MathJax-Span-718" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 3.023em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.58em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-719"><span class="mrow" id="MathJax-Span-720"><span class="mi" id="MathJax-Span-721" style="font-family: STIXGeneral-Regular;">𝔼</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.628em;"><span class="texatom" id="MathJax-Span-722"><span class="mrow" id="MathJax-Span-723"><span class="mo" id="MathJax-Span-724" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-725" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-726" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-727" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-728" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-729" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-730" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-731" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">e</span><span class="mo" id="MathJax-Span-732" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">)</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mrow" id="MathJax-Span-733" style="padding-left: 0.211em;"><span class="mo" id="MathJax-Span-734" style="vertical-align: -0.206em;"><span style="font-family: STIXSizeOneSym;">[</span></span><span class="mrow" id="MathJax-Span-735"><span class="mo" id="MathJax-Span-736" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-737"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-738" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-739" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-740" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">−</span><span class="msubsup" id="MathJax-Span-741" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.128em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-742"><span class="mrow" id="MathJax-Span-743"><span class="munderover" id="MathJax-Span-744"><span style="display: inline-block; position: relative; width: 0.367em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-745" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.06em; left: 0.055em;"><span style="height: 0em; vertical-align: 0em; width: 0.367em; display: inline-block; overflow: hidden;"></span><span class="mo" id="MathJax-Span-746" style="font-family: STIXGeneral-Regular;">̂&nbsp;<span style="height: 0em; vertical-align: 0em; margin-left: -0.258em;"></span></span><span style="display: inline-block; overflow: hidden; height: 1px; width: 0em;"></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-747" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-748"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.26em, 4.326em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-749" style="font-family: STIXGeneral-Regular;">)</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.315em;"><span class="mn" id="MathJax-Span-750" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span class="mo" id="MathJax-Span-751" style="vertical-align: -0.206em;"><span style="font-family: STIXSizeOneSym;">]</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.919em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.628em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>direct</mtext></mrow></msub><mo>=</mo><msub><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="double-struck">E</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><mi>x</mi><mo>,</mo><mi>a</mi><mo>,</mo><mi>e</mi><mo stretchy="false">)</mo></mrow></msub><mrow><mo>[</mo><mrow><mo stretchy="false">(</mo><msub><mi>s</mi><mi>i</mi></msub><mo>−</mo><msub><mrow class="MJX-TeXAtom-ORD"><mover><mi>s</mi><mo stretchy="false">^</mo></mover></mrow><mi>i</mi></msub><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><mo>]</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-72">\mathcal{L}_{\text{direct}} = \mathbb{E}_{(q,x,a,e)} \left[(s_i - \hat{s}_i)^2\right]</script>

<ul>
  <li>Importantly, Prometheus jointly models rationale generation and score prediction in a single autoregressive decoding pass, coupling interpretability with scalar accuracy rather than treating explanation and scoring as separate objectives (<a href="https://arxiv.org/abs/2310.08491">Prometheus</a> by Kim et al. (2023)).</li>
</ul>

<h4 id="pairwise-prompt-based-llm-as-a-judge">Pairwise Prompt-Based LLM-as-a-Judge</h4>

<ul>
  <li>In pairwise evaluation, the judge compares two candidates and expresses a preference.</li>
</ul>

<h5 id="prompt-pattern-1">Prompt Pattern</h5>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><div><button class="btn-copy" data-clipboard-action="copy" data-clipboard-target="#code3"><img src="https://aman.ai/images/copy.png" style="margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;"></button></div><code id="code3">You are a judge. Which output is better for the task?
Task: &lt;task&gt;
Output A: &lt;candidate A&gt;
Output B: &lt;candidate B&gt;
Answer (A or B):
</code></pre></div></div>

<ul>
  <li>This formulation mirrors pairwise preference modeling used in RLHF and ranking systems.</li>
</ul>

<h5 id="pairwise-ltr-interpretation">Pairwise LTR Interpretation</h5>

<ul>
  <li>The judge estimates:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-73-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x227B;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2223;&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-752" style="width: 6.357em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.263em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1005.21em, 2.711em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-753"><span class="mi" id="MathJax-Span-754" style="font-family: STIXGeneral-Italic;">P</span><span class="mo" id="MathJax-Span-755" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-756"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-757" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-758" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-759" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">≻</span><span class="msubsup" id="MathJax-Span-760" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-761" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-762" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-763" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∣</span><span class="mi" id="MathJax-Span-764" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">q</span><span class="mo" id="MathJax-Span-765" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>≻</mo><msub><mi>x</mi><mi>j</mi></msub><mo>∣</mo><mi>q</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-73">P(x_i \succ x_j \mid q)</script>

<ul>
  <li>
    <p>This aligns with pairwise ranking frameworks such as RankNet and duoBERT, and is directly studied in <a href="https://arxiv.org/abs/2304.09542">RankGPT: A Prompt-Based Pairwise Ranking Framework for LLMs</a> by Sun et al. (2023).</p>
  </li>
  <li>
    <p>Pairwise prompting has been extended to supervised evaluator LLMs capable of ranking outputs under explicit, user-defined criteria. <a href="https://arxiv.org/abs/2405.01535">Prometheus 2: An Open Source Language Model Specialized in Evaluating Other Language Models</a> by Kim et al. (2024) introduces a unified formulation conditioning on the task, two candidates, optional reference answers, and an evaluation criterion:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-74-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;pair&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;:&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-766" style="width: 14.794em; display: inline-block;"><span style="display: inline-block; position: relative; width: 12.294em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1012.24em, 2.659em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-767"><span class="msubsup" id="MathJax-Span-768"><span style="display: inline-block; position: relative; width: 1.461em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-769" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.263em;"><span class="texatom" id="MathJax-Span-770"><span class="mrow" id="MathJax-Span-771"><span class="mtext" id="MathJax-Span-772" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">pair</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-773" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">:</span><span class="mo" id="MathJax-Span-774" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">(</span><span class="mi" id="MathJax-Span-775" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-776" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-777" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-778" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-779" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-780" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-781" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-782" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-783" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-784" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-785" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">a</span><span class="mo" id="MathJax-Span-786" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-787" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">e</span><span class="mo" id="MathJax-Span-788" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-789" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">→</span><span class="mo" id="MathJax-Span-790" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">(</span><span class="msubsup" id="MathJax-Span-791"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-792" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="texatom" id="MathJax-Span-793"><span class="mrow" id="MathJax-Span-794"><span class="mi" id="MathJax-Span-795" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-796" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-797" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-798" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-799" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="texatom" id="MathJax-Span-800"><span class="mrow" id="MathJax-Span-801"><span class="mi" id="MathJax-Span-802" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-803" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-804" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>f</mi><mrow class="MJX-TeXAtom-ORD"><mtext>pair</mtext></mrow></msub><mo>:</mo><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><msub><mi>x</mi><mi>i</mi></msub><mo>,</mo><msub><mi>x</mi><mi>j</mi></msub><mo>,</mo><mi>a</mi><mo>,</mo><mi>e</mi><mo stretchy="false">)</mo><mo stretchy="false">→</mo><mo stretchy="false">(</mo><msub><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo>,</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-74">f_{\text{pair}} : (q, x_i, x_j, a, e) \rightarrow (r_{ij}, y_{ij})</script>

    <ul>
      <li>where <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-75-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2208;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-805" style="width: 3.857em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.18em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1003.18em, 2.711em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-806"><span class="msubsup" id="MathJax-Span-807"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-808" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="texatom" id="MathJax-Span-809"><span class="mrow" id="MathJax-Span-810"><span class="mi" id="MathJax-Span-811" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-812" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-813" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∈</span><span class="texatom" id="MathJax-Span-814" style="padding-left: 0.315em;"><span class="mrow" id="MathJax-Span-815"><span class="mi" id="MathJax-Span-816" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-817" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-818" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub><mo>∈</mo><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>,</mo><mi>j</mi></mrow></math></span></span><script type="math/tex" id="MathJax-Element-75">y_{ij} \in {i,j}</script> denotes the preferred candidate and <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-76-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-819" style="width: 1.044em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.84em, 2.607em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-820"><span class="msubsup" id="MathJax-Span-821"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-822" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="texatom" id="MathJax-Span-823"><span class="mrow" id="MathJax-Span-824"><span class="mi" id="MathJax-Span-825" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mi" id="MathJax-Span-826" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mi>j</mi></mrow></msub></math></span></span><script type="math/tex" id="MathJax-Element-76">r_{ij}</script> is a comparative rationale highlighting criterion-specific differences.</li>
    </ul>
  </li>
  <li>
    <p>The following figure shows a comparison of direct assessment and pairwise ranking. Both responses could be considered decent under the umbrella of ‘helpfulness’. However, the scoring decision might change based on a specific evaluation criterion.</p>
  </li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/Prometheus_2.jpg" alt=""></p>

<ul>
  <li><a href="https://arxiv.org/abs/2405.01535">Prometheus 2: An Open Source Language Model Specialized in Evaluating Other Language Models</a> by Kim et al. (2024) demonstrates that pointwise and pairwise judges can be unified within a single decoder-only evaluator via weight merging, enabling strong performance across both LTR paradigms.</li>
</ul>

<h5 id="associated-loss-when-used-for-training">Associated Loss (When Used for Training)</h5>

<ul>
  <li>Pairwise judgments are commonly converted into a logistic loss:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-77-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;pairwise&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mi&gt;&amp;#x03C3;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-827" style="width: 12.451em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.367em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1010.32em, 2.659em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-828"><span class="msubsup" id="MathJax-Span-829"><span style="display: inline-block; position: relative; width: 3.18em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-830"><span class="mrow" id="MathJax-Span-831"><span class="mi" id="MathJax-Span-832" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-833"><span class="mrow" id="MathJax-Span-834"><span class="mtext" id="MathJax-Span-835" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">pairwise</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-836" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mo" id="MathJax-Span-837" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">−</span><span class="mi" id="MathJax-Span-838" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">log</span><span class="mo" id="MathJax-Span-839"></span><span class="mi" id="MathJax-Span-840" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mo" id="MathJax-Span-841" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-842"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-843" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-844" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-845" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">−</span><span class="msubsup" id="MathJax-Span-846" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-847" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-848" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-849" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>pairwise</mtext></mrow></msub><mo>=</mo><mo>−</mo><mi>log</mi><mo>⁡</mo><mi>σ</mi><mo stretchy="false">(</mo><msub><mi>s</mi><mi>i</mi></msub><mo>−</mo><msub><mi>s</mi><mi>j</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-77">\mathcal{L}_{\text{pairwise}} = -\log \sigma(s_i - s_j)</script>

<ul>
  <li>
    <p>Pairwise prompting is known to reduce calibration variance relative to absolute scoring, a phenomenon also discussed in
<a href="https://arxiv.org/abs/2203.02155">Training Language Models to Follow Instructions with Human Feedback</a> by Ouyang et al. (2022).</p>
  </li>
  <li>
    <p>Prometheus 2 further shows that training separate pointwise and pairwise evaluators and merging their parameters yields higher agreement with human rankings than joint multi-task training, providing empirical justification for treating LLM-as-a-Judge systems as flexible LTR models whose optimization objective can shift between pointwise, pairwise, and listwise regimes (<a href="https://arxiv.org/abs/2405.01535">Prometheus 2</a> by Kim et al. (2024)).</p>
  </li>
</ul>

<h4 id="listwise-prompt-based-llm-as-a-judge">Listwise Prompt-Based LLM-as-a-Judge</h4>

<ul>
  <li>Listwise evaluation asks the LLM to reason jointly over an entire set of candidates and produce a ranked ordering or structured list-level judgment.</li>
</ul>

<h5 id="prompt-patterns">Prompt Patterns</h5>

<ul>
  <li>
    <p>A common listwise prompt is:</p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><div><button class="btn-copy" data-clipboard-action="copy" data-clipboard-target="#code4"><img src="https://aman.ai/images/copy.png" style="margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;"></button></div><code id="code4">  Rank the following outputs from best to worst according to the rubric:
  1. &lt;candidate 1&gt;
  2. &lt;candidate 2&gt;
  3. &lt;candidate 3&gt;
  Return the ranked order:
</code></pre></div>    </div>
  </li>
  <li>
    <p>Alternatively, the judge may be asked to assign scores jointly and produce a sorted list.</p>
  </li>
</ul>

<h5 id="listwise-ltr-interpretation">Listwise LTR Interpretation</h5>

<ul>
  <li>Listwise ranking models a permutation over candidates:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-78-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-850" style="width: 9.378em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.815em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1007.76em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-851"><span class="mi" id="MathJax-Span-852" style="font-family: STIXGeneral-Italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mo" id="MathJax-Span-853" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mi" id="MathJax-Span-854" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span class="mo" id="MathJax-Span-855" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-856" style="font-family: STIXGeneral-Italic;">q</span><span class="mo" id="MathJax-Span-857" style="font-family: STIXGeneral-Regular;">,</span><span class="texatom" id="MathJax-Span-858" style="padding-left: 0.211em;"><span class="mrow" id="MathJax-Span-859"><span class="msubsup" id="MathJax-Span-860"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-861" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-862" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-863" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-864" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">…</span><span class="mo" id="MathJax-Span-865" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">,</span><span class="msubsup" id="MathJax-Span-866" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-867" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-868" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-869" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>π</mi><mo>=</mo><mi>f</mi><mo stretchy="false">(</mo><mi>q</mi><mo>,</mo><mrow class="MJX-TeXAtom-ORD"><msub><mi>x</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>x</mi><mi>n</mi></msub></mrow><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-78">\pi = f(q, {x_1, \dots, x_n})</script>

<ul>
  <li>
    <p>Unlike pointwise or pairwise methods, listwise approaches optimize ranking quality <strong>at the list level</strong>, capturing interactions between candidates.</p>
  </li>
  <li>
    <p>Prompt-based listwise judging has been explored in recent work such as <a href="https://arxiv.org/abs/2505.14432">Rank-K: Test-Time Reasoning for Listwise Reranking</a> by Yang et al. (2025), where decoder models explicitly reason about entire candidate sets.</p>
  </li>
</ul>

<h4 id="listwise-loss-functions-and-ndcg-optimization">Listwise Loss Functions and NDCG Optimization</h4>

<ul>
  <li>When listwise judgments from an LLM-as-a-Judge are used to train or evaluate ranking models, they are typically connected to <strong>listwise loss functions</strong>. These losses aim to optimize ranking quality <strong>at the list level</strong>, rather than independent scores, and are designed to align with ranking metrics such as NDCG.</li>
</ul>

<h5 id="normalized-discounted-cumulative-gain-ndcg">Normalized Discounted Cumulative Gain (NDCG)</h5>

<ul>
  <li>
    <p>One of the most widely used listwise ranking metrics is <strong>NDCG</strong>, introduced in <a href="https://dl.acm.org/doi/10.1145/582415.582418">Cumulated Gain-based Evaluation of IR Techniques</a> by Järvelin and Kekäläinen (2002).</p>
  </li>
  <li>
    <p>For a ranked list of length <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-79-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-870" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1000.52em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-871"><span class="mi" id="MathJax-Span-872" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-79">k</script>, Discounted Cumulative Gain (DCG) is defined as:</p>
  </li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-80-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtext&gt;DCG&lt;/mtext&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;@&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;munderover&gt;&lt;mo&gt;&amp;#x2211;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/mrow&gt;&lt;/munderover&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;msup&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-873" style="width: 13.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.94em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.263em, 1010.94em, 3.596em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-874"><span class="mtext" id="MathJax-Span-875" style="font-family: STIXGeneral-Regular;">DCG</span><span class="texatom" id="MathJax-Span-876"><span class="mrow" id="MathJax-Span-877"><span class="mo" id="MathJax-Span-878" style="font-family: STIXGeneral-Regular;">@</span></span></span><span class="mi" id="MathJax-Span-879" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-880" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="munderover" id="MathJax-Span-881" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 1.305em; height: 0px;"><span style="position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-882" style="font-family: STIXSizeOneSym; vertical-align: -0.518em;">∑</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.388em, 1000.94em, 4.273em, -999.997em); top: -2.862em; left: 0.107em;"><span class="texatom" id="MathJax-Span-883"><span class="mrow" id="MathJax-Span-884"><span class="mi" id="MathJax-Span-885" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-886" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">=</span><span class="mn" id="MathJax-Span-887" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.284em, 1000.32em, 4.169em, -999.997em); top: -5.206em; left: 0.471em;"><span class="texatom" id="MathJax-Span-888"><span class="mrow" id="MathJax-Span-889"><span class="mi" id="MathJax-Span-890" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mfrac" id="MathJax-Span-891" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 4.482em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;"><span style="position: absolute; clip: rect(2.971em, 1003.18em, 4.326em, -999.997em); top: -4.685em; left: 50%; margin-left: -1.612em;"><span class="mrow" id="MathJax-Span-892"><span class="msubsup" id="MathJax-Span-893"><span style="display: inline-block; position: relative; width: 1.565em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mn" id="MathJax-Span-894" style="font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.523em;"><span class="texatom" id="MathJax-Span-895"><span class="mrow" id="MathJax-Span-896"><span class="mi" id="MathJax-Span-897" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-898" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">e</span><span class="msubsup" id="MathJax-Span-899"><span style="display: inline-block; position: relative; width: 0.367em; height: 0px;"><span style="position: absolute; clip: rect(3.388em, 1000.21em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-900" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.904em; left: 0.211em;"><span class="mi" id="MathJax-Span-901" style="font-size: 50%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-902" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">−</span><span class="mn" id="MathJax-Span-903" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">1</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.18em, 1004.33em, 4.43em, -999.997em); top: -3.331em; left: 50%; margin-left: -2.185em;"><span class="mrow" id="MathJax-Span-904"><span class="msubsup" id="MathJax-Span-905"><span style="display: inline-block; position: relative; width: 1.721em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1001.25em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-906" style="font-family: STIXGeneral-Regular;">log</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.747em; left: 1.305em;"><span class="mn" id="MathJax-Span-907" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-908"></span><span class="mo" id="MathJax-Span-909" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-910" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-911" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">+</span><span class="mn" id="MathJax-Span-912" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">1</span><span class="mo" id="MathJax-Span-913" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.836em, 1004.48em, 1.201em, -999.997em); top: -1.247em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 4.482em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.559em; border-left: 0px solid; width: 0px; height: 3.753em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>DCG</mtext><mrow class="MJX-TeXAtom-ORD"><mo>@</mo></mrow><mi>k</mi><mo>=</mo><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>k</mi></mrow></munderover><mfrac><mrow><msup><mn>2</mn><mrow class="MJX-TeXAtom-ORD"><mi>r</mi><mi>e</mi><msub><mi>l</mi><mi>i</mi></msub></mrow></msup><mo>−</mo><mn>1</mn></mrow><mrow><msub><mi>log</mi><mn>2</mn></msub><mo>⁡</mo><mo stretchy="false">(</mo><mi>i</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></mfrac></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-80">\text{DCG}@k = \sum_{i=1}^{k} \frac{2^{rel_i} - 1}{\log_2(i + 1)}</script>

<ul>
  <li>
    <p>where:</p>

    <ul>
      <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-81-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mi&gt;e&lt;/mi&gt;&lt;msub&gt;&lt;mi&gt;l&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-914" style="width: 1.669em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.357em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1001.36em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-915"><span class="mi" id="MathJax-Span-916" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mi" id="MathJax-Span-917" style="font-family: STIXGeneral-Italic;">e</span><span class="msubsup" id="MathJax-Span-918"><span style="display: inline-block; position: relative; width: 0.576em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.26em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-919" style="font-family: STIXGeneral-Italic;">l<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.263em;"><span class="mi" id="MathJax-Span-920" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>r</mi><mi>e</mi><msub><mi>l</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-81">rel_i</script> is the relevance grade of the item at rank position <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-82-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-921" style="width: 0.315em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.263em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1000.26em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-922"><span class="mi" id="MathJax-Span-923" style="font-family: STIXGeneral-Italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-82">i</script></li>
    </ul>
  </li>
  <li>
    <p>NDCG normalizes DCG by the ideal ranking:</p>
  </li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-83-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtext&gt;NDCG&lt;/mtext&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;@&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mrow&gt;&lt;mtext&gt;DCG&lt;/mtext&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;@&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mtext&gt;IDCG&lt;/mtext&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo&gt;@&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/mrow&gt;&lt;/mfrac&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-924" style="width: 11.565em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.638em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.68em, 1009.64em, 3.023em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-925"><span class="mtext" id="MathJax-Span-926" style="font-family: STIXGeneral-Regular;">NDCG</span><span class="texatom" id="MathJax-Span-927"><span class="mrow" id="MathJax-Span-928"><span class="mo" id="MathJax-Span-929" style="font-family: STIXGeneral-Regular;">@</span></span></span><span class="mi" id="MathJax-Span-930" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-931" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mfrac" id="MathJax-Span-932" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 3.961em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;"><span style="position: absolute; clip: rect(3.18em, 1003.49em, 4.169em, -999.997em); top: -4.685em; left: 50%; margin-left: -1.768em;"><span class="mrow" id="MathJax-Span-933"><span class="mtext" id="MathJax-Span-934" style="font-family: STIXGeneral-Regular;">DCG</span><span class="texatom" id="MathJax-Span-935"><span class="mrow" id="MathJax-Span-936"><span class="mo" id="MathJax-Span-937" style="font-family: STIXGeneral-Regular;">@</span></span></span><span class="mi" id="MathJax-Span-938" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.18em, 1003.8em, 4.169em, -999.997em); top: -3.331em; left: 50%; margin-left: -1.924em;"><span class="mrow" id="MathJax-Span-939"><span class="mtext" id="MathJax-Span-940" style="font-family: STIXGeneral-Regular;">IDCG</span><span class="texatom" id="MathJax-Span-941"><span class="mrow" id="MathJax-Span-942"><span class="mo" id="MathJax-Span-943" style="font-family: STIXGeneral-Regular;">@</span></span></span><span class="mi" id="MathJax-Span-944" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.836em, 1003.96em, 1.201em, -999.997em); top: -1.247em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 3.961em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.872em; border-left: 0px solid; width: 0px; height: 2.628em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>NDCG</mtext><mrow class="MJX-TeXAtom-ORD"><mo>@</mo></mrow><mi>k</mi><mo>=</mo><mfrac><mrow><mtext>DCG</mtext><mrow class="MJX-TeXAtom-ORD"><mo>@</mo></mrow><mi>k</mi></mrow><mrow><mtext>IDCG</mtext><mrow class="MJX-TeXAtom-ORD"><mo>@</mo></mrow><mi>k</mi></mrow></mfrac></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-83">\text{NDCG}@k = \frac{\text{DCG}@k}{\text{IDCG}@k}</script>

<ul>
  <li>This normalization allows ranking quality to be compared across queries with different relevance distributions.</li>
</ul>

<h5 id="optimizing-ndcg">Optimizing NDCG</h5>

<ul>
  <li>NDCG is <strong>non-differentiable</strong> because it depends on discrete rank positions. As a result, it cannot be optimized directly with gradient descent. Instead, several surrogate strategies are used.</li>
</ul>

<h6 id="listwise-surrogate-losses">Listwise Surrogate Losses</h6>

<ul>
  <li>
    <p>A common approach is to optimize a surrogate likelihood over permutations.</p>
  </li>
  <li>
    <p><strong>ListMLE</strong>, introduced in <a href="https://dl.acm.org/doi/10.1145/1277741.1277800">Listwise Approach to Learning to Rank</a> by Cao et al. (2007), models the probability of the ground-truth permutation (\pi^*):</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-84-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;ListMLE&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;/msup&gt;&lt;mo&gt;&amp;#x2223;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-945" style="width: 16.565em; display: inline-block;"><span style="display: inline-block; position: relative; width: 13.805em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1013.75em, 2.607em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-946"><span class="msubsup" id="MathJax-Span-947"><span style="display: inline-block; position: relative; width: 3.388em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-948"><span class="mrow" id="MathJax-Span-949"><span class="mi" id="MathJax-Span-950" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-951"><span class="mrow" id="MathJax-Span-952"><span class="mtext" id="MathJax-Span-953" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">ListMLE</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-954" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mo" id="MathJax-Span-955" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">−</span><span class="mi" id="MathJax-Span-956" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">log</span><span class="mo" id="MathJax-Span-957"></span><span class="mi" id="MathJax-Span-958" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">P</span><span class="mo" id="MathJax-Span-959" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-960"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-961" style="font-family: STIXGeneral-Italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.576em;"><span class="mo" id="MathJax-Span-962" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∗</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-963" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∣</span><span class="msubsup" id="MathJax-Span-964" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-965" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mn" id="MathJax-Span-966" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-967" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-968" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">…</span><span class="mo" id="MathJax-Span-969" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">,</span><span class="msubsup" id="MathJax-Span-970" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-971" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-972" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-973" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>ListMLE</mtext></mrow></msub><mo>=</mo><mo>−</mo><mi>log</mi><mo>⁡</mo><mi>P</mi><mo stretchy="false">(</mo><msup><mi>π</mi><mo>∗</mo></msup><mo>∣</mo><msub><mi>s</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>s</mi><mi>n</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-84">\mathcal{L}_{\text{ListMLE}} = -\log P(\pi^* \mid s_1, \dots, s_n)</script>

    <ul>
      <li>where <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-85-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-974" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.68em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-975"><span class="msubsup" id="MathJax-Span-976"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-977" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-978" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>s</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-85">s_i</script> are model scores. This loss encourages the model to assign higher scores to items appearing earlier in the target ranking.</li>
    </ul>
  </li>
</ul>

<h6 id="gradient-based-approximations-to-ndcg">Gradient-Based Approximations to NDCG</h6>

<ul>
  <li>
    <p>Another family of methods directly approximates the <strong>gradient of NDCG</strong>.</p>
  </li>
  <li>
    <p><strong>LambdaRank</strong> and <strong>LambdaMART</strong>, described in <a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/MSR-TR-2010-82.pdf">Learning to Rank using Gradient Descent</a> by Burges et al. (2010), compute pairwise gradients weighted by the change in NDCG caused by swapping two items:</p>
  </li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-86-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03BB;&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x221D;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;mi mathvariant=&quot;normal&quot;&gt;&amp;#x0394;&lt;/mi&gt;&lt;msub&gt;&lt;mtext&gt;NDCG&lt;/mtext&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;|&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-979" style="width: 8.544em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.086em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.669em, 1006.98em, 2.971em, -999.997em); top: -2.497em; left: 0em;"><span class="mrow" id="MathJax-Span-980"><span class="msubsup" id="MathJax-Span-981"><span style="display: inline-block; position: relative; width: 1.096em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-982" style="font-family: STIXGeneral-Italic;">λ</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="texatom" id="MathJax-Span-983"><span class="mrow" id="MathJax-Span-984"><span class="mi" id="MathJax-Span-985" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-986" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-987" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-988" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∝</span><span class="texatom" id="MathJax-Span-989" style="padding-left: 0.315em;"><span class="mrow" id="MathJax-Span-990"><span class="mo" id="MathJax-Span-991" style="font-family: STIXVariants;">|</span></span></span><span class="mi" id="MathJax-Span-992" style="font-family: STIXGeneral-Regular;">Δ</span><span class="msubsup" id="MathJax-Span-993"><span style="display: inline-block; position: relative; width: 3.492em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1002.82em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mtext" id="MathJax-Span-994" style="font-family: STIXGeneral-Regular;">NDCG</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 2.815em;"><span class="texatom" id="MathJax-Span-995"><span class="mrow" id="MathJax-Span-996"><span class="mi" id="MathJax-Span-997" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-998" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-999" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="texatom" id="MathJax-Span-1000"><span class="mrow" id="MathJax-Span-1001"><span class="mo" id="MathJax-Span-1002" style="font-family: STIXVariants;">|</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.503em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>λ</mi><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>∝</mo><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow><mi mathvariant="normal">Δ</mi><msub><mtext>NDCG</mtext><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">|</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-86">\lambda_{i,j} \propto |\Delta \text{NDCG}_{i,j}|</script>

<ul>
  <li>This approach preserves the pairwise structure of optimization while explicitly targeting listwise ranking quality.</li>
</ul>

<h6 id="using-llm-judges-to-approximate-ndcg">Using LLM Judges to Approximate NDCG</h6>

<ul>
  <li>
    <p>In LLM-as-a-Judge pipelines:</p>

    <ul>
      <li>The judge produces relevance grades or ranked lists</li>
      <li>These induce a pseudo ground-truth permutation (\pi^*)</li>
      <li>NDCG can be computed directly on judge-derived rankings</li>
      <li>Or used indirectly to supervise ranking models via listwise losses</li>
    </ul>
  </li>
  <li>
    <p>This allows <strong>metric-aligned optimization without human annotations</strong>, which is especially valuable in large-scale or continuously evolving systems.</p>
  </li>
</ul>

<h5 id="can-categorical-cross-entropy-be-used-for-listwise-ranking">Can Categorical Cross-Entropy be Used for Listwise Ranking?</h5>

<ul>
  <li><strong>Categorical Cross-Entropy (CCE) can be used for listwise ranking</strong>, but only under <strong>specific formulations</strong>, and it is important to understand its limitations.</li>
</ul>

<h6 id="when-categorical-cross-entropy-applies">When Categorical Cross-Entropy Applies</h6>

<ul>
  <li>Categorical cross-entropy can be used when <strong>listwise ranking is reformulated as a classification problem</strong>, typically in one of the following ways:</li>
</ul>

<ol>
  <li><strong>Top-1 (or Top-k) Prediction</strong>:
    <ul>
      <li>
        <p>The model predicts which item should appear at rank 1 (or within the top <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-87-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1003" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1000.52em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1004"><span class="mi" id="MathJax-Span-1005" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-87">k</script>).</p>
      </li>
      <li>
        <p>If a probability distribution over candidates is produced:</p>
      </li>
    </ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-88-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;&amp;#x2223;&lt;/mo&gt;&lt;mi&gt;q&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1006" style="width: 8.701em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.242em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1007.19em, 2.607em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-1007"><span class="mi" id="MathJax-Span-1008" style="font-family: STIXGeneral-Italic;">P</span><span class="mo" id="MathJax-Span-1009" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1010" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-1011" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∣</span><span class="mi" id="MathJax-Span-1012" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">q</span><span class="mo" id="MathJax-Span-1013" style="font-family: STIXGeneral-Regular;">,</span><span class="texatom" id="MathJax-Span-1014" style="padding-left: 0.211em;"><span class="mrow" id="MathJax-Span-1015"><span class="msubsup" id="MathJax-Span-1016"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1017" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-1018" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1019" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-1020" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">…</span><span class="mo" id="MathJax-Span-1021" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">,</span><span class="msubsup" id="MathJax-Span-1022" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1023" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-1024" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span><span class="mo" id="MathJax-Span-1025" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo>∣</mo><mi>q</mi><mo>,</mo><mrow class="MJX-TeXAtom-ORD"><msub><mi>x</mi><mn>1</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>x</mi><mi>n</mi></msub></mrow><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-88">P(i \mid q, {x_1,\dots,x_n})</script>

    <ul>
      <li>
        <p>… then categorical cross-entropy applies:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-89-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;CCE&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;munderover&gt;&lt;mo&gt;&amp;#x2211;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;n&lt;/mi&gt;&lt;/mrow&gt;&lt;/munderover&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1026" style="width: 11.461em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.534em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.419em, 1009.48em, 3.596em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1027"><span class="msubsup" id="MathJax-Span-1028"><span style="display: inline-block; position: relative; width: 2.138em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-1029"><span class="mrow" id="MathJax-Span-1030"><span class="mi" id="MathJax-Span-1031" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-1032"><span class="mrow" id="MathJax-Span-1033"><span class="mtext" id="MathJax-Span-1034" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">CCE</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1035" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mo" id="MathJax-Span-1036" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">−</span><span class="munderover" id="MathJax-Span-1037" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 1.305em; height: 0px;"><span style="position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-1038" style="font-family: STIXSizeOneSym; vertical-align: -0.518em;">∑</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.388em, 1000.94em, 4.273em, -999.997em); top: -2.862em; left: 0.107em;"><span class="texatom" id="MathJax-Span-1039"><span class="mrow" id="MathJax-Span-1040"><span class="mi" id="MathJax-Span-1041" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-1042" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">=</span><span class="mn" id="MathJax-Span-1043" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.44em, 1000.32em, 4.169em, -999.997em); top: -5.206em; left: 0.471em;"><span class="texatom" id="MathJax-Span-1044"><span class="mrow" id="MathJax-Span-1045"><span class="mi" id="MathJax-Span-1046" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">n</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-1047" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1048" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-1049" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mi" id="MathJax-Span-1050" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">log</span><span class="mo" id="MathJax-Span-1051"></span><span class="mi" id="MathJax-Span-1052" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">P</span><span class="mo" id="MathJax-Span-1053" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1054" style="font-family: STIXGeneral-Italic;">i</span><span class="mo" id="MathJax-Span-1055" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.559em; border-left: 0px solid; width: 0px; height: 3.566em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>CCE</mtext></mrow></msub><mo>=</mo><mo>−</mo><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mrow class="MJX-TeXAtom-ORD"><mi>n</mi></mrow></munderover><msub><mi>y</mi><mi>i</mi></msub><mi>log</mi><mo>⁡</mo><mi>P</mi><mo stretchy="false">(</mo><mi>i</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-89">\mathcal{L}_{\text{CCE}} = -\sum_{i=1}^{n} y_i \log P(i)</script>

        <ul>
          <li>where (y_i) is a one-hot indicator of the correct top-ranked item.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li><strong>Position-Wise Classification</strong>:
    <ul>
      <li>Some models decompose ranking into multiple classification steps, predicting which item belongs at each rank position. Each step uses categorical cross-entropy over remaining candidates.</li>
    </ul>
  </li>
  <li><strong>Softmax-Based Listwise Losses</strong>:
    <ul>
      <li>
        <p>Certain listwise objectives (including simplified versions of ListNet) can be interpreted as categorical cross-entropy between:</p>

        <ul>
          <li>A target distribution derived from relevance labels</li>
          <li>A predicted softmax distribution over scores</li>
        </ul>
      </li>
      <li>
        <p>This perspective is discussed in <a href="https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/MSR-TR-2007-40.pdf">Learning to Rank: From Pairwise Approach to Listwise Approach</a> by Cao et al. (2007).</p>
      </li>
    </ul>
  </li>
</ol>

<h6 id="limitations-of-categorical-cross-entropy-for-ranking">Limitations of Categorical Cross-Entropy for Ranking</h6>

<ul>
  <li>
    <p>While usable, categorical cross-entropy has important limitations in ranking contexts:</p>

    <ul>
      <li>It does <strong>not directly model permutations</strong>, only class probabilities</li>
      <li>It does <strong>not encode rank position sensitivity</strong> (e.g., top-heavy emphasis)</li>
      <li>It does <strong>not naturally align with NDCG</strong>, which discounts lower ranks</li>
      <li>It assumes a single correct label or distribution, which may not reflect graded relevance</li>
    </ul>
  </li>
  <li>
    <p>As a result, categorical cross-entropy is generally <strong>inferior to NDCG-aware losses</strong> (e.g., ListMLE, LambdaRank) when the goal is high-quality ranking across the entire list.</p>
  </li>
</ul>

<h6 id="relationship-to-ndcg">Relationship to NDCG</h6>

<ul>
  <li>
    <p>Categorical cross-entropy is <strong>not an NDCG-consistent loss</strong>. Optimizing CCE does not guarantee improvements in NDCG, except in restricted cases (e.g., when only top-1 accuracy matters).</p>
  </li>
  <li>
    <p>Therefore, in practice:</p>

    <ul>
      <li><strong>CCE is acceptable for coarse listwise supervision</strong></li>
      <li><strong>NDCG-driven or permutation-based losses are preferred for ranking quality</strong></li>
      <li><strong>LLM-as-a-Judge outputs are often better consumed via NDCG-aligned objectives</strong></li>
    </ul>
  </li>
</ul>

<h5 id="inputoutput-example-listwise">Input–Output Example (Listwise)</h5>

<ul>
  <li><strong>Input</strong>: Task + 5 candidate summaries</li>
  <li><strong>LLM Judge Output</strong>: <code class="language-plaintext highlighter-rouge">3 &gt; 1 &gt; 5 &gt; 2 &gt; 4</code></li>
  <li>
    <p><strong>Derived Supervision</strong>:</p>

    <ul>
      <li>Permutation <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-90-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;mo&gt;&amp;#x2217;&lt;/mo&gt;&lt;/msup&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1056" style="width: 1.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.305em, 1001.04em, 2.294em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-1057"><span class="msubsup" id="MathJax-Span-1058"><span style="display: inline-block; position: relative; width: 1.044em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1059" style="font-family: STIXGeneral-Italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.372em; left: 0.576em;"><span class="mo" id="MathJax-Span-1060" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">∗</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>π</mi><mo>∗</mo></msup></math></span></span><script type="math/tex" id="MathJax-Element-90">\pi^*</script></li>
      <li>Optional relevance grades inferred from positions</li>
      <li>NDCG computed against downstream model outputs</li>
    </ul>
  </li>
</ul>

<h4 id="takeaways-2">Takeaways</h4>

<ul>
  <li><strong>Pointwise judging</strong> estimates absolute quality scores for individual outputs</li>
  <li><strong>Pairwise judging</strong> models relative preferences between two outputs</li>
  <li><strong>Listwise judging</strong> produces global rankings over entire candidate sets</li>
  <li><strong>NDCG</strong> is the dominant evaluation metric for listwise ranking quality</li>
  <li><strong>NDCG is non-differentiable</strong> and therefore requires surrogate optimization methods</li>
  <li><strong>Listwise losses such as ListMLE and LambdaRank</strong> effectively approximate NDCG during training</li>
  <li><strong>Categorical cross-entropy (CCE)</strong> can be used in constrained listwise setups (e.g., top-1 or position-wise classification)</li>
  <li><strong>CCE is generally weaker than NDCG-aware losses</strong> for full-list ranking optimization</li>
  <li><strong>LLM-as-a-Judge</strong> enables scalable, metric-aligned supervision and generation of listwise training signals</li>
</ul>

<h2 id="putting-it-all-together-llm-as-a-judge-in-modern-evaluation-and-rag-pipelines">Putting It All Together: LLM-as-a-Judge in Modern Evaluation and RAG Pipelines</h2>

<ul>
  <li>This section synthesizes the ideas from earlier sections and shows how <strong>LLM-as-a-Judge</strong>, <strong>LTR</strong>, and <strong>neural ranking models</strong> are combined in practice. We focus on end-to-end system design, typical pipelines, and known failure modes.</li>
</ul>

<h3 id="end-to-end-evaluation-pipelines-with-llm-as-a-judge">End-to-End Evaluation Pipelines with LLM-as-a-Judge</h3>

<ul>
  <li>
    <p>A canonical modern evaluation pipeline looks like:</p>

    <ol>
      <li>
        <p><strong>Generation stage</strong>: A base model (or multiple candidate models) produces outputs for a task.</p>
      </li>
      <li>
        <p><strong>Judging stage (LLM-as-a-Judge)</strong>: A judge model evaluates each output using a structured prompt (often pointwise).</p>
      </li>
      <li>
        <p><strong>Aggregation / ranking stage</strong>: Scores are aggregated, thresholded, or ranked to:</p>

        <ul>
          <li>Select the best output</li>
          <li>Filter low-quality data</li>
          <li>Produce training signals</li>
        </ul>
      </li>
      <li>
        <p><strong>Optional learning stage</strong>: Judge outputs are used to fine-tune ranking or reward models.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>This pattern appears in many systems, including OpenAI’s internal evaluation tooling (<a href="https://openai.com/blog/evals">Introducing OpenAI Evals</a>) and Anthropic’s RLAIF pipelines (<a href="https://arxiv.org/abs/2302.08582">Training Language Models from AI Feedback</a> by Bai et al. (2023)).</p>
  </li>
</ul>

<h3 id="llm-as-a-judge-inside-retrieval-augmented-generation-rag">LLM-as-a-Judge Inside Retrieval-Augmented Generation (RAG)</h3>

<ul>
  <li>In RAG systems, LLM-as-a-Judge is often used for <strong>reranking</strong>, <strong>answer validation</strong>, or <strong>end-to-end quality control</strong>.</li>
</ul>

<h4 id="rag-reranking-with-ltr--llm-judges">RAG Reranking with LTR + LLM Judges</h4>

<ul>
  <li>
    <p>A typical RAG pipeline:</p>

    <ol>
      <li>Retrieve <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-91-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1061" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1000.52em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1062"><span class="mi" id="MathJax-Span-1063" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>k</mi></math></span></span><script type="math/tex" id="MathJax-Element-91">k</script> candidate documents using a bi-encoder retriever</li>
      <li>Re-rank candidates using:
        <ul>
          <li>Cross-encoder LTR models (monoBERT, ListBERT, ListT5)</li>
          <li>Or an LLM-as-a-Judge scoring relevance/faithfulness</li>
        </ul>
      </li>
      <li>Generate an answer conditioned on top-ranked documents</li>
    </ol>
  </li>
  <li>
    <p>This design is discussed in <a href="https://arxiv.org/abs/2005.11401">Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks</a> by Lewis et al. (2020).</p>
  </li>
  <li>
    <p>LLM-as-a-Judge is particularly useful when:</p>

    <ul>
      <li>Relevance is subtle or multi-dimensional</li>
      <li>Faithfulness to retrieved context must be enforced</li>
      <li>Ranking criteria go beyond lexical or semantic similarity</li>
    </ul>
  </li>
</ul>

<h3 id="combining-prompted-judges-with-trained-rankers">Combining Prompted Judges with Trained Rankers</h3>

<ul>
  <li>
    <p>In practice, systems often use a <strong>hybrid approach</strong>:</p>

    <ul>
      <li>
        <p><strong>LLM-as-a-Judge</strong> for:</p>

        <ul>
          <li>Bootstrapping labels</li>
          <li>Evaluating new tasks</li>
          <li>Handling subjective criteria</li>
        </ul>
      </li>
      <li>
        <ul>
          <li>
            <p><strong>Trained encoder LTR models</strong> for:</p>
          </li>
          <li>Low-latency inference</li>
          <li>Large-scale ranking</li>
          <li>Stable, repeatable behavior</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>A common pattern:</p>

    <ol>
      <li>Use an LLM judge to score or rank outputs offline</li>
      <li>Train a pointwise, pairwise, or listwise ranker on these signals</li>
      <li>Deploy the ranker in production</li>
      <li>Periodically refresh supervision with the judge</li>
    </ol>
  </li>
  <li>
    <p>This mirrors the teacher–student paradigm described in <a href="https://arxiv.org/abs/2303.17071">Distilling Step-by-Step</a> by Magister et al. (2023).</p>
  </li>
</ul>

<h3 id="failure-modes-and-limitations-of-llm-as-a-judge">Failure Modes and Limitations of LLM-as-a-Judge</h3>

<ul>
  <li>Despite its power, LLM-as-a-Judge has known weaknesses.</li>
</ul>

<h4 id="bias-and-positional-effects">Bias and Positional Effects</h4>

<ul>
  <li>
    <p>LLM judges may exhibit:</p>

    <ul>
      <li>Preference for longer or more verbose outputs</li>
      <li>Positional bias in pairwise or listwise setups</li>
      <li>Over-rewarding fluent but incorrect responses</li>
    </ul>
  </li>
  <li>These effects are analyzed in <a href="https://arxiv.org/abs/2305.17926">Large Language Models Are Not Fair Evaluators</a> by Wang et al. (2023).</li>
  <li>A detailed discourse on biases in LLM-as-a-Judge systems is available in the <a href="#biases-and-mitigation-strategies">Biases and Mitigation Strategies</a> section.</li>
</ul>

<h4 id="prompt-sensitivity-and-variance">Prompt Sensitivity and Variance</h4>

<ul>
  <li>
    <p>Judge outputs can vary with:</p>

    <ul>
      <li>Prompt phrasing</li>
      <li>Ordering of criteria</li>
      <li>Presence or absence of examples</li>
    </ul>
  </li>
  <li>
    <p>Mitigations include:</p>

    <ul>
      <li>Anchored examples (as in your prompt)</li>
      <li>Schema-constrained outputs</li>
      <li>Majority voting or self-consistency</li>
    </ul>
  </li>
  <li>
    <p>See <a href="https://arxiv.org/abs/2203.11171">Self-Consistency Improves Chain of Thought Reasoning</a> by Wang et al. (2022).</p>
  </li>
</ul>

<h4 id="over-optimization-and-reward-hacking">Over-Optimization and Reward Hacking</h4>

<ul>
  <li>
    <p>When models are trained directly against a fixed judge:</p>

    <ul>
      <li>They may exploit blind spots in the rubric</li>
      <li>Scores may increase without true quality gains</li>
    </ul>
  </li>
  <li>
    <p>This is analogous to reward hacking in RL, discussed in <a href="https://arxiv.org/abs/1903.03400">Specification Gaming</a> by Krakovna et al. (2020).</p>
  </li>
</ul>

<h3 id="best-practices-for-production-use">Best Practices for Production Use</h3>

<ul>
  <li>
    <p>Empirically grounded best practices include:</p>

    <ul>
      <li>Use <strong>pointwise judging</strong> by default; escalate to pairwise/listwise only when needed</li>
      <li>Keep rubrics simple and interpretable</li>
      <li>Separate hard constraints (binary) from subjective criteria (Likert-type)</li>
      <li>Periodically revalidate judge alignment with humans</li>
      <li>Avoid training directly against a single static judge</li>
    </ul>
  </li>
  <li>
    <p>These principles align with guidance from <a href="https://arxiv.org/abs/2307.03109">How to Evaluate Language Models: A Survey</a> by Chang et al. (2023).</p>
  </li>
</ul>

<h3 id="summary-and-outlook">Summary and Outlook</h3>

<ul>
  <li>
    <p>LLM-as-a-Judge represents a shift from brittle, task-specific metrics toward <strong>learned, semantic evaluation</strong>. When combined with Learning-to-Rank methods and neural ranking models:</p>

    <ul>
      <li>It enables scalable, flexible evaluation</li>
      <li>It provides supervision for ranking and reward models</li>
      <li>It integrates naturally into RAG and alignment pipelines</li>
    </ul>
  </li>
  <li>
    <p>Future directions include:</p>

    <ul>
      <li>Multi-judge ensembles</li>
      <li>Calibrated uncertainty estimation</li>
      <li>Hybrid human–AI evaluation loops</li>
      <li>Formal guarantees on judge consistency</li>
    </ul>
  </li>
</ul>

<h2 id="panel--jury-of-llms-as-judges">Panel / Jury of LLMs-as-Judges</h2>

<ul>
  <li>
    <p>Before discussing bias modes and mitigation strategies for individual LLM judges, it is important to introduce a complementary and increasingly influential idea: <strong>using a panel (or jury) of LLMs-as-Judges instead of a single judge model</strong>. Panels of LLMs-as-Judges represent a principled extension of LLM-as-a-Judge in which <strong>multiple evaluator models jointly assess outputs</strong>, and their judgments are aggregated.</p>
  </li>
  <li>
    <p>This approach is motivated by bias reduction, robustness, and cost–performance trade-offs, and is formalized and empirically validated in <a href="https://arxiv.org/abs/2404.18796">Replacing Judges with Juries: Evaluating LLM Generations with a Panel of Diverse Models</a> by Verga et al. (2024).</p>
  </li>
  <li>
    <p>Panels provide a <strong>systematic improvement over single-judge evaluation</strong> by:</p>

    <ul>
      <li>Reducing intra-model bias</li>
      <li>Increasing agreement with human judgments</li>
      <li>Improving robustness to prompt perturbations</li>
      <li>Lowering cost and latency relative to a single large judge</li>
    </ul>
  </li>
  <li>
    <p>They represent a natural evolution of LLM-as-a-Judge toward <strong>jury-style evaluation</strong>, aligning automated evaluation with best practices from human annotation, information retrieval, and statistical reliability theory.</p>
  </li>
</ul>

<h3 id="motivation-why-a-single-judge-is-not-enough">Motivation: Why a Single Judge is Not Enough</h3>

<ul>
  <li>
    <p>Most LLM-as-a-Judge systems rely on a <strong>single strong evaluator</strong>, often a frontier proprietary model such as GPT-4. While convenient, this design has several fundamental limitations:</p>

    <ol>
      <li>
        <p><strong>Intra-model bias</strong>: Judge models tend to recognize and favor outputs that are stylistically, semantically, or distributionally similar to their own generations. This self-preference effect is empirically documented in <a href="https://arxiv.org/abs/2401.01917">LLM Evaluators Recognize and Favor Their Own Generations</a> by Panickssery et al. (2024).</p>
      </li>
      <li>
        <p><strong>High variance and prompt sensitivity</strong>: Small changes in prompt wording or formatting can produce large swings in evaluation outcomes, particularly for large models that over-reason or inject external knowledge. This instability is demonstrated in <a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a> by Zheng et al. (2023).</p>
      </li>
      <li>
        <p><strong>Cost and latency at scale</strong>: Using a single frontier model as a judge is expensive and slow, limiting scalability, accessibility, and continuous evaluation.</p>
      </li>
    </ol>
  </li>
  <li>
    <p><a href="https://arxiv.org/abs/2404.18796">Replacing Judges with Juries: Evaluating LLM Generations with a Panel of Diverse Models</a> by Verga et al. (2024) empirically show that even very strong models such as GPT-4 can be <strong>surprisingly weak or unstable judges</strong> in certain settings, motivating a shift away from single-oracle evaluation.</p>
  </li>
  <li>
    <p>The core insight is that <strong>evaluation suffers from the same variance and subjectivity problems as human annotation</strong>, and therefore benefits from aggregation rather than reliance on a single rater—an idea long established in IR evaluation practice.</p>
  </li>
</ul>

<h3 id="panel-of-llm-evaluators-poll-core-concept">Panel of LLM Evaluators (PoLL): Core Concept</h3>

<ul>
  <li>A <strong>Panel of LLM Evaluators (PoLL)</strong> replaces a single judge <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-92-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;J&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1064" style="width: 0.576em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1065"><span class="mi" id="MathJax-Span-1066" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>J</mi></math></span></span><script type="math/tex" id="MathJax-Element-92">J</script> with a set of heterogeneous judges:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-93-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;msub&gt;&lt;mi&gt;J&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;J&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;J&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1067" style="width: 6.253em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.211em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1005.21em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1068"><span class="texatom" id="MathJax-Span-1069"><span class="mrow" id="MathJax-Span-1070"><span class="msubsup" id="MathJax-Span-1071"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1072" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-1073" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1074" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-1075" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1076" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-1077" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1078" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-1079" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">…</span><span class="mo" id="MathJax-Span-1080" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">,</span><span class="msubsup" id="MathJax-Span-1081" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1082" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-1083" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><msub><mi>J</mi><mn>1</mn></msub><mo>,</mo><msub><mi>J</mi><mn>2</mn></msub><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>J</mi><mi>k</mi></msub></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-93">{J_1, J_2, \dots, J_k}</script>

<ul>
  <li>
    <p>Ideally, these judges are drawn from <strong>different model families</strong>.</p>
  </li>
  <li>
    <p>Instead of computing an evaluation score as:</p>
  </li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-94-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtext&gt;score&lt;/mtext&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;J&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1084" style="width: 7.19em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1005.94em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1085"><span class="mtext" id="MathJax-Span-1086" style="font-family: STIXGeneral-Regular;">score</span><span class="mo" id="MathJax-Span-1087" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1088" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1089" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1090" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mi" id="MathJax-Span-1091" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mo" id="MathJax-Span-1092" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1093" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1094" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>score</mtext><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>J</mi><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-94">\text{score}(a) = J(a)</script>

<ul>
  <li>
    <p>PoLL computes:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-95-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mtext&gt;score&lt;/mtext&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-OPEN&quot;&gt;&lt;mo maxsize=&quot;1.2em&quot; minsize=&quot;1.2em&quot;&gt;(&lt;/mo&gt;&lt;/mrow&gt;&lt;msub&gt;&lt;mi&gt;J&lt;/mi&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;J&lt;/mi&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mo&gt;&amp;#x2026;&lt;/mo&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;J&lt;/mi&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-CLOSE&quot;&gt;&lt;mo maxsize=&quot;1.2em&quot; minsize=&quot;1.2em&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1095" style="width: 17.398em; display: inline-block;"><span style="display: inline-block; position: relative; width: 14.482em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(2.086em, 1014.33em, 3.753em, -999.997em); top: -3.174em; left: 0em;"><span class="mrow" id="MathJax-Span-1096"><span class="mtext" id="MathJax-Span-1097" style="font-family: STIXGeneral-Regular;">score</span><span class="mo" id="MathJax-Span-1098" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1099" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1100" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1101" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mi" id="MathJax-Span-1102" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span class="texatom" id="MathJax-Span-1103"><span class="mrow" id="MathJax-Span-1104"><span class="mo" id="MathJax-Span-1105" style="vertical-align: -0.258em;"><span><span style="font-size: 110%; font-family: STIXSizeOneSym;">(</span></span></span></span></span><span class="msubsup" id="MathJax-Span-1106"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1107" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-1108" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1109" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1110" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1111" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1112" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-1113" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.888em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1114" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mn" id="MathJax-Span-1115" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1116" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1117" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1118" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1119" style="font-family: STIXGeneral-Regular;">,</span><span class="mo" id="MathJax-Span-1120" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">…</span><span class="mo" id="MathJax-Span-1121" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">,</span><span class="msubsup" id="MathJax-Span-1122" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1123" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-1124" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1125" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1126" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1127" style="font-family: STIXGeneral-Regular;">)</span><span class="texatom" id="MathJax-Span-1128"><span class="mrow" id="MathJax-Span-1129"><span class="mo" id="MathJax-Span-1130" style="vertical-align: -0.258em;"><span><span style="font-size: 110%; font-family: STIXSizeOneSym;">)</span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.18em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.559em; border-left: 0px solid; width: 0px; height: 1.753em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mtext>score</mtext><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>f</mi><mrow class="MJX-TeXAtom-OPEN"><mo maxsize="1.2em" minsize="1.2em">(</mo></mrow><msub><mi>J</mi><mn>1</mn></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>,</mo><msub><mi>J</mi><mn>2</mn></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>,</mo><mo>…</mo><mo>,</mo><msub><mi>J</mi><mi>k</mi></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mrow class="MJX-TeXAtom-CLOSE"><mo maxsize="1.2em" minsize="1.2em">)</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-95">\text{score}(a) = f\bigl(J_1(a), J_2(a), \dots, J_k(a)\bigr)</script>

    <ul>
      <li>
        <p>where:</p>

        <ul>
          <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-96-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1131" style="width: 0.576em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1132"><span class="mi" id="MathJax-Span-1133" style="font-family: STIXGeneral-Italic;">a</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-96">a</script> is the model-generated output being evaluated</li>
          <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-97-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;J&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1134" style="width: 2.19em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.826em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1001.77em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1135"><span class="msubsup" id="MathJax-Span-1136"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1137" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-1138" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1139" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1140" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1141" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>J</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-97">J_i(a)</script> is the judgment from the <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-98-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1142" style="width: 0.315em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.263em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1000.26em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1143"><span class="mi" id="MathJax-Span-1144" style="font-family: STIXGeneral-Italic;">i</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>i</mi></math></span></span><script type="math/tex" id="MathJax-Element-98">i</script>-th evaluator</li>
          <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-99-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1145" style="width: 0.576em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1000.47em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1146"><span class="mi" id="MathJax-Span-1147" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>f</mi></math></span></span><script type="math/tex" id="MathJax-Element-99">f</script> is an aggregation (pooling or voting) function</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>This formulation mirrors classical techniques for reducing annotator variance in information retrieval and QA evaluation, as discussed in <a href="https://dl.acm.org/doi/10.1145/290941.291017">Variations in Relevance Judgments and the Measurement of Retrieval Effectiveness</a> by Voorhees (1998).</p>
  </li>
</ul>

<h3 id="judge-diversity-and-panel-composition">Judge Diversity and Panel Composition</h3>

<ul>
  <li>
    <p>A key design principle of PoLL is <strong>heterogeneity</strong>. The PoLL study constructs panels using evaluators from disjoint model families, including:</p>

    <ul>
      <li>GPT-3.5 (OpenAI)</li>
      <li>Claude 3 Haiku (Anthropic)</li>
      <li>Command R (Cohere)</li>
    </ul>
  </li>
  <li>
    <p>The motivation is to reduce <strong>correlated errors and self-preference effects</strong>, which arise when judges share training data, architectural biases, or generation styles.</p>
  </li>
  <li>
    <p>Crucially, Verga et al. (2024) find that:</p>
  </li>
</ul>

<blockquote>
  <p><strong>A panel of smaller, cheaper, heterogeneous models consistently outperforms a single large model as a judge</strong>, when measured against human judgments.</p>
</blockquote>

<ul>
  <li>This supports broader findings that evaluator quality is <strong>task- and bias-dependent</strong>, rather than monotonically increasing with model size, as also observed in <a href="https://arxiv.org/abs/2403.02839">An Empirical Study of LLM-as-a-Judge for LLM Evaluation</a> by Huang et al. (2024).</li>
</ul>

<h3 id="aggregation-and-voting-strategies">Aggregation and Voting Strategies</h3>

<ul>
  <li>Different evaluation scales require different aggregation functions.</li>
</ul>

<h4 id="binary-judgments-eg-qa-correctness">Binary Judgments (e.g., QA Correctness)</h4>

<ul>
  <li>Max pooling is effective:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-100-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;&gt;max&lt;/mo&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;munder&gt;&lt;mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;&gt;max&lt;/mo&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/munder&gt;&lt;msub&gt;&lt;mi&gt;J&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1148" style="width: 9.221em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.659em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1007.61em, 3.284em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1149"><span class="msubsup" id="MathJax-Span-1150"><span style="display: inline-block; position: relative; width: 1.565em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1151" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.263em;"><span class="texatom" id="MathJax-Span-1152"><span class="mrow" id="MathJax-Span-1153"><span class="mo" id="MathJax-Span-1154" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">max</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1155" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1156" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1157" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1158" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="munderover" id="MathJax-Span-1159" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 1.721em; height: 0px;"><span style="position: absolute; clip: rect(3.388em, 1001.72em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-1160" style="font-family: STIXGeneral-Regular;">max</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.388em, 1000.21em, 4.43em, -999.997em); top: -3.331em; left: 0.784em;"><span class="mi" id="MathJax-Span-1161" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-1162" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1163" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-1164" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1165" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1166" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1167" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.184em; border-left: 0px solid; width: 0px; height: 2.066em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>f</mi><mrow class="MJX-TeXAtom-ORD"><mo movablelimits="true" form="prefix">max</mo></mrow></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo movablelimits="true" form="prefix">max</mo><mi>j</mi></munder><msub><mi>J</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-100">f_{\max}(a) = \max_j J_j(a)</script>

<ul>
  <li>This favors recall and avoids false negatives when at least one judge correctly identifies validity.</li>
</ul>

<h4 id="ordinal-or-likert-type-scores-eg-15-ratings">Ordinal or Likert-Type Scores (e.g., 1–5 Ratings)</h4>

<ul>
  <li>Mean (average) pooling is preferred:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-101-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;avg&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mfrac&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/mfrac&gt;&lt;munderover&gt;&lt;mo&gt;&amp;#x2211;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mi&gt;k&lt;/mi&gt;&lt;/munderover&gt;&lt;msub&gt;&lt;mi&gt;J&lt;/mi&gt;&lt;mi&gt;j&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1168" style="width: 9.69em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.076em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(0.263em, 1008.02em, 3.753em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1169"><span class="msubsup" id="MathJax-Span-1170"><span style="display: inline-block; position: relative; width: 1.357em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1171" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.263em;"><span class="texatom" id="MathJax-Span-1172"><span class="mrow" id="MathJax-Span-1173"><span class="mtext" id="MathJax-Span-1174" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">avg</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1175" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1176" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1177" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1178" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mfrac" id="MathJax-Span-1179" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 0.628em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;"><span style="position: absolute; clip: rect(3.18em, 1000.42em, 4.169em, -999.997em); top: -4.685em; left: 50%; margin-left: -0.258em;"><span class="mn" id="MathJax-Span-1180" style="font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -3.331em; left: 50%; margin-left: -0.206em;"><span class="mi" id="MathJax-Span-1181" style="font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.836em, 1000.63em, 1.201em, -999.997em); top: -1.247em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.628em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.044em;"></span></span></span></span><span class="munderover" id="MathJax-Span-1182" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 1.305em; height: 0px;"><span style="position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-1183" style="font-family: STIXSizeOneSym; vertical-align: -0.518em;">∑</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.388em, 1000.94em, 4.43em, -999.997em); top: -2.862em; left: 0.107em;"><span class="texatom" id="MathJax-Span-1184"><span class="mrow" id="MathJax-Span-1185"><span class="mi" id="MathJax-Span-1186" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1187" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">=</span><span class="mn" id="MathJax-Span-1188" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.284em, 1000.32em, 4.169em, -999.997em); top: -5.206em; left: 0.471em;"><span class="mi" id="MathJax-Span-1189" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">k<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="msubsup" id="MathJax-Span-1190" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1191" style="font-family: STIXGeneral-Italic;">J<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-1192" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">j<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1193" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1194" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1195" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.747em; border-left: 0px solid; width: 0px; height: 3.941em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>f</mi><mrow class="MJX-TeXAtom-ORD"><mtext>avg</mtext></mrow></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mfrac><mn>1</mn><mi>k</mi></mfrac><munderover><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>k</mi></munderover><msub><mi>J</mi><mi>j</mi></msub><mo stretchy="false">(</mo><mi>a</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-101">f_{\text{avg}}(a) = \frac{1}{k}\sum_{j=1}^k J_j(a)</script>

<ul>
  <li>Averaging produces smoother, more stable scores than majority voting for ordinal scales.</li>
</ul>

<h4 id="pairwise-preference-judgments">Pairwise Preference Judgments</h4>

<ul>
  <li>
    <p>Each judge produces a preference <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-102-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;&amp;#x227B;&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1196" style="width: 2.607em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.138em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1002.09em, 2.398em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-1197"><span class="mi" id="MathJax-Span-1198" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1199" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">≻</span><span class="mi" id="MathJax-Span-1200" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">b</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi><mo>≻</mo><mi>b</mi></math></span></span><script type="math/tex" id="MathJax-Element-102">a \succ b</script>, and aggregation is typically performed via <strong>majority voting</strong> or averaged logits.</p>
  </li>
  <li>
    <p>The choice of aggregation function directly affects bias, variance, and sensitivity, and should be aligned with the underlying rubric scale.</p>
  </li>
</ul>

<h3 id="empirical-results-and-human-correlation">Empirical Results and Human Correlation</h3>

<ul>
  <li>
    <p>PoLL is evaluated across the following data across six datasets, including KILT-NQ, TriviaQA, HotpotQA, Bamboogle, and Arena-Hard:</p>

    <ul>
      <li>Single-hop QA</li>
      <li>Multi-hop QA</li>
      <li>Pairwise chatbot evaluation (Chatbot Arena / Arena-Hard)</li>
    </ul>
  </li>
  <li>
    <p>The following figure shows (top) rankings of model performance change drastically depending on which LLM is used as the judge on KILT-NQ; (bottom) panel of LLM evaluators (PoLL) has the highest Cohen’s <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-103-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03BA;&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1201" style="width: 0.732em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.58em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1202"><span class="mi" id="MathJax-Span-1203" style="font-family: STIXGeneral-Italic;">κ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>κ</mi></math></span></span><script type="math/tex" id="MathJax-Element-103">\kappa</script> correlation with human judgements.**</p>
  </li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/PoLL.jpg" alt=""></p>

<ul>
  <li>
    <p>Key empirical findings from Verga et al. (2024):</p>

    <ul>
      <li>Higher Cohen’s <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-104-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03BA;&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1204" style="width: 0.732em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.58em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1205"><span class="mi" id="MathJax-Span-1206" style="font-family: STIXGeneral-Italic;">κ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>κ</mi></math></span></span><script type="math/tex" id="MathJax-Element-104">\kappa</script> agreement with humans on QA tasks</li>
      <li>Higher Kendall–<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-105-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03C4;&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1207" style="width: 0.576em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1208"><span class="mi" id="MathJax-Span-1209" style="font-family: STIXGeneral-Italic;">τ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>τ</mi></math></span></span><script type="math/tex" id="MathJax-Element-105">\tau</script> and Pearson correlation with human rankings</li>
      <li>Lower variance across prompts and evaluator choices</li>
      <li>Dramatically reduced intra-model bias (models no longer rank themselves highest)</li>
    </ul>
  </li>
  <li>
    <p>These results directly reinforce concerns raised in <a href="https://arxiv.org/abs/2305.17926">Large Language Models Are Not Fair Evaluators</a> by Wang et al. (2023).</p>
  </li>
</ul>

<h3 id="cost-and-latency-advantages">Cost and Latency Advantages</h3>

<ul>
  <li>
    <p>A counterintuitive but important result is that PoLL is <strong>significantly cheaper and often faster</strong> than using a single large judge:</p>

    <ul>
      <li>A three-model PoLL is reported to be <strong>7–8× cheaper</strong> than GPT-4 Turbo</li>
      <li>Parallel execution of smaller models reduces wall-clock latency</li>
    </ul>
  </li>
  <li>
    <p>This undermines the assumption that the best judge must always be the largest or most capable model.</p>
  </li>
</ul>

<h3 id="relationship-to-llm-as-a-judge-and-ltr-paradigms">Relationship to LLM-as-a-Judge and LTR Paradigms</h3>

<ul>
  <li>
    <p>Panels of judges can be applied across <strong>all evaluation and ranking paradigms</strong>:</p>
  </li>
  <li><strong>Pointwise</strong>: each judge scores outputs independently; scores are pooled</li>
  <li><strong>Pairwise</strong>: each judge compares outputs; preferences are aggregated</li>
  <li>
    <p><strong>Listwise</strong>: each judge ranks a list; rankings are combined (e.g., Borda count)</p>
  </li>
  <li>In practice:</li>
</ul>

<blockquote>
  <p>Panels are most commonly used in <strong>pointwise and pairwise LLM-as-a-Judge setups</strong>, where they deliver the largest robustness gains per unit cost.</p>
</blockquote>

<ul>
  <li>This complements listwise ranking approaches such as
<a href="https://arxiv.org/abs/2206.15198">ListBERT</a> by Kumar et al. (2022) and
<a href="https://arxiv.org/abs/2402.15838">ListT5</a> by Yoon et al. (2024), where diversity is typically introduced at the data or decoding level rather than the evaluator level.</li>
</ul>

<h3 id="practical-guidance-when-to-use-a-panel-of-judges">Practical Guidance: When to Use a Panel of Judges</h3>

<ul>
  <li>
    <p>Use a <strong>panel of LLM judges</strong> when:</p>

    <ul>
      <li>Evaluation bias has high downstream cost</li>
      <li>Human agreement is critical</li>
      <li>You are benchmarking, publishing, or reporting results</li>
      <li>Single-judge variance is unacceptable</li>
      <li>Cost constraints rule out a single large judge</li>
    </ul>
  </li>
  <li>
    <p>Panels are less necessary when:</p>

    <ul>
      <li>Tasks are trivial or highly objective</li>
      <li>Absolute correctness can be verified symbolically</li>
      <li>Latency budgets are extremely tight</li>
      <li>Trained rankers already handle evaluation in production</li>
    </ul>
  </li>
</ul>

<h3 id="takeaways-3">Takeaways</h3>

<ul>
  <li>
    <p>Panels of LLMs-as-Judges transform evaluation from a single-oracle decision into a <strong>statistical estimation problem</strong>. By leveraging diversity, aggregation, and redundancy, PoLL delivers:</p>

    <ul>
      <li>Higher human alignment</li>
      <li>Reduced bias</li>
      <li>Lower variance</li>
      <li>Better cost–performance trade-offs</li>
    </ul>
  </li>
  <li>
    <p>As such, jury-style evaluation forms a natural foundation for robust LLM-as-a-Judge systems and directly motivates the subsequent discussion of <strong>biases in LLM-as-a-Judge and mitigation strategies</strong>.</p>
  </li>
</ul>

<h2 id="multimodal-llms-as-judges-lmm--vlm-as-a-judge">Multimodal LLMs-as-Judges (LMM / VLM-as-a-Judge)</h2>

<ul>
  <li>
    <p>This section introduces <strong>multimodal LLMs-as-Judges</strong>, where the evaluator model directly consumes and reasons over <strong>non-textual inputs</strong> (images, and in some cases video) in addition to text. This paradigm extends LLM-as-a-Judge beyond purely linguistic tasks and is essential for evaluating modern <strong>vision-language models (VLMs)</strong> and <strong>large multimodal models (LMMs)</strong>.</p>
  </li>
  <li>
    <p>Multimodal LLMs-as-Judges extend the LLM-as-a-Judge paradigm to perception-heavy tasks, enabling <strong>grounded, scalable, and interpretable evaluation</strong> of vision-language systems. Together with panel-based judging and bias-aware mitigation strategies, they form a critical foundation for evaluating and aligning next-generation multimodal models.</p>
  </li>
  <li>
    <p>We focus on two representative and influential lines of work:</p>

    <ul>
      <li><strong>LLaVA-Critic</strong>: a generalist multimodal judge trained for broad evaluation and preference learning</li>
      <li><strong>Prometheus-Vision</strong>: a fine-grained rubric-driven VLM evaluator</li>
    </ul>
  </li>
</ul>

<h3 id="why-multimodal-judges-are-necessary">Why Multimodal Judges are Necessary</h3>

<ul>
  <li>
    <p>Text-only LLM judges are fundamentally limited when evaluating multimodal tasks:</p>

    <ul>
      <li>They cannot directly perceive visual content</li>
      <li>They rely on intermediate captions or OCR pipelines</li>
      <li>Errors propagate from perception to judgment</li>
      <li>Multiple inference stages increase cost and latency</li>
    </ul>
  </li>
  <li>
    <p>These limitations are explicitly discussed in <a href="https://arxiv.org/abs/2401.06591">Prometheus-Vision: Vision-Language Model as a Judge for Fine-Grained Evaluation</a> by Lee et al. (2024). The following figure (<a href="https://arxiv.org/abs/2401.06591">source</a>) illustrates the fact that conventional metrics measure the similarity between the response and ground-truth answer, which is not expressive enough. Moreover, it could not pinpoint what is missing within the response with respect to the evaluation criteria. In contrast, the VLM-as-a-Judge pipeline provides not only the flexibility to adhere to arbitrary evaluation criteria but also provides detailed language feedback that specifically pinpoints the deficiencies.</p>
  </li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/Prometheus-Vision_1.jpg" alt=""></p>

<ul>
  <li>As a result, <strong>VLM-as-a-Judge</strong> (or LMM-as-a-Judge) has emerged, where the judge model directly processes the same multimodal inputs as the model being evaluated.</li>
</ul>

<h3 id="paradigm-vlm--lmm-as-a-judge">Paradigm: VLM / LMM-as-a-Judge</h3>

<ul>
  <li>Formally, a multimodal judge estimates:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-106-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;f&lt;/mi&gt;&lt;mi&gt;&amp;#x03B8;&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;image&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;text&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1210" style="width: 10.576em; display: inline-block;"><span style="display: inline-block; position: relative; width: 8.805em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.148em, 1008.75em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1211"><span class="msubsup" id="MathJax-Span-1212"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1213" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-1214" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1215" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="msubsup" id="MathJax-Span-1216" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1217" style="font-family: STIXGeneral-Italic;">f<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.159em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.263em;"><span class="mi" id="MathJax-Span-1218" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">θ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1219" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-1220"><span style="display: inline-block; position: relative; width: 2.294em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1221" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.523em;"><span class="texatom" id="MathJax-Span-1222"><span class="mrow" id="MathJax-Span-1223"><span class="mtext" id="MathJax-Span-1224" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">image</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1225" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-1226" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 1.617em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1227" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.523em;"><span class="texatom" id="MathJax-Span-1228"><span class="mrow" id="MathJax-Span-1229"><span class="mtext" id="MathJax-Span-1230" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">text</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1231" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-1232" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1233" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-1234" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1235" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.441em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>s</mi><mi>i</mi></msub><mo>=</mo><msub><mi>f</mi><mi>θ</mi></msub><mo stretchy="false">(</mo><msup><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mtext>image</mtext></mrow></msup><mo>,</mo><msup><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mtext>text</mtext></mrow></msup><mo>,</mo><msub><mi>y</mi><mi>i</mi></msub><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-106">s_i = f_\theta(x^{\text{image}}, x^{\text{text}}, y_i)</script>

<ul>
  <li>
    <p>where:</p>

    <ul>
      <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-107-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;image&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1236" style="width: 2.763em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.294em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.148em, 1002.29em, 2.294em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-1237"><span class="msubsup" id="MathJax-Span-1238"><span style="display: inline-block; position: relative; width: 2.294em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1239" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.372em; left: 0.523em;"><span class="texatom" id="MathJax-Span-1240"><span class="mrow" id="MathJax-Span-1241"><span class="mtext" id="MathJax-Span-1242" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">image</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.128em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mtext>image</mtext></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-107">x^{\text{image}}</script> is the visual input</li>
      <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-108-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msup&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;text&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msup&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1243" style="width: 1.982em; display: inline-block;"><span style="display: inline-block; position: relative; width: 1.617em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.201em, 1001.62em, 2.294em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-1244"><span class="msubsup" id="MathJax-Span-1245"><span style="display: inline-block; position: relative; width: 1.617em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1246" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.372em; left: 0.523em;"><span class="texatom" id="MathJax-Span-1247"><span class="mrow" id="MathJax-Span-1248"><span class="mtext" id="MathJax-Span-1249" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">text</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.066em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msup><mi>x</mi><mrow class="MJX-TeXAtom-ORD"><mtext>text</mtext></mrow></msup></math></span></span><script type="math/tex" id="MathJax-Element-108">x^{\text{text}}</script> is the instruction or question</li>
      <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-109-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1250" style="width: 0.888em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.73em, 2.503em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-1251"><span class="msubsup" id="MathJax-Span-1252"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1253" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-1254" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>y</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-109">y_i</script> is the candidate response</li>
      <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-110-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;i&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1255" style="width: 0.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.68em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-1256"><span class="msubsup" id="MathJax-Span-1257"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1258" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-1259" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">i</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>s</mi><mi>i</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-110">s_i</script> is a score, label, or preference</li>
    </ul>
  </li>
  <li>
    <p>This mirrors pointwise and pairwise LTR, but with <strong>joint multimodal grounding</strong>.</p>
  </li>
  <li>
    <p>Multimodal judges are now used for:</p>

    <ul>
      <li>Visual instruction following</li>
      <li>Image and video captioning evaluation</li>
      <li>Visual QA and reasoning</li>
      <li>Hallucination detection</li>
      <li>Preference learning and reward modeling</li>
    </ul>
  </li>
</ul>

<h3 id="llava-critic-generalist-multimodal-judge">LLaVA-Critic: Generalist Multimodal Judge</h3>

<h4 id="overview-1">Overview</h4>

<ul>
  <li>
    <p><strong>LLaVA-Critic</strong> is the first open-source <strong>generalist multimodal evaluator</strong>, explicitly trained to act as a judge across a wide range of vision–language tasks.</p>
  </li>
  <li>
    <p>Paper: <a href="https://arxiv.org/abs/2410.02712">LLaVA-Critic: Learning to Evaluate Multimodal Models</a> by Xiong et al. (2024)</p>
  </li>
  <li>
    <p>Project page: <a href="https://llava-vl.github.io/blog/llava-critic">LLaVA-Critic blog</a></p>
  </li>
</ul>

<h4 id="key-contributions">Key Contributions</h4>

<ul>
  <li>Introduces <strong>critic instruction-following data</strong> for multimodal evaluation</li>
  <li>Supports both <strong>pointwise scoring</strong> and <strong>pairwise ranking</strong></li>
  <li>Produces <strong>scores + natural language justifications</strong></li>
  <li>Matches or exceeds GPT-4V / GPT-4o alignment on multiple benchmarks</li>
  <li>Enables <strong>preference learning</strong> for LMM alignment</li>
</ul>

<h4 id="training-data-and-setup">Training Data and Setup</h4>

<ul>
  <li>Each training instance follows:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-111-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mtext&gt;Image&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mtext&gt;Question&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mtext&gt;Response&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mtext&gt;Criteria&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mtext&gt;Score&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mtext&gt;Reason&lt;/mtext&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1260" style="width: 25.471em; display: inline-block;"><span style="display: inline-block; position: relative; width: 21.201em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1021.15em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1261"><span class="mo" id="MathJax-Span-1262" style="font-family: STIXGeneral-Regular;">(</span><span class="mtext" id="MathJax-Span-1263" style="font-family: STIXGeneral-Regular;">Image</span><span class="mo" id="MathJax-Span-1264" style="font-family: STIXGeneral-Regular;">,</span><span class="mtext" id="MathJax-Span-1265" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">Question</span><span class="mo" id="MathJax-Span-1266" style="font-family: STIXGeneral-Regular;">,</span><span class="mtext" id="MathJax-Span-1267" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">Response</span><span class="mo" id="MathJax-Span-1268" style="font-family: STIXGeneral-Regular;">,</span><span class="mtext" id="MathJax-Span-1269" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">Criteria</span><span class="mo" id="MathJax-Span-1270" style="font-family: STIXGeneral-Regular;">,</span><span class="mtext" id="MathJax-Span-1271" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">Score</span><span class="mo" id="MathJax-Span-1272" style="font-family: STIXGeneral-Regular;">,</span><span class="mtext" id="MathJax-Span-1273" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">Reason</span><span class="mo" id="MathJax-Span-1274" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo stretchy="false">(</mo><mtext>Image</mtext><mo>,</mo><mtext>Question</mtext><mo>,</mo><mtext>Response</mtext><mo>,</mo><mtext>Criteria</mtext><mo>,</mo><mtext>Score</mtext><mo>,</mo><mtext>Reason</mtext><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-111">(\text{Image}, \text{Question}, \text{Response}, \text{Criteria}, \text{Score}, \text{Reason})</script>

<ul>
  <li>… or, in pairwise mode:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-112-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mtext&gt;Image&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mtext&gt;Question&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mtext&gt;Response&lt;/mtext&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mtext&gt;Response&lt;/mtext&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mtext&gt;Criteria&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mtext&gt;Preference&lt;/mtext&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mtext&gt;Reason&lt;/mtext&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1275" style="width: 34.065em; display: inline-block;"><span style="display: inline-block; position: relative; width: 28.388em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1028.34em, 2.607em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1276"><span class="mo" id="MathJax-Span-1277" style="font-family: STIXGeneral-Regular;">(</span><span class="mtext" id="MathJax-Span-1278" style="font-family: STIXGeneral-Regular;">Image</span><span class="mo" id="MathJax-Span-1279" style="font-family: STIXGeneral-Regular;">,</span><span class="mtext" id="MathJax-Span-1280" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">Question</span><span class="mo" id="MathJax-Span-1281" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-1282" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 4.273em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1003.8em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mtext" id="MathJax-Span-1283" style="font-family: STIXGeneral-Regular;">Response</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.747em; left: 3.857em;"><span class="mn" id="MathJax-Span-1284" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1285" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-1286" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 4.273em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1003.8em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mtext" id="MathJax-Span-1287" style="font-family: STIXGeneral-Regular;">Response</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.747em; left: 3.857em;"><span class="mn" id="MathJax-Span-1288" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1289" style="font-family: STIXGeneral-Regular;">,</span><span class="mtext" id="MathJax-Span-1290" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">Criteria</span><span class="mo" id="MathJax-Span-1291" style="font-family: STIXGeneral-Regular;">,</span><span class="mtext" id="MathJax-Span-1292" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">Preference</span><span class="mo" id="MathJax-Span-1293" style="font-family: STIXGeneral-Regular;">,</span><span class="mtext" id="MathJax-Span-1294" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">Reason</span><span class="mo" id="MathJax-Span-1295" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.253em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo stretchy="false">(</mo><mtext>Image</mtext><mo>,</mo><mtext>Question</mtext><mo>,</mo><msub><mtext>Response</mtext><mn>1</mn></msub><mo>,</mo><msub><mtext>Response</mtext><mn>2</mn></msub><mo>,</mo><mtext>Criteria</mtext><mo>,</mo><mtext>Preference</mtext><mo>,</mo><mtext>Reason</mtext><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-112">(\text{Image}, \text{Question}, \text{Response}_1, \text{Response}_2, \text{Criteria}, \text{Preference}, \text{Reason})</script>

<ul>
  <li>The model is fine-tuned using <strong>standard autoregressive cross-entropy loss</strong> over both the judgment and justification tokens.</li>
</ul>

<h4 id="architecture-5">Architecture</h4>

<ul>
  <li><strong>Backbone:</strong> LLaVA-OneVision (7B / 72B)</li>
  <li>Multimodal encoder + language decoder</li>
  <li>
    <p>Evaluation treated as instruction-following generation</p>
  </li>
  <li>The following figure (<a href="https://arxiv.org/abs/2410.02712">source</a>) shows an example of LLaVA-Critic training data. The top block shows pointwise scoring, where LLaVA-Critic predicts a score to evaluate a single response’s quality; the bottom block illustrates pairwise ranking, where it rank response pairs. In both settings, LLaVA-Critic learns to provide reasons for its judgments.</li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/LLaVA_Critic.jpg" alt=""></p>

<h4 id="evaluation-scenarios">Evaluation Scenarios</h4>

<ul>
  <li>
    <p>LLaVA-Critic is evaluated on:</p>

    <ul>
      <li>Visual chat benchmarks (LLaVA-in-the-Wild, LLaVA-Wilder)</li>
      <li>Integrated capability benchmarks (MMVet)</li>
      <li>Hallucination detection (MMHal-Bench)</li>
      <li>Preference benchmarks (WildVision Arena)</li>
    </ul>
  </li>
  <li>
    <p>It shows strong <strong>Pearson correlation</strong> and <strong>Kendall’s <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-113-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;&amp;#x03C4;&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1296" style="width: 0.571em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.467em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.604em, 1000.47em, 2.327em, -999.997em); top: -2.167em; left: 0em;"><span class="mrow" id="MathJax-Span-1297"><span class="mi" id="MathJax-Span-1298" style="font-family: STIXGeneral-Italic;">τ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.172em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>τ</mi></math></span></span><script type="math/tex" id="MathJax-Element-113">\tau</script></strong> with GPT-4o and human judgments, even at 7B scale.</p>
  </li>
</ul>

<h3 id="prometheus-vision-fine-grained-multimodal-evaluation">Prometheus-Vision: Fine-Grained Multimodal Evaluation</h3>

<h4 id="overview-2">Overview</h4>

<ul>
  <li>
    <p><strong>Prometheus-Vision</strong> focuses on <strong>fine-grained, rubric-conditioned evaluation</strong>, emphasizing transparency and interpretability.</p>
  </li>
  <li>
    <p>Paper: <a href="https://arxiv.org/abs/2401.06591">Prometheus-Vision: Vision-Language Model as a Judge for Fine-Grained Evaluation</a> by Lee et al. (2024)</p>
  </li>
  <li>
    <p>Code and models: <a href="https://github.com/kaistAI/prometheus-vision">Prometheus-Vision GitHub</a></p>
  </li>
</ul>

<h4 id="core-idea">Core Idea</h4>

<ul>
  <li>
    <p>Instead of coarse criteria (helpfulness, relevance), Prometheus-Vision evaluates responses using <strong>custom, instance-specific rubrics</strong>, each with explicit score descriptions.</p>
  </li>
  <li>
    <p>Each instance includes:</p>

    <ul>
      <li>Image</li>
      <li>Instruction</li>
      <li>Response to evaluate</li>
      <li>Customized score rubric</li>
      <li>Reference answer</li>
      <li>Output: feedback + score</li>
    </ul>
  </li>
  <li>
    <p>This enables <strong>rubric-conditioned judgment</strong>, analogous to trained human graders.</p>
  </li>
  <li>
    <p>The following figure (<a href="https://arxiv.org/abs/2401.06591">source</a>) illustrates the fact that previous automatic metrics could not capture whether a VLM’s response is aware of aesthetic harmony. With Prometheus-Vision, users could define customized score rubrics that they care about instead of assessing based on coarse-grained criteria such as helpfulness, relevance, accuracy, and comprehensiveness. Each component within the Perception Collection consists of 5 input components: an instruction, a real-world image, a response to evaluate, a customized score rubric, and a reference answer. Based on this, Prometheus-Vision is trained to generate a language feedback and a score decision.</p>
  </li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/Prometheus-Vision_2.jpg" alt=""></p>

<h4 id="architecture-and-training">Architecture and Training</h4>

<ul>
  <li>Backbone: LLaVA-1.5 (7B / 13B)</li>
  <li>
    <p>Training objective: sequential generation of</p>

    <ol>
      <li>Language feedback (rationale)</li>
      <li>Scalar score</li>
    </ol>
  </li>
  <li>Loss function (autoregressive cross-entropy):</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-114-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;munder&gt;&lt;mo&gt;&amp;#x2211;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/mrow&gt;&lt;/munder&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mi&gt;P&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;&amp;#x2223;&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1299" style="width: 10.836em; display: inline-block;"><span style="display: inline-block; position: relative; width: 9.013em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.096em, 1008.96em, 3.648em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-1300"><span class="texatom" id="MathJax-Span-1301"><span class="mrow" id="MathJax-Span-1302"><span class="mi" id="MathJax-Span-1303" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span class="mo" id="MathJax-Span-1304" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mo" id="MathJax-Span-1305" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">−</span><span class="munderover" id="MathJax-Span-1306" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 1.305em; height: 0px;"><span style="position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0em;"><span class="mo" id="MathJax-Span-1307" style="font-family: STIXSizeOneSym; vertical-align: -0.518em;">∑</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.492em, 1000.21em, 4.273em, -999.997em); top: -2.862em; left: 0.523em;"><span class="texatom" id="MathJax-Span-1308"><span class="mrow" id="MathJax-Span-1309"><span class="mi" id="MathJax-Span-1310" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mi" id="MathJax-Span-1311" style="font-family: STIXGeneral-Regular; padding-left: 0.211em;">log</span><span class="mo" id="MathJax-Span-1312"></span><span class="mi" id="MathJax-Span-1313" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">P</span><span class="mo" id="MathJax-Span-1314" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-1315"><span style="display: inline-block; position: relative; width: 0.732em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1316" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="mi" id="MathJax-Span-1317" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1318" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∣</span><span class="mi" id="MathJax-Span-1319" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1320" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.559em; border-left: 0px solid; width: 0px; height: 2.816em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mo>=</mo><mo>−</mo><munder><mo>∑</mo><mrow class="MJX-TeXAtom-ORD"><mi>t</mi></mrow></munder><mi>log</mi><mo>⁡</mo><mi>P</mi><mo stretchy="false">(</mo><msub><mi>y</mi><mi>t</mi></msub><mo>∣</mo><mi>x</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-114">\mathcal{L} = - \sum_{t} \log P(y_t \mid x)</script>

<ul>
  <li>A fixed delimiter phrase (“So the overall score is”) is used to stabilize decoding.</li>
</ul>

<h4 id="dataset-perception-collection">Dataset: Perception Collection</h4>

<ul>
  <li>15K fine-grained score rubrics</li>
  <li>5K real-world images</li>
  <li>150K evaluated responses</li>
  <li>Balanced score distribution (1–5)</li>
</ul>

<h4 id="empirical-results">Empirical Results</h4>

<ul>
  <li>
    <p>Prometheus-Vision achieves:</p>

    <ul>
      <li>Pearson correlation up to <strong>0.786</strong> with human evaluators</li>
      <li>Competitive or superior alignment to GPT-4V on multiple benchmarks</li>
      <li>High-quality natural language feedback preferred by humans</li>
    </ul>
  </li>
</ul>

<h3 id="multimodal-judges-in-preference-learning">Multimodal Judges in Preference Learning</h3>

<ul>
  <li>
    <p>Both LLaVA-Critic and Prometheus-Vision are used to generate <strong>reward signals</strong> for multimodal preference learning.</p>
  </li>
  <li>
    <p>For example, LLaVA-Critic is used to generate pairwise preferences for <strong>Direct Preference Optimization (DPO)</strong>:</p>
  </li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-115-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;&gt;L&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;DPO&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi mathvariant=&quot;double-struck&quot;&gt;E&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow&gt;&lt;mo&gt;[&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;log&lt;/mi&gt;&lt;mo&gt;&amp;#x2061;&lt;/mo&gt;&lt;mi&gt;&amp;#x03C3;&lt;/mi&gt;&lt;mrow&gt;&lt;mo&gt;(&lt;/mo&gt;&lt;mrow&gt;&lt;mi&gt;&amp;#x03B2;&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;+&lt;/mo&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;mo&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/mrow&gt;&lt;mo&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1321" style="width: 18.128em; display: inline-block;"><span style="display: inline-block; position: relative; width: 15.107em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.878em, 1014.95em, 3.44em, -999.997em); top: -2.914em; left: 0em;"><span class="mrow" id="MathJax-Span-1322"><span class="msubsup" id="MathJax-Span-1323"><span style="display: inline-block; position: relative; width: 2.19em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.68em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-1324"><span class="mrow" id="MathJax-Span-1325"><span class="mi" id="MathJax-Span-1326" style="font-family: STIXNonUnicode-Italic;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.68em;"><span class="texatom" id="MathJax-Span-1327"><span class="mrow" id="MathJax-Span-1328"><span class="mtext" id="MathJax-Span-1329" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">DPO</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1330" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mo" id="MathJax-Span-1331" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">−</span><span class="texatom" id="MathJax-Span-1332"><span class="mrow" id="MathJax-Span-1333"><span class="mi" id="MathJax-Span-1334" style="font-family: STIXGeneral-Regular;">𝔼</span></span></span><span class="mrow" id="MathJax-Span-1335" style="padding-left: 0.211em;"><span class="mo" id="MathJax-Span-1336" style="vertical-align: -0.206em;"><span style="font-family: STIXSizeOneSym;">[</span></span><span class="mrow" id="MathJax-Span-1337"><span class="mi" id="MathJax-Span-1338" style="font-family: STIXGeneral-Regular;">log</span><span class="mo" id="MathJax-Span-1339"></span><span class="mi" id="MathJax-Span-1340" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">σ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span class="mrow" id="MathJax-Span-1341" style="padding-left: 0.211em;"><span class="mo" id="MathJax-Span-1342" style="vertical-align: -0.206em;"><span style="font-family: STIXSizeOneSym;">(</span></span><span class="mrow" id="MathJax-Span-1343"><span class="mi" id="MathJax-Span-1344" style="font-family: STIXGeneral-Italic;">β<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1345" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1346" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1347" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-1348"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1349" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.471em;"><span class="mo" id="MathJax-Span-1350" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">+</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1351" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1352" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">−</span><span class="mi" id="MathJax-Span-1353" style="font-family: STIXGeneral-Italic; padding-left: 0.263em;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1354" style="font-family: STIXGeneral-Regular;">(</span><span class="msubsup" id="MathJax-Span-1355"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1356" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.471em;"><span class="mo" id="MathJax-Span-1357" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">−</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1358" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1359" style="font-family: STIXGeneral-Regular;">)</span></span><span class="mo" id="MathJax-Span-1360" style="vertical-align: -0.206em;"><span style="font-family: STIXSizeOneSym;">)</span></span></span></span><span class="mo" id="MathJax-Span-1361" style="vertical-align: -0.206em;"><span style="font-family: STIXSizeOneSym;">]</span></span></span></span><span style="display: inline-block; width: 0px; height: 2.919em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.497em; border-left: 0px solid; width: 0px; height: 1.628em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi class="MJX-tex-caligraphic" mathvariant="script">L</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mtext>DPO</mtext></mrow></msub><mo>=</mo><mo>−</mo><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="double-struck">E</mi></mrow><mrow><mo>[</mo><mrow><mi>log</mi><mo>⁡</mo><mi>σ</mi><mrow><mo>(</mo><mrow><mi>β</mi><mo stretchy="false">(</mo><mi>r</mi><mo stretchy="false">(</mo><msup><mi>y</mi><mo>+</mo></msup><mo stretchy="false">)</mo><mo>−</mo><mi>r</mi><mo stretchy="false">(</mo><msup><mi>y</mi><mo>−</mo></msup><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow><mo>)</mo></mrow></mrow><mo>]</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-115">\mathcal{L}_{\text{DPO}} = - \mathbb{E} \left[ \log \sigma\left(\beta (r(y^+) - r(y^-))\right) \right]</script>

<ul>
  <li>This enables <strong>RLAIF-style alignment</strong> for multimodal models, reducing reliance on costly human annotations.</li>
</ul>

<h3 id="when-to-use-multimodal-judges">When to Use Multimodal Judges</h3>

<ul>
  <li>
    <p>Multimodal LLMs-as-Judges are essential when:</p>

    <ul>
      <li>Evaluation depends on visual grounding</li>
      <li>Hallucinations must be detected against images</li>
      <li>Fine-grained visual attributes matter</li>
      <li>Preference learning is multimodal</li>
      <li>End-to-end vision–language behavior is evaluated</li>
    </ul>
  </li>
  <li>
    <p>They are less necessary when:</p>

    <ul>
      <li>Tasks are purely textual</li>
      <li>Visual inputs can be deterministically verified</li>
      <li>Latency budgets are extremely tight</li>
    </ul>
  </li>
</ul>

<h2 id="reinforcement-learning-for-llms-as-judges">Reinforcement Learning for LLMs-as-Judges</h2>

<ul>
  <li>
    <p>A recent and important evolution of LLM-as-a-Judge systems is the use of <strong>Reinforcement Learning (RL) to explicitly train judge models to reason before making evaluation decisions</strong>. Rather than relying solely on prompting, supervised fine-tuning, or preference optimization, RL-based approaches directly optimize the <strong>quality of judgment reasoning itself</strong>. * RL therefore represents a <strong>foundational shift</strong> in how LLM-as-a-Judge systems are built, moving from static evaluators to <strong>trained reasoning agents</strong> specialized for better judgement.</p>
  </li>
  <li>
    <p>This section focuses on <strong>J1</strong>, introduced in <a href="https://arxiv.org/abs/2505.10320">J1: Incentivizing Thinking in LLM-as-a-Judge via Reinforcement Learning</a> by Whitehouse et al. (2025), which represents the most comprehensive and rigorous RL framework for training thinking LLM judges to date.</p>
  </li>
</ul>

<h3 id="motivation-why-rl-for-judges">Motivation: Why RL for Judges?</h3>

<ul>
  <li>
    <p>Earlier LLM-as-a-Judge systems relied on:</p>

    <ul>
      <li>Zero-shot or few-shot prompting</li>
      <li>Supervised fine-tuning on judgment examples</li>
      <li>Preference-based optimization such as DPO</li>
    </ul>
  </li>
  <li>
    <p>While effective, these approaches suffer from two core limitations:</p>

    <ol>
      <li>
        <p><strong>Reasoning is implicit and uncontrolled</strong>: Judges may produce chain-of-thought reasoning, but it is not directly optimized for correctness or consistency.</p>
      </li>
      <li>
        <p><strong>Non-verifiable evaluation tasks</strong>: Many judgment tasks (e.g., helpfulness, writing quality) lack ground-truth labels, making supervised learning difficult.</p>
      </li>
    </ol>
  </li>
  <li>
    <p>The key insight behind J1 is that <strong>judgment quality can be optimized if evaluation tasks are reformulated to produce verifiable reward signals</strong>, enabling RL even for traditionally subjective judgments.</p>
  </li>
</ul>

<h3 id="core-idea-thinking-llm-as-a-judge-via-rl">Core Idea: Thinking-LLM-as-a-Judge Via RL</h3>

<ul>
  <li>
    <p>J1 reframes LLM-as-a-Judge as a <strong>reasoning-first policy optimization problem</strong>.</p>
  </li>
  <li>
    <p>Instead of directly predicting a score or preference, the judge is trained to:</p>

    <ol>
      <li>Generate explicit chain-of-thought reasoning</li>
      <li>Arrive at a final verdict or score</li>
      <li>Receive reward based on judgment correctness and consistency</li>
    </ol>
  </li>
  <li>
    <p>Formally, the judge produces:</p>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-116-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x223C;&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;mi&gt;&amp;#x03B8;&lt;/mi&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mo&gt;&amp;#x22C5;&lt;/mo&gt;&lt;mo&gt;&amp;#x2223;&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1362" style="width: 8.961em; display: inline-block;"><span style="display: inline-block; position: relative; width: 7.451em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.409em, 1007.4em, 2.607em, -999.997em); top: -2.237em; left: 0em;"><span class="mrow" id="MathJax-Span-1363"><span class="mo" id="MathJax-Span-1364" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1365" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1366" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-1367" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">y</span><span class="mo" id="MathJax-Span-1368" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1369" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∼</span><span class="msubsup" id="MathJax-Span-1370" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1371" style="font-family: STIXGeneral-Italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-1372" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">θ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1373" style="font-family: STIXGeneral-Regular;">(</span><span class="mo" id="MathJax-Span-1374" style="font-family: STIXGeneral-Regular;">⋅</span><span class="mo" id="MathJax-Span-1375" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">∣</span><span class="mi" id="MathJax-Span-1376" style="font-family: STIXGeneral-Italic; padding-left: 0.315em;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1377" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-1378" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">a</span><span class="mo" id="MathJax-Span-1379" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.242em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><mo stretchy="false">(</mo><mi>t</mi><mo>,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>∼</mo><msub><mi>π</mi><mi>θ</mi></msub><mo stretchy="false">(</mo><mo>⋅</mo><mo>∣</mo><mi>x</mi><mo>,</mo><mi>a</mi><mo stretchy="false">)</mo></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-116">(t, y) \sim \pi_\theta(\cdot \mid x, a)</script>

    <ul>
      <li>
        <p>where:</p>

        <ul>
          <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-117-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1380" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.52em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1381"><span class="mi" id="MathJax-Span-1382" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>x</mi></math></span></span><script type="math/tex" id="MathJax-Element-117">x</script> is the instruction or prompt</li>
          <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-118-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1383" style="width: 0.576em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1384"><span class="mi" id="MathJax-Span-1385" style="font-family: STIXGeneral-Italic;">a</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>a</mi></math></span></span><script type="math/tex" id="MathJax-Element-118">a</script> is one or more candidate responses</li>
          <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-119-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1386" style="width: 0.315em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.263em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.513em, 1000.26em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1387"><span class="mi" id="MathJax-Span-1388" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-119">t</script> is the generated reasoning trace</li>
          <li><span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-120-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1389" style="width: 0.628em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1000.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1390"><span class="mi" id="MathJax-Span-1391" style="font-family: STIXGeneral-Italic;">y</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>y</mi></math></span></span><script type="math/tex" id="MathJax-Element-120">y</script> is the final score or verdict</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>RL is used to optimize <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-121-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;&amp;#x03C0;&lt;/mi&gt;&lt;mi&gt;&amp;#x03B8;&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1392" style="width: 1.148em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.451em, -999.997em); top: -2.133em; left: 0em;"><span class="mrow" id="MathJax-Span-1393"><span class="msubsup" id="MathJax-Span-1394"><span style="display: inline-block; position: relative; width: 0.94em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1395" style="font-family: STIXGeneral-Italic;">π<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.055em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.523em;"><span class="mi" id="MathJax-Span-1396" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">θ<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.138em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>π</mi><mi>θ</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-121">\pi_\theta</script> such that both <strong>the reasoning and the final judgment</strong> improve over time.</p>
  </li>
</ul>

<h3 id="unified-verifiable-training-via-synthetic-data">Unified Verifiable Training Via Synthetic Data</h3>

<ul>
  <li>
    <p>A central challenge is that many evaluation tasks are <em>non-verifiable</em>. J1 addresses this by converting <strong>both verifiable and non-verifiable evaluation tasks into a unified, verifiable format</strong>.</p>
  </li>
  <li>
    <p>This is achieved through <strong>synthetic preference pair generation</strong>, building on techniques from
<a href="https://arxiv.org/abs/2408.02666">Self-Taught Evaluators</a> by Wang et al. (2024) and
<a href="https://openreview.net/forum?id=PNRznmmWP7">Learning to Plan &amp; Reason for Evaluation with Thinking-LLM-as-a-Judge</a> by Saha et al. (2025).</p>
  </li>
  <li>
    <p>Key aspects:</p>

    <ul>
      <li>Preference pairs <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-122-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1397" style="width: 2.503em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.086em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1002.03em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1398"><span class="mo" id="MathJax-Span-1399" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1400" style="font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1401" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-1402" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">b</span><span class="mo" id="MathJax-Span-1403" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-122">(a, b)</script> are generated synthetically</li>
      <li>One response is designated as preferred</li>
      <li>The judge’s task becomes <em>predicting the better response</em>, a verifiable objective</li>
    </ul>
  </li>
  <li>
    <p>This reformulation allows RL to be applied uniformly across QA, reasoning, writing, safety, and instruction-following tasks.</p>
  </li>
</ul>

<h3 id="reward-design-optimizing-judgment-quality">Reward Design: Optimizing Judgment Quality</h3>

<ul>
  <li>J1 uses <strong>rule-based, verifiable rewards</strong>, avoiding the need for a separate learned reward model.</li>
</ul>

<h4 id="verdict-correctness-reward">Verdict Correctness Reward</h4>

<ul>
  <li>The primary reward is binary:</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-123-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;correct&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow&gt;&lt;mo&gt;{&lt;/mo&gt;&lt;mtable columnalign=&quot;left left&quot; rowspacing=&quot;.2em&quot; columnspacing=&quot;1em&quot; displaystyle=&quot;false&quot;&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mn&gt;1&lt;/mn&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mtext&gt;if final verdict is correct&lt;/mtext&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;mtr&gt;&lt;mtd&gt;&lt;mn&gt;0&lt;/mn&gt;&lt;/mtd&gt;&lt;mtd&gt;&lt;mtext&gt;otherwise&lt;/mtext&gt;&lt;/mtd&gt;&lt;/mtr&gt;&lt;/mtable&gt;&lt;mo fence=&quot;true&quot; stretchy=&quot;true&quot; symmetric=&quot;true&quot;&gt;&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1404" style="width: 19.273em; display: inline-block;"><span style="display: inline-block; position: relative; width: 16.044em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(2.294em, 1016.04em, 4.846em, -999.997em); top: -3.799em; left: 0em;"><span class="mrow" id="MathJax-Span-1405"><span class="msubsup" id="MathJax-Span-1406"><span style="display: inline-block; position: relative; width: 2.451em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1407" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="texatom" id="MathJax-Span-1408"><span class="mrow" id="MathJax-Span-1409"><span class="mtext" id="MathJax-Span-1410" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">correct</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1411" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="mrow" id="MathJax-Span-1412" style="padding-left: 0.315em;"><span class="mo" id="MathJax-Span-1413" style="vertical-align: -0.466em;"><span><span style="font-size: 111%; font-family: STIXSizeTwoSym;">{</span></span></span><span class="mtable" id="MathJax-Span-1414" style="padding-right: 0.159em; padding-left: 0.159em;"><span style="display: inline-block; position: relative; width: 11.305em; height: 0px;"><span style="position: absolute; clip: rect(2.607em, 1000.47em, 4.846em, -999.997em); top: -4.008em; left: 0em;"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.42em, 4.169em, -999.997em); top: -4.581em; left: 0em;"><span class="mtd" id="MathJax-Span-1415"><span class="mrow" id="MathJax-Span-1416"><span class="mn" id="MathJax-Span-1417" style="font-family: STIXGeneral-Regular;">1</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -3.331em; left: 0em;"><span class="mtd" id="MathJax-Span-1421"><span class="mrow" id="MathJax-Span-1422"><span class="mn" id="MathJax-Span-1423" style="font-family: STIXGeneral-Regular;">0</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(2.607em, 1009.69em, 4.846em, -999.997em); top: -4.008em; left: 1.617em;"><span style="display: inline-block; position: relative; width: 9.69em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1009.69em, 4.169em, -999.997em); top: -4.581em; left: 0em;"><span class="mtd" id="MathJax-Span-1418"><span class="mrow" id="MathJax-Span-1419"><span class="mtext" id="MathJax-Span-1420" style="font-family: STIXGeneral-Regular;">if final verdict is correct</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.18em, 1003.86em, 4.169em, -999.997em); top: -3.331em; left: 0em;"><span class="mtd" id="MathJax-Span-1424"><span class="mrow" id="MathJax-Span-1425"><span class="mtext" id="MathJax-Span-1426" style="font-family: STIXGeneral-Regular;">otherwise</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1427"></span></span></span><span style="display: inline-block; width: 0px; height: 3.805em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -1.122em; border-left: 0px solid; width: 0px; height: 2.816em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mtext>correct</mtext></mrow></msub><mo>=</mo><mrow><mo>{</mo><mtable columnalign="left left" rowspacing=".2em" columnspacing="1em" displaystyle="false"><mtr><mtd><mn>1</mn></mtd><mtd><mtext>if final verdict is correct</mtext></mtd></mtr><mtr><mtd><mn>0</mn></mtd><mtd><mtext>otherwise</mtext></mtd></mtr></mtable><mo fence="true" stretchy="true" symmetric="true"></mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-123">r_{\text{correct}} =
\begin{cases}
1 & \text{if final verdict is correct} \\
0 & \text{otherwise}
\end{cases}</script>

<h4 id="consistency-reward-mitigating-positional-bias">Consistency Reward (Mitigating Positional Bias)</h4>

<ul>
  <li>
    <p>To combat positional bias in pairwise judging, J1 introduces a <strong>consistency reward</strong>:</p>
  </li>
  <li>Each preference pair is evaluated in both orders <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-124-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1428" style="width: 3.648em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.023em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1002.97em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1429"><span class="mo" id="MathJax-Span-1430" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1431" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1432" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-1433" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">a</span><span class="mo" id="MathJax-Span-1434" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-1435" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">b</span><span class="mo" id="MathJax-Span-1436" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>x</mi><mo>,</mo><mi>a</mi><mo>,</mo><mi>b</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-124">(x, a, b)</script> and <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-125-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;x&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1437" style="width: 3.648em; display: inline-block;"><span style="display: inline-block; position: relative; width: 3.023em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.357em, 1002.97em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1438"><span class="mo" id="MathJax-Span-1439" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1440" style="font-family: STIXGeneral-Italic;">x<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1441" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-1442" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">b</span><span class="mo" id="MathJax-Span-1443" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-1444" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">a</span><span class="mo" id="MathJax-Span-1445" style="font-family: STIXGeneral-Regular;">)</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">(</mo><mi>x</mi><mo>,</mo><mi>b</mi><mo>,</mo><mi>a</mi><mo stretchy="false">)</mo></math></span></span><script type="math/tex" id="MathJax-Element-125">(x, b, a)</script></li>
  <li>Reward is granted only if the judge is correct in both cases</li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-126-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mtext&gt;consistency&lt;/mtext&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mn mathvariant=&quot;double-struck&quot;&gt;1&lt;/mn&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-OPEN&quot;&gt;&lt;mo maxsize=&quot;1.2em&quot; minsize=&quot;1.2em&quot;&gt;[&lt;/mo&gt;&lt;/mrow&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;mo&gt;&amp;#x227B;&lt;/mo&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo&gt;=&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;mo&gt;&amp;#x227A;&lt;/mo&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-CLOSE&quot;&gt;&lt;mo maxsize=&quot;1.2em&quot; minsize=&quot;1.2em&quot;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1446" style="width: 13.023em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.836em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(2.086em, 1010.63em, 3.753em, -999.997em); top: -3.174em; left: 0em;"><span class="mrow" id="MathJax-Span-1447"><span class="msubsup" id="MathJax-Span-1448"><span style="display: inline-block; position: relative; width: 3.753em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1449" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="texatom" id="MathJax-Span-1450"><span class="mrow" id="MathJax-Span-1451"><span class="mtext" id="MathJax-Span-1452" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">consistency</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1453" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="texatom" id="MathJax-Span-1454" style="padding-left: 0.315em;"><span class="mrow" id="MathJax-Span-1455"><span class="mn" id="MathJax-Span-1456" style="font-family: STIXGeneral-Regular;">𝟙</span></span></span><span class="texatom" id="MathJax-Span-1457"><span class="mrow" id="MathJax-Span-1458"><span class="mo" id="MathJax-Span-1459" style="vertical-align: -0.258em;"><span><span style="font-size: 110%; font-family: STIXSizeOneSym;">[</span></span></span></span></span><span class="msubsup" id="MathJax-Span-1460"><span style="display: inline-block; position: relative; width: 1.721em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1461" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="texatom" id="MathJax-Span-1462"><span class="mrow" id="MathJax-Span-1463"><span class="mi" id="MathJax-Span-1464" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">a</span><span class="mo" id="MathJax-Span-1465" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">≻</span><span class="mi" id="MathJax-Span-1466" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">b</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1467" style="font-family: STIXGeneral-Regular; padding-left: 0.315em;">=</span><span class="msubsup" id="MathJax-Span-1468" style="padding-left: 0.315em;"><span style="display: inline-block; position: relative; width: 1.721em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1469" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.471em;"><span class="texatom" id="MathJax-Span-1470"><span class="mrow" id="MathJax-Span-1471"><span class="mi" id="MathJax-Span-1472" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">b</span><span class="mo" id="MathJax-Span-1473" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">≺</span><span class="mi" id="MathJax-Span-1474" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">a</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="texatom" id="MathJax-Span-1475"><span class="mrow" id="MathJax-Span-1476"><span class="mo" id="MathJax-Span-1477" style="vertical-align: -0.258em;"><span><span style="font-size: 110%; font-family: STIXSizeOneSym;">]</span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.18em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.559em; border-left: 0px solid; width: 0px; height: 1.753em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mi>r</mi><mrow class="MJX-TeXAtom-ORD"><mtext>consistency</mtext></mrow></msub><mo>=</mo><mrow class="MJX-TeXAtom-ORD"><mn mathvariant="double-struck">1</mn></mrow><mrow class="MJX-TeXAtom-OPEN"><mo maxsize="1.2em" minsize="1.2em">[</mo></mrow><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>a</mi><mo>≻</mo><mi>b</mi></mrow></msub><mo>=</mo><msub><mi>y</mi><mrow class="MJX-TeXAtom-ORD"><mi>b</mi><mo>≺</mo><mi>a</mi></mrow></msub><mrow class="MJX-TeXAtom-CLOSE"><mo maxsize="1.2em" minsize="1.2em">]</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-126">r_{\text{consistency}} =
\mathbb{1}\bigl[y_{a \succ b} = y_{b \prec a}\bigr]</script>

<ul>
  <li>This directly targets a long-standing failure mode in LLM judges, previously identified in
<a href="https://aclanthology.org/2024.acl-long.511/">Large Language Models Are Not Fair Evaluators</a> by Wang et al. (2024).</li>
</ul>

<h3 id="rl-algorithm-grpo">RL Algorithm: GRPO</h3>

<ul>
  <li>
    <p>J1 uses <strong>Group Relative Policy Optimization (GRPO)</strong>, introduced in
<a href="https://arxiv.org/abs/2402.03300">DeepSeekMath</a> by Shao et al. (2024), and later popularized by
<a href="https://arxiv.org/abs/2501.12948">DeepSeek-R1</a> by Guo et al. (2025).</p>
  </li>
  <li>
    <p>GRPO optimizes relative outcomes within sampled groups rather than absolute rewards, making it well-suited for preference-based judgment tasks.</p>
  </li>
  <li>
    <p>Conceptually, the objective maximizes:</p>
  </li>
</ul>

<span class="MathJax_Preview" style="color: inherit; display: none;"></span><div class="MathJax_Display" style="text-align: center;"><span class="MathJax" id="MathJax-Element-127-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi mathvariant=&quot;double-struck&quot;&gt;E&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-OPEN&quot;&gt;&lt;mo maxsize=&quot;1.2em&quot; minsize=&quot;1.2em&quot;&gt;[&lt;/mo&gt;&lt;/mrow&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo&gt;&amp;#x2212;&lt;/mo&gt;&lt;msub&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mi mathvariant=&quot;double-struck&quot;&gt;E&lt;/mi&gt;&lt;/mrow&gt;&lt;mrow class=&quot;MJX-TeXAtom-ORD&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;/mrow&gt;&lt;/msub&gt;&lt;mo stretchy=&quot;false&quot;&gt;[&lt;/mo&gt;&lt;mi&gt;r&lt;/mi&gt;&lt;mo stretchy=&quot;false&quot;&gt;(&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msup&gt;&lt;mi&gt;y&lt;/mi&gt;&lt;mo&gt;&amp;#x2032;&lt;/mo&gt;&lt;/msup&gt;&lt;mo stretchy=&quot;false&quot;&gt;)&lt;/mo&gt;&lt;mo stretchy=&quot;false&quot;&gt;]&lt;/mo&gt;&lt;mrow class=&quot;MJX-TeXAtom-CLOSE&quot;&gt;&lt;mo maxsize=&quot;1.2em&quot; minsize=&quot;1.2em&quot;&gt;]&lt;/mo&gt;&lt;/mrow&gt;&lt;/math&gt;" role="presentation" style="text-align: center; position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1478" style="width: 14.378em; display: inline-block;"><span style="display: inline-block; position: relative; width: 11.982em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(2.086em, 1011.77em, 3.753em, -999.997em); top: -3.174em; left: 0em;"><span class="mrow" id="MathJax-Span-1479"><span class="msubsup" id="MathJax-Span-1480"><span style="display: inline-block; position: relative; width: 1.878em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.58em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-1481"><span class="mrow" id="MathJax-Span-1482"><span class="mi" id="MathJax-Span-1483" style="font-family: STIXGeneral-Regular;">𝔼</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.628em;"><span class="texatom" id="MathJax-Span-1484"><span class="mrow" id="MathJax-Span-1485"><span class="mo" id="MathJax-Span-1486" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1487" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1488" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-1489" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">y</span><span class="mo" id="MathJax-Span-1490" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">)</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="texatom" id="MathJax-Span-1491"><span class="mrow" id="MathJax-Span-1492"><span class="mo" id="MathJax-Span-1493" style="vertical-align: -0.258em;"><span><span style="font-size: 110%; font-family: STIXSizeOneSym;">[</span></span></span></span></span><span class="mi" id="MathJax-Span-1494" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1495" style="font-family: STIXGeneral-Regular;">(</span><span class="mi" id="MathJax-Span-1496" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1497" style="font-family: STIXGeneral-Regular;">,</span><span class="mi" id="MathJax-Span-1498" style="font-family: STIXGeneral-Italic; padding-left: 0.211em;">y</span><span class="mo" id="MathJax-Span-1499" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1500" style="font-family: STIXGeneral-Regular; padding-left: 0.263em;">−</span><span class="msubsup" id="MathJax-Span-1501" style="padding-left: 0.263em;"><span style="display: inline-block; position: relative; width: 2.346em; height: 0px;"><span style="position: absolute; clip: rect(3.18em, 1000.58em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="texatom" id="MathJax-Span-1502"><span class="mrow" id="MathJax-Span-1503"><span class="mi" id="MathJax-Span-1504" style="font-family: STIXGeneral-Regular;">𝔼</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.628em;"><span class="texatom" id="MathJax-Span-1505"><span class="mrow" id="MathJax-Span-1506"><span class="mo" id="MathJax-Span-1507" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">(</span><span class="msup" id="MathJax-Span-1508"><span style="display: inline-block; position: relative; width: 0.471em; height: 0px;"><span style="position: absolute; clip: rect(3.492em, 1000.21em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1509" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.216em; left: 0.263em;"><span class="mo" id="MathJax-Span-1510" style="font-size: 50%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1511" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">,</span><span class="msup" id="MathJax-Span-1512"><span style="display: inline-block; position: relative; width: 0.523em; height: 0px;"><span style="position: absolute; clip: rect(3.544em, 1000.32em, 4.326em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1513" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.216em; left: 0.315em;"><span class="mo" id="MathJax-Span-1514" style="font-size: 50%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1515" style="font-size: 70.7%; font-family: STIXGeneral-Regular;">)</span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1516" style="font-family: STIXGeneral-Regular;">[</span><span class="mi" id="MathJax-Span-1517" style="font-family: STIXGeneral-Italic;">r<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span class="mo" id="MathJax-Span-1518" style="font-family: STIXGeneral-Regular;">(</span><span class="msup" id="MathJax-Span-1519"><span style="display: inline-block; position: relative; width: 0.68em; height: 0px;"><span style="position: absolute; clip: rect(3.336em, 1000.32em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1520" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.367em;"><span class="mo" id="MathJax-Span-1521" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1522" style="font-family: STIXGeneral-Regular;">,</span><span class="msup" id="MathJax-Span-1523" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.784em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1524" style="font-family: STIXGeneral-Italic;">y</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.424em; left: 0.471em;"><span class="mo" id="MathJax-Span-1525" style="font-size: 70.7%; font-family: STIXVariants;">′</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1526" style="font-family: STIXGeneral-Regular;">)</span><span class="mo" id="MathJax-Span-1527" style="font-family: STIXGeneral-Regular;">]</span><span class="texatom" id="MathJax-Span-1528"><span class="mrow" id="MathJax-Span-1529"><span class="mo" id="MathJax-Span-1530" style="vertical-align: -0.258em;"><span><span style="font-size: 110%; font-family: STIXSizeOneSym;">]</span></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 3.18em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.559em; border-left: 0px solid; width: 0px; height: 1.753em;"></span></span></nobr><span class="MJX_Assistive_MathML MJX_Assistive_MathML_Block" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><msub><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="double-struck">E</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><mi>t</mi><mo>,</mo><mi>y</mi><mo stretchy="false">)</mo></mrow></msub><mrow class="MJX-TeXAtom-OPEN"><mo maxsize="1.2em" minsize="1.2em">[</mo></mrow><mi>r</mi><mo stretchy="false">(</mo><mi>t</mi><mo>,</mo><mi>y</mi><mo stretchy="false">)</mo><mo>−</mo><msub><mrow class="MJX-TeXAtom-ORD"><mi mathvariant="double-struck">E</mi></mrow><mrow class="MJX-TeXAtom-ORD"><mo stretchy="false">(</mo><msup><mi>t</mi><mo>′</mo></msup><mo>,</mo><msup><mi>y</mi><mo>′</mo></msup><mo stretchy="false">)</mo></mrow></msub><mo stretchy="false">[</mo><mi>r</mi><mo stretchy="false">(</mo><msup><mi>t</mi><mo>′</mo></msup><mo>,</mo><msup><mi>y</mi><mo>′</mo></msup><mo stretchy="false">)</mo><mo stretchy="false">]</mo><mrow class="MJX-TeXAtom-CLOSE"><mo maxsize="1.2em" minsize="1.2em">]</mo></mrow></math></span></span></div><script type="math/tex; mode=display" id="MathJax-Element-127">\mathbb{E}_{(t, y)} \bigl[ r(t, y) - \mathbb{E}_{(t', y')}[r(t', y')] \bigr]</script>

<ul>
  <li>This stabilizes training and encourages <em>better-than-baseline</em> reasoning trajectories.</li>
</ul>

<h3 id="judge-formulations-trained-with-rl">Judge Formulations Trained with RL</h3>

<ul>
  <li>
    <p>J1 explores multiple judge formulations within the same RL framework:</p>

    <ul>
      <li>
        <p><strong>Pairwise J1 (verdict-based)</strong>: Outputs reasoning <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-128-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;t&lt;/mi&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1531" style="width: 0.315em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.263em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.513em, 1000.26em, 2.346em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1532"><span class="mi" id="MathJax-Span-1533" style="font-family: STIXGeneral-Italic;">t<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.003em;"></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.816em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>t</mi></math></span></span><script type="math/tex" id="MathJax-Element-128">t</script> and a final preference verdict</p>
      </li>
      <li>
        <p><strong>Pairwise J1 (score-based)</strong>: Outputs reasoning plus real-valued scores <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-129-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;a&lt;/mi&gt;&lt;/msub&gt;&lt;mo&gt;,&lt;/mo&gt;&lt;msub&gt;&lt;mi&gt;s&lt;/mi&gt;&lt;mi&gt;b&lt;/mi&gt;&lt;/msub&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1534" style="width: 2.607em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.138em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.617em, 1002.14em, 2.503em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1535"><span class="msubsup" id="MathJax-Span-1536"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1537" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-1538" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">a</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-1539" style="font-family: STIXGeneral-Regular;">,</span><span class="msubsup" id="MathJax-Span-1540" style="padding-left: 0.211em;"><span style="display: inline-block; position: relative; width: 0.836em; height: 0px;"><span style="position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;"><span class="mi" id="MathJax-Span-1541" style="font-family: STIXGeneral-Italic;">s</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.852em; left: 0.367em;"><span class="mi" id="MathJax-Span-1542" style="font-size: 70.7%; font-family: STIXGeneral-Italic;">b</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><msub><mi>s</mi><mi>a</mi></msub><mo>,</mo><msub><mi>s</mi><mi>b</mi></msub></math></span></span><script type="math/tex" id="MathJax-Element-129">s_a, s_b</script></p>
      </li>
      <li>
        <p><strong>Pointwise J1</strong>: Outputs a scalar quality score for a single response</p>
      </li>
      <li>
        <p><strong>Multitask J1</strong>: Jointly trained to perform both pointwise and pairwise judging</p>
      </li>
    </ul>
  </li>
  <li>
    <p>A key contribution is showing that <strong>pointwise judges can be trained purely from pairwise supervision</strong>, yielding inherently position-consistent evaluators.</p>
  </li>
</ul>

<h3 id="learned-reasoning-behaviors">Learned Reasoning Behaviors</h3>

<ul>
  <li>
    <p>Qualitative analysis in the J1 paper shows that RL-trained judges learn systematic evaluation strategies:</p>

    <ul>
      <li>Dynamic generation of evaluation criteria</li>
      <li>Self-generated reference answers</li>
      <li>Iterative self-correction</li>
      <li>Explicit error localization and feedback</li>
    </ul>
  </li>
  <li>
    <p>The following figure (<a href="https://arxiv.org/abs/2505.10320">source</a>) illustrates of the thinking patterns of pairwise and pointwise J1 models during RL training.J1 learns to outline evaluation criteria, generate reference answers, re-evaluate correctness, and compare between responses. Pairwise setup outputs a final verdict indicating the better response, pointwise generates a real-valued score, with a higher score for the better response. Note that these behaviors emerge <strong>without human-written rationales</strong>, purely from RL optimization on synthetic data.</p>
  </li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/J1.jpg" alt=""></p>

<h3 id="empirical-performance">Empirical Performance</h3>

<ul>
  <li>
    <p>J1 achieves state-of-the-art results across major judge and reward-model benchmarks, including:</p>

    <ul>
      <li>
        <p><strong>PPE (Preference Proxy Evaluations)</strong>:</p>

        <ul>
          <li>Proposed in <a href="https://github.com/lmarena/PPE">PPE: Preference Proxy Evaluations</a> by Chiang et al. (2024).</li>
          <li>A benchmark for evaluating reward models and LLM judges using proxy preference signals that correlate with human judgments and downstream RLHF performance. PPE is commonly used to assess preference modeling and judge reliability at scale.</li>
        </ul>
      </li>
      <li>
        <p><strong>RewardBench</strong>:</p>

        <ul>
          <li>Proposed in <a href="https://arxiv.org/abs/2403.08555">RewardBench: Evaluating Reward Models for Language Modeling</a> by Lambert et al. (2024).</li>
          <li>A comprehensive benchmark designed to evaluate reward models and LLM-as-a-Judge systems across a wide range of tasks, including instruction following, safety, reasoning, and preference alignment. It measures how well reward signals reflect human preferences.</li>
        </ul>
      </li>
      <li>
        <p><strong>JudgeBench</strong>:</p>

        <ul>
          <li>Proposed in <a href="https://arxiv.org/abs/2410.12784">JudgeBench: A Benchmark for Evaluating LLM-based Judges</a> by Liu et al. (2024).</li>
          <li>A benchmark specifically designed to evaluate LLM-based judges, focusing on difficult pairwise and pointwise judgment scenarios where traditional automatic metrics fail. It includes tasks across reasoning, knowledge, math, and coding.</li>
        </ul>
      </li>
      <li>
        <p><strong>RM-Bench</strong>:</p>

        <ul>
          <li>Proposed in <a href="https://arxiv.org/abs/2408.02666">RM-Bench</a> by Wang et al. (2024).</li>
          <li>A reward-model benchmarking suite used to evaluate both scalar and generative reward models, as well as LLM judges, across preference learning and correctness-based evaluation tasks. RM-Bench is often reported alongside PPE and RewardBench.</li>
        </ul>
      </li>
      <li>
        <p><strong>FollowBenchEval</strong>:</p>

        <ul>
          <li>Proposed in <a href="https://arxiv.org/abs/2505.10320">FollowBenchEval</a> by Whitehouse et al. (2025).</li>
          <li>An evaluation suite that measures how well reward models and LLM judges assess instruction-following quality, including consistency, preference accuracy, and positional robustness in pairwise comparisons.</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <p>Notably:</p>

    <ul>
      <li><strong>J1-Qwen-32B</strong> outperforms much larger models such as DeepSeek-R1-671B</li>
      <li>J1 surpasses both scalar reward models and generative reward models trained on far more data</li>
      <li>Test-time scaling (self-consistency, score averaging) further improves accuracy</li>
    </ul>
  </li>
  <li>
    <p>These results demonstrate that <strong>online RL is a powerful mechanism for training generalist, high-quality LLM judges</strong>.</p>
  </li>
</ul>

<h4 id="rewardbench-v2">RewardBench V2</h4>

<ul>
  <li>
    <p>While <strong>J1</strong> reports strong performance across PPE, RewardBench v1, JudgeBench, RM-Bench, and FollowBenchEval, it <strong>does not evaluate on RewardBench v2</strong>, which represents a substantial evolution in reward model and LLM-judge evaluation methodology.</p>
  </li>
  <li>
    <p><strong>RewardBench v2</strong> was proposed in <a href="https://arxiv.org/abs/2506.01937">REWARDBENCH 2: Advancing Reward Model Evaluation</a> by Malik et al. (2025).</p>
  </li>
</ul>

<h5 id="key-differences-between-rewardbench-v1-and-rewardbench-v2">Key Differences Between RewardBench V1 and RewardBench V2</h5>

<ul>
  <li>
    <p><strong>Unseen human prompts</strong>:</p>

    <ul>
      <li>Unlike RewardBench v1, which reused prompts from downstream evaluations, RewardBench v2 is built primarily on <strong>new, previously unseen human prompts</strong>, largely sourced from WildChat.</li>
      <li>This design significantly reduces contamination and benchmark leakage, making correlations with downstream performance more meaningful.</li>
    </ul>
  </li>
  <li>
    <p><strong>Best-of-N (<span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-130-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mi&gt;N&lt;/mi&gt;&lt;mo&gt;&amp;gt;&lt;/mo&gt;&lt;mn&gt;2&lt;/mn&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1543" style="width: 2.998em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.482em; height: 0px; font-size: 121%;"><span style="position: absolute; clip: rect(1.346em, 1002.43em, 2.327em, -999.997em); top: -2.167em; left: 0em;"><span class="mrow" id="MathJax-Span-1544"><span class="mi" id="MathJax-Span-1545" style="font-family: STIXGeneral-Italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.054em;"></span></span><span class="mo" id="MathJax-Span-1546" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">&gt;</span><span class="mn" id="MathJax-Span-1547" style="font-family: STIXGeneral-Regular; padding-left: 0.313em;">2</span></span><span style="display: inline-block; width: 0px; height: 2.172em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.003em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mi>N</mi><mo>&gt;</mo><mn>2</mn></math></span></span><script type="math/tex" id="MathJax-Element-130">N > 2</script>) evaluation format</strong>:</p>

    <ul>
      <li>RewardBench v2 moves from a binary chosen–rejected setup to a <strong>1-chosen vs. 3-rejected</strong> format.</li>
      <li>This lowers the random baseline from 50% to 25%, increasing headroom and making strong reward models easier to distinguish.</li>
    </ul>
  </li>
  <li>
    <p><strong>Expanded multi-skill coverage</strong>:</p>

    <ul>
      <li>
        <p>RewardBench v2 evaluates six domains:</p>

        <ul>
          <li>Factuality</li>
          <li>Precise instruction following</li>
          <li>Math</li>
          <li>Safety</li>
          <li>Focus (on-topic quality)</li>
          <li>Ties (new domain testing calibration among multiple equally correct answers)</li>
        </ul>
      </li>
      <li>
        <p>The <strong>Ties</strong> domain is entirely new and explicitly tests whether reward models avoid arbitrary over-preference among equally valid answers.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Accuracy-based evaluation with downstream grounding</strong>:</p>

    <ul>
      <li>
        <p>Unlike preference-only benchmarks, RewardBench v2 emphasizes <strong>accuracy-based scoring</strong>, while still demonstrating strong correlation with:</p>

        <ul>
          <li>Best-of-N inference-time scaling</li>
          <li>PPO-based RLHF training</li>
        </ul>
      </li>
      <li>
        <p>Models score on average <strong>20+ points lower</strong> than on RewardBench v1, indicating substantially increased difficulty.</p>
      </li>
    </ul>
  </li>
  <li>
    <p><strong>Stronger empirical linkage to downstream performance</strong>:</p>

    <ul>
      <li>
        <p>RewardBench v2 shows:</p>

        <ul>
          <li>Pearson correlation ≈ 0.87 with Best-of-N downstream task performance</li>
          <li>Meaningful but saturating correlation with PPO-based RLHF, highlighting that benchmark accuracy is necessary but not sufficient for RL success</li>
        </ul>
      </li>
      <li>
        <p>Crucially, the benchmark reveals <strong>lineage mismatch effects</strong>, where high-scoring reward models can still perform poorly in RLHF if misaligned with the policy model’s base distribution.</p>
      </li>
    </ul>
  </li>
  <li>
    <p>The following figure (<a href="https://arxiv.org/abs/2506.01937">source</a>) shows RewardBench 2’s benchmark construction and evaluation setup, highlighting its unseen human prompts, best-of-4 format, expanded domains (including Ties), and improved correlation with downstream RL fine-tuning and best-of-N sampling performance.</p>
  </li>
</ul>

<p><img src="/primers/ai/assets/LLM-as-a-judge/RewardBenchv2.jpg" alt=""></p>

<h5 id="implications-for-j1-and-llm-as-a-judge-systems">Implications for J1 and LLM-as-a-Judge Systems</h5>

<ul>
  <li>
    <p>Although J1’s absence from RewardBench v2 does not invalidate its reported strengths, RewardBench v2 introduces <strong>failure modes and calibration challenges</strong> not covered by earlier benchmarks.</p>
  </li>
  <li>
    <p>In particular:</p>

    <ul>
      <li>The <strong>Ties</strong> domain stresses judge calibration rather than raw preference discrimination.</li>
      <li>The Best-of-4 setup penalizes overly confident or brittle reward signals.</li>
    </ul>
  </li>
  <li>
    <p>As RewardBench v2 gains adoption, it is likely to become a <strong>standard reference benchmark</strong> for next-generation LLM judges and reward models, complementing (and in some cases superseding) RewardBench v1.</p>
  </li>
  <li>
    <p>Practically, future evaluations of J1-like systems would benefit from reporting RewardBench v2 results to demonstrate robustness under <strong>harder, more realistic, and less-contaminated evaluation conditions</strong>.</p>
  </li>
</ul>

<h3 id="relationship-to-panels-and-multimodal-judges">Relationship to Panels and Multimodal Judges</h3>

<ul>
  <li>
    <p>RL is complementary to other robustness strategies:</p>

    <ul>
      <li><strong>Panels of LLMs-as-Judges</strong>: RL improves each judge’s internal reasoning; panels reduce variance across judges</li>
      <li><strong>Pointwise vs. pairwise paradigms</strong>: J1 unifies both within a single multitask model</li>
      <li><strong>Test-time scaling</strong>: RL-trained judges benefit strongly from majority voting and averaging</li>
    </ul>
  </li>
  <li>
    <p>In practice, the strongest systems combine <strong>RL-trained thinking judges + panel aggregation</strong>.</p>
  </li>
</ul>

<h3 id="key-takeaways">Key Takeaways</h3>

<ul>
  <li>RL allows <strong>direct optimization of judgment reasoning</strong>, not just outputs</li>
  <li>Synthetic preference data enables RL even for subjective evaluation tasks</li>
  <li>Consistency-based rewards effectively mitigate positional bias</li>
  <li>RL-trained judges outperform both prompted judges and traditional reward models</li>
</ul>

<h2 id="biases-and-mitigation-strategies">Biases and Mitigation Strategies</h2>

<ul>
  <li>While LLM-as-a-Judge offers strong alignment with human judgment at scale, it is not neutral or error-free. Judge models inherit biases from pretraining data, instruction tuning, and prompt design. This section catalogs the <strong>most common bias modes observed in LLM-as-a-Judge</strong>, explains why they arise, and summarizes <strong>practical mitigation strategies</strong> grounded in the literature and deployed systems.</li>
</ul>

<h3 id="length-and-verbosity-bias">Length and Verbosity Bias</h3>

<h4 id="description">Description</h4>

<ul>
  <li>
    <p>LLM judges tend to prefer <strong>longer, more verbose outputs</strong>, even when verbosity does not correlate with correctness or usefulness. Longer answers often appear more fluent, detailed, and confident, which can mislead judges into assigning higher scores.</p>
  </li>
  <li>
    <p>This bias is empirically documented in <a href="https://arxiv.org/abs/2305.17926">Large Language Models Are Not Fair Evaluators</a> by Wang et al. (2023).</p>
  </li>
</ul>

<h4 id="why-it-happens">Why It Happens</h4>

<ul>
  <li>Pretraining data rewards explanatory, verbose text</li>
  <li>Instruction tuning often emphasizes “helpfulness”</li>
  <li>Fluency is conflated with quality in latent representations</li>
</ul>

<h4 id="mitigation-strategies">Mitigation Strategies</h4>

<ul>
  <li><strong>Explicit conciseness criteria</strong>: Add a dedicated conciseness dimension (as in your rubric) to counterbalance verbosity.</li>
  <li><strong>Length normalization</strong>: Penalize or bucket scores by length bands.</li>
  <li><strong>Hard constraints</strong>: Explicitly instruct judges to ignore verbosity unless required by the task.</li>
  <li>
    <p><strong>Pairwise comparison with swapped lengths</strong>: Use pairwise prompts where one answer is shorter but correct.</p>
  </li>
  <li>Supported by practices in <a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a> by Zheng et al. (2023).</li>
</ul>

<h3 id="positional-and-ordering-bias">Positional and Ordering Bias</h3>

<h4 id="description-1">Description</h4>

<ul>
  <li>
    <p>In pairwise or listwise evaluation, LLM judges may favor:</p>

    <ul>
      <li>The first item presented</li>
      <li>The last item presented</li>
      <li>Items appearing earlier in a list</li>
    </ul>
  </li>
  <li>
    <p>This positional bias affects both absolute judgments and relative rankings.</p>
  </li>
</ul>

<h4 id="why-it-happens-1">Why It Happens</h4>

<ul>
  <li>Transformer attention asymmetries</li>
  <li>Instruction-following heuristics (“evaluate the first answer”)</li>
  <li>
    <p>Exposure bias from conversational data</p>
  </li>
  <li>Documented in <a href="https://arxiv.org/abs/2305.17926">A Large-Scale Analysis of Evaluation Biases in LLMs</a> by Wang et al. (2023).</li>
</ul>

<h4 id="mitigation-strategies-1">Mitigation Strategies</h4>

<ul>
  <li><strong>Randomized ordering</strong>: Shuffle candidate order across evaluations.</li>
  <li><strong>Bidirectional evaluation</strong>: Evaluate (A, B) and (B, A) and average results.</li>
  <li><strong>Explicit neutrality instructions</strong>: Instruct the judge to ignore position and treat all candidates symmetrically.</li>
  <li><strong>Pointwise fallback</strong>: Use pointwise scoring when ordering effects dominate.</li>
</ul>

<h3 id="self-preference-and-model-identity-bias">Self-Preference and Model Identity Bias</h3>

<h4 id="description-2">Description</h4>

<ul>
  <li>
    <p>LLMs often prefer outputs that resemble their own style, reasoning patterns, or phrasing. When the judge model is similar to the generator, this can lead to <strong>self-reinforcement bias</strong>.</p>
  </li>
  <li>
    <p>Observed in both evaluation and reward modeling contexts, including <a href="https://dl.acm.org/doi/10.1145/3442188.3445922">On the Dangers of Stochastic Parrots</a> by Bender et al. (2021) (indirectly) and later preference modeling work.</p>
  </li>
</ul>

<h4 id="why-it-happens-2">Why It Happens</h4>

<ul>
  <li>Shared pretraining distributions</li>
  <li>Latent style matching</li>
  <li>Instruction-following alignment effects</li>
</ul>

<h4 id="mitigation-strategies-2">Mitigation Strategies</h4>

<ul>
  <li><strong>Judge–generator separation</strong>: Use a different model family or version for judging.</li>
  <li><strong>Ensemble judges</strong>: Average scores across heterogeneous judge models.</li>
  <li><strong>Style-agnostic rubrics</strong>: Focus criteria on factuality and constraints, not phrasing.</li>
  <li>
    <p><strong>Human calibration checks</strong>: Periodically validate judge preferences against human annotations.</p>
  </li>
  <li>Used in practice in RLAIF systems such as <a href="https://arxiv.org/abs/2302.08582">Training Language Models from AI Feedback</a> by Bai et al. (2023).</li>
</ul>

<h3 id="over-confidence-and-hallucination-blindness">Over-Confidence and Hallucination Blindness</h3>

<h4 id="description-3">Description</h4>

<ul>
  <li>
    <p>LLM judges may fail to penalize <strong>confident but incorrect</strong> outputs, especially when errors are subtle, technical, or require external knowledge.</p>
  </li>
  <li>
    <p>This issue is closely related to hallucination detection challenges discussed in <a href="https://arxiv.org/abs/2008.01415">Evaluating the Factual Consistency of Summaries</a> by Kryściński et al. (2020).</p>
  </li>
</ul>

<h4 id="why-it-happens-3">Why It Happens</h4>

<ul>
  <li>Judges rely on internal world knowledge, which may be incomplete</li>
  <li>Fluent text triggers higher perceived plausibility</li>
  <li>Lack of grounding signals</li>
</ul>

<h4 id="mitigation-strategies-3">Mitigation Strategies</h4>

<ul>
  <li><strong>Faithfulness criteria</strong>: Explicitly separate factual correctness from fluency.</li>
  <li><strong>Context-aware judging</strong>: Provide the source document or evidence to the judge.</li>
  <li><strong>Binary constraint checks</strong>: Use yes/no checks for factual violations before subjective scoring.</li>
  <li>
    <p><strong>Hybrid pipelines</strong>: Combine LLM judges with symbolic or retrieval-based validators.</p>
  </li>
  <li>Common in RAG evaluation pipelines such as those described in <a href="https://arxiv.org/abs/2005.11401">Retrieval-Augmented Generation for Knowledge-Intensive NLP Tasks</a> by Lewis et al. (2020).</li>
</ul>

<h3 id="prompt-sensitivity-and-calibration-drift">Prompt Sensitivity and Calibration Drift</h3>

<h4 id="description-4">Description</h4>

<ul>
  <li>
    <p>LLM-as-a-Judge outputs can vary significantly with small prompt changes, leading to instability across runs or versions.</p>
  </li>
  <li>
    <p>Analyzed in <a href="https://arxiv.org/abs/2307.03109">How to Evaluate Language Models: A Survey</a> by Chang et al. (2023).</p>
  </li>
</ul>

<h4 id="why-it-happens-4">Why It Happens</h4>

<ul>
  <li>Implicit instruction weighting</li>
  <li>Order effects in criteria presentation</li>
  <li>Ambiguous scale definitions</li>
</ul>

<h4 id="mitigation-strategies-4">Mitigation Strategies</h4>

<ul>
  <li><strong>Anchored examples</strong>: Provide example inputs for each score level (as in your prompt).</li>
  <li><strong>Schema-constrained outputs</strong>: Enforce JSON or schema-based responses.</li>
  <li><strong>Prompt freezing</strong>: Version and lock judge prompts.</li>
  <li><strong>Self-consistency</strong>: Sample multiple judge outputs and aggregate, as in <a href="https://arxiv.org/abs/2203.11171">Self-Consistency Improves Chain of Thought Reasoning</a> by Wang et al. (2022).</li>
</ul>

<h3 id="reward-hacking-and-over-optimization">Reward Hacking and Over-Optimization</h3>

<h4 id="description-5">Description</h4>

<ul>
  <li>
    <p>When models are trained directly against a fixed judge, they may learn to exploit weaknesses in the rubric rather than improve true quality.</p>
  </li>
  <li>
    <p>This phenomenon mirrors classical reward hacking, discussed in <a href="https://arxiv.org/abs/1903.03400">Specification Gaming</a> by Krakovna et al. (2020).</p>
  </li>
</ul>

<h4 id="why-it-happens-5">Why It Happens</h4>

<ul>
  <li>Static evaluation criteria</li>
  <li>Predictable judge behavior</li>
  <li>Optimization pressure without diversity</li>
</ul>

<h4 id="mitigation-strategies-5">Mitigation Strategies</h4>

<ul>
  <li><strong>Judge rotation</strong>: Periodically update or ensemble judges.</li>
  <li><strong>Mixed supervision</strong>: Combine human and AI judgments.</li>
  <li><strong>Adversarial testing</strong>: Probe judge failure modes explicitly.</li>
  <li><strong>Holdout evaluators</strong>: Maintain unseen evaluation criteria.</li>
</ul>

<h3 id="takeaways-4">Takeaways</h3>

<ul>
  <li>
    <p>LLM-as-a-Judge is powerful but <strong>not objective by default</strong>. Robust systems:</p>

    <ul>
      <li>Anticipate common bias modes</li>
      <li>Encode counterbalances directly into rubrics</li>
      <li>Use escalation strategies (pointwise <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-131-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1548" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1549"><span class="mo" id="MathJax-Span-1550" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-131">\rightarrow</script> pairwise <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-132-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1551" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1552"><span class="mo" id="MathJax-Span-1553" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-132">\rightarrow</script> listwise)</li>
      <li>Periodically validate against human judgment</li>
    </ul>
  </li>
  <li>
    <p>With these safeguards in place, LLM-as-a-Judge becomes a reliable, scalable component of modern evaluation and ranking pipelines.</p>
  </li>
</ul>

<h2 id="when-to-use-which-paradigm-a-practical-decision-guide">When to Use Which Paradigm: a Practical Decision Guide</h2>

<ul>
  <li>
    <p>This section provides a concrete, system-level decision guide for choosing between <strong>pointwise</strong>, <strong>pairwise</strong>, and <strong>listwise</strong> paradigms when using LLM-as-a-Judge and LTR. It additionally clarifies <strong>when to introduce multimodal judges</strong> and <strong>when to replace a single judge with a panel of judges</strong>.</p>
  </li>
  <li>
    <p>The goal is to help you select the <em>simplest paradigm that reliably solves the problem</em>, escalating only when necessary along three orthogonal axes:</p>

    <ol>
      <li><strong>Evaluation granularity</strong> (pointwise <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-133-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1554" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1555"><span class="mo" id="MathJax-Span-1556" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-133">\rightarrow</script> pairwise <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-134-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1557" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1558"><span class="mo" id="MathJax-Span-1559" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-134">\rightarrow</script> listwise)</li>
      <li><strong>Judge capacity</strong> (single judge <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-135-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1560" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1561"><span class="mo" id="MathJax-Span-1562" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-135">\rightarrow</script> panel of judges)</li>
      <li><strong>Input modality</strong> (text-only <span class="MathJax_Preview" style="color: inherit; display: none;"></span><span class="MathJax" id="MathJax-Element-136-Frame" tabindex="0" data-mathml="&lt;math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;&gt;&lt;mo stretchy=&quot;false&quot;&gt;&amp;#x2192;&lt;/mo&gt;&lt;/math&gt;" role="presentation" style="position: relative;"><nobr aria-hidden="true"><span class="math" id="MathJax-Span-1563" style="width: 1.201em; display: inline-block;"><span style="display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;"><span style="position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;"><span class="mrow" id="MathJax-Span-1564"><span class="mo" id="MathJax-Span-1565" style="font-family: STIXGeneral-Regular;">→</span></span><span style="display: inline-block; width: 0px; height: 2.19em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;"></span></span></nobr><span class="MJX_Assistive_MathML" role="presentation"><math xmlns="http://www.w3.org/1998/Math/MathML"><mo stretchy="false">→</mo></math></span></span><script type="math/tex" id="MathJax-Element-136">\rightarrow</script> multimodal)</li>
    </ol>
  </li>
</ul>

<h3 id="pointwise-evaluation-when-absolute-scoring-is-enough">Pointwise Evaluation: When Absolute Scoring is Enough</h3>

<h4 id="when-to-use-pointwise">When to Use Pointwise</h4>

<ul>
  <li>
    <p>Use <strong>pointwise evaluation</strong> when:</p>

    <ul>
      <li>You need to score each output independently</li>
      <li>Outputs will be filtered, thresholded, or aggregated later</li>
      <li>The task has reasonably well-defined criteria</li>
      <li>You want maximal scalability and parallelism</li>
      <li>Latency and cost are important constraints</li>
      <li>You are bootstrapping supervision data</li>
      <li>Global ordering between outputs is not required</li>
    </ul>
  </li>
  <li>
    <p>Typical use cases:</p>

    <ul>
      <li>Offline model evaluation</li>
      <li>Dataset filtering and quality control</li>
      <li>Reward modeling targets</li>
      <li>CI-style regression testing</li>
      <li>RAG document scoring</li>
      <li>Safety or policy compliance checks</li>
      <li>Hallucination detection with binary or ternary criteria</li>
    </ul>
  </li>
  <li>
    <p>This is the <strong>default choice</strong> in most production systems.</p>
  </li>
</ul>

<h4 id="why-pointwise-works-well">Why Pointwise Works Well</h4>

<ul>
  <li>Simple mental model: “Is this output good?”</li>
  <li>Easy to operationalize with structured rubrics</li>
  <li>Works naturally with mixed-scale criteria (binary, ternary, Likert-type)</li>
  <li>Judge calls are embarrassingly parallel</li>
  <li>
    <p>Maps directly to pointwise LTR models (e.g., monoBERT-style scoring)</p>
  </li>
  <li>As noted earlier, <strong>LLM-as-a-judge models most commonly perform pointwise evaluation (scoring each output independently)</strong>, as documented in <a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a> by Zheng et al. (2023).</li>
</ul>

<h4 id="extensions-panels-and-multimodal-judges-in-pointwise-settings">Extensions: Panels and Multimodal Judges in Pointwise Settings</h4>

<ul>
  <li>
    <p>Pointwise evaluation is also the <strong>most common entry point</strong> for both:</p>
  </li>
  <li><strong>Panels of LLMs-as-Judges</strong>, where multiple judges score each output independently and scores are aggregated (e.g., averaged or max-pooled), as shown in <a href="https://arxiv.org/abs/2404.18796">Replacing Judges with Juries</a> by Verga et al. (2024).</li>
  <li><strong>Multimodal LLMs-as-Judges</strong>, where the judge consumes images (or video) alongside text to score outputs for vision–language tasks, such as <a href="https://arxiv.org/abs/2410.02712">LLaVA-Critic</a> by Xiong et al. (2024) and <a href="https://arxiv.org/abs/2401.06591">Prometheus-Vision</a> by Lee et al. (2024).</li>
  <li>In practice, most multimodal judging today is <strong>pointwise</strong>, because it is simpler, cheaper, and easier to calibrate than multimodal pairwise or listwise evaluation.</li>
</ul>

<h4 id="when-pointwise-breaks-down">When Pointwise Breaks Down</h4>

<ul>
  <li>Judges struggle to calibrate absolute scores</li>
  <li>Small differences between outputs matter</li>
  <li>Outputs are all “good enough,” but ordering matters</li>
  <li>Scale drift across batches becomes noticeable</li>
  <li>Single-judge bias or instability becomes apparent</li>
  <li>When these issues appear, <strong>pairwise evaluation or judge panels</strong> are often the next step.</li>
</ul>

<h3 id="pairwise-evaluation-when-relative-preference-matters">Pairwise Evaluation: When Relative Preference Matters</h3>

<h4 id="when-to-use-pairwise">When to Use Pairwise</h4>

<ul>
  <li>
    <p>Use <strong>pairwise evaluation</strong> when:</p>

    <ul>
      <li>You care about <em>which output is better</em>, not how good it is</li>
      <li>Outputs are close in quality</li>
      <li>Absolute scores are noisy or poorly calibrated</li>
      <li>Human-like preference judgments are desired</li>
      <li>You are selecting between two or a small number of candidates</li>
      <li>You want to reduce scale interpretation ambiguity</li>
    </ul>
  </li>
  <li>
    <p>Typical use cases:</p>

    <ul>
      <li>A/B testing between models</li>
      <li>Preference modeling and reward learning</li>
      <li>Human-in-the-loop evaluation</li>
      <li>Model selection</li>
      <li>Tie-breaking among top candidates</li>
      <li>Pairwise reward modeling for RLHF or RLAIF</li>
    </ul>
  </li>
</ul>

<h4 id="why-pairwise-often-improves-reliability">Why Pairwise Often Improves Reliability</h4>

<ul>
  <li>
    <p>Pairwise judgments reduce cognitive load for both humans and models:</p>

    <ul>
      <li>Easier to answer “Which is better?” than “How good is this?”</li>
      <li>Reduces ambiguity in ordinal or Likert-type scales</li>
      <li>Higher inter-annotator and human–model agreement, as shown in <a href="https://arxiv.org/abs/2305.17926">Large Language Models Are Not Fair Evaluators</a> by Wang et al. (2023)</li>
    </ul>
  </li>
  <li>
    <p>Pairwise evaluation aligns naturally with:</p>

    <ul>
      <li>Pairwise LTR objectives (RankNet, duoBERT)</li>
      <li>Preference datasets used in RLHF and RLAIF</li>
      <li>Direct Preference Optimization (DPO)</li>
    </ul>
  </li>
</ul>

<h4 id="panels-and-multimodal-pairwise-evaluation">Panels and Multimodal Pairwise Evaluation</h4>

<ul>
  <li>
    <p>Pairwise evaluation is especially effective when combined with <strong>panels of judges</strong>:</p>

    <ul>
      <li>Each judge independently decides which output is better</li>
      <li>Preferences are aggregated via majority vote or averaged logits</li>
      <li>Reduces positional bias and self-preference effects</li>
    </ul>
  </li>
  <li>
    <p>This strategy is empirically validated in <a href="https://arxiv.org/abs/2404.18796">Replacing Judges with Juries</a> by Verga et al. (2024), which shows that small, diverse panels outperform single large judges in pairwise settings.</p>
  </li>
  <li>
    <p>Multimodal pairwise judging is used less frequently, but is critical when:</p>

    <ul>
      <li>Visual grounding is required to decide preference</li>
      <li>Two captions, answers, or explanations must be compared against an image</li>
      <li>Reward signals are generated for multimodal preference learning</li>
    </ul>
  </li>
  <li>
    <p>LLaVA-Critic explicitly supports such pairwise multimodal judging.</p>
  </li>
</ul>

<h4 id="trade-offs">Trade-offs</h4>

<ul>
  <li>Quadratic cost in number of candidates</li>
  <li>Harder to aggregate across many outputs</li>
  <li>
    <p>Still local: no global consistency guarantees</p>
  </li>
  <li>If you need <em>global ordering</em> across many outputs, listwise evaluation becomes appropriate.</li>
</ul>

<h3 id="listwise-evaluation-when-global-ranking-quality-matters">Listwise Evaluation: When Global Ranking Quality Matters</h3>

<h4 id="when-to-use-listwise">When to Use Listwise</h4>

<ul>
  <li>
    <p>Use <strong>listwise evaluation</strong> when:</p>

    <ul>
      <li>You must rank many outputs at once</li>
      <li>Global consistency across outputs matters</li>
      <li>You want to optimize ranking metrics directly</li>
      <li>Interactions between outputs affect evaluation</li>
      <li>You can afford higher compute and memory cost</li>
    </ul>
  </li>
  <li>
    <p>Typical use cases:</p>

    <ul>
      <li>Final-stage reranking in RAG pipelines</li>
      <li>Search result ordering</li>
      <li>Leaderboard construction</li>
      <li>Evaluation of multiple candidate generations</li>
      <li>Research settings where ranking quality is paramount</li>
    </ul>
  </li>
</ul>

<h4 id="why-listwise-is-powerful">Why Listwise is Powerful</h4>

<ul>
  <li>
    <p>Listwise methods:</p>

    <ul>
      <li>Optimize ranking quality holistically</li>
      <li>Capture inter-item dependencies</li>
      <li>Avoid local inconsistencies (e.g., A &gt; B, B &gt; C, but C &gt; A)</li>
    </ul>
  </li>
  <li>
    <p>Modern listwise systems include:</p>

    <ul>
      <li>Encoder-only listwise rankers such as <a href="https://arxiv.org/abs/2206.15198">ListBERT</a> by Kumar et al. (2022)</li>
      <li>Encoder–decoder listwise rankers such as <a href="https://arxiv.org/abs/2402.15838">ListT5</a> by Yoon et al. (2024)</li>
      <li>Agentic and reasoning-based rerankers such as <a href="https://arxiv.org/abs/2505.20046">REARANK</a> by Zhang et al. (2025)</li>
    </ul>
  </li>
</ul>

<h4 id="panels-and-multimodal-listwise-evaluation">Panels and Multimodal Listwise Evaluation</h4>

<ul>
  <li>
    <p>Listwise evaluation can also be combined with:</p>

    <ul>
      <li><strong>Panels of judges</strong>, using rank aggregation methods (e.g., average rank, Borda count)</li>
      <li><strong>Multimodal judges</strong>, when ranking depends on visual evidence</li>
    </ul>
  </li>
  <li>
    <p>However, this combination is <strong>computationally expensive</strong> and is typically reserved for:</p>

    <ul>
      <li>Small candidate sets</li>
      <li>Offline evaluation</li>
      <li>Research benchmarks</li>
    </ul>
  </li>
</ul>

<h4 id="trade-offs-1">Trade-offs</h4>

<ul>
  <li>Highest computational cost</li>
  <li>More complex training and inference</li>
  <li>Harder to debug and calibrate</li>
  <li>Often unnecessary unless ranking quality is critical</li>
</ul>

<h3 id="a-simple-escalation-strategy-including-judges-and-modalities">A Simple Escalation Strategy (Including Judges and Modalities)</h3>

<ul>
  <li>
    <p>A practical escalation strategy used in real systems:</p>

    <ol>
      <li>Start with <strong>pointwise LLM-as-a-Judge (single, text-only)</strong></li>
      <li>
        <p>Add <strong>a panel of judges</strong> if:</p>

        <ul>
          <li>Scores are unstable</li>
          <li>Bias is suspected</li>
        </ul>
      </li>
      <li>
        <p>Move to <strong>pairwise evaluation</strong> if:</p>

        <ul>
          <li>Differences are subtle</li>
          <li>Calibration is unreliable</li>
        </ul>
      </li>
      <li>
        <p>Introduce <strong>multimodal judges</strong> if:</p>

        <ul>
          <li>Evaluation depends on images or video</li>
        </ul>
      </li>
      <li>
        <p>Use <strong>listwise evaluation</strong> only when:</p>

        <ul>
          <li>You must rank many candidates</li>
          <li>Global ordering quality is essential</li>
        </ul>
      </li>
    </ol>
  </li>
  <li>
    <p>This mirrors how humans evaluate: absolute judgments first, comparisons next, full rankings last—while consulting multiple evaluators when stakes are high.</p>
  </li>
</ul>

<h3 id="comparative-analysis-across-evaluation-dimensions">Comparative Analysis Across Evaluation Dimensions</h3>

<div align="center">
<table class="tg">
<thead>
<tr>
<th class="tg-hcenter-valign-first"><strong>Evaluation Dimension</strong></th>
<th class="tg-hcenter-valign-first"><strong>Configuration</strong></th>
<th class="tg-hcenter-valign-second"><strong>Typical Use Cases</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tg-tleft-valign-first" rowspan="3">Evaluation granularity</td>
<td class="tg-tleft-valign-first">Pointwise</td>
<td class="tg-tleft-valign-second">Independent scoring, filtering, CI evaluation, reward bootstrapping, default evaluation mode</td>
</tr>
<tr>
<td class="tg-tleft-valign-first">Pairwise</td>
<td class="tg-tleft-valign-second">A/B testing, preference learning, tie-breaking, calibration-sensitive evaluation</td>
</tr>
<tr>
<td class="tg-tleft-valign-first">Listwise</td>
<td class="tg-tleft-valign-second">Final-stage reranking, leaderboard construction, global ordering of many candidates</td>
</tr>
<tr>
<td class="tg-tleft-valign-first" rowspan="2">Judge capacity</td>
<td class="tg-tleft-valign-first">Single judge</td>
<td class="tg-tleft-valign-second">Low-cost evaluation, rapid iteration, prototyping, low-stakes tasks</td>
</tr>
<tr>
<td class="tg-tleft-valign-first">Panel of judges</td>
<td class="tg-tleft-valign-second">Bias reduction, robustness, human-aligned scoring, high-stakes evaluation</td>
</tr>
<tr>
<td class="tg-tleft-valign-first" rowspan="2">Input modality</td>
<td class="tg-tleft-valign-first">Text-only</td>
<td class="tg-tleft-valign-second">Language modeling, reasoning, summarization, code and policy evaluation</td>
</tr>
<tr>
<td class="tg-tleft-valign-first">Multimodal</td>
<td class="tg-tleft-valign-second">Vision–language tasks, captioning, VQA, multimodal preference learning</td>
</tr>
</tbody>
</table>
</div>

<h3 id="practical-tips">Practical Tips</h3>

<h4 id="use-pointwise-evaluation-by-default">Use Pointwise Evaluation by Default</h4>

<ul>
  <li>
    <p>Pointwise evaluation should be the starting point for almost all LLM-as-a-Judge systems because it imposes the fewest assumptions on the evaluation problem.</p>
  </li>
  <li>
    <p>In pointwise evaluation, each output is judged independently against a rubric. This matches how most quality criteria are defined in practice (correctness, safety, faithfulness, clarity) and maps cleanly to scalable infrastructure: evaluations are parallelizable, easy to cache, and easy to aggregate downstream.</p>
  </li>
  <li>
    <p>Pointwise judging also aligns naturally with how LLMs are instruction-tuned. Asking “Is this output acceptable under these criteria?” is a task modern LLMs handle reliably, especially when rubrics include anchored examples and constrained output schemas.</p>
  </li>
  <li>
    <p>Most importantly, pointwise evaluation gives you <strong>useful signals early</strong>. Even if scores are noisy, they are sufficient for filtering, regression testing, and bootstrapping supervision. In practice, many systems never need to move beyond pointwise judging.</p>
  </li>
  <li>
    <p><strong>Escalation trigger:</strong> move on only if absolute scores become unstable, poorly calibrated, or insufficient to distinguish high-quality outputs.</p>
  </li>
</ul>

<h4 id="add-judge-panels-before-changing-paradigms">Add Judge Panels Before Changing Paradigms</h4>

<ul>
  <li>
    <p>If pointwise evaluation starts to show variance, bias, or inconsistency, the first escalation should be <strong>adding judges</strong>, not changing the evaluation granularity.</p>
  </li>
  <li>
    <p>Panels of LLMs-as-Judges reduce error by aggregation rather than by making the task harder for a single judge. Empirically, averaging or pooling judgments from diverse models improves alignment with human evaluations more reliably than switching to pairwise or listwise judging with a single model.</p>
  </li>
  <li>
    <p>Judge panels specifically mitigate:</p>

    <ul>
      <li>Self-preference bias (models favoring their own outputs)</li>
      <li>Prompt sensitivity and formatting artifacts</li>
      <li>Overconfidence in fluent but incorrect answers</li>
    </ul>
  </li>
  <li>
    <p>Operationally, panels are easy to introduce because they preserve the same prompt and evaluation interface. You simply replicate the judge call across models and aggregate results.</p>
  </li>
  <li>
    <p><strong>Escalation trigger:</strong> move beyond panels only if <strong>relative ordering</strong> between outputs, rather than absolute quality, becomes the core requirement.</p>
  </li>
</ul>

<h4 id="use-pairwise-evaluation-when-relative-preference-matters">Use Pairwise Evaluation When Relative Preference Matters</h4>

<ul>
  <li>
    <p>Pairwise evaluation should be introduced when the question is no longer “Is this good?” but rather “Which of these is better?”</p>
  </li>
  <li>
    <p>This situation arises when:</p>

    <ul>
      <li>Outputs are close in quality</li>
      <li>Most candidates pass minimum quality thresholds</li>
      <li>Absolute scores compress or saturate</li>
      <li>Human decision-making would naturally be comparative</li>
    </ul>
  </li>
  <li>
    <p>Pairwise judging reduces calibration issues because it eliminates the need to interpret score scales. Both humans and LLMs are more reliable when making comparative judgments, especially under subtle trade-offs.</p>
  </li>
  <li>
    <p>In practice, pairwise evaluation is most effective when combined with judge panels. Each judge provides a preference, and aggregation yields a stable decision even if individual judgments disagree.</p>
  </li>
  <li>
    <p><strong>Escalation trigger:</strong> move beyond pairwise only if you must rank <strong>many outputs simultaneously</strong> and require global consistency.</p>
  </li>
</ul>

<h4 id="introduce-multimodal-judges-only-when-grounding-is-required">Introduce Multimodal Judges Only When Grounding is Required</h4>

<ul>
  <li>
    <p>Multimodal LLMs-as-Judges should be introduced only when the evaluation task depends on <strong>non-textual evidence</strong>.</p>
  </li>
  <li>
    <p>Examples include:</p>

    <ul>
      <li>Visual question answering</li>
      <li>Image-grounded explanation evaluation</li>
      <li>Caption correctness and hallucination detection</li>
      <li>Multimodal preference learning</li>
    </ul>
  </li>
  <li>
    <p>If the task can be reliably reduced to text (e.g., via deterministic preprocessing), text-only judges are usually cheaper, faster, and more stable.</p>
  </li>
  <li>
    <p>Multimodal judging increases system complexity: it requires multimodal inputs, heavier models, and careful prompt design to ensure grounding is actually used. As a result, multimodal judges should be treated as <strong>specialized evaluators</strong>, not defaults.</p>
  </li>
  <li>
    <p><strong>Escalation trigger:</strong> introduce multimodal judges only when text-only judges fail due to missing perceptual information.</p>
  </li>
</ul>

<h4 id="use-listwise-evaluation-sparingly-when-ranking-quality-outweighs-cost">Use Listwise Evaluation Sparingly, When Ranking Quality Outweighs Cost</h4>

<ul>
  <li>
    <p>Listwise evaluation is the most expressive but also the most expensive paradigm. It should be reserved for cases where <strong>global ranking quality is the primary objective</strong>.</p>
  </li>
  <li>
    <p>This includes:</p>

    <ul>
      <li>Final-stage reranking in retrieval or RAG pipelines</li>
      <li>Benchmark leaderboard construction</li>
      <li>Research settings where ranking metrics matter more than cost</li>
    </ul>
  </li>
  <li>
    <p>Listwise methods allow judges or models to reason over interactions among all candidates, avoiding local inconsistencies inherent in pointwise or pairwise decisions. However, they come with significant drawbacks: higher computational cost, reduced scalability, and increased difficulty in debugging failures.</p>
  </li>
  <li>
    <p>In production systems, listwise evaluation is often applied to <strong>small candidate sets</strong> or performed offline, with pointwise or pairwise methods handling the majority of evaluations.</p>
  </li>
  <li>
    <p><strong>Escalation trigger:</strong> use listwise evaluation only when pairwise comparisons fail to produce a consistent or acceptable ordering.</p>
  </li>
</ul>

<h4 id="the-core-principle">The Core Principle</h4>

<ul>
  <li>
    <p>Across all dimensions, the guiding principle is: <strong>Increase robustness before increasing complexity.</strong></p>
  </li>
  <li>
    <p>Start simple, add redundancy (panels), then change the evaluation task (pairwise), and only then adopt the most expressive (and expensive) paradigms such as multimodal or listwise judging.</p>
  </li>
</ul>

<h2 id="references">References</h2>

<h3 id="llm-as-a-judge-foundations-and-bias-analysis">LLM-as-a-Judge Foundations and Bias Analysis</h3>

<ul>
  <li><a href="https://arxiv.org/abs/2306.05685">Judging LLM-as-a-Judge with MT-Bench and Chatbot Arena</a> by Zheng et al. (2023)</li>
  <li><a href="https://arxiv.org/abs/2305.17926">Large Language Models Are Not Fair Evaluators</a> by Wang et al. (2023)</li>
  <li><a href="https://arxiv.org/abs/2401.01917">LLM Evaluators Recognize and Favor Their Own Generations</a> by Panickssery et al. (2024)</li>
  <li><a href="https://arxiv.org/abs/2403.02839">An Empirical Study of LLM-as-a-Judge for LLM Evaluation</a> by Huang et al. (2024)</li>
</ul>

<h3 id="panels--juries-of-llms-as-judges">Panels / Juries of LLMs-as-Judges</h3>

<ul>
  <li><a href="https://arxiv.org/abs/2404.18796">Replacing Judges with Juries: Evaluating LLM Generations with a Panel of Diverse Models</a> by Verga et al. (2024)</li>
  <li><a href="https://dl.acm.org/doi/10.1145/290941.291017">Variations in Relevance Judgments and the Measurement of Retrieval Effectiveness</a> by Voorhees (1998)</li>
</ul>

<h3 id="multimodal-llms-as-judges">Multimodal LLMs-as-Judges</h3>

<ul>
  <li><a href="https://arxiv.org/abs/2401.06591">Prometheus-Vision: Vision-Language Model as a Judge for Fine-Grained Evaluation</a> by Lee et al. (2024)</li>
  <li><a href="https://arxiv.org/abs/2410.02712">LLaVA-Critic: Learning to Evaluate Multimodal Models</a> by Xiong et al. (2024)</li>
  <li><a href="https://arxiv.org/abs/2304.08485">LLaVA: Large Language and Vision Assistant</a> by Li et al. (2023)</li>
</ul>

<h3 id="learning-to-rank-ltr-and-neural-re-ranking">Learning-to-Rank (LTR) and Neural Re-ranking</h3>

<ul>
  <li><a href="https://arxiv.org/abs/1910.14424">Multi-Stage Document Ranking with BERT</a> by Nogueira et al. (2019)</li>
  <li><a href="https://arxiv.org/abs/2206.15198">ListBERT: Learning to Rank E-commerce Products with Listwise BERT</a> by Kumar et al. (2022)</li>
  <li><a href="https://arxiv.org/abs/2402.15838">ListT5: Listwise Re-ranking with Fusion-in-Decoder Improves Zero-shot Retrieval</a> by Yoon et al. (2024)</li>
  <li><a href="https://arxiv.org/abs/2505.20046">REARANK: Reasoning Re-ranking Agent via Reinforcement Learning</a> by Zhang et al. (2025)</li>
  <li><a href="https://arxiv.org/abs/2505.14432">Rank-K: Test-Time Reasoning for Listwise Reranking</a> by Yang et al. (2025)</li>
</ul>

<h3 id="reinforcement-learning-for-llms-as-judges-and-reward-modeling">Reinforcement Learning for LLMs-as-Judges and Reward Modeling</h3>

<ul>
  <li><a href="https://arxiv.org/abs/2505.10320">J1: Incentivizing Thinking in LLM-as-a-Judge via Reinforcement Learning</a> by Whitehouse et al. (2025)</li>
  <li><a href="https://arxiv.org/abs/2402.03300">DeepSeekMath: Pushing the Limits of Mathematical Reasoning in Open Language Models</a> by Shao et al. (2024)</li>
  <li><a href="https://arxiv.org/abs/2501.12948">DeepSeek-R1: Incentivizing Reasoning in LLMs via Reinforcement Learning</a> by Guo et al. (2025)</li>
  <li><a href="https://arxiv.org/abs/2408.02666">Self-Taught Evaluators</a> by Wang et al. (2024)</li>
  <li><a href="https://openreview.net/forum?id=PNRznmmWP7">Learning to Plan and Reason for Evaluation with Thinking-LLM-as-a-Judge</a> by Saha et al. (2025)</li>
</ul>

<h3 id="reward-model-and-judge-benchmarks">Reward Model and Judge Benchmarks</h3>

<ul>
  <li><a href="https://github.com/lmarena/PPE">PPE: Preference Proxy Evaluations</a> by Chiang et al. (2024)</li>
  <li><a href="https://arxiv.org/abs/2403.13787">RewardBench: Evaluating Reward Models for Language Modeling</a> by Lambert et al. (2024)</li>
  <li><a href="https://arxiv.org/abs/2506.01937">RewardBench 2: Advancing Reward Model Evaluation</a> by Malik et al. (2025)</li>
  <li><a href="https://arxiv.org/abs/2410.12784">JudgeBench: A Benchmark for Evaluating LLM-based Judges</a> by Tan et al. (2024)</li>
  <li><a href="https://arxiv.org/abs/2408.02666">RM-Bench</a> by Wang et al. (2024)</li>
  <li><a href="https://arxiv.org/abs/2505.10320">FollowBenchEval</a> by Whitehouse et al. (2025)</li>
</ul>

<h2 id="citation">Citation</h2>

<p>If you found our work useful, please cite it as:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><div><button class="btn-copy" data-clipboard-action="copy" data-clipboard-target="#code5"><img src="https://aman.ai/images/copy.png" style="margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;"></button></div><code id="code5">@article{Chadha2020DistilledAutoraters,
  title   = {Autoraters / LLM as a Judge},
  author  = {Chadha, Aman},
  journal = {Distilled AI},
  year    = {2020},
  note    = {\url{https://aman.ai}}
}
</code></pre></div></div>

  </article>

</div>

      </div>
    </div>

    <footer class="site-footer">
   <div align="center" class="wrap">
      <div align="center" class="footer-col-1 column">
         <ul>
            <li>
               
               <span class="icon github">
                  <a href="https://github.com/amanchadha">
                     <svg version="1.1" class="github-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                        <path fill-rule="evenodd" clip-rule="evenodd" fill="#C2C2C2" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761
                           c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32
                           c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472
                           c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037
                           C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65
                           c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261
                           c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082
                           c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129
                           c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"></path>
                     </svg>
                  </a>
               </span>
               <!-- <span class="username">amanchadha</span> -->
                | 
               <a href="https://citations.amanchadha.com/">
                  <svg version="1.1" class="mail-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                     <image id="image0" width="16" height="16" x="0" y="0" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABJoAAAVjBAMAAABzrVjQAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
                        AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAElBMVEX///+xsLCxsLCxsLCx
                        sLD///+bxiTSAAAABHRSTlMAAKP3FWDuDwAAAAFiS0dEAIgFHUgAAAAJcEhZcwAACxMAAAsTAQCa
                        nBgAAAAHdElNRQfkBwQDMic2f+cwAAA03klEQVR42u2dW3IdOZJEu81mAcMqbOCacQMy0wImVNr/
                        msZKKpVeuHkzEA8PIPx8douAh+MkkmKR1H/+QwghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQ
                        QgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIeQQ/vt2KOMzyeH/GtiE7rgP/3u+TQPdcRukgU3o
                        jtsgb+fbNNAlt+GtgU3ojtsgDWxCd9yGT2/n2zTQJbfhrYFN6I7bIA1sGuiS2/DWwCZ0x214a2DT
                        QJfcBelgE7rkNrw1sAndcRukgU0DXXIXvsl0tE3oktvwb+MH2zTQJXdBOtiELrkL32U62KaBbrkL
                        P3R+rE1/oEvugnSwCV1yF/76sfRTbRrolrvwU+un2oQuuQvSwaaBbrkLP9d+qE3okrvwS+1n2jTQ
                        LTdBOtj0J7rlLvxa/JE2oUvugnSwaaBbbsJvMh1pE7rlLvze/IE2DXTLTZAWNqFbbsKnSfXn2TTQ
                        NTdh1v1xNg10y02QFjahW+7CtPzTbBrolpswb/80m9AtN0Fa2DTQNTfhSf2H2YRuuQmPFja9o2vu
                        gTzr/yibBrrmJjw9gKNsQrfcBGlh00DX3IPnMh1lE7rmJlycwEE2DXTNPZAeNqFrbsLVEZxj00d0
                        zT24PINjbBromnsgPWxC19yE60M4xaaBrrkHL07hFJvQNfdAetg00D334NUxHGITuuYeSA+b0DU3
                        oYdNA11zE3rYhG65Cy1sGuiWu9DCJnTJbehg00CX3IYGNg10x31oYBO64kacb9NAV9yI821CN9yJ
                        420a6IY7cbxN6IJbcbpNA11wKw63ib8YPJXDbULX24yzbRroeptxtk3odrtxtE0D3W43jrYJXW47
                        TrbpHV1uOw62aaC77cfBNqGrbci5Ng10tQ051yZ0sx051qaBbrYjx9qELrYlp9qE7rUnh9o00L32
                        5FCb0LU25UybBrrWppxpE7rVrhxp00C32pUjbUKX2pYTbfqILrUtB9o00J325UCb0JW2YEz/1/Ns
                        GqpWyBIy5v/zcTahi27Bk2f2OJuGqhWyhDSx6Q900R2QtyY2oYtuwVsTm4aqFbKEdLEJXXQLnj+2
                        Z9k0VK2QJS6aPssmdNEdkC42DVUtZImrqk+yaahaIUtIF5vQRXfgr8sn9yCbhqoWssR12QfZhC66
                        A//qMq7/7+1tGqpayBIv2j7HJnTRHfhuy3jx/29u01DVQlaQV3WfYtNQ1UKWeNn3KTahi+7Aj66M
                        l39iY5uGqhayxOvCD7EJXXQHPnSxaahqISvIjcbPsAnddAfuPL9H2PSObroBv4gy7vyhLW0aqlrI
                        Erc6P8EmdNEdeHSxaahqISvIvdIPsAnddAduPsL72zRUtZAV5Gbr+9uEbroDd5/h7W1CF92BSe1j
                        +gd3t2moaiEryO3ed7cJ3XQH7j/Fm9s0VLWQFeR+8ZvbhG66AZ8Uj/HeNg1VL2QFTfN724RuugFP
                        BBmaP7yHTeimO/Ck+jH9wzvbNFS1kBVE1f3ONqGbbsBTPYbuj9e3aah6ISsoy9/YJnTTDXhux1D+
                        +eo2DVUvZAVt+9vaxF8MHs+FHEP7AbVtQjfdgCs3hvojKts0VL2QFfT972oTuukGXKox9B9S16ah
                        6oWssHAAm9qEbroBK4/znjYNVS9kAVk5gS1tGqpeyApLR7ClTeimG/DKi7H0URVtGqpeyAJ/rZ3B
                        jjahq27A4hO9oU1D1QtZ4KUVb3+ufVw9m9BVN8BwBJvZNNBVn49YTuDyg6vZNG71QQy8kOnlx29k
                        E7rqBpgPYBubBrrq8xHzATxfoZhN6Kob4HAAm9g00FWfj1wewLttjVo2oas+H3E5gC1sekd3fT7X
                        BzBurvLMyUo23Z2FLCPXJ3B7nQ1sQlfdAK8TqG/TQFd9Pg+vE5DyNqGr/p1fAn5E57EiL05gWFeq
                        Y9P9UVLYIqTLTN95v71SeZvQVd+tfaDDLSOOR1Dcpo/oru+XPtAJF3l5Bua1qthU5oReulQqrYbX
                        Y5kXq2ITuur7ldfKe58bj4m5pyI2DXTXVx1N+dO+W7XZhnm1Ijahq/6C6DJ/ROf1Hm6Yl6thk2aO
                        MPZM7TidZp7KNqGr/nzjR8yK5r7JnWmGYr3CNqGr/qx+yxVK7jfeMC9YwSbNFMi2N9bJ/Rzq2oSu
                        2iBThfBu8w3zigVs0gyBLHtfnW7ON8xLFrAJ3bVNpgL5X3JzkGHuDG+TZoYQPlknQA/wCrk5xzCv
                        CbcJ/4vB7TOgJ3AacCjWLGoTumoHmQo8EVfI3TGGeVG0TZoJQjhjigtuy3SATft0vatOMUOUtAl9
                        Ck4yFf5RQMWEw7ws2CZ01+dM4jDhUCxb0SZNfnDVm+oUdRoFbUJ/x5mYJ1g8i5oTaiYoaBO4avOX
                        LevrFDZAPZvQ9XvPAx5ngqjyD/PKSJu2qtr5NFJQfgegJn85m9DlnzeRcUJN/HI2gasW8wDlRjJO
                        OMxr42zSZI/gxJlsE2rSy3QFmE3o4h8hU4GH+gnRhh/mxWE27Vb1HmP9gP7rH8PcH8omTfIITp3L
                        MqEmu0xXQNkErlrMAxQdzDLhMC8PskkTPIJzJzNMqIku0xVANoGrFvMAZUczTDjM62NsQncdOZvm
                        TMKQ6OTzDSA2oQtf6vo24OG+EH4s8wohNm3Z9T7jrT4uw7wDwiZN6jpd7zPf6uOiyT3vEGETumsx
                        T1B8wMda7GHuEGCTJnQIp08oCbHnewBswladcDWhR1xNPcwl5tv0EVt1wtUEvpwkI/V8k3SboEWb
                        ytaAHDDlaOYtptuE7NlWdtTBlJlPE1qmK2TbBKzZ3LYG2HiynllzNvNtsm2CtezQdtTJuJKUeV5j
                        sk2wkj3aVgEaTwyRNYcz3yfXJvwvOrK0reIjZj5L5GHuMdcmTMOvWwhAczR+pEWe95hqE6Zhv7pV
                        IKYTU2LN8cx3SrUJUbBn3WFn40Ve4nmRmTYh+r1VQgzbTac5n/lWmTbl1/sb0SOuHo4Lkhh4vlei
                        Tent+vetI3u6zAOaN5lnkyZrFGKeovDE5uE0eeeb5dmUW+2c2Aktp1NhOE1ema6QZlNytYoK4kgd
                        7kPqEc2rTLMptVlVBXFojqfAbJq48+2ybMos9imRA07ZazbNGcl0hSybkr1RNBCJ5nzws2nSzvdL
                        simv1uDGlaTNln1I8y5zbNLkrN24ko87jaY5JZmukGNTvjkTlv6N+sQDMiDmoNqw8x1TbErqNKVy
                        JTmj5R/TvMwUmxDuRFUeeELLiDmmOut8ywybUhp9TdR41yQM5vUK15yTTFfIsAlkz635w/kYP5lX
                        1GFuM8Gmd4w99+YPR3NE4ME0UeebxtsUX+c9YqZ7zT6DaU5KpivE2wTTJ6r0wDNaQcwJV5LOdw23
                        KbrM/NK1xM7l+I/saY5qXme4TUiDfuQRMh2+AcegQ7GtTFeItkmTcJfWK1Ug5nhrQef7RtsENegH
                        nP/V1TIdeOYcin1lukKwTViFXk6fg+aUkGNpcs43jrUpsEclD//hCrQg5myrOec7x9qEdug7/rNV
                        qME35lDsLNMVQm3SxAvGX5ECPYg52XLM+dahNqEVCus98Jg0AGPOC420KarEBcQ8jImYoR7A85oX
                        GmkTWqEfcPcj7pyMB5qUcr55oE1og37E3Y8CXbiHHIrNZbpCnE2abNGIeRojW8ykObH57nE2oQ2K
                        bT7woG6CDTlvNMymgP4qNa9lh5E0RybTFcJsQgsUXT24DjEn+p1h3j/KJk2yeAKqB/ch5kS2jPP9
                        g2zC/2Lw6Oq1eM8UEHGYKw2yCe3PndFz8Z4pIOIwVxpjkyZXAhF2oCsRcyJTxPn2MTah9fmFCDvg
                        nfgnHIrdZbpCiE2aWBnE6KGk/lCaY5PpCiE2oe25NXk2mrPCTKVJON89wibv3ur1vsKf5afSnNt8
                        9wCbNKFS8O99Ce+x3ANqDm7eaYBNaHnia48/rPUDTQo439zfJu/S7MQJAi1GzIkMAeeb+9uEdud3
                        4gTBNuOdbyj2lukK7jZpIuUg5pmceHcezDuf5ujmpbrbhHbn7uAANKeFGEyTb763t03ejRUsfZ3i
                        g2nObr63s02aQFnEGqKh+GSaw5PpCs42oc1J6DzpuACTaeLJdAVfm7zrqth5oXrEnGg53nxrX5vQ
                        4kyJdgTXj5gD/cQwb+1qkyZOGs6Vm3h3ns03neb45q262oQWRzE3Bs153QGXbt6qp03vaHEUc4Mo
                        Pdsw7+xokyZMIr6NGyk9m+YA5zs72oTW5gkZkoQcWPpwmnAyXcHPJu+iShaeeWDpw2nCyXQFP5vQ
                        1qQUbsZ5ODEH+oFh3tjNJk2UVJI0uYnzcGIOtHiE843dbEJLk9J37ollT6fJNt/Yyya0NDl9557Y
                        HVDZ5rU62eRdkh9imCoC5/E8o2kOcV6rk01oZ7Rj4yg83jDv62OTJkcyiaIgqhJzoLVo8319bEIr
                        c0GiKO5HljyfJppMV3Cxybuhom37UHc+zTHKdAUXm9DGJLXtQ935hmJbma7gYRNamKy2889s+VjD
                        k823dbDJuZ6yZQPOLHdATbL5tg42oYXJKtuLsgMO87Z2mzQZ8nEs2wvnCf2CaU5y3qvdJrQvK1ND
                        0RzaDTDB5r2abXLuxhtZGioU58Ywwea9Wm2q9YvB706NpeqEw7yr1Sa0La8AyJLcmZjzfGOYdzXa
                        pAkAAWFLbmlizrOSa76r0Sa0LC9B2OJ5apkjanLJdAWbTc69BIDx5QVFR9ScpkxXsNmEdiWxak+K
                        jjgUm8p0BZNNmu1BgHy5xndEMedZOM75phabvH+fegCfUMK4HdvqwQbHmm9qsQmtSmbTrmiOLXFG
                        Taz5pgabfDuJwa1pX3yH9EqlOdB5sQab0KasDw3Hd0ivVMNc7LpNmr1hiG6mLHy7Q6SaF7tuE1oU
                        w9BwNOf2GkSqebHLNvkWEoWoZkrDtzyvITWp5nuu2uTbRxheRXtTckjNmc73XLUJrUly0d6UHHKY
                        91y0SbMxkgfUmaT+xBxHH2q+56JNaEvugnXG5+Be4vUFf00oma6wZpNrGZGgrckpEBBKpius2YSW
                        JLtnfypOORRbynSFJZve0ZJk9+xPxSmHYkuZrrBik2ZXMGhpnlJxSs25ynSFFZvQiuT37I/m5BaP
                        NjTTfMsFm1yLCAYtTU6JYo6jzjTfcsEmtCEa0NLktCjmNF8Y5i31Nmn2hIN25jmeU4o5jfpk51vq
                        bUILogLtTE6NYk7zhWHeUm3TR7QgKtDO+BzdK/7KjyTTFbQ2eZaQANqZpCLzI8l0Ba1NaD0gNUeg
                        ObqkMTWRZLqC0ibXDhJAO3NBvTE1hyvTFZQ2oe3A1BxCvTGHYkeZrqCzSbNfCdDKXFBvTM3pynQF
                        nU1oOUA1h6A5u7WzjUw031FlE9oNPWhlnM5u7WwjE8131NjkOX8SaGWS2hRzGm2i+Y4am9BqLIBW
                        5gLP3xgq5jR/M8w7KmzSbFYFtDJXOI4p5jDaA57vqLAJbcYKaGOS+hRzmL8Z5h3v26TZqwxoY65w
                        HFPMYbQnPN/xtk2areqANiar0fRAMl3htk1oL4AtB6E5vJQ5NYFkusJdmzxHTwRtTFal6YFkusJd
                        m9BaIFuOotqcQ7GhTFe4aZNmo0qghbmk2pyaQ5bpCjdtQlsBbTmKanMOxYYyXeGeTZp9SoEWxu30
                        MubU5JHpCrds2uAXg0e2HIXm9F7wyM4j0xVu2YR2Yh20MG6n9wIxh1HmmW94xybHqbNBC+N2ei8Q
                        cxhlnvmGd2xCK2EALcw1fnOKOctbkk2aTaqB9uUavznFnEV50PMNb9iENsIC2pdr/OYUc5a3HJve
                        0UZYQPvid3zXiDmLMs58w5c2+U2MAO2L3/FdI+YsyjjzDV/ahPbBBtoXv+O7RsxZlHHmG76yyW9g
                        CGhf/I7vGjFnUcaZb/jKJrQORtC+vMBtTjFHeUuwSbNBRdC6vKDWoEOxn0xXeGET2oYKJQdSa9Ch
                        2E+mK1zbhJbBjLyVxm9QjzTDXOylTZrlayJvpfErODvNvNhLm9Au2JG30mjO75rsNPNir2zymxWG
                        vJXGr+HsNPNir2xCq+CAvJVGc37XZKeZF3thk9+oOOStNm6DeoQZ5mIvbEKb4IG81cZtUI8ww1zs
                        c5vQIrggrxoE4zaoR5hhLvapTZql60KbatiE9sCH6jZpDvCS2ja5jYmFNpWwCa2BE7Spgk1uU6JB
                        60KbfH/DJxa0Lq+oNOdQ7KexCe2AH2hbaNM57znaVMAmtAKOoG2hTZpVq4O2hTahDfAEbYvnCUbP
                        qcly2yavAUuAtqW7TV7z1QBtS3eb0Ofvi9ytkjZF2OQ1XhFoE9Qm9PE7U90mr75r2qRZcQdoE9Im
                        9Ol7Q5uANmkW3ALahLNJs94e0CacTeiz96e8TZojvKCgTU6TlQJtS1+b0CcfAdqWtjY5DVYLtC1t
                        bUIffAhoW7ra9D/ogw8BbctL6ow5FPu9tOm/6F5DekYPkTMlbfIcTjt2IWhTCrSJNvlBm2iTH7SJ
                        NvnRxKZ32pRBE5t8xsxOMq/1eJvKf4mANm1Ucw+bPmUnkekKtAmNy5iSnWS+IW1CQ5v2qZk2xSSZ
                        b0ib4NCmDJxscik6kjJD0ibaRJvch6NNyYXPN6RNcMoMSZtoE21yH+4K9ByvoE0Z0KbkGWnTATZ5
                        zJkeRKYr0CY4tGmXlp8PXgfatEvLtCkoyLxU2gSHNu3SMm0KCjIvlTbBoU27tOxXdek5JT3IfEfa
                        BIc2bdLyFjY5fDFc0guf70ib8NCmBNxs8uk6jioT0ibaRJvch2tu0yO98HmntAmPfcL8wueddrCp
                        +qfhVQakTbSJNrkPR5uSC5fpCrQJT5UBaZNh9DJUmY820SbalNTyJja9F5mPNp1gk+YUadMqbjYV
                        /zScNmVAm3LHo020iTbdw8+mD+hRLqFNGfjZJOYskdCmDGhT7nS0iTbRpnv42VT703DalAFtok11
                        Wu5iEyKHTFdoYpOYwxSeE5FjXihtwkObdmiZNsXlmBfaxCaXf7+t6JyCyDHftIlNpT8Np00btEyb
                        AnPMN6VNeGhTCo42uVUegNEmSI55n7QJD21KgTbRJj8cbar8iZPNJoHkmO9Km/DQphRoE23y493R
                        Jr/S3bHZhMkxr7O0TbaaaVNgjnmdtAkPbdqg5rDWS40pmBzzbWkTHtpUv+YmNn3A5JDpCqVtcv0S
                        gZjTRGGyCZRj3iZtwkObcvC0qe6rzmKTgHLM96VNeGhTDrSJNtXoObT4MlOicszLpE14aFP9nlvY
                        5DoTbdKAniZgSkHlmG9Mm/DQpiRcbXKt3hGDTbAc8y5pEx7DSK45aFNvm3wnok0q0NO4DymuOY63
                        STNgQ5twZct0hVY2iTlPCLQpCdpEm/z409Wmoq+6Kk/H8Ta1+DScNpVvesoDPY7vjM45aJMOMecJ
                        QHOItAlU9fk2eU9Dm5Sgx3EdUYBB5nvTJjjLIyKDyHSF6jb94WuTmAP5Q5vyoE1ps9AmLehxJrzT
                        pjTOt6nMKA1s0oy43AIU2pQHbUqbhDapQc/zO7SpftnH2+QfhDapEXMgZzRnSJus0KasOTrYtNj2
                        U9DzOM33AZtEpivQJjSL84GTyHSF+jad/qp7LzMFbapxDvnjRUxBmxZAz+MyXkSSFjZphqRNSUXL
                        dIWGNok5kSt1ZqBNC3xCD+Qw3Qd0FJmusIFNZ3/itGYTPIpMV+hok5gTObJkU8wEPWxaKpw2hUaZ
                        J+hoU6lXXaEBaFOhw1hjJf9f+J5lusIONh39iVOh/LRpiUJfI9Cc4L8UyCLTFbawaalywHFkjVYg
                        i0xX6GmTmCMhR4tK38Smgz9xWrGpQpZ5gz1tqvOqqxS+i03v3jY90BN9YyG7RGXpYpNmTuyJaFnI
                        XqLleYF72OT8q3kjj0THymNSIoxMV9jDpmM/cVqwSUqEmafoapOYI7mwYFONMPP+NrFpoXXYoWjQ
                        5w78Oj5tameT1Ch5HmMTm0591ZV6CmjTOuiJ/kZzfvEPQR+b9L2faVOVNDJdoa9NYs5kp9Yz0Mem
                        M191tR6BRjZpRj3XpjIVy3SFxjaJOVP6TLGRG9l04qtObVOdODJdobNNj+1Gio3TySbNrJZGEikW
                        mDaZ2G2iQnlkusI+NgW86sScyYTWpui4rWx6P80mbdzoPK1s0j7KBc7nmmrut7LptFed9ukoFWje
                        XG+boJeT0iYpFWieZiebtA9zcZuUUaVUv/M0O9l02KuunPi0yQpuGM3Z5XjfzCblARQ5JJ9hiiWa
                        97aVTf4/pBn1a9puUM/6Zjad9KrTHF1SzG42KY9gvZZqo6SkpE12QKMUDNnNpohXnZhDxU+Sk7Gd
                        TZqB77LBIPUyyXSFzWwK+Fsd5lswVQklJ1M7m4551akSJmXqZ5Nm4mKHtTyGFAw1z7SbTYdcTu8V
                        badNLtSeQrJCNbRJM3K581oaomSqeWXb2XTE5VRT9Y42fQyw6ZE8Q03TO9qkmdnWTYkREqN1tOmA
                        V13RZC1t0gxtKyeKosFa2vRHgE2pl5Pm1KrmkukKG9oU8qoTc6qQ/Jmxmtqkmfo2NeOX7VWmK+xo
                        0+aXk+LQ8kIpg51kk2bs26Slr5hJXatMV9jSpq0vJ8WZZUXSJ6NNr6iXPbnVrjZp5jYW5I3i6xuP
                        wq3Oy9rTpo0vp/tHJtmltrVJM3it4ysm92qp8642tWnby+n+iUl6p31t0kxe6QBLqW3odF7VrjZt
                        ejndPzDJr7SxTe8RNok51gsKif07jW3SjF7mDO+HluKVzvNta1PMq07MsZwyIxrtbJNm9iKneD+y
                        VG90HnBfm2Iup9DfNVdE6me0tkkzvLWm5MCBIZwKnSfc2KaYyynwWiguU3ObNNNbe0qNu0Gf85Z2
                        tmmzywnv8wua26QZH64Ten/fOmW6wtY2BV1OYs414f5RhWzvG/FMmzTzK4iIit3dvU2ZrrC3TUGX
                        U8CB3j8pgZXZ3iZNAeauDNz/7a+f9ihz3tDmNu1yOeF2VkCbNA3gdLqfUjbpcp5zd5uiLicxB/sB
                        xTEhq6RNYZeTmJN9ByRxZJXzoNvbFHU5OR6sYlNok7Qp7nJyO1lFQNmmyXnS/W2K+Q5xP500Z4Qt
                        kjb9TZRNLoerOaIHtkfapG0hWyfNP1olG/U4z3qCTXGXk/kL06rf0YmukTapa8jVSbOX7FTjPOwR
                        NsVdTjaddL89GF0ibfqHkF/6bNZJ9w99CrpE2rRShJakTOgKadN3Am1aPGelTIJukDatNZGikzYQ
                        ukBlZJmucIpNcV8Rf97dFfE7+EObvhNpk/bq0JzLyvox0Ka1LhaQ+0l0f5fTrl6jwXngc2wK+Uc1
                        V058ZW10d1+gTT8SbNO9Mw8VNRbatNpGjE+rCdDN6dPLdIWTbIr9e91ljV+IWDMT2vQzCTZ9nv/H
                        Fs1J/Aa6toUZZLrCWTaZznRRAfueYpgY1d4881k2perkBrq0lfJkusJhNiW961wR89BO0KbfQLtB
                        m06ySVNJDdCNLVUn0xWOs2k7ncQ8MaK5eerzbNrtXYeu6zu0aQbaDxViHtcN2mRtBQ66rMXeZLrC
                        iTbtpJOYh8XUNs99pE0bvevQTf0IbXoCWpK7hP4jQVpo0zPQmpgOBQRt8mgGCLqm5c5kusKpNu2h
                        k5jHRFU2T36sTVvohO5ovTGZrnCuTRvoBPxN89bCZLrCwTbV10nMI8L6mkc/2abyOqH7MdQl0xWO
                        tqm4TmKeD9fWY7rC2TbV1gldjqWs+QqH21RaJ3Q3v0GbXlFXJ0FX8xu06SVldUIX8zu0ybekRIp9
                        sUlZ1HyBDjbV1EnQrfzOsIZvYVNJndCdTKBN3j1lIeaZkC09Sd/Epno6iXmkAG6nf/LxXWwq97ZD
                        12Hr6MnH97GpmE7oNkwVPfv7aCObSr3tBF2GqaFn6TvZVOl6Qjcx565NH558fC+b6lxP6CKeYEzf
                        zKb43wN9D0HX8ARj+nY21XjdiXmKGAZtiqksFHQFT7Gl72hTAZ/QBZiakacf3dMmtE+CHt/Uy+Pp
                        R3e1aenf1mlg051X3fMP7mvTG/DzcfTgFwzLo9DaJtgLDz32FZbwzW16gwgl6JktfVyFp01/c9uD
                        Ty6vR0HPaynj6kNp0zdeOvD1j/1xvE3jMvvj6kNp00+8Pv3rru+BnvIFVyPK5UfSJiUNbLq4pl/8
                        oA1tUuIgU3mb3laT0yYlDjIJeoblKV99GG3SMXrYNNfp5UfRJh1dbJoMeiM2bdLhYRN6hqVR5c6H
                        0CYdDjLtYtMCtEkHbbqCNqnweNHRJvIVD5sEPUQctEkFbbqENqnweNEJeog4aJMK2nQJbVJBmy6h
                        TRoGbbqENmlwsQk9RCC0SQNtuoY2afCQiTaRr9Cma2iTBtp0DW1SMGjTNbRJAW16AW1SQJteQJsU
                        0KYX0CYFLjLRJvIF2vQC2qSANv3nNv9FRy0PbaJNbgzaRJvcoE20yQ8nmwQ9hwHa5AZtok1+0Cba
                        5IePTLSJ/A1tok1+0Cba5IeTTTt/iYA2uUGbaJMftIk2uTG8bHqgJ1mHNnnhZpOgJ1mHNnlBm2iT
                        H7SJNvnhZtPGn4bTJi9oE23yw88mQY+yDG3ygjbRJj/cZKJNxPNfKEePsgxt8oI20SY/HG0S9Cyr
                        0CYvaBNt8sPRpm1fdbTJC9pEm/zwtEnQwyxCm7zwtOmTPQ4E2uSFp027vupokxeuNgl6mjVokxe0
                        iTb54WrTpq862uSFr02CHmcJ2uQFbaJNfvjatOerjjZ54WyToOdZgTZ5QZtokx/ONm35qqNNXnjb
                        JOiBFqBNXnjbtOPlRJu8ePe26YGeSA9t8mLwVUeb3HC3acNXHW3ywt8mQY+khjZ54W/TfpcTbfIi
                        wCZBz6SFNnkRYNN2lxNt8iLCpg/ooZTQJjcCbBL0TEpokxsBNu32qqNNbkTYJOihdNAmNyJs2uxy
                        ok1uhNgk6KlU0CY3Qmza63KiTW4MXk60yY0Ym7a6nGiTG0E2CXouBbTJjSCbdrqcaJMfQTYJeq77
                        0CY/gmza6HKiTX5E2STowW5Dm/yIsmmfy4k2+THaX060yY8wm7a5nGiTH3E2CXq0m9AmP+Js2uVy
                        ok2OxNkk6NHuQZscibNpk8uJNjkSaNMev4+eNjkyAnUS9HB3oE2ORNq0xbuONjkSapOgp7sBbfIk
                        0qYdLifa5EmoTYKe7jW0yZP35pcTbfJkNL+caJMnsTbV14k2uRJrU/l3HW1yJdgmQc/3Atrkysfe
                        lxNtcmX0vpxokyvRNhX/lfS0yZdom2q/62iTL+E2CXrCK2iTL6P15USbfIm3SdAjXkCbnAm3qbJO
                        tMmZeJsKv+tokzPvnS8n2uTMSLicHughn0GbnMmwqey7jjZ5k2GToId8Am3yJsOmqpcTbfJmNNaJ
                        NnnzR4pNgh5zCm1yJ8WmmpcTbXJn9NWJNrmTZJOg55xAm/zJsani5USb/EmyqaBOtMmfkWSToAf9
                        DdrkT5ZN9S4n2hRAlk3ldKJNAXzMsknQk/4CbQpgdL2caFMEaTYV04k2RZBnk6BH/QnaFMFoejnR
                        pggSbRL0rD9Cm0LIs6mUTrQphMTLqdK7jjaFkGmToIf9Dm2KIdGmQj8QRZtiyLyc6rzraFMMqTYJ
                        etpv0KYgMm0qcznRpiBSL6cqOtGmIHJtEvS4X6FNUaTaVORyok1RdLycaFMUuTbV+KITbQoj16YS
                        7zraFEby5SToed9oUyDJNlW4nGhTHMk2CXpe2hRJ9uUk6IFpUyTJNuHfdbQpkGybBD0wbQpkdLuc
                        aFMk3S4n2hRJ+uX0ATsvbYok3Sbwu442hZJuk0DHpU2hNLucaFMsvS4n2hTLe6vLiTaFkfOPGpTS
                        iTYF8CfIo68IbnDa5AvUI/jlRJu8GGiJ/kVgHdAmB+qI9BVYEbTJRjWRviCoNmjTOiVN+sID1Aht
                        WqOuSV8AtUKbFkC78hrBFEOblAy0KPfAlEObNGyi0mfU5USbbvMRbYgKSEW06R5oOdQIoiXadAO0
                        GUsgiqJNr0BbsYoAuqJNlwy0EwYe+XXRpudgv7HETn5jtOkZaBfsSHpntGnKQJvgQnpttGkC2gIv
                        JLs42vQrqG/njiC7O9r0MwMtgCuS3B5t+pGzXPqcfjnRpu8c51L65USbvnGgS5+zLyfa9JUzXcq+
                        nGjT35zq0ufky4k2He1S8uVEm452iTblgj7tcDLLbG4T+qgTkMQ6W9s00CedQmKhjW3q4VLq5dTX
                        JvQh55HXaVebBvqIE5G0VpvahD7gXNJqbWkT+nSzeWQV29Cm3X94QI9kVdvPJvTRIsjqtptNJ32f
                        7n0kqd1mNg30uYJIqreXTehDhfHI6beTTQN9pjgkp+FGNjWWKetV18em7PP79DTJANgkKR23sSnv
                        4B638iQr9elWKCtNbEo6u4cmU65OKTX3sClBpoWHP9Umyei5hU1FT2qk6pRRdAebyp5Sqk4ZTTew
                        KfCEpG4096x3ON6muO8Y8PhrUqZOCWWfbtOofTZh8WhTAEGnJW4BE23yC/2Us22Kkck1YqJO8X0f
                        bVOETN5fVI7I+IRHeOEn2/TufyDinzJPp4Dwv3CwTbscR5pN8a+6c2366H0Wj6CgI82mqAn+5Vib
                        vGWSuKhpOgXO8JVTbdrqHLJsCn/VHWrT+0YuJf6EX3TtZ9o0tjqDvHedBM9xpE2uhyMZiZNsin4w
                        TrTJU6a/ciJnveuCxzjQJk+ZHjuGvkBipzjPJsfHPOdb87+SY1PwVXueTX7VPzJjjxydYoc4zia3
                        3jMvpr/J0UlCZzjNpk1qD41Om5wYXq0jwqfoFDrBWTZ5ySRbp8eNdpZNOzy/8fFpU6XT2H4A2HQn
                        2TTqP7wpE9CmMkch0BkSbIoc8BybfH4/KnoK2lSDI2TKeNcFpj/GJo9jEPQQbyE/aEObtJwiU8K7
                        LnDMU2yq3bIGj+fimrjsh9jk0PEDPcM3wnWKi36GTQ4HgB7hB6JtkrDkR9h0lkzhl5OEJT/CprNk
                        itcpLPgJNtnLR0/wK7QJxnkyReskUbEPsOlAmYLfdRIVe3+bzMWjB5gSalPYyNvbZJbpgZ5gDm3a
                        sXVBD/AE81OCGHp3m6ylR/VqhzalY/2mpqhaPaBNmzWe/ROYKkagTkGR97bJWjg6/zW0aau+0fFf
                        YH1WLpCYxFvbZKw7qNIy89GmxLKDGvUkzKaga3lnm0oW6orxeaFNaVWj49/iPcomCYm7sU0V6yw2
                        JG26yyjYZrUpadNdbG2i0yeNmVzAtjbZHlpBx0+akzbdo2CXMQTpJBFZd7XJ1jE6vQraFI3tewdC
                        mgzD9uDQpte8m5pEp1cSYlNICXva1OlqegvSKSLonjbV6zGUEWGTBATd0iZbu+j0C9CmQN6rtRiN
                        7fGhTVfYPmtCp18iQqeAmDva9F7tkUyANpVsFh1+kUGbChYr6PSr+NsUUMWGNlV7IHMwPUO0KaTW
                        gAazeKdNAZgaRIeHDZ5TxnY2jWKP4yaT06YpxfrbZnTaNMH0gAo6PXD2lDp2s6nYw7jR8LTpN0yP
                        p397O01Pm37D1B46PHj8hEL2ssn0cAo6PXh+2uTZJjq8B7SpSJmCDu+B6XGiTX5dosP74GqTeKfb
                        yiZLc6V/xeV9TA8UbfJq0r05ELSpQpHo8F6YHina9J1SxW3ZQvQjtpFNpqcSHb5IDbTpG5baBB2+
                        SA+06R9Mz6SAw3vyTpvslKoNiemxin3Ietjk3dq+TdCmL5ieSGz0UlXQpr8xtYaNXqsL2sTPwf3K
                        oE180f2Ml03ezexiU6XO8NAmE8NSmSCT16uDNlWqrAK0CdYeMngQgzaByhNg8DCcbHLuZg+bKj1/
                        NTA9X7SJNv2E7Xd/trbJ9CA6F1YF2gRp7oHLHYnpCaNNq+BiFy6lsU2mx9C5rzr4XE6+mXawqdLT
                        VwjalF8bLHU4LpeTb6QNbLK1hkpdvZeuNpnaElTq6sXQJtr0Ex6Xk2+i+jbZOgOFzoE2qTHZJKDQ
                        G1QTUVB9mwqVVQ7apMT2/GEyp0GblNCmsHIa2mTq6pBfKBfUDm1CdlUQ8+Xk21B1m2x1+XZVENqU
                        WBckciq0Ka8tSORUrJeTuKYpbpOtLN+qamK9nFzD0KbNoU1ZXSESZ2N73mgTbXKsqJNNxgcPkDgf
                        2nQXm00CSLxbR51sshUlgMTbleQahTZtD226xyhUVF1sLblGoU3bQ5vuYZPpr/zAGGhTfE1dPm2i
                        TfcYtCm+J9cktOkAaFNwSd49laZMS7TpAEaVlmjTAdCm2I4+d/q0yfQrVV2D0KYToE2RFdEm2uRX
                        UTebBm16gfX3qyfHhUKbAhtqZ5PhHneNQZuOoEhNdW0yykSbaJNLQV84/tej/MSgTdcYbZLkuFho
                        U1Q/tIk2+fXT0ab1m9w1RVmbjDLRJtrkUU9ES/Wp0RNtOoNRoqeqNv1Jm1TQppB2mtq0/F81XVPQ
                        pkMo0VNVm95pk44SPVW1ySqTpKYtwOrj5xqCNh3CoE3PoU1KaJN/N7SJNvl109em1dvcNQNtOgXa
                        9JSPtEkLbfKuprNNgzY9w2xTZtga0Kan0CY1tMm5mdY2LT6BrhFo0zEs9SSuEWjTMdCmJ9CmBd5p
                        0xyzTB1tWnoExTUCbToG2vQE2rQAbXoCbcpqTVwT0KZzoE1TBm1agTZNoU1L4HuiTefwEd4TbTqH
                        ldp8E9Cmc6BNUz7SphVo0xS7TLSJNn2DNi1Bm6bQpqzenH9zMW06CH1N4huANh0EbfJphTat9Sa+
                        ASraNGjTGrRpAm1ahDZNoE2L6Gt6+AagTQehL845AG06CNrkUgptWizOOQBtOgja5FIKbVoszjlA
                        RZscZKJNtxDnALTpIGjTBNq0CG2aQJsWoU0TPGzy7mkL1DY9nAPQpoNQ2+QdgDYdBG2aQJsWoU0T
                        aNMitGkCbVpEa5N7SbTpIGjTBNq0CG2a4GFTyy9f0qYJtGkRrU3uAWjTQdCmCbRpEdo0gTYtQpsm
                        0KZFlDaJe4BjbfKvqj60aQJtWoQ2TaBNiyhtergHoE0HobTJPwBtOgjaNMHFpo5/qaNNE2jTIjqb
                        xD8AbToI2jSBNi1Cmyb42PRIy1uGj+jH7VybJC1vGXQFBQSgTQdBm8yl0Ka14iL6Odemhp+G0yZr
                        KbRpsTgJCECbDgJeD206CHg9B9skaYGrQJuspdCmfxnwdmjTOdCmGU42/ZUWuAgqm0ISVLRJ1Up2
                        YYWhTeZWaNNabyEJTrZJ0hLXQNNbTDe06Rzw3dCmc9B0E5PgZJu6feKEr4Y2nQO+Gtp0DopmJCZB
                        RZv+9LIpqLOiaB7CoGYq2uT1xXDa9JSgCEfb1OtVR5vm0KYVFDZJUATadAy0aY6bTVGtlaRAL7Tp
                        GBS9REUoadNw0ykvM54CtdCmY7jfikRFONymsN7qoSgtrBXadAqK0sIyHG5To1cdbbIXQ5u+cb8T
                        CctQ0ia/LxE0etVV6IQ2ncL9TuIynG5Tn1ddhUpo0yGM241IXIiaNt2vBtldKWiTQzW0SV1ZYIjj
                        beryqrvdx6fAELTpEG73IYEhatrk9nMGwe3V4f7zF5mipk2ef6nrcTnRpgtok5LbNklkigY2hfZX
                        hRptFLXpnTbpuN1GaIqiNg3PyykzOIj7f20JjdHBJslMjuF2X7Fd0KYjuN1XbIyiNrl+Gt7gVVek
                        ihY2SWp0BEWaoE0nMIo0UdWm2/3cIjU6gNttBefoYZOkZs+nSg+06QSq9FDVJt9PnA5/1d1+9KKD
                        NLFJcsMnc9emyG+U+0ITm86+nMo8U2Vtuvu80ab7NoUH6WKT5KavWVV4krI2eX4z7+GX012bJDxJ
                        WZu8P3GKrxJGnQeKNu0PbXrNcNYpOX69oiQ+Sh+bEsrEUOhxqmuT96fhx15ON8cP/9LlW2WbvD9x
                        OvVyGoXGb2TToZfTe6HpC9t096G7zYfsCVIodDW1siml0KotpQxf2Ca+6u7wsdLsrWyS9BHKlJQz
                        emWbBi8nt45y0vSySdJniKbWc1TZJv9X3XmXU63HqJlNSa2mMWo9RaVteufl9IJiD1Fpm+4+eW0v
                        p7sFZU1d2qY//G0663KqNnRpmwI+cTrrcqo2c22bBi8nj3rSAvWzSQBzBFFu4to2Rbzqzrmcyl1N
                        HW0SxCDIcvISFbfp7uOn4oGYBNeN5EXqaNMh77qC0xa3KeRVd8a7ruDV1NOmIy6nirNWt+nuE9ju
                        crr73wlSR61uU9Dl9MAM48h7waupq03bv+tGyUHL23S7Nh2CmcaNmnOWt8n9B8iPuJxqXk31bYp6
                        1e2tU82raQObbj+GSpKLxnSSnKuvTTvrVHXE+jaFver2fddVvZp2sCnsctpWp6pXU2+b0tv2oe7T
                        soFNca+6PXW6/XTlT7eDTXGX05bvusLDNbdpQ51ujyb52XawKfBVt59O9x8tQLgtbLrfoB7BjbVE
                        6cG2sCn0ckK0ntEEIh1t2kqnUXuqPWy6X+IKD+BkYT1A8u1hU+zltM9n4vdHEki+TWxSPJQH61R+
                        Itq0j06KEgSTcBObgl91W+ikeaJAEXexSVPloTophhFQxF1sCr+cyuu0wyzb2DSa66SZRFAht7Ep
                        6mdXNtFpj0G2sSn+VVdZp6EZQ2Ax97FJVegiD/CMPrPjcu5jU8blVPS/2e0i00426To9SCfd4MgJ
                        NrIp5XIqqJPyKUJG3ckmZa2roMe0TS3IrLSpuE7aoaFhd7Ip51WHPpGf2UqmvWzSVruMoCddnRgc
                        fCub0i4n9Kl8Q/34gPPuZZO63XXQoy6N+wAH3sumvMupgk4ftZEFnXgzm9RPqwEBz7rhA7CZTZmX
                        E/h09HEf6MPZzqbRRKeFOQV9NvvZFPHvkBc8oQWZ8O+5DW3KfdeBzmiboL+wn00rj60FyR9xk5i/
                        s59N2ZfT588fcucbKxk/oU/lCxvatNS2jczx6id8zoY25V9Oie+RsZbvA/pMvrKjTYuN7+BT6XCv
                        2dGm5K8S5B3ZcjT0gXxjS5sQ77r4QxtFcynY06b14sv6dPdfVp0g6OP4lz1tQl1OcT4ZEgn6ML6z
                        qU0JP0ee6ZMljqDP4gc2tQn3rgs4wHJyL7OrTcB3ne8ZGj5fKifTvjYNsE4+52gOIehz+IltbSqg
                        k1UohwkEfQo/s69N6HfdPzwW0797bC7oM/iFjW1C/r3uJ/T//d5rZ/QR/MrGNpV4131Dbqd23BR9
                        AL+xs01F3nX3jzd3NwBb21RPp3/466eUI2aTB7r939nbpqBz2gJBlz9hb5sa6yTo6mdsblPZd11L
                        mba3qalOgq59zvY2DfTBUqbvbG9TS53QnT9jf5savuvQjT/lAJva6YTu+zkn2NRMJ3TbFxxh00Af
                        MGX6yhE2ddIJXfUlZ9jURyd00dccYhPox38p08+cYlOLz8T/stcUyzE2NdCpxu9ouuIcm47XSdAF
                        v+Ygmw7XSdD13uAkm6w/6FgaQbd7h5NsqvNTLE1lOsumc7/sJOhm73GWTafqhK71LofZdKZO6FJv
                        c5pNJ+qErvQ+x9l0nk7oQhWcZ9NhOgm6Tg0H2nTUlzEF3aWKI206R6cHukkdZ9p0ik7oGrUcatMZ
                        OqFLVHOqTQd8Li7oCvUca9P2Ogm6wAXOtWlzndDtLXGwTTt/8iTo6tY42qZtdRJ0cYucbdOmbzt0
                        a8scbtOOOgm6s3VOt2m/tx26Lwvn27SXToJuy0QDm3Z626GrMtLBpm2uJ0H3ZKWHTXtcT+iS7DSx
                        aQOdPqArcqCLTdXfdoKux4U+NpX+UWB0N040sqnu607QxXjRyqaarztBl+JHM5sKXk/oRjzpZlO1
                        6wndhi/9bKrkE7oJbzraVOV19wHdgzstbSrhk6A7CKCpTfDXnaDnD6GtTVCfHujZg2hsE8wn9Nhx
                        tLYJ8fmToEeOpLlN2b95FT1tMO1test74Ql60HBo098kfHuBoGfMgDb9w6BKdmjTd4KEEvRcedCm
                        n3AX6gN6olRo02/4qYSeJB3aNIXvtyVo03N4J2mhTS/gjaSANt2DHt3hvk2EEEIIIYQQQgghhBBC
                        CCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCGEEEIIIYQQQgghhBBCCCH/8P/T2g3wTNSy
                        bgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0wNy0wNFQwMzo1MDozOSswMzowMFesjGwAAAAldEVY
                        dGRhdGU6bW9kaWZ5ADIwMjAtMDctMDRUMDM6NTA6MzkrMDM6MDAm8TTQAAAAAElFTkSuQmCC"></image>
                  </svg>
               </a>
               | 
               
               <span class="icon twitter">
                  <a href="https://twitter.com/i_amanchadha">
                     <svg version="1.1" class="twitter-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                        <path fill="#C2C2C2" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                           c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27
                           c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767
                           c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206
                           C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271
                           c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469
                           c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"></path>
                     </svg>
                  </a>
               </span>
               <!-- <span class="username">i_amanchadha</span> -->
                | 
               <a href="mailto:hi@aman.ai">
                  <svg version="1.1" class="mail-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                     <image id="image0" width="16" height="16" x="0" y="0" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAW4AAAFuBAMAAABTjO+8AAAABGdBTUEAALGPC/xhBQAAACBjSFJN
                        AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAALVBMVEWxsLDGxcW4t7esq6u+
                        vr7Z2NiqqamxsLCvrq7Ozc2ysrK1tbWenZ2dnZ3////zevNgAAAAAXRSTlMAQObYZgAAAAFiS0dE
                        Dm+9ME8AAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfkBwQDLRvUSpUpAAALt0lEQVR42u2d
                        PW8jyRGGR7Lk3XXEyNqQwAVKBewtiHMkwAfQoQ4L3B02ImCs98KVuFZzFfECm3Am4A7YDXmR/sQF
                        /gHO7+94R6Somarq7qr+mGra/YZifzzsfmc4XdNdappcOvjixZcX2VrPpj+az1r8QxtDqp/MRmfa
                        IDI93WKbxUgbRaS3D9zmUhtFolfmUUttGL6OOtjm+kIbh61Jl3t/nPLK9LXUBuLpAGDvi1NWkHs/
                        nPKtwVprQ/l1QGDvg1NWFLf5URvLp28NrbUCy+sfzJB6MUqD/SoeRagkk/M0nkOqFA+Rx2+H5zY3
                        8dzfK2CncIrGcBtztYfuvtdtJPdHJe7ZXtrEmPdx2MdK2OZ6P+1tzEUU9+/VuMdR3E/UuM/+L7lP
                        9pR7um3lry+G0iQp93lUKxL9rnJX7spduSt35a7clbtyV+7KXbkrd+Wu3JW7clfuyl25K3flrtyV
                        u3JX7spduSt35a7c+809Men0rnJX7spduSt35a7clVuiOzXuZQz2QyMK3POLcOzjHd/w3DEnBaa7
                        xgH3z1+nE2h6xx3u8McmFNYN4U55dIkOd6hTpkaZO8wp3QaUuEOO93ZdosUdchC86xI1bvmvT7+6
                        GrfUKX2X6HFLndJ3iSK3zCnoWJoet8Qp+EyxHrfEKSemIG6+U4jDi5rcXKdQJ881ublOwS5R5uad
                        SiePuOpyc5xC5yfQ5eakIaFcos7td4rlILQ2t88ptiwW2tw+p9AuKYDb7RTrcXl9bpdT7LlO9Lld
                        TrG5pAhuu1McSRVK4LY5xZURpwRu8y+6ht0lhXDTOSOcqTfK4KaSi7jzJpXBTTnF5RLE/eeEiRXO
                        BNzYKX8wEu6JSad3NPeC5RSLS+ZTNe6XNBFwynPLMOtxnx3SxXtOsbjkjer7tE9k8a5TLC5ZKL8H
                        pHvpOMWSg22kzH1EV9g55XhFfv6m0X7vSieP3CXL+97+sS63JVnn2jXcm9yFytxkctSHAadza82a
                        ArgtTtnQ3FEfbRMAanPTcB/aT55Rn8xvC+E+WFF03YI9bWvpc9MuXjb4lUir3Ztafe7mlKjzgWZ4
                        XMkVwA1fkd0D0j9Ky8bDnVF4vw9l5FvKP51IRQnclJPPmu8cLimEm3jse0fYft1ppQhuYsl+iROW
                        9lYUZXDjZc0NujX0V3CFcCOnzBv4TcYlcjeHPu6/91sphRvmDUbcoHgx3E8qd+Wu3JW7cv9Pcpf6
                        ezn1cLdBwQK54ZoHcy9K5EZrTMxtXhbIPTV+7h5jGdx4DUxxz0vjfrZicZuvCuM+NTzuzpqnBG4q
                        JktzP64xC+C2RDYp7sc1fQHcd4bPvYuh6HPTkXsb90PMSp2bflNi5X6IEapzr4TcW6dYuH/9Tzr9
                        28Vt+zdydu6NUyzcv5l0eufgPrBVsnNvdl0rc08CuHsvUXS47f8pz8XdOkWV+8heycXdvp1S5Z4E
                        cn+uq8n9yVHJzT2/UOQ+dFVyc5srRe63Edxmosa9cFZC3H+iyw3P3dfio4f7jN7Zps09e+LjZp2D
                        GZr7hhFn45w7Gph7MeLEB0+K437DimsyztUN8BzbUbufisFNVQXcGUV0PmJyExsQNLnbfYw8brxV
                        RZF7E2hlceOAnCL3uYAbhbb0uLfhYSY3DCW+DOaQ6hQCiriRU4YacNjvWMgNw1uR/9+WKzjPu4Af
                        m/vA1kJWWUeLzY1CLmM5hViwz3UANwxxhSR/EQrOcWdDoIAbBosYh6oj5RgpAbdj1vII9rfsfCbh
                        hgGMzE6B89tLryDiPnK1lFzO60nEjQJ0Sz6FWK+cJDJuuJszo1Pg3IJkYULuQ3drCQWuJZicTciN
                        gnRnPAqxfgL9zMDnUm7olJh0hg7Beb2CBcTc8KhgHqeA0VncRnOjPcwzP4VYn7x9yLlhWAKPRbTg
                        nN7gInJu1OqVl0MoNDKjJNwogPUmMfdzRvsh3JzxiBAMSC6oQiHcqOWbJqFQWI8clSBuFMBK6RSe
                        C8O4YQAroVPgXM7pYmHcKBqzaBIJueQ8KTcKYDGc8jNMxUsJOtAWYArlRnvhRh6g1+1AXvtKoSyJ
                        toKh3CiQNG+c2q4C5u4hR4HfcXJutD/LGTLcrRXdKw3oPntwKZwb7YdzDeUdAwXPoeNLhnOjMIHD
                        KV3bjqyl0DWztrcYwY2cYh3Knm3tt0zoEldgKYYb7XYaWwqe9ErZbplw/pyXQgw37okuBn8CR/Qo
                        QJcsXV1HcaPdfOTMop9A+jEMus4dVIrjRjue1kShE1iIdAq6yi8ycqOgEuFJIucO8RiGrhVPx5Hc
                        aK8Wcgq5nwIv7aDjfGGCWG6062kJCtD7V2agFHTJ4sLTbyw3ChkAp1gyM4EgALpOZr5uo7nRwfVL
                        56e0UybOT/NwoxHtVrHv+euWglc3IyQTz40c3LmDOfb8uUoxFiEJuNEd4/FeYHOJuxQnPJCA2+4U
                        +/7hVkuLl1iL7BTc6Bdxmw3IsX+41fbOE+KSRNzIKZv7wcTNvbnzoLq80EASbrxXb9bYzyL0nYJ+
                        lzguScWNwgef72ToieP6G8Ip6Npg7mxJxI0W4jf4xMoaz8CPREKQQbnxNqi/wT+0q7g7+Ef4ddn7
                        cVJxk2mlep5oC5Fn4uCXG5b7mQdpfF/Kc63ydxEl47ak0YMD6Z6WsQK3E2l3uTmnRbCjJSG3y7zn
                        nGmRvO1PyO0wb/embJ+WtaCvlNz0UVQDbspUXrh7iXazJOW2Hdcb9UpZMjXL9oQk5bY4BT7gTclS
                        S1FPabnJ46joAY8MTQj3PCXmJpxCLAOIox7S/SCJuYklDrUMOEGlpP2k5j6GQORiETlFvE04NTcc
                        SctiET12S984J+ZGPDNLQbjMkb5xTsttWWhGlRyCG43irbUoWsbP2L0k50YsrtoobHLL7CU9N5z7
                        9wlLZ+SGI+j5LRHNTkZuMQf8jZL8ZibknojnXV4jAzfjFRUUCiAuh+cOYgj4rqm5V6Ai77k0rFZC
                        btHL9Ueh5971sNzB/Qd+31TccL75kZDAmmm4Q0etIaIu6+G4Ud9jNjZ7M0gO7jtQSXZWMKh2Cm60
                        nUuEjUOG42G4Ub/nMu6g752A+xRUkZ89Dmghnlu4cZPSs4l4xqK5j+V9YuG0qtm5p6BC2BZ2cSux
                        3Ik2gqNZG+XlFvdnE+swRjrukyQuCWgpjjvhwRLh4Zoo7qQHeWRjEMXNOdjEl6i1GO7EB9VEB/Yi
                        uJMfDJSMQwR3+oOYghbDub1HaQPEn8FwbtBHkoPG/OPiwdx5DnazWw3l9hzLD9aEOYuh3KD9ZIkL
                        uCkoArnzJYpgthzGnTMxB28mw7hXmVzSypn2JI47b+IZVush3LkT/XBmM4T7LqNL7scFgFPjEsCd
                        Pz0Rowc59xCJw+CMpuD2txkv/9iIuW0J6tLKm1RNyg2DmF+xMOQ6hVyR3L72UsmXqFHIPVz6RE9P
                        Mm4YnsqZrnLqnFkZN2grWVYISnCM+mEJETcMYo5ycrt7k3DDwEPq/DhQrtmVcJ8M6BLfOAm4QQAv
                        cVYfSo4e+dxDu6QVmOFOqJPP/dzaRj7Zx4rNDYJ3GbKEUbL2yuWG33w2CDaa5V0wj8v9yVI/t2zj
                        xeQGgbuBXEL1fCHifkv+dRCBmX4v4abrDiRyzFjcIDyVKTelTYdU7yzuiZ5LWoGQ4SWXm6o3qMC4
                        LXncIDw1QP5sqCNMwOBe4W87tMDy/pLDDerkz/pNCYzd2s+t75JWiMLLfQe/qY7grPu4/1mCS1qB
                        8Tv1cIP5UcP2HGH3cI/1uN1H2N3cw/yvCZtOQ7mzBQN5ch1hd3Kf63K7jrC7uIf73zU2nYZwK7uk
                        lfUIu4v7XJu6sR5hd3FffV2CJmLuslW5K3flLk+Vu3JX7vJUuSt35S5P+8p9vafcc2/y1DJ1RWb8
                        Kl8fmo/aCEE6sy/1i9bal9S4UDXu3Nelqn2B/Z02RIBmjT1pY8HahC5PtDHE2mxf8mXeLU4PkeKn
                        8U0Nir2LFL9eabMIdN0JcB//5cW+6JcN8X8B85vetwnigQ8AAAAldEVYdGRhdGU6Y3JlYXRlADIw
                        MjAtMDctMDRUMDM6NDU6MjcrMDM6MDDsnuMrAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA3LTA0
                        VDAzOjQ1OjI3KzAzOjAwncNblwAAAABJRU5ErkJggg=="></image>
                  </svg>
               </a>
               | 
               <a id="theme-toggle" onclick="modeSwitcher()" style="cursor: pointer;">
                  <svg version="1.1" class="mail-icon-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 16 16" enable-background="new 0 0 16 16" xml:space="preserve">
                     <image id="image0" width="16" height="16" x="0" y="0" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAABGdBTUEAALGPC/xhBQAAACBjSFJN
                        AAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACYVBMVEU/PzpEREBBQT1CQj4/
                        PztAQDtHR0NJSUU+PjpISERDQz9AQDw5OTRFRUE8PDhCQj1CQj89PTlKSkY+PjlNTUlLS0hEREBD
                        Qz9aWleHh4WtrazBwcHCwsLCwsLCwsLAwMCurq2IiIZgYFxXV1Sbm5rFxcXCwsKgoKBkZGFERECX
                        l5bExMSPj45LS0empqWpqahUVFCnp6axsbFTU09CQj6lpaSpqahISESRkZCNjYtUVFG/v7/FxcW7
                        u7vExMVhYV6ampmTk5FXV1S3t7eenp1VVVHCwsOYmJd3d3XIyMjCwsJdXVqEhIKrq6uGhoSnp6aX
                        l5aAgH6srKzAwMBdXVq8vLzCwsOZmZhNTUm3t7bDw8PCwsKYmJexsbCYmJawsK/CwsJOTkq2trXD
                        w8K9vb1bW1jBwcK9vb2pqaiXl5aCgoCvr66AgH6jo6OGhoNYWFXAwMB9fXvIyMjGxsZeXluamplM
                        TEi5ubmcnJteXlrCwsLGxsaTk5FDQz+dnZzJycljY2CJiYe+vr5bW1hUVFCcnJuVlZRGRkKmpqW4
                        uLd8fHl/f33AwMCioqFFRUFQUEyurq6wsLCFhYNkZGBSUk9SUk9hYV6JiYenp6bHx8inp6ZKSkZP
                        T0unp6bExMS6urm0tLSzs7O4uLjExMSioqGMjIrExMTKysuVlZRFRUFiYl6hoaDExMTIyMicnJtr
                        a2hhYV6Li4qxsbDDw8O+vr2zs7KHh4VlZWPHx8fGxsbCwsLJycnIyMjDw8PKysvExMTKysrMzMzL
                        y8vFxcXJycrFxcbGxsfHx8jIyMnExMX///9/oPL/AAAAuHRSTlMAAAAAAAAAAAAAAAAAAAAAAAAA
                        AAAAAQEYUJzK4+3kzJxYGSKE5+qSIgJe7GoGlqYMprcLAZapAl1uH/H70vMkhWYP1ZoW7G5G/fMb
                        UbpinWtbrMsd1OVuBtfn7m3IbMnlBNTozhzz1Z5sVq5Yt2YW7zf48iCTD9CiH/DzZwWv9Ctp0QsQ
                        rnABqNFKO82sAg22uF0fBwUfV7T7uw0Lp/PYycnV8qtu7/JxASeZ7vGgLh5hqebTrWUhilEqqgAA
                        AAFiS0dEyvO0NuYAAAAJcEhZcwAACxMAAAsTAQCanBgAAAAHdElNRQfkCBYKLR1KuANWAAACD0lE
                        QVQoz23TZXvUQBAA4CG7R09K4ZANFtwKFHcvTrHi0BZ3d5dCKe4uxd1d7jbZJCQFwr9ik1wud83N
                        hyRP3uzOk5lZIE6IUK95i5atWktSm7bt2ncQQHTfg3MVUMdOnRNJ6kRS7tK1GxZSXEhIqH53SWE0
                        HUzp0TMPe6txUS9Vo1nB1N59wi6HivrqNBByv/7Y5gGRgTmU+6DBAufwkF85kCczhoZFwMOGa0Ed
                        MVKjbNRogOgYOahG8dhxJpXHx2DCxOBiY1I0f/IUykqmwjQllwpig+kJWjsDZiYCWop4yQpm6TQ5
                        G+bkVhKaW8LYPJhfR9UFUafcaOEik5ZBebbqFa4SlLf4Ny2vw/oS5CqJRpbavCxr5wpPScPlK0y6
                        ElZlNNJI5bUjtHoNY2th3R9f1/tKCjbINLkRNtWmdy5t5KsY2/yXWltg6zbNqxXylcS376Bs5y7A
                        u+V0JX2N7dlrUmUfArz/gL384KFMDR8+olBWeTQOJH7M4N2vOp6PPIzi6hN8gIyTSASCTp3mz9qZ
                        s43jYQEhAZoI587zPqkXLtrDRPClyzy9aV25eu1602Y3bt66fYen0+/WhNw5x/fuq8we/wcPHz1+
                        8tSyW2w8q8HeKcGR5y8s/gHTTPOffVdevnodyzhE+M3bd7Lp1JeZ1vsPH53/KEwx/xX06fOXqq+S
                        VPbt+4+fQjx1BP8DniGUSqIRNGsAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjAtMDgtMjJUMTA6NDU6
                        MjkrMDM6MDBYVnojAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIwLTA4LTIyVDEwOjQ1OjI5KzAzOjAw
                        KQvCnwAAAABJRU5ErkJggg=="></image>
                  </svg>
               </a>
            </li>
         </ul>
      </div>
      <div align="center" class="footer-col-1 column">
         <a href="https://www.amanchadha.com/">www.amanchadha.com</a>
      </div>
      <!-- <div class="footer-col-2 column">
         </div>
         
         <div class="footer-col-3 column">
         
         </div> -->
   </div>
   <!-- add permalinks to headers in kramdown -->
   <!-- <script>
      var headings = document.querySelectorAll("h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]");
      
      for (var i = 0; i < headings.length; i++) {
          headings[i].innerHTML =
              '<a href="#' + headings[i].id + '">' +
                  headings[i].innerText +
              '</a>';
      }
   </script>   -->

   <!-- add title case to section headings -->
   <script src="https://aman.ai/js/ap-style-title-case.js" type="text/javascript"></script>   
   <script>
      var headings = document.querySelectorAll("h1, h1[id], h2[id], h3[id], h4[id], h5[id], h6[id]");
      
      for (var i = 0; i < headings.length; i++) {
          headings[i].innerHTML = titleCase(headings[i].innerHTML);
      }
      
      var toc = document.querySelectorAll("a[id^='markdown-toc-']");
      
      for (var i = 0; i < toc.length; i++) {
          toc[i].innerHTML = titleCase(toc[i].innerHTML);
      }      
   </script>        
</footer>

    <script src="https://aman.ai/js/nanobar.min.js"></script>
    <script>
    var options = {
      classname: 'my-class',
        id: 'my-id'
    };
    var nanobar = new Nanobar( options );
    nanobar.go(100);
    </script><div class="nanobar my-class" id="my-id" style="position: fixed;"><div class="bar"></div></div>     

    <!-- Scroll bar -->
    <div class="progress-bar"></div>
    <!-- Script used to generate --scroll variable with current scroll percentage value -->
    <script>
    var element = document.documentElement,
      body = document.body,
      scrollTop = 'scrollTop',
      scrollHeight = 'scrollHeight',
      progress = document.querySelector('.progress-bar'),
      scroll;

    document.addEventListener('scroll', function() {
      scroll = (element[scrollTop]||body[scrollTop]) / ((element[scrollHeight]||body[scrollHeight]) - element.clientHeight) * 100;
      progress.style.setProperty('--scroll', scroll + '%');
    });
    </script>    
    <!-- theme switcher -->
    <script src="https://aman.ai/js/mode-switcher.js"></script>
    <!-- mathjax -->
<!--     <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" id=""></script>
    <!-- make mathjax responsive -->
    <script type="text/x-mathjax-config;executed=true">
      MathJax.Hub.Config({
       "HTML-CSS": { linebreaks: { automatic: true } },
       "SVG": { linebreaks: { automatic: true } },
      });
    </script>
    <!-- Copy button -->
    <script src="https://aman.ai/js/clipboard.min.js"></script>
    <script src="https://aman.ai/js/copy.js"></script>      
    

<ins class="adsbygoogle adsbygoogle-noablate" data-adsbygoogle-status="done" style="display: none !important;" data-ad-status="unfilled"><div id="aswift_0_host" style="border: none; height: 0px; width: 0px; margin: 0px; padding: 0px; position: relative; visibility: visible; background-color: transparent; display: inline-block;"><iframe id="aswift_0" name="aswift_0" style="left:0;position:absolute;top:0;border:0;width:undefinedpx;height:undefinedpx;min-height:auto;max-height:none;min-width:auto;max-width:none;" sandbox="allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation" frameborder="0" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no" allow="attribution-reporting; run-ad-auction" src="https://googleads.g.doubleclick.net/pagead/ads?client=ca-pub-5905744527956213&amp;output=html&amp;adk=1812271804&amp;adf=3025194257&amp;lmt=1766895470&amp;plaf=1%3A2%2C2%3A2%2C7%3A2&amp;plat=1%3A128%2C2%3A128%2C3%3A128%2C4%3A128%2C8%3A128%2C9%3A32776%2C16%3A8388608%2C17%3A32%2C24%3A32%2C25%3A32%2C30%3A1048576%2C32%3A32%2C41%3A32%2C42%3A32&amp;format=0x0&amp;url=https%3A%2F%2Faman.ai%2Fprimers%2Fai%2FLLM-as-a-judge%2F&amp;pra=5&amp;asro=0&amp;aiapm=0.1542&amp;aiapmd=0.1423&amp;aiapmi=0.16&amp;aiapmid=1&amp;aiact=0.5423&amp;aiactd=0.7&amp;aicct=0.7&amp;aicctd=0.5799&amp;ailct=0.5849&amp;ailctd=0.65&amp;aimart=4&amp;aimartd=4&amp;aieuf=1&amp;aicrs=1&amp;uach=WyIiLCIiLCIiLCIiLCIiLG51bGwsMCxudWxsLCIiLG51bGwsMF0.&amp;abgtt=6&amp;dt=1766922458536&amp;bpp=1&amp;bdt=50&amp;idt=9&amp;shv=r20251211&amp;mjsv=m202512100101&amp;ptt=9&amp;saldr=aa&amp;abxe=1&amp;cookie_enabled=1&amp;eoidce=1&amp;nras=1&amp;correlator=6532575659192&amp;frm=20&amp;pv=2&amp;u_tz=330&amp;u_his=27&amp;u_h=600&amp;u_w=800&amp;u_ah=600&amp;u_aw=800&amp;u_cd=24&amp;u_sd=1&amp;dmc=8&amp;adx=-12245933&amp;ady=-12245933&amp;biw=800&amp;bih=600&amp;scr_x=0&amp;scr_y=0&amp;eid=31095745%2C31095904%2C31096042%2C95376241%2C95378749%2C95344791&amp;oid=2&amp;pvsid=7822186032348587&amp;tmod=112874479&amp;uas=0&amp;nvt=1&amp;fsapi=1&amp;fc=1920&amp;brdim=22%2C22%2C22%2C22%2C800%2C0%2C756%2C556%2C800%2C600&amp;vis=1&amp;rsz=%7C%7Cs%7C&amp;abl=NS&amp;fu=33792&amp;bc=31&amp;bz=0.95&amp;psd=W251bGwsW251bGwsbnVsbCxudWxsLCJkZXByZWNhdGVkX2thbm9uIl1d&amp;ifi=1&amp;uci=a!1&amp;fsb=1&amp;dtd=12" data-google-container-id="a!1" tabindex="0" title="Advertisement" aria-label="Advertisement" data-load-complete="true"></iframe></div></ins><div style="position: absolute; width: 0px; height: 0px; overflow: hidden; padding: 0px; border: 0px; margin: 0px;"><div id="MathJax_Font_Test" style="position: absolute; visibility: hidden; top: 0px; left: 0px; width: auto; padding: 0px; border: 0px; margin: 0px; white-space: nowrap; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal; font-size: 40px; font-weight: normal; font-style: normal; font-size-adjust: none; font-family: STIXSizeOneSym, sans-serif;"></div></div><iframe name="googlefcPresent" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><iframe name="__tcfapiLocator" src="about:blank" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><iframe name="googlefcInactive" src="about:blank" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><iframe name="googlefcLoaded" src="about:blank" style="display: none; width: 0px; height: 0px; border: none; z-index: -1000; left: -1000px; top: -1000px;"></iframe><iframe src="https://www.google.com/recaptcha/api2/aframe" width="0" height="0" style="display: none;"></iframe></body><iframe id="google_esf" name="google_esf" src="https://googleads.g.doubleclick.net/pagead/html/r20251211/r20190131/zrt_lookup.html" style="display: none;"></iframe></html>