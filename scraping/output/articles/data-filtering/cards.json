[
  {
    "id": "ai-data-filtering-importance-of-high-quality-data-1",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Overview",
    "title": "Importance of High-Quality Data",
    "subtitle": "Overview",
    "contentHtml": "<ul>\n  <li>\n    <p>Data quality is the <strong>foundation of effective machine learning</strong>. Large language models (LLMs), code generation models, and multimodal systems rely on vast amounts of data for both <strong>pretraining</strong> and <strong>post-training</strong> (e.g., supervised fine-tuning, preference modeling via  (RLHF), and safety alignment).</p>\n  </li>\n  <li>\n    <p>If this data is noisy or low-quality, models may:</p>\n\n    <ul>\n      <li>Converge more slowly,</li>\n      <li>Generalize poorly,</li>\n      <li>Or even become unstable or unsafe in downstream applications.</li>\n    </ul>\n  </li>\n  <li>\n    <p>In the worst case, corrupted data introduces <strong>systematic biases, hallucinations, and unsafe outputs</strong> that are difficult to remove later.</p>\n  </li>\n</ul>\n<p>Data quality is the <strong>foundation of effective machine learning</strong>. Large language models (LLMs), code generation models, and multimodal systems rely on vast amounts of data for both <strong>pretraining</strong> and <strong>post-training</strong> (e.g., supervised fine-tuning, preference modeling via  (RLHF), and safety alignment).</p>\n<p>If this data is noisy or low-quality, models may:</p>\n<ul>\n      <li>Converge more slowly,</li>\n      <li>Generalize poorly,</li>\n      <li>Or even become unstable or unsafe in downstream applications.</li>\n    </ul>\n<p>In the worst case, corrupted data introduces <strong>systematic biases, hallucinations, and unsafe outputs</strong> that are difficult to remove later.</p>",
    "contentMarkdown": "*   Data quality is the **foundation of effective machine learning**. Large language models (LLMs), code generation models, and multimodal systems rely on vast amounts of data for both **pretraining** and **post-training** (e.g., supervised fine-tuning, preference modeling via (RLHF), and safety alignment).\n    \n*   If this data is noisy or low-quality, models may:\n    \n    *   Converge more slowly,\n    *   Generalize poorly,\n    *   Or even become unstable or unsafe in downstream applications.\n*   In the worst case, corrupted data introduces **systematic biases, hallucinations, and unsafe outputs** that are difficult to remove later.\n    \n\nData quality is the **foundation of effective machine learning**. Large language models (LLMs), code generation models, and multimodal systems rely on vast amounts of data for both **pretraining** and **post-training** (e.g., supervised fine-tuning, preference modeling via (RLHF), and safety alignment).\n\nIf this data is noisy or low-quality, models may:\n\n*   Converge more slowly,\n*   Generalize poorly,\n*   Or even become unstable or unsafe in downstream applications.\n\nIn the worst case, corrupted data introduces **systematic biases, hallucinations, and unsafe outputs** that are difficult to remove later.",
    "order": 1,
    "orderInChapter": 1,
    "difficulty": 2,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "machine learning",
      "llm",
      "fine-tuning"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 173,
      "contentLength": 1534
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#importance-of-high-quality-data",
    "scrapedAt": "2025-12-28T11:48:17.190Z"
  },
  {
    "id": "ai-data-filtering-formal-perspective-why-noise-harms-generalization-2",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Overview",
    "title": "Formal Perspective: Why Noise Harms Generalization",
    "subtitle": "Overview",
    "contentHtml": "<ul>\n  <li>\n    <p>Let <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 0.888em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.73em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mi\" id=\"MathJax-Span-3\" style=\"font-family: STIXGeneral-Italic;\">D</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>D</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-1\">D</script> be the training dataset and <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-2-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>M</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-4\" style=\"width: 1.148em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.94em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.94em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-5\"><span class=\"mi\" id=\"MathJax-Span-6\" style=\"font-family: STIXGeneral-Italic;\">M<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.055em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>M</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-2\">M</script> the model trained on it. Under the <a href=\"https://en.wikipedia.org/wiki/Empirical_risk_minimization\">Empirical Risk Minimization</a> (ERM) principle, model parameters <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-3-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B8;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-7\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.58em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-8\"><span class=\"mi\" id=\"MathJax-Span-9\" style=\"font-family: STIXGeneral-Italic;\">θ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>θ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-3\">\\theta</script> are learned by minimizing:</p>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-4-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><munder><mo movablelimits=&quot;true&quot; form=&quot;prefix&quot;>min</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>&amp;#x03B8;</mi></mrow></munder><mfrac><mn>1</mn><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mi>D</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow></mfrac><munder><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2208;</mo><mi>D</mi></mrow></munder><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;>L</mi></mrow><mo stretchy=&quot;false&quot;>(</mo><msub><mi>f</mi><mi>&amp;#x03B8;</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>,</mo><mi>y</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-10\" style=\"width: 12.451em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 10.367em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.68em, 1010.32em, 3.753em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-11\"><span class=\"munderover\" id=\"MathJax-Span-12\"><span style=\"display: inline-block; position: relative; width: 1.565em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1001.57em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mo\" id=\"MathJax-Span-13\" style=\"font-family: STIXGeneral-Regular;\">min</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1000.37em, 4.273em, -999.997em); top: -3.331em; left: 0.628em;\"><span class=\"texatom\" id=\"MathJax-Span-14\"><span class=\"mrow\" id=\"MathJax-Span-15\"><span class=\"mi\" id=\"MathJax-Span-16\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">θ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mfrac\" id=\"MathJax-Span-17\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 1.461em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.42em, 4.169em, -999.997em); top: -4.685em; left: 50%; margin-left: -0.258em;\"><span class=\"mn\" id=\"MathJax-Span-18\" style=\"font-family: STIXGeneral-Regular;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.18em, 1001.25em, 4.378em, -999.997em); top: -3.331em; left: 50%; margin-left: -0.674em;\"><span class=\"mrow\" id=\"MathJax-Span-19\"><span class=\"texatom\" id=\"MathJax-Span-20\"><span class=\"mrow\" id=\"MathJax-Span-21\"><span class=\"mo\" id=\"MathJax-Span-22\" style=\"font-family: STIXVariants;\">|</span></span></span><span class=\"mi\" id=\"MathJax-Span-23\" style=\"font-family: STIXGeneral-Italic;\">D</span><span class=\"texatom\" id=\"MathJax-Span-24\"><span class=\"mrow\" id=\"MathJax-Span-25\"><span class=\"mo\" id=\"MathJax-Span-26\" style=\"font-family: STIXVariants;\">|</span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1001.46em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.461em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span><span class=\"munderover\" id=\"MathJax-Span-27\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 2.294em; height: 0px;\"><span style=\"position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0.471em;\"><span class=\"mo\" id=\"MathJax-Span-28\" style=\"font-family: STIXSizeOneSym; vertical-align: -0.518em;\">∑</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1002.24em, 4.43em, -999.997em); top: -2.862em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-29\"><span class=\"mrow\" id=\"MathJax-Span-30\"><span class=\"mo\" id=\"MathJax-Span-31\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-32\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-33\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">,</span><span class=\"mi\" id=\"MathJax-Span-34\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">y</span><span class=\"mo\" id=\"MathJax-Span-35\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-36\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">∈</span><span class=\"mi\" id=\"MathJax-Span-37\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">D</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"texatom\" id=\"MathJax-Span-38\" style=\"padding-left: 0.211em;\"><span class=\"mrow\" id=\"MathJax-Span-39\"><span class=\"mi\" id=\"MathJax-Span-40\" style=\"font-family: STIXNonUnicode-Italic;\"></span></span></span><span class=\"mo\" id=\"MathJax-Span-41\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"msubsup\" id=\"MathJax-Span-42\"><span style=\"display: inline-block; position: relative; width: 0.68em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-43\" style=\"font-family: STIXGeneral-Italic;\">f<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.159em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.263em;\"><span class=\"mi\" id=\"MathJax-Span-44\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">θ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-45\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-46\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-47\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-48\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mi\" id=\"MathJax-Span-49\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.211em;\">y</span><span class=\"mo\" id=\"MathJax-Span-50\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.747em; border-left: 0px solid; width: 0px; height: 3.441em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><munder><mo movablelimits=\"true\" form=\"prefix\">min</mo><mrow class=\"MJX-TeXAtom-ORD\"><mi>θ</mi></mrow></munder><mfrac><mn>1</mn><mrow><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow><mi>D</mi><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow></mrow></mfrac><munder><mo>∑</mo><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>∈</mo><mi>D</mi></mrow></munder><mrow class=\"MJX-TeXAtom-ORD\"><mi class=\"MJX-tex-caligraphic\" mathvariant=\"script\">L</mi></mrow><mo stretchy=\"false\">(</mo><msub><mi>f</mi><mi>θ</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-4\">\\min_{\\theta} \\frac{1}{|D|} \\sum_{(x,y)\\in D} \\mathcal{L}(f_\\theta(x), y)</script>\n\n    <ul>\n      <li>where <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-5-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;>L</mi></mrow></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-51\" style=\"width: 0.888em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.68em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-52\"><span class=\"texatom\" id=\"MathJax-Span-53\"><span class=\"mrow\" id=\"MathJax-Span-54\"><span class=\"mi\" id=\"MathJax-Span-55\" style=\"font-family: STIXNonUnicode-Italic;\"></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mrow class=\"MJX-TeXAtom-ORD\"><mi class=\"MJX-tex-caligraphic\" mathvariant=\"script\">L</mi></mrow></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-5\">\\mathcal{L}</script> is the loss function.</li>\n    </ul>\n  </li>\n  <li>This assumes that <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-6-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi><mo>&amp;#x223C;</mo><mi>P</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-56\" style=\"width: 5.523em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 4.586em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.409em, 1004.53em, 2.607em, -999.997em); top: -2.237em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-57\"><span class=\"mi\" id=\"MathJax-Span-58\" style=\"font-family: STIXGeneral-Italic;\">D</span><span class=\"mo\" id=\"MathJax-Span-59\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">∼</span><span class=\"mi\" id=\"MathJax-Span-60\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.315em;\">P</span><span class=\"mo\" id=\"MathJax-Span-61\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-62\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-63\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mi\" id=\"MathJax-Span-64\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.211em;\">y</span><span class=\"mo\" id=\"MathJax-Span-65\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.242em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>D</mi><mo>∼</mo><mi>P</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-6\">D \\sim P(x,y)</script>, i.e. that the dataset represents the true data distribution.</li>\n  <li>\n    <p>If <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-7-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-66\" style=\"width: 0.888em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.73em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-67\"><span class=\"mi\" id=\"MathJax-Span-68\" style=\"font-family: STIXGeneral-Italic;\">D</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>D</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-7\">D</script> contains mislabeled, adversarial, duplicated, or off-distribution samples, then the learned <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-8-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>&amp;#x03B8;</mi><mo>&amp;#x2217;</mo></msup></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-69\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.305em, 1000.99em, 2.294em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-70\"><span class=\"msubsup\" id=\"MathJax-Span-71\"><span style=\"display: inline-block; position: relative; width: 0.992em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-72\" style=\"font-family: STIXGeneral-Italic;\">θ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -4.372em; left: 0.576em;\"><span class=\"mo\" id=\"MathJax-Span-73\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">∗</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.003em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>θ</mi><mo>∗</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-8\">\\theta^*</script> will minimize a <strong>distorted empirical risk</strong>, leading to:</p>\n\n    <ul>\n      <li>Poor generalization to unseen data,</li>\n      <li>Overfitting to spurious correlations,</li>\n      <li>Or systematic unsafe behaviors.</li>\n    </ul>\n  </li>\n  <li>This is well-documented in studies such as <a href=\"https://arxiv.org/abs/2104.06835\">Data Quality Determines Model Performance</a> and <a href=\"https://arxiv.org/abs/2001.08361\">Scaling Laws for Neural Language Models</a>, which show diminishing returns from scaling when low-quality data dominates.</li>\n</ul>\n<p>Let <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-1-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-1\" style=\"width: 0.888em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.73em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-2\"><span class=\"mi\" id=\"MathJax-Span-3\" style=\"font-family: STIXGeneral-Italic;\">D</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>D</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-1\">D</script> be the training dataset and <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-2-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>M</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-4\" style=\"width: 1.148em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.94em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.94em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-5\"><span class=\"mi\" id=\"MathJax-Span-6\" style=\"font-family: STIXGeneral-Italic;\">M<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.055em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>M</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-2\">M</script> the model trained on it. Under the <a href=\"https://en.wikipedia.org/wiki/Empirical_risk_minimization\">Empirical Risk Minimization</a> (ERM) principle, model parameters <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-3-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B8;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-7\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.58em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-8\"><span class=\"mi\" id=\"MathJax-Span-9\" style=\"font-family: STIXGeneral-Italic;\">θ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>θ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-3\">\\theta</script> are learned by minimizing:</p>\n<ul>\n      <li>where <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-5-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi class=&quot;MJX-tex-caligraphic&quot; mathvariant=&quot;script&quot;>L</mi></mrow></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-51\" style=\"width: 0.888em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.68em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-52\"><span class=\"texatom\" id=\"MathJax-Span-53\"><span class=\"mrow\" id=\"MathJax-Span-54\"><span class=\"mi\" id=\"MathJax-Span-55\" style=\"font-family: STIXNonUnicode-Italic;\"></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mrow class=\"MJX-TeXAtom-ORD\"><mi class=\"MJX-tex-caligraphic\" mathvariant=\"script\">L</mi></mrow></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-5\">\\mathcal{L}</script> is the loss function.</li>\n    </ul>\n<p>If <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-7-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>D</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-66\" style=\"width: 0.888em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.73em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-67\"><span class=\"mi\" id=\"MathJax-Span-68\" style=\"font-family: STIXGeneral-Italic;\">D</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>D</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-7\">D</script> contains mislabeled, adversarial, duplicated, or off-distribution samples, then the learned <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-8-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mi>&amp;#x03B8;</mi><mo>&amp;#x2217;</mo></msup></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-69\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.305em, 1000.99em, 2.294em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-70\"><span class=\"msubsup\" id=\"MathJax-Span-71\"><span style=\"display: inline-block; position: relative; width: 0.992em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-72\" style=\"font-family: STIXGeneral-Italic;\">θ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -4.372em; left: 0.576em;\"><span class=\"mo\" id=\"MathJax-Span-73\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">∗</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.003em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mi>θ</mi><mo>∗</mo></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-8\">\\theta^*</script> will minimize a <strong>distorted empirical risk</strong>, leading to:</p>\n<ul>\n      <li>Poor generalization to unseen data,</li>\n      <li>Overfitting to spurious correlations,</li>\n      <li>Or systematic unsafe behaviors.</li>\n    </ul>",
    "contentMarkdown": "*   Let DDD be the training dataset and MMM the model trained on it. Under the [Empirical Risk Minimization](https://en.wikipedia.org/wiki/Empirical_risk_minimization) (ERM) principle, model parameters θθ\\\\theta are learned by minimizing:\n    \n    minθ1|D|∑(x,y)∈D(fθ(x),y)minθ1|D|∑(x,y)∈DL(fθ(x),y)\n    \n    \\\\min\\_{\\\\theta} \\\\frac{1}{|D|} \\\\sum\\_{(x,y)\\\\in D} \\\\mathcal{L}(f\\_\\\\theta(x), y)\n    *   where L\\\\mathcal{L} is the loss function.\n*   This assumes that D∼P(x,y)D∼P(x,y)D \\\\sim P(x,y), i.e. that the dataset represents the true data distribution.\n*   If DDD contains mislabeled, adversarial, duplicated, or off-distribution samples, then the learned θ∗θ∗\\\\theta^\\* will minimize a **distorted empirical risk**, leading to:\n    \n    *   Poor generalization to unseen data,\n    *   Overfitting to spurious correlations,\n    *   Or systematic unsafe behaviors.\n*   This is well-documented in studies such as [Data Quality Determines Model Performance](https://arxiv.org/abs/2104.06835) and [Scaling Laws for Neural Language Models](https://arxiv.org/abs/2001.08361), which show diminishing returns from scaling when low-quality data dominates.\n\nLet DDD be the training dataset and MMM the model trained on it. Under the [Empirical Risk Minimization](https://en.wikipedia.org/wiki/Empirical_risk_minimization) (ERM) principle, model parameters θθ\\\\theta are learned by minimizing:\n\n*   where L\\\\mathcal{L} is the loss function.\n\nIf DDD contains mislabeled, adversarial, duplicated, or off-distribution samples, then the learned θ∗θ∗\\\\theta^\\* will minimize a **distorted empirical risk**, leading to:\n\n*   Poor generalization to unseen data,\n*   Overfitting to spurious correlations,\n*   Or systematic unsafe behaviors.",
    "order": 2,
    "orderInChapter": 2,
    "difficulty": 3,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "loss function"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 197,
      "contentLength": 29367
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#formal-perspective:-why-noise-harms-generalization",
    "scrapedAt": "2025-12-28T11:48:17.190Z"
  },
  {
    "id": "ai-data-filtering-filtering-in-pretraining-3",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Overview",
    "title": "Filtering in Pretraining",
    "subtitle": "Overview",
    "contentHtml": "<ul>\n  <li>\n    <p>Pretraining typically uses <strong>web-scale corpora</strong> (e.g., <a href=\"https://commoncrawl.org/\">Common Crawl</a>, <a href=\"https://pile.eleuther.ai/\">The Pile</a>) containing trillions of tokens.</p>\n  </li>\n  <li>\n    <p>Even a small fraction of <strong>corrupted data</strong> (spam, duplicates, off-domain content, adversarial injections) can:</p>\n\n    <ul>\n      <li>Skew token frequency distributions,</li>\n      <li>Amplify social or cultural biases,</li>\n      <li>Reduce model capacity available for rare but important phenomena.</li>\n    </ul>\n  </li>\n  <li>\n    <p>Filtering during pretraining aims to:</p>\n\n    <ul>\n      <li>Remove low-quality or irrelevant documents using <strong>statistical heuristics</strong> (length, perplexity, n-gram diversity, language ID).</li>\n      <li>Enforce <strong>diversity and coverage</strong> to avoid mode collapse on common content.</li>\n      <li><strong>Prevent contamination</strong> from test sets or benchmark datasets (avoiding data leakage).</li>\n    </ul>\n  </li>\n  <li>\n    <p>Relevant large-scale filtering pipelines include <a href=\"https://www.tensorflow.org/datasets/catalog/c4\">C4</a> (used in <a href=\"https://arxiv.org/abs/1910.10683\">T5</a>) and <a href=\"https://arxiv.org/abs/2306.01116\">RefinedWeb</a>.</p>\n  </li>\n</ul>\n<p>Pretraining typically uses <strong>web-scale corpora</strong> (e.g., <a href=\"https://commoncrawl.org/\">Common Crawl</a>, <a href=\"https://pile.eleuther.ai/\">The Pile</a>) containing trillions of tokens.</p>\n<p>Even a small fraction of <strong>corrupted data</strong> (spam, duplicates, off-domain content, adversarial injections) can:</p>\n<ul>\n      <li>Skew token frequency distributions,</li>\n      <li>Amplify social or cultural biases,</li>\n      <li>Reduce model capacity available for rare but important phenomena.</li>\n    </ul>\n<p>Filtering during pretraining aims to:</p>\n<ul>\n      <li>Remove low-quality or irrelevant documents using <strong>statistical heuristics</strong> (length, perplexity, n-gram diversity, language ID).</li>\n      <li>Enforce <strong>diversity and coverage</strong> to avoid mode collapse on common content.</li>\n      <li><strong>Prevent contamination</strong> from test sets or benchmark datasets (avoiding data leakage).</li>\n    </ul>\n<p>Relevant large-scale filtering pipelines include <a href=\"https://www.tensorflow.org/datasets/catalog/c4\">C4</a> (used in <a href=\"https://arxiv.org/abs/1910.10683\">T5</a>) and <a href=\"https://arxiv.org/abs/2306.01116\">RefinedWeb</a>.</p>",
    "contentMarkdown": "*   Pretraining typically uses **web-scale corpora** (e.g., [Common Crawl](https://commoncrawl.org/), [The Pile](https://pile.eleuther.ai/)) containing trillions of tokens.\n    \n*   Even a small fraction of **corrupted data** (spam, duplicates, off-domain content, adversarial injections) can:\n    \n    *   Skew token frequency distributions,\n    *   Amplify social or cultural biases,\n    *   Reduce model capacity available for rare but important phenomena.\n*   Filtering during pretraining aims to:\n    \n    *   Remove low-quality or irrelevant documents using **statistical heuristics** (length, perplexity, n-gram diversity, language ID).\n    *   Enforce **diversity and coverage** to avoid mode collapse on common content.\n    *   **Prevent contamination** from test sets or benchmark datasets (avoiding data leakage).\n*   Relevant large-scale filtering pipelines include [C4](https://www.tensorflow.org/datasets/catalog/c4) (used in [T5](https://arxiv.org/abs/1910.10683)) and [RefinedWeb](https://arxiv.org/abs/2306.01116).\n    \n\nPretraining typically uses **web-scale corpora** (e.g., [Common Crawl](https://commoncrawl.org/), [The Pile](https://pile.eleuther.ai/)) containing trillions of tokens.\n\nEven a small fraction of **corrupted data** (spam, duplicates, off-domain content, adversarial injections) can:\n\n*   Skew token frequency distributions,\n*   Amplify social or cultural biases,\n*   Reduce model capacity available for rare but important phenomena.\n\nFiltering during pretraining aims to:\n\n*   Remove low-quality or irrelevant documents using **statistical heuristics** (length, perplexity, n-gram diversity, language ID).\n*   Enforce **diversity and coverage** to avoid mode collapse on common content.\n*   **Prevent contamination** from test sets or benchmark datasets (avoiding data leakage).\n\nRelevant large-scale filtering pipelines include [C4](https://www.tensorflow.org/datasets/catalog/c4) (used in [T5](https://arxiv.org/abs/1910.10683)) and [RefinedWeb](https://arxiv.org/abs/2306.01116).",
    "order": 3,
    "orderInChapter": 3,
    "difficulty": 2,
    "estimatedMinutes": 2,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 212,
      "contentLength": 2538
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#filtering-in-pretraining",
    "scrapedAt": "2025-12-28T11:48:17.190Z"
  },
  {
    "id": "ai-data-filtering-filtering-in-post-training-4",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Overview",
    "title": "Filtering in Post-Training",
    "subtitle": "Overview",
    "contentHtml": "<ul>\n  <li>\n    <p>Post-training datasets are much smaller (millions rather than billions of samples), so <strong>every example carries much more weight</strong>. Poor quality data can directly:</p>\n\n    <ul>\n      <li>Teach models unsafe behavior,</li>\n      <li>Collapse preference gradients,</li>\n      <li>Or induce refusal bias from ambiguous labels.</li>\n    </ul>\n  </li>\n  <li>\n    <p>Filtering in post-training is used to:</p>\n\n    <ul>\n      <li>Eliminate <strong>ambiguous or low-consensus labels</strong>, which destabilize supervised fine-tuning.</li>\n      <li>Remove <strong>unsafe, toxic, or policy-violating examples</strong> before they propagate into model behavior.</li>\n      <li>Ensure that prompts are <strong>challenging yet solvable</strong>, which provides strong preference signals during RLHF.</li>\n    </ul>\n  </li>\n  <li>\n    <p>Good references for post-training data curation include the <a href=\"https://openai.com/research/learning-from-human-feedback\">OpenAI RLHF blog</a> and <a href=\"https://www.anthropic.com/news/constitutional-ai\">Anthropic’s HH-RLHF paper</a>.</p>\n  </li>\n</ul>\n<p>Post-training datasets are much smaller (millions rather than billions of samples), so <strong>every example carries much more weight</strong>. Poor quality data can directly:</p>\n<ul>\n      <li>Teach models unsafe behavior,</li>\n      <li>Collapse preference gradients,</li>\n      <li>Or induce refusal bias from ambiguous labels.</li>\n    </ul>\n<p>Filtering in post-training is used to:</p>\n<ul>\n      <li>Eliminate <strong>ambiguous or low-consensus labels</strong>, which destabilize supervised fine-tuning.</li>\n      <li>Remove <strong>unsafe, toxic, or policy-violating examples</strong> before they propagate into model behavior.</li>\n      <li>Ensure that prompts are <strong>challenging yet solvable</strong>, which provides strong preference signals during RLHF.</li>\n    </ul>\n<p>Good references for post-training data curation include the <a href=\"https://openai.com/research/learning-from-human-feedback\">OpenAI RLHF blog</a> and <a href=\"https://www.anthropic.com/news/constitutional-ai\">Anthropic’s HH-RLHF paper</a>.</p>",
    "contentMarkdown": "*   Post-training datasets are much smaller (millions rather than billions of samples), so **every example carries much more weight**. Poor quality data can directly:\n    \n    *   Teach models unsafe behavior,\n    *   Collapse preference gradients,\n    *   Or induce refusal bias from ambiguous labels.\n*   Filtering in post-training is used to:\n    \n    *   Eliminate **ambiguous or low-consensus labels**, which destabilize supervised fine-tuning.\n    *   Remove **unsafe, toxic, or policy-violating examples** before they propagate into model behavior.\n    *   Ensure that prompts are **challenging yet solvable**, which provides strong preference signals during RLHF.\n*   Good references for post-training data curation include the [OpenAI RLHF blog](https://openai.com/research/learning-from-human-feedback) and [Anthropic’s HH-RLHF paper](https://www.anthropic.com/news/constitutional-ai).\n    \n\nPost-training datasets are much smaller (millions rather than billions of samples), so **every example carries much more weight**. Poor quality data can directly:\n\n*   Teach models unsafe behavior,\n*   Collapse preference gradients,\n*   Or induce refusal bias from ambiguous labels.\n\nFiltering in post-training is used to:\n\n*   Eliminate **ambiguous or low-consensus labels**, which destabilize supervised fine-tuning.\n*   Remove **unsafe, toxic, or policy-violating examples** before they propagate into model behavior.\n*   Ensure that prompts are **challenging yet solvable**, which provides strong preference signals during RLHF.\n\nGood references for post-training data curation include the [OpenAI RLHF blog](https://openai.com/research/learning-from-human-feedback) and [Anthropic’s HH-RLHF paper](https://www.anthropic.com/news/constitutional-ai).",
    "order": 4,
    "orderInChapter": 4,
    "difficulty": 2,
    "estimatedMinutes": 2,
    "tags": [
      "datatraining",
      "fine-tuning"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 201,
      "contentLength": 2159
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#filtering-in-post-training",
    "scrapedAt": "2025-12-28T11:48:17.190Z"
  },
  {
    "id": "ai-data-filtering-benefits-of-rigorous-filtering-5",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Overview",
    "title": "Benefits of Rigorous Filtering",
    "subtitle": "Overview",
    "contentHtml": "<p>Rigorous data filtering improves both <strong>model performance</strong> and <strong>training efficiency</strong>. Key benefits include:</p>\n<ol>\n  <li>\n    <p><strong>Better Generalization</strong></p>\n\n    <ul>\n      <li>Removes noisy and spurious patterns that models could overfit to.</li>\n      <li>Improves cross-domain and zero-shot performance.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Stability and Robustness</strong></p>\n\n    <ul>\n      <li>Reduces harmful memorization of rare or adversarial outliers.</li>\n      <li>Leads to more stable convergence during training.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Compute Efficiency</strong></p>\n\n    <ul>\n      <li>Reduces the number of training steps needed by discarding uninformative or duplicated samples.</li>\n      <li>Frees up capacity for rare, high-value patterns.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Improved Safety</strong></p>\n\n    <ul>\n      <li>Minimizes risk of models generating harmful, toxic, or policy-violating content.</li>\n      <li>Reduces need for aggressive safety alignment later.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Higher Evaluation Correlation</strong></p>\n\n    <ul>\n      <li>Ensures post-training alignment datasets reflect <strong>desired human preferences</strong>, improving correlation between offline evals and human-rated quality.</li>\n    </ul>\n  </li>\n</ol>\n<p><strong>Better Generalization</strong></p>\n<ul>\n      <li>Removes noisy and spurious patterns that models could overfit to.</li>\n      <li>Improves cross-domain and zero-shot performance.</li>\n    </ul>\n<p><strong>Stability and Robustness</strong></p>\n<ul>\n      <li>Reduces harmful memorization of rare or adversarial outliers.</li>\n      <li>Leads to more stable convergence during training.</li>\n    </ul>\n<p><strong>Compute Efficiency</strong></p>\n<ul>\n      <li>Reduces the number of training steps needed by discarding uninformative or duplicated samples.</li>\n      <li>Frees up capacity for rare, high-value patterns.</li>\n    </ul>\n<p><strong>Improved Safety</strong></p>\n<ul>\n      <li>Minimizes risk of models generating harmful, toxic, or policy-violating content.</li>\n      <li>Reduces need for aggressive safety alignment later.</li>\n    </ul>\n<p><strong>Higher Evaluation Correlation</strong></p>\n<ul>\n      <li>Ensures post-training alignment datasets reflect <strong>desired human preferences</strong>, improving correlation between offline evals and human-rated quality.</li>\n    </ul>",
    "contentMarkdown": "Rigorous data filtering improves both **model performance** and **training efficiency**. Key benefits include:\n\n1.  **Better Generalization**\n    \n    *   Removes noisy and spurious patterns that models could overfit to.\n    *   Improves cross-domain and zero-shot performance.\n2.  **Stability and Robustness**\n    \n    *   Reduces harmful memorization of rare or adversarial outliers.\n    *   Leads to more stable convergence during training.\n3.  **Compute Efficiency**\n    \n    *   Reduces the number of training steps needed by discarding uninformative or duplicated samples.\n    *   Frees up capacity for rare, high-value patterns.\n4.  **Improved Safety**\n    \n    *   Minimizes risk of models generating harmful, toxic, or policy-violating content.\n    *   Reduces need for aggressive safety alignment later.\n5.  **Higher Evaluation Correlation**\n    \n    *   Ensures post-training alignment datasets reflect **desired human preferences**, improving correlation between offline evals and human-rated quality.\n\n**Better Generalization**\n\n*   Removes noisy and spurious patterns that models could overfit to.\n*   Improves cross-domain and zero-shot performance.\n\n**Stability and Robustness**\n\n*   Reduces harmful memorization of rare or adversarial outliers.\n*   Leads to more stable convergence during training.\n\n**Compute Efficiency**\n\n*   Reduces the number of training steps needed by discarding uninformative or duplicated samples.\n*   Frees up capacity for rare, high-value patterns.\n\n**Improved Safety**\n\n*   Minimizes risk of models generating harmful, toxic, or policy-violating content.\n*   Reduces need for aggressive safety alignment later.\n\n**Higher Evaluation Correlation**\n\n*   Ensures post-training alignment datasets reflect **desired human preferences**, improving correlation between offline evals and human-rated quality.",
    "order": 5,
    "orderInChapter": 5,
    "difficulty": 2,
    "estimatedMinutes": 2,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 226,
      "contentLength": 2490
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#benefits-of-rigorous-filtering",
    "scrapedAt": "2025-12-28T11:48:17.190Z"
  },
  {
    "id": "ai-data-filtering-rule-based-and-statistical-quality-metrics-6",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Quality Metrics and Compliance Metrics",
    "title": "Rule-Based and Statistical Quality Metrics",
    "subtitle": "Quality Metrics and Compliance Metrics",
    "contentHtml": "<ul>\n  <li>These are inexpensive heuristics for large-scale, early-stage filtering—ideal for <strong>pretraining-scale corpora</strong>.</li>\n</ul>\n<h4 id=\"length-based-checks\">Length-Based Checks</h4>\n<ul>\n  <li>Remove extremely short (&lt;5 tokens) or overly long (&gt;2000 tokens) samples.</li>\n  <li>Prevents boilerplate stubs and runaway text from skewing training.</li>\n</ul>\n<h4 id=\"character-ratio-and-symbolic-noise\">Character-Ratio and Symbolic Noise</h4>\n<ul>\n  <li>Filter samples with excessive non-alphabetic characters, emoji spam, or gibberish.</li>\n  <li>Use regex-based heuristics or character frequency thresholds.</li>\n</ul>\n<h4 id=\"language-identification-and-entropy\">Language Identification and Entropy</h4>\n<ul>\n  <li>Detect and remove samples in the wrong language using <a href=\"https://fasttext.cc/\">fastText</a> or <a href=\"https://github.com/saffsd/langid.py\">langid.py</a>.</li>\n  <li>Compute Shannon entropy <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-9-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>H</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-74\" style=\"width: 2.346em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.93em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1001.88em, 2.503em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-75\"><span class=\"mi\" id=\"MathJax-Span-76\" style=\"font-family: STIXGeneral-Italic;\">H<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.055em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-77\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-78\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-79\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>H</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-9\">H(x)</script> to find too-random or too-predictable text.</li>\n</ul>\n<div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-10-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>H</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mo>&amp;#x2212;</mo><munder><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi></mrow></munder><mi>p</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mi>log</mi><mo>&amp;#x2061;</mo><mi>p</mi><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-80\" style=\"width: 13.128em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 10.94em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.044em, 1010.89em, 3.596em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-81\"><span class=\"mi\" id=\"MathJax-Span-82\" style=\"font-family: STIXGeneral-Italic;\">H<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.055em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-83\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-84\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-85\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-86\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mo\" id=\"MathJax-Span-87\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">−</span><span class=\"munderover\" id=\"MathJax-Span-88\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 1.305em; height: 0px;\"><span style=\"position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mo\" id=\"MathJax-Span-89\" style=\"font-family: STIXSizeOneSym; vertical-align: -0.518em;\">∑</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1000.21em, 4.273em, -999.997em); top: -2.862em; left: 0.576em;\"><span class=\"texatom\" id=\"MathJax-Span-90\"><span class=\"mrow\" id=\"MathJax-Span-91\"><span class=\"mi\" id=\"MathJax-Span-92\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mi\" id=\"MathJax-Span-93\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.211em;\">p</span><span class=\"mo\" id=\"MathJax-Span-94\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"msubsup\" id=\"MathJax-Span-95\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-96\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-97\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-98\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mi\" id=\"MathJax-Span-99\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.211em;\">log</span><span class=\"mo\" id=\"MathJax-Span-100\"></span><span class=\"mi\" id=\"MathJax-Span-101\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.211em;\">p</span><span class=\"mo\" id=\"MathJax-Span-102\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"msubsup\" id=\"MathJax-Span-103\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-104\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-105\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-106\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.559em; border-left: 0px solid; width: 0px; height: 2.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mi>H</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mo>−</mo><munder><mo>∑</mo><mrow class=\"MJX-TeXAtom-ORD\"><mi>i</mi></mrow></munder><mi>p</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mi>log</mi><mo>⁡</mo><mi>p</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></math></span></span></div>\n<h4 id=\"perplexity-filtering\">Perplexity Filtering</h4>\n<ul>\n  <li>Use a smaller pretrained LM (not the target model) to estimate:</li>\n</ul>\n<div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-11-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>PPL</mtext><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi>exp</mi><mspace width=&quot;negativethinmathspace&quot; /><mrow><mo>(</mo><mrow><mo>&amp;#x2212;</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>log</mi><mo>&amp;#x2061;</mo><msub><mi>p</mi><mi>&amp;#x03B8;</mi></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>&amp;#x2223;</mo><msub><mi>x</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo>&amp;lt;</mo><mi>i</mi></mrow></msub><mo stretchy=&quot;false&quot;>)</mo></mrow><mo>)</mo></mrow></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-107\" style=\"width: 19.482em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 16.201em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(2.19em, 1016.1em, 5.576em, -999.997em); top: -4.112em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-108\"><span class=\"mtext\" id=\"MathJax-Span-109\" style=\"font-family: STIXGeneral-Regular;\">PPL</span><span class=\"mo\" id=\"MathJax-Span-110\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-111\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-112\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-113\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mi\" id=\"MathJax-Span-114\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">exp</span><span class=\"mspace\" id=\"MathJax-Span-115\" style=\"height: 0em; vertical-align: 0em; margin-left: -0.206em;\"></span><span class=\"mrow\" id=\"MathJax-Span-116\" style=\"padding-left: 0.211em;\"><span class=\"mo\" id=\"MathJax-Span-117\" style=\"vertical-align: -0.779em;\"><span style=\"font-family: STIXSizeFourSym;\">(</span></span><span class=\"mrow\" id=\"MathJax-Span-118\"><span class=\"mo\" id=\"MathJax-Span-119\" style=\"font-family: STIXGeneral-Regular;\">−</span><span class=\"mfrac\" id=\"MathJax-Span-120\"><span style=\"display: inline-block; position: relative; width: 0.628em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.42em, 4.169em, -999.997em); top: -4.685em; left: 50%; margin-left: -0.258em;\"><span class=\"mn\" id=\"MathJax-Span-121\" style=\"font-family: STIXGeneral-Regular;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -3.331em; left: 50%; margin-left: -0.258em;\"><span class=\"mi\" id=\"MathJax-Span-122\" style=\"font-family: STIXGeneral-Italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1000.63em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.628em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span><span class=\"munderover\" id=\"MathJax-Span-123\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 1.305em; height: 0px;\"><span style=\"position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mo\" id=\"MathJax-Span-124\" style=\"font-family: STIXSizeOneSym; vertical-align: -0.518em;\">∑</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1000.94em, 4.273em, -999.997em); top: -2.862em; left: 0.107em;\"><span class=\"texatom\" id=\"MathJax-Span-125\"><span class=\"mrow\" id=\"MathJax-Span-126\"><span class=\"mi\" id=\"MathJax-Span-127\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span class=\"mo\" id=\"MathJax-Span-128\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">=</span><span class=\"mn\" id=\"MathJax-Span-129\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">1</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.44em, 1000.32em, 4.169em, -999.997em); top: -5.206em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-130\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mi\" id=\"MathJax-Span-131\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.211em;\">log</span><span class=\"mo\" id=\"MathJax-Span-132\"></span><span class=\"msubsup\" id=\"MathJax-Span-133\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 0.94em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.47em, 4.378em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-134\" style=\"font-family: STIXGeneral-Italic;\">p</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.523em;\"><span class=\"mi\" id=\"MathJax-Span-135\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">θ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-136\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"msubsup\" id=\"MathJax-Span-137\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-138\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-139\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-140\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">∣</span><span class=\"msubsup\" id=\"MathJax-Span-141\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 1.201em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-142\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"texatom\" id=\"MathJax-Span-143\"><span class=\"mrow\" id=\"MathJax-Span-144\"><span class=\"mo\" id=\"MathJax-Span-145\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">&lt;</span><span class=\"mi\" id=\"MathJax-Span-146\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-147\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span class=\"mo\" id=\"MathJax-Span-148\" style=\"vertical-align: -0.779em;\"><span style=\"font-family: STIXSizeFourSym;\">)</span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.117em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.622em; border-left: 0px solid; width: 0px; height: 3.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mtext>PPL</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>exp</mi><mspace width=\"negativethinmathspace\"></mspace><mrow><mo>(</mo><mrow><mo>−</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munderover><mo>∑</mo><mrow class=\"MJX-TeXAtom-ORD\"><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>log</mi><mo>⁡</mo><msub><mi>p</mi><mi>θ</mi></msub><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>∣</mo><msub><mi>x</mi><mrow class=\"MJX-TeXAtom-ORD\"><mo>&lt;</mo><mi>i</mi></mrow></msub><mo stretchy=\"false\">)</mo></mrow><mo>)</mo></mrow></math></span></span></div>\n<ul>\n  <li>Very high perplexity <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-12-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-149\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-150\"><span class=\"mo\" id=\"MathJax-Span-151\" style=\"font-family: STIXGeneral-Regular;\">→</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo stretchy=\"false\">→</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-12\">\\rightarrow</script> garbled or foreign text; very low <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-13-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-152\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-153\"><span class=\"mo\" id=\"MathJax-Span-154\" style=\"font-family: STIXGeneral-Regular;\">→</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo stretchy=\"false\">→</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-13\">\\rightarrow</script> overly common boilerplate.</li>\n</ul>\n<h4 id=\"n-gram-diversity\">N-Gram Diversity</h4>\n<ul>\n  <li>Measures richness of content:</li>\n</ul>\n<div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-14-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mtext>diversity</mtext><mi>n</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mfrac><mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><mtext>unique n-grams</mtext><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></mrow><mrow><mtext>total n-grams</mtext><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></mrow></mfrac></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-155\" style=\"width: 17.607em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 14.638em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.68em, 1014.64em, 3.232em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-156\"><span class=\"msubsup\" id=\"MathJax-Span-157\"><span style=\"display: inline-block; position: relative; width: 3.909em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1003.49em, 4.378em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mtext\" id=\"MathJax-Span-158\" style=\"font-family: STIXGeneral-Regular;\">diversity</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.747em; left: 3.492em;\"><span class=\"mi\" id=\"MathJax-Span-159\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">n</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-160\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-161\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-162\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-163\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mfrac\" id=\"MathJax-Span-164\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 8.128em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.18em, 1007.87em, 4.378em, -999.997em); top: -4.685em; left: 50%; margin-left: -4.008em;\"><span class=\"mrow\" id=\"MathJax-Span-165\"><span class=\"texatom\" id=\"MathJax-Span-166\"><span class=\"mrow\" id=\"MathJax-Span-167\"><span class=\"mo\" id=\"MathJax-Span-168\" style=\"font-family: STIXVariants;\">|</span></span></span><span class=\"mtext\" id=\"MathJax-Span-169\" style=\"font-family: STIXGeneral-Regular;\">unique n-grams</span><span class=\"mo\" id=\"MathJax-Span-170\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-171\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-172\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"texatom\" id=\"MathJax-Span-173\"><span class=\"mrow\" id=\"MathJax-Span-174\"><span class=\"mo\" id=\"MathJax-Span-175\" style=\"font-family: STIXVariants;\">|</span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.18em, 1006.36em, 4.378em, -999.997em); top: -3.331em; left: 50%; margin-left: -3.227em;\"><span class=\"mrow\" id=\"MathJax-Span-176\"><span class=\"mtext\" id=\"MathJax-Span-177\" style=\"font-family: STIXGeneral-Regular;\">total n-grams</span><span class=\"mo\" id=\"MathJax-Span-178\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-179\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-180\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1008.13em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 8.128em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.122em; border-left: 0px solid; width: 0px; height: 2.878em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><msub><mtext>diversity</mtext><mi>n</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow><mtext>unique n-grams</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow></mrow><mrow><mtext>total n-grams</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></math></span></span></div>\n<ul>\n  <li>Helps remove template-like content.</li>\n</ul>\n<h4 id=\"deduplication--near-deduplication\">Deduplication &amp; Near-Deduplication</h4>\n<ul>\n  <li>Use <a href=\"https://en.wikipedia.org/wiki/MinHash\">MinHash</a>, <a href=\"https://en.wikipedia.org/wiki/SimHash\">SimHash</a>, or embedding cosine similarity to eliminate duplicates.</li>\n  <li>Deduplication is also revisited in the <a href=\"#deduplication\">Deduplication</a> section.</li>\n</ul>\n<h4 id=\"toxicity--profanity-filters\">Toxicity &amp; Profanity Filters</h4>\n<ul>\n  <li>Use lexicon-based filters or toxicity classifiers such as <a href=\"https://perspectiveapi.com/\">Perspective</a>.</li>\n  <li>Early removal prevents harmful content from influencing pretraining distributions.</li>\n</ul>",
    "contentMarkdown": "*   These are inexpensive heuristics for large-scale, early-stage filtering—ideal for **pretraining-scale corpora**.\n\n#### Length-Based Checks\n\n*   Remove extremely short (<5 tokens) or overly long (>2000 tokens) samples.\n*   Prevents boilerplate stubs and runaway text from skewing training.\n\n#### Character-Ratio and Symbolic Noise\n\n*   Filter samples with excessive non-alphabetic characters, emoji spam, or gibberish.\n*   Use regex-based heuristics or character frequency thresholds.\n\n#### Language Identification and Entropy\n\n*   Detect and remove samples in the wrong language using [fastText](https://fasttext.cc/) or [langid.py](https://github.com/saffsd/langid.py).\n*   Compute Shannon entropy H(x)H(x)H(x) to find too-random or too-predictable text.\n\nH(x)\\=−∑ip(xi)logp(xi)H(x)\\=−∑ip(xi)log⁡p(xi)\n\n#### Perplexity Filtering\n\n*   Use a smaller pretrained LM (not the target model) to estimate:\n\nPPL(x)\\=exp(−1n∑i\\=1nlogpθ(xi∣x<i))PPL(x)\\=exp(−1n∑i\\=1nlog⁡pθ(xi∣x<i))\n\n*   Very high perplexity →→\\\\rightarrow garbled or foreign text; very low →→\\\\rightarrow overly common boilerplate.\n\n#### N-Gram Diversity\n\n*   Measures richness of content:\n\ndiversityn(x)\\=|unique n-grams(x)|total n-grams(x)diversityn(x)\\=|unique n-grams(x)|total n-grams(x)\n\n*   Helps remove template-like content.\n\n#### Deduplication & Near-Deduplication\n\n*   Use [MinHash](https://en.wikipedia.org/wiki/MinHash), [SimHash](https://en.wikipedia.org/wiki/SimHash), or embedding cosine similarity to eliminate duplicates.\n*   Deduplication is also revisited in the [Deduplication](#deduplication) section.\n\n#### Toxicity & Profanity Filters\n\n*   Use lexicon-based filters or toxicity classifiers such as [Perspective](https://perspectiveapi.com/).\n*   Early removal prevents harmful content from influencing pretraining distributions.",
    "order": 6,
    "orderInChapter": 1,
    "difficulty": 3,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "embedding"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 189,
      "contentLength": 27060
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#rule-based-and-statistical-quality-metrics",
    "scrapedAt": "2025-12-28T11:48:17.190Z"
  },
  {
    "id": "ai-data-filtering-complexity-gap-cg-score-for-label-noise-7",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Quality Metrics and Compliance Metrics",
    "title": "Complexity Gap (CG) Score for Label Noise",
    "subtitle": "Quality Metrics and Compliance Metrics",
    "contentHtml": "<ul>\n  <li>\n    <p>The <strong>Complexity Gap (CG) score</strong>, introduced in <a href=\"https://arxiv.org/abs/2301.00930\">Data Valuation Without Training</a> by Nohyun et al. (2023),  estimates <strong>label noise</strong> without training models.</p>\n  </li>\n  <li>\n    <p>Let <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-15-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-181\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.815em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1002.76em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-182\"><span class=\"mi\" id=\"MathJax-Span-183\" style=\"font-family: STIXGeneral-Italic;\">C<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-184\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-185\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-186\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mi\" id=\"MathJax-Span-187\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.211em;\">y</span><span class=\"mo\" id=\"MathJax-Span-188\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>C</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-15\">C(x,y)</script> be the Kolmogorov complexity estimate of an input–label pair and <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-16-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>y</mi><mo stretchy=&quot;false&quot;>&amp;#x007E;</mo></mover></mrow><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-189\" style=\"width: 3.336em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.763em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1002.71em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-190\"><span class=\"mi\" id=\"MathJax-Span-191\" style=\"font-family: STIXGeneral-Italic;\">C<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-192\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-193\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-194\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"texatom\" id=\"MathJax-Span-195\" style=\"padding-left: 0.211em;\"><span class=\"mrow\" id=\"MathJax-Span-196\"><span class=\"munderover\" id=\"MathJax-Span-197\"><span style=\"display: inline-block; position: relative; width: 0.471em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-198\" style=\"font-family: STIXGeneral-Italic;\">y</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -4.06em; left: 0.055em;\"><span style=\"height: 0em; vertical-align: 0em; width: 0.419em; display: inline-block; overflow: hidden;\"></span><span class=\"mo\" id=\"MathJax-Span-199\" style=\"font-family: STIXGeneral-Regular;\">̃&nbsp;<span style=\"height: 0em; vertical-align: 0em; margin-left: -0.258em;\"></span></span><span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0em;\"></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-200\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>C</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mrow class=\"MJX-TeXAtom-ORD\"><mover><mi>y</mi><mo stretchy=\"false\">~</mo></mover></mrow><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-16\">C(x,\\tilde{y})</script> the complexity when labels are randomly permuted. * Then:</p>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-17-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>CG</mtext><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>y</mi><mo stretchy=&quot;false&quot;>&amp;#x007E;</mo></mover></mrow><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2212;</mo><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-201\" style=\"width: 13.648em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 11.357em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1011.3em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-202\"><span class=\"mtext\" id=\"MathJax-Span-203\" style=\"font-family: STIXGeneral-Regular;\">CG</span><span class=\"mo\" id=\"MathJax-Span-204\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-205\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-206\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mi\" id=\"MathJax-Span-207\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.211em;\">y</span><span class=\"mo\" id=\"MathJax-Span-208\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-209\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mi\" id=\"MathJax-Span-210\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.315em;\">C<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-211\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-212\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-213\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"texatom\" id=\"MathJax-Span-214\" style=\"padding-left: 0.211em;\"><span class=\"mrow\" id=\"MathJax-Span-215\"><span class=\"munderover\" id=\"MathJax-Span-216\"><span style=\"display: inline-block; position: relative; width: 0.471em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-217\" style=\"font-family: STIXGeneral-Italic;\">y</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -4.06em; left: 0.055em;\"><span style=\"height: 0em; vertical-align: 0em; width: 0.419em; display: inline-block; overflow: hidden;\"></span><span class=\"mo\" id=\"MathJax-Span-218\" style=\"font-family: STIXGeneral-Regular;\">̃&nbsp;<span style=\"height: 0em; vertical-align: 0em; margin-left: -0.258em;\"></span></span><span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0em;\"></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-219\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-220\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">−</span><span class=\"mi\" id=\"MathJax-Span-221\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.263em;\">C<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-222\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-223\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-224\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mi\" id=\"MathJax-Span-225\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.211em;\">y</span><span class=\"mo\" id=\"MathJax-Span-226\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mtext>CG</mtext><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mrow class=\"MJX-TeXAtom-ORD\"><mover><mi>y</mi><mo stretchy=\"false\">~</mo></mover></mrow><mo stretchy=\"false\">)</mo><mo>−</mo><mi>C</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-17\">\\text{CG}(x,y) = C(x,\\tilde{y}) - C(x,y)</script>\n\n    <ul>\n      <li>High CG <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-18-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-227\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-228\"><span class=\"mo\" id=\"MathJax-Span-229\" style=\"font-family: STIXGeneral-Regular;\">→</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo stretchy=\"false\">→</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-18\">\\rightarrow</script> label <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-19-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>y</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-230\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-231\"><span class=\"mi\" id=\"MathJax-Span-232\" style=\"font-family: STIXGeneral-Italic;\">y</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>y</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-19\">y</script> meaningfully compresses <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-20-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-233\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.52em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-234\"><span class=\"mi\" id=\"MathJax-Span-235\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>x</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-20\">x</script> → likely correct.</li>\n      <li>Low or negative CG <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-21-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-236\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-237\"><span class=\"mo\" id=\"MathJax-Span-238\" style=\"font-family: STIXGeneral-Regular;\">→</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo stretchy=\"false\">→</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-21\">\\rightarrow</script> <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-22-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>y</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-239\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-240\"><span class=\"mi\" id=\"MathJax-Span-241\" style=\"font-family: STIXGeneral-Italic;\">y</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>y</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-22\">y</script> gives little information → likely noisy.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Modality applicability</strong>:</p>\n\n    <ul>\n      <li>Works for <strong>text, code, and math</strong> since all are tokenizable and labelable.</li>\n      <li>Extensible to <strong>multimodal data</strong> (e.g., image–label) if both parts are serialized (e.g., image features or captions concatenated with labels) before complexity estimation.</li>\n    </ul>\n  </li>\n  <li>\n    <p>CG is especially useful for <strong>post-training datasets</strong>, where label noise has outsized effects.</p>\n  </li>\n</ul>\n<p>The <strong>Complexity Gap (CG) score</strong>, introduced in <a href=\"https://arxiv.org/abs/2301.00930\">Data Valuation Without Training</a> by Nohyun et al. (2023),  estimates <strong>label noise</strong> without training models.</p>\n<p>Let <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-15-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-181\" style=\"width: 3.388em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.815em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1002.76em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-182\"><span class=\"mi\" id=\"MathJax-Span-183\" style=\"font-family: STIXGeneral-Italic;\">C<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-184\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-185\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-186\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mi\" id=\"MathJax-Span-187\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.211em;\">y</span><span class=\"mo\" id=\"MathJax-Span-188\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>C</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mi>y</mi><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-15\">C(x,y)</script> be the Kolmogorov complexity estimate of an input–label pair and <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-16-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>C</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo>,</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>y</mi><mo stretchy=&quot;false&quot;>&amp;#x007E;</mo></mover></mrow><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-189\" style=\"width: 3.336em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.763em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1002.71em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-190\"><span class=\"mi\" id=\"MathJax-Span-191\" style=\"font-family: STIXGeneral-Italic;\">C<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-192\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-193\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-194\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"texatom\" id=\"MathJax-Span-195\" style=\"padding-left: 0.211em;\"><span class=\"mrow\" id=\"MathJax-Span-196\"><span class=\"munderover\" id=\"MathJax-Span-197\"><span style=\"display: inline-block; position: relative; width: 0.471em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-198\" style=\"font-family: STIXGeneral-Italic;\">y</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -4.06em; left: 0.055em;\"><span style=\"height: 0em; vertical-align: 0em; width: 0.419em; display: inline-block; overflow: hidden;\"></span><span class=\"mo\" id=\"MathJax-Span-199\" style=\"font-family: STIXGeneral-Regular;\">̃&nbsp;<span style=\"height: 0em; vertical-align: 0em; margin-left: -0.258em;\"></span></span><span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0em;\"></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-200\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>C</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo>,</mo><mrow class=\"MJX-TeXAtom-ORD\"><mover><mi>y</mi><mo stretchy=\"false\">~</mo></mover></mrow><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-16\">C(x,\\tilde{y})</script> the complexity when labels are randomly permuted. * Then:</p>\n<ul>\n      <li>High CG <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-18-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-227\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-228\"><span class=\"mo\" id=\"MathJax-Span-229\" style=\"font-family: STIXGeneral-Regular;\">→</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo stretchy=\"false\">→</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-18\">\\rightarrow</script> label <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-19-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>y</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-230\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-231\"><span class=\"mi\" id=\"MathJax-Span-232\" style=\"font-family: STIXGeneral-Italic;\">y</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>y</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-19\">y</script> meaningfully compresses <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-20-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-233\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.52em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-234\"><span class=\"mi\" id=\"MathJax-Span-235\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>x</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-20\">x</script> → likely correct.</li>\n      <li>Low or negative CG <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-21-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-236\" style=\"width: 1.201em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.992em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1000.94em, 2.294em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-237\"><span class=\"mo\" id=\"MathJax-Span-238\" style=\"font-family: STIXGeneral-Regular;\">→</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: 0.003em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mo stretchy=\"false\">→</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-21\">\\rightarrow</script> <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-22-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>y</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-239\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-240\"><span class=\"mi\" id=\"MathJax-Span-241\" style=\"font-family: STIXGeneral-Italic;\">y</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 0.878em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>y</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-22\">y</script> gives little information → likely noisy.</li>\n    </ul>\n<p><strong>Modality applicability</strong>:</p>\n<ul>\n      <li>Works for <strong>text, code, and math</strong> since all are tokenizable and labelable.</li>\n      <li>Extensible to <strong>multimodal data</strong> (e.g., image–label) if both parts are serialized (e.g., image features or captions concatenated with labels) before complexity estimation.</li>\n    </ul>\n<p>CG is especially useful for <strong>post-training datasets</strong>, where label noise has outsized effects.</p>",
    "contentMarkdown": "*   The **Complexity Gap (CG) score**, introduced in [Data Valuation Without Training](https://arxiv.org/abs/2301.00930) by Nohyun et al. (2023), estimates **label noise** without training models.\n    \n*   Let C(x,y)C(x,y)C(x,y) be the Kolmogorov complexity estimate of an input–label pair and C(x,ỹ )C(x,y~)C(x,\\\\tilde{y}) the complexity when labels are randomly permuted. \\* Then:\n    \n    CG(x,y)\\=C(x,ỹ )−C(x,y)CG(x,y)\\=C(x,y~)−C(x,y)\n    \n    \\\\text{CG}(x,y) = C(x,\\\\tilde{y}) - C(x,y)\n    *   High CG →→\\\\rightarrow label yyy meaningfully compresses xxx → likely correct.\n    *   Low or negative CG →→\\\\rightarrow yyy gives little information → likely noisy.\n*   **Modality applicability**:\n    \n    *   Works for **text, code, and math** since all are tokenizable and labelable.\n    *   Extensible to **multimodal data** (e.g., image–label) if both parts are serialized (e.g., image features or captions concatenated with labels) before complexity estimation.\n*   CG is especially useful for **post-training datasets**, where label noise has outsized effects.\n    \n\nThe **Complexity Gap (CG) score**, introduced in [Data Valuation Without Training](https://arxiv.org/abs/2301.00930) by Nohyun et al. (2023), estimates **label noise** without training models.\n\nLet C(x,y)C(x,y)C(x,y) be the Kolmogorov complexity estimate of an input–label pair and C(x,ỹ )C(x,y~)C(x,\\\\tilde{y}) the complexity when labels are randomly permuted. \\* Then:\n\n*   High CG →→\\\\rightarrow label yyy meaningfully compresses xxx → likely correct.\n*   Low or negative CG →→\\\\rightarrow yyy gives little information → likely noisy.\n\n**Modality applicability**:\n\n*   Works for **text, code, and math** since all are tokenizable and labelable.\n*   Extensible to **multimodal data** (e.g., image–label) if both parts are serialized (e.g., image features or captions concatenated with labels) before complexity estimation.\n\nCG is especially useful for **post-training datasets**, where label noise has outsized effects.",
    "order": 7,
    "orderInChapter": 2,
    "difficulty": 3,
    "estimatedMinutes": 2,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 253,
      "contentLength": 30282
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#complexity-gap-(cg)-score-for-label-noise",
    "scrapedAt": "2025-12-28T11:48:17.190Z"
  },
  {
    "id": "ai-data-filtering-compliance-metrics-8",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Quality Metrics and Compliance Metrics",
    "title": "Compliance Metrics",
    "subtitle": "Quality Metrics and Compliance Metrics",
    "contentHtml": "<ul>\n  <li>\n    <p>Compliance metrics enforce <strong>external constraints</strong> like safety, privacy, and licensing—crucial in <strong>post-training</strong> and <strong>alignment datasets</strong>.</p>\n  </li>\n  <li>\n    <p>Typical checks:</p>\n\n    <ul>\n      <li><strong>Safety policy classifiers:</strong> block sexual, hateful, violent, or self-harm content.</li>\n      <li><strong>License audits:</strong> remove copyrighted or restrictive-license content (<a href=\"https://creativecommons.org/\">Creative Commons</a> license parsing).</li>\n      <li><strong>Privacy filters:</strong> remove PII using regex and named-entity recognition (NER).</li>\n      <li><strong>Bias/toxicity detectors:</strong> run automated bias classifiers and PII scrubbers.</li>\n    </ul>\n  </li>\n  <li>\n    <p>Compliance metrics are often binary (pass/fail), but can be scored probabilistically to enable threshold tuning.</p>\n  </li>\n</ul>\n<p>Compliance metrics enforce <strong>external constraints</strong> like safety, privacy, and licensing—crucial in <strong>post-training</strong> and <strong>alignment datasets</strong>.</p>\n<p>Typical checks:</p>\n<ul>\n      <li><strong>Safety policy classifiers:</strong> block sexual, hateful, violent, or self-harm content.</li>\n      <li><strong>License audits:</strong> remove copyrighted or restrictive-license content (<a href=\"https://creativecommons.org/\">Creative Commons</a> license parsing).</li>\n      <li><strong>Privacy filters:</strong> remove PII using regex and named-entity recognition (NER).</li>\n      <li><strong>Bias/toxicity detectors:</strong> run automated bias classifiers and PII scrubbers.</li>\n    </ul>\n<p>Compliance metrics are often binary (pass/fail), but can be scored probabilistically to enable threshold tuning.</p>",
    "contentMarkdown": "*   Compliance metrics enforce **external constraints** like safety, privacy, and licensing—crucial in **post-training** and **alignment datasets**.\n    \n*   Typical checks:\n    \n    *   **Safety policy classifiers:** block sexual, hateful, violent, or self-harm content.\n    *   **License audits:** remove copyrighted or restrictive-license content ([Creative Commons](https://creativecommons.org/) license parsing).\n    *   **Privacy filters:** remove PII using regex and named-entity recognition (NER).\n    *   **Bias/toxicity detectors:** run automated bias classifiers and PII scrubbers.\n*   Compliance metrics are often binary (pass/fail), but can be scored probabilistically to enable threshold tuning.\n    \n\nCompliance metrics enforce **external constraints** like safety, privacy, and licensing—crucial in **post-training** and **alignment datasets**.\n\nTypical checks:\n\n*   **Safety policy classifiers:** block sexual, hateful, violent, or self-harm content.\n*   **License audits:** remove copyrighted or restrictive-license content ([Creative Commons](https://creativecommons.org/) license parsing).\n*   **Privacy filters:** remove PII using regex and named-entity recognition (NER).\n*   **Bias/toxicity detectors:** run automated bias classifiers and PII scrubbers.\n\nCompliance metrics are often binary (pass/fail), but can be scored probabilistically to enable threshold tuning.",
    "order": 8,
    "orderInChapter": 3,
    "difficulty": 2,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 155,
      "contentLength": 1780
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#compliance-metrics",
    "scrapedAt": "2025-12-28T11:48:17.190Z"
  },
  {
    "id": "ai-data-filtering-best-practice-pipeline-for-quality-compliance-metr-9",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Quality Metrics and Compliance Metrics",
    "title": "Best-Practice Pipeline for Quality & Compliance Metrics",
    "subtitle": "Quality Metrics and Compliance Metrics",
    "contentHtml": "<ul>\n  <li>\n    <p>A robust early-stage pipeline typically does:</p>\n\n    <ol>\n      <li><strong>Cheap rule-based filters</strong> (length, character ratio, language ID, perplexity, diversity).</li>\n      <li><strong>Deduplication</strong> (hash-based + embedding-based).</li>\n      <li><strong>Compliance filters</strong> (safety, license, privacy).</li>\n      <li><strong>Optional CG score</strong> for labeled datasets to detect label noise.</li>\n    </ol>\n  </li>\n  <li>\n    <p>Only data passing these gates proceeds to <strong>LLM-based evaluation</strong> (Section 3) and optional <strong>human evaluation</strong> (Section 4).</p>\n  </li>\n</ul>\n<p>A robust early-stage pipeline typically does:</p>\n<ol>\n      <li><strong>Cheap rule-based filters</strong> (length, character ratio, language ID, perplexity, diversity).</li>\n      <li><strong>Deduplication</strong> (hash-based + embedding-based).</li>\n      <li><strong>Compliance filters</strong> (safety, license, privacy).</li>\n      <li><strong>Optional CG score</strong> for labeled datasets to detect label noise.</li>\n    </ol>\n<p>Only data passing these gates proceeds to <strong>LLM-based evaluation</strong> (Section 3) and optional <strong>human evaluation</strong> (Section 4).</p>",
    "contentMarkdown": "*   A robust early-stage pipeline typically does:\n    \n    1.  **Cheap rule-based filters** (length, character ratio, language ID, perplexity, diversity).\n    2.  **Deduplication** (hash-based + embedding-based).\n    3.  **Compliance filters** (safety, license, privacy).\n    4.  **Optional CG score** for labeled datasets to detect label noise.\n*   Only data passing these gates proceeds to **LLM-based evaluation** (Section 3) and optional **human evaluation** (Section 4).\n    \n\nA robust early-stage pipeline typically does:\n\n1.  **Cheap rule-based filters** (length, character ratio, language ID, perplexity, diversity).\n2.  **Deduplication** (hash-based + embedding-based).\n3.  **Compliance filters** (safety, license, privacy).\n4.  **Optional CG score** for labeled datasets to detect label noise.\n\nOnly data passing these gates proceeds to **LLM-based evaluation** (Section 3) and optional **human evaluation** (Section 4).",
    "order": 9,
    "orderInChapter": 4,
    "difficulty": 2,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "embedding",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 114,
      "contentLength": 1249
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#best-practice-pipeline-for-quality-&-compliance-metrics",
    "scrapedAt": "2025-12-28T11:48:17.190Z"
  },
  {
    "id": "ai-data-filtering-why-llm-based-evaluation-is-essential-10",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "title": "Why LLM-Based Evaluation is Essential",
    "subtitle": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "contentHtml": "<ul>\n  <li>\n    <p>Rule-based and statistical filters (perplexity, entropy) can detect low-level noise, but they cannot judge:</p>\n\n    <ul>\n      <li>semantic <strong>fluency and coherence</strong>,</li>\n      <li><strong>factuality</strong> and knowledge grounding,</li>\n      <li>whether responses <strong>follow instructions</strong> and stay <strong>on-topic</strong>,</li>\n      <li>or whether multimodal pairs are <strong>semantically aligned</strong>.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>LLM-based evaluation (LLM-as-a-judge)</strong> fills this gap. Modern evaluators like  or  can be prompted to rate content on structured rubrics, producing <strong>granular quality scores at scale</strong>.</p>\n  </li>\n  <li>\n    <p>This is especially crucial for:</p>\n\n    <ul>\n      <li><strong>Instruction-tuning datasets</strong> (SFT)</li>\n      <li><strong>Preference datasets</strong> for  (RLHF)</li>\n      <li><strong>Domain-specific datasets</strong> (code, math, multimodal)</li>\n    </ul>\n  </li>\n</ul>\n<p>Rule-based and statistical filters (perplexity, entropy) can detect low-level noise, but they cannot judge:</p>\n<ul>\n      <li>semantic <strong>fluency and coherence</strong>,</li>\n      <li><strong>factuality</strong> and knowledge grounding,</li>\n      <li>whether responses <strong>follow instructions</strong> and stay <strong>on-topic</strong>,</li>\n      <li>or whether multimodal pairs are <strong>semantically aligned</strong>.</li>\n    </ul>\n<p><strong>LLM-based evaluation (LLM-as-a-judge)</strong> fills this gap. Modern evaluators like  or  can be prompted to rate content on structured rubrics, producing <strong>granular quality scores at scale</strong>.</p>\n<p>This is especially crucial for:</p>\n<ul>\n      <li><strong>Instruction-tuning datasets</strong> (SFT)</li>\n      <li><strong>Preference datasets</strong> for  (RLHF)</li>\n      <li><strong>Domain-specific datasets</strong> (code, math, multimodal)</li>\n    </ul>",
    "contentMarkdown": "*   Rule-based and statistical filters (perplexity, entropy) can detect low-level noise, but they cannot judge:\n    \n    *   semantic **fluency and coherence**,\n    *   **factuality** and knowledge grounding,\n    *   whether responses **follow instructions** and stay **on-topic**,\n    *   or whether multimodal pairs are **semantically aligned**.\n*   **LLM-based evaluation (LLM-as-a-judge)** fills this gap. Modern evaluators like or can be prompted to rate content on structured rubrics, producing **granular quality scores at scale**.\n    \n*   This is especially crucial for:\n    \n    *   **Instruction-tuning datasets** (SFT)\n    *   **Preference datasets** for (RLHF)\n    *   **Domain-specific datasets** (code, math, multimodal)\n\nRule-based and statistical filters (perplexity, entropy) can detect low-level noise, but they cannot judge:\n\n*   semantic **fluency and coherence**,\n*   **factuality** and knowledge grounding,\n*   whether responses **follow instructions** and stay **on-topic**,\n*   or whether multimodal pairs are **semantically aligned**.\n\n**LLM-based evaluation (LLM-as-a-judge)** fills this gap. Modern evaluators like or can be prompted to rate content on structured rubrics, producing **granular quality scores at scale**.\n\nThis is especially crucial for:\n\n*   **Instruction-tuning datasets** (SFT)\n*   **Preference datasets** for (RLHF)\n*   **Domain-specific datasets** (code, math, multimodal)",
    "order": 10,
    "orderInChapter": 1,
    "difficulty": 2,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 173,
      "contentLength": 1961
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#why-llm-based-evaluation-is-essential",
    "scrapedAt": "2025-12-28T11:48:17.190Z"
  },
  {
    "id": "ai-data-filtering-general-evaluation-dimensions-11",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "title": "General Evaluation Dimensions",
    "subtitle": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "contentHtml": "<ul>\n  <li>These dimensions apply to <strong>all data types (text, code, math, multimodal)</strong> and should be rated by default.</li>\n</ul>\n<div align=\"center\">\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Fluency / Grammaticality</td>\n<td class=\"tg-tleft-valign-second\">Is it well-formed and grammatically correct?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Coherence / Logical Flow</td>\n<td class=\"tg-tleft-valign-second\">Are ideas or steps connected and logically structured?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Factuality / Correctness</td>\n<td class=\"tg-tleft-valign-second\">Are claims factually accurate or logically correct?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Instruction Relevance</td>\n<td class=\"tg-tleft-valign-second\">Does it answer the given instruction fully and directly?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Safety / Policy Compliance</td>\n<td class=\"tg-tleft-valign-second\">Is it free from unsafe, toxic, or policy-violating content?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Conciseness / Clarity</td>\n<td class=\"tg-tleft-valign-second\">Is it clear and not overly verbose or vague?</td>\n</tr>\n</tbody>\n</table>\n</div>\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Fluency / Grammaticality</td>\n<td class=\"tg-tleft-valign-second\">Is it well-formed and grammatically correct?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Coherence / Logical Flow</td>\n<td class=\"tg-tleft-valign-second\">Are ideas or steps connected and logically structured?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Factuality / Correctness</td>\n<td class=\"tg-tleft-valign-second\">Are claims factually accurate or logically correct?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Instruction Relevance</td>\n<td class=\"tg-tleft-valign-second\">Does it answer the given instruction fully and directly?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Safety / Policy Compliance</td>\n<td class=\"tg-tleft-valign-second\">Is it free from unsafe, toxic, or policy-violating content?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Conciseness / Clarity</td>\n<td class=\"tg-tleft-valign-second\">Is it clear and not overly verbose or vague?</td>\n</tr>\n</tbody>\n</table>",
    "contentMarkdown": "*   These dimensions apply to **all data types (text, code, math, multimodal)** and should be rated by default.\n\n**Dimension**\n\n**Description**\n\nFluency / Grammaticality\n\nIs it well-formed and grammatically correct?\n\nCoherence / Logical Flow\n\nAre ideas or steps connected and logically structured?\n\nFactuality / Correctness\n\nAre claims factually accurate or logically correct?\n\nInstruction Relevance\n\nDoes it answer the given instruction fully and directly?\n\nSafety / Policy Compliance\n\nIs it free from unsafe, toxic, or policy-violating content?\n\nConciseness / Clarity\n\nIs it clear and not overly verbose or vague?\n\n**Dimension**\n\n**Description**\n\nFluency / Grammaticality\n\nIs it well-formed and grammatically correct?\n\nCoherence / Logical Flow\n\nAre ideas or steps connected and logically structured?\n\nFactuality / Correctness\n\nAre claims factually accurate or logically correct?\n\nInstruction Relevance\n\nDoes it answer the given instruction fully and directly?\n\nSafety / Policy Compliance\n\nIs it free from unsafe, toxic, or policy-violating content?\n\nConciseness / Clarity\n\nIs it clear and not overly verbose or vague?",
    "order": 11,
    "orderInChapter": 2,
    "difficulty": 2,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 156,
      "contentLength": 2594
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#general-evaluation-dimensions",
    "scrapedAt": "2025-12-28T11:48:17.190Z"
  },
  {
    "id": "ai-data-filtering-evaluation-prompt-with-modality-specific-evaluatio-12",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "title": "Evaluation Prompt with Modality-Specific Evaluation Criteria and Rubric",
    "subtitle": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "contentHtml": "<ul>\n  <li>Included below is a <strong>structured evaluation prompt</strong> that includes all general + modality-specific evaluation criteria and a per-criteria rubric, each with:\n    <ul>\n      <li>clear definitions,</li>\n      <li>1–5 Likert-scale rubrics,</li>\n      <li>good/bad examples,</li>\n      <li>and a structured JSON output format.</li>\n    </ul>\n  </li>\n  <li>The following sub-section highlight modality-specific evaluation criteria.</li>\n</ul>\n<ul>\n      <li>clear definitions,</li>\n      <li>1–5 Likert-scale rubrics,</li>\n      <li>good/bad examples,</li>\n      <li>and a structured JSON output format.</li>\n    </ul>\n<h4 id=\"text\">Text</h4>\n<ul>\n  <li>Focus on fluency, coherence, factual correctness, and instruction relevance.</li>\n  <li>Detect hallucinations or contradictions.</li>\n</ul>\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><div><button class=\"btn-copy\" data-clipboard-action=\"copy\" data-clipboard-target=\"#code0\"><img src=\"https://aman.ai/images/copy.png\" style=\"margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;\"></button></div><code id=\"code0\">You are an expert data quality evaluator. \nEvaluate the following SAMPLE (which can be text, code, math, or multimodal).\nAssign scores from 1–5 on each dimension using the detailed rubrics below.\nFor each score, include a 1–2 sentence explanation referencing specific aspects of the sample.\nReturn your evaluation in JSON format.\n\nSAMPLE TO EVALUATE:\n\"\"\n\n---\n\n1. Fluency / Grammaticality\nDefinition: Is the sample well-formed, grammatical, and easy to read?\n\nRubric:\n1 - Completely unreadable or nonsensical.\n2 - Frequent grammar errors, very awkward phrasing.\n3 - Understandable but somewhat awkward or choppy.\n4 - Clear and smooth with minor issues.\n5 - Highly fluent, polished, and natural.\n\nGood: \"The mitochondrion is the powerhouse of the cell.\" (5)  \nBad: \"Cell power make mitochondria go boom.\" (1)\n\n---\n\n2. Coherence / Logical Flow\nDefinition: Do the ideas or steps follow a logical structure and make sense together?\n\nRubric:\n1 - Totally disjointed or contradictory.\n2 - Some logical gaps or contradictions.\n3 - Mostly connected but occasionally inconsistent.\n4 - Logical and structured with minor gaps.\n5 - Fully logical, internally consistent, and well organized.\n\nGood: \"First define the variable, then initialize it, then loop through values.\" (5)  \nBad: \"Loop the values then define it after output.\" (1)\n\n---\n\n3. Factuality / Correctness\nDefinition: Are statements accurate and factually correct (or logically valid for math/code)?\n\nRubric:\n1 - Mostly false or logically incorrect.\n2 - More wrong than right; major errors.\n3 - Mostly correct but some minor factual or logical issues.\n4 - Correct with small inaccuracies.\n5 - Fully accurate and factually correct.\n\nGood: \"Paris is the capital of France.\" (5)  \nBad: \"Paris is the capital of Germany.\" (1)\n\n---\n\n4. Instruction-Following Relevance\nDefinition: Does the response directly and completely address the given prompt/instruction?\n\nRubric:\n1 - Completely unrelated to the instruction.\n2 - Very partially related, ignores most of the instruction.\n3 - Addresses the instruction partially.\n4 - Fully addresses it with minor omissions.\n5 - Fully addresses all aspects of the instruction.\n\nGood:\nPrompt: \"List two prime numbers\" → \"2 and 3\" (5)  \nBad:\nPrompt: \"List two prime numbers\" → \"Bananas are yellow.\" (1)\n\n---\n\n5. Safety / Policy Compliance\nDefinition: Is the content free from harmful, unsafe, or policy-violating content?\n\nRubric:\n1 - Explicit harm, illegal activity, or hate content.\n2 - Possibly unsafe or harmful.\n3 - Mostly safe but some risky or borderline content.\n4 - Safe and non-harmful.\n5 - Very safe and benign.\n\nGood: \"Describe how vaccines work to prevent disease.\" (5)  \nBad: \"Describe how to make a bomb at home.\" (1)\n\n---\n\n6. Conciseness / Clarity\nDefinition: Is the content concise and clear without being vague or overly verbose?\n\nRubric:\n1 - Extremely vague or overly verbose with no structure.\n2 - Wordy or redundant; hard to follow.\n3 - Somewhat clear but occasionally repetitive or rambling.\n4 - Mostly concise and clear with minor redundancy.\n5 - Very clear, concise, and well structured.\n\nGood: \"Sort the list in ascending order using a for loop.\" (5)  \nBad: \"You could, if you want, possibly sort the list, maybe in ascending order or something.\" (1)\n\n---\n\nOUTPUT FORMAT:\n{\n  \"fluency\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"coherence\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"factuality\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"instruction_relevance\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"safety\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"conciseness\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"overall_average\": &lt;mean score rounded to 2 decimals&gt;\n}\n</code></pre></div></div>\n<pre class=\"highlight\"><div><button class=\"btn-copy\" data-clipboard-action=\"copy\" data-clipboard-target=\"#code0\"><img src=\"https://aman.ai/images/copy.png\" style=\"margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;\"></button></div><code id=\"code0\">You are an expert data quality evaluator. \nEvaluate the following SAMPLE (which can be text, code, math, or multimodal).\nAssign scores from 1–5 on each dimension using the detailed rubrics below.\nFor each score, include a 1–2 sentence explanation referencing specific aspects of the sample.\nReturn your evaluation in JSON format.\n\nSAMPLE TO EVALUATE:\n\"\"\n\n---\n\n1. Fluency / Grammaticality\nDefinition: Is the sample well-formed, grammatical, and easy to read?\n\nRubric:\n1 - Completely unreadable or nonsensical.\n2 - Frequent grammar errors, very awkward phrasing.\n3 - Understandable but somewhat awkward or choppy.\n4 - Clear and smooth with minor issues.\n5 - Highly fluent, polished, and natural.\n\nGood: \"The mitochondrion is the powerhouse of the cell.\" (5)  \nBad: \"Cell power make mitochondria go boom.\" (1)\n\n---\n\n2. Coherence / Logical Flow\nDefinition: Do the ideas or steps follow a logical structure and make sense together?\n\nRubric:\n1 - Totally disjointed or contradictory.\n2 - Some logical gaps or contradictions.\n3 - Mostly connected but occasionally inconsistent.\n4 - Logical and structured with minor gaps.\n5 - Fully logical, internally consistent, and well organized.\n\nGood: \"First define the variable, then initialize it, then loop through values.\" (5)  \nBad: \"Loop the values then define it after output.\" (1)\n\n---\n\n3. Factuality / Correctness\nDefinition: Are statements accurate and factually correct (or logically valid for math/code)?\n\nRubric:\n1 - Mostly false or logically incorrect.\n2 - More wrong than right; major errors.\n3 - Mostly correct but some minor factual or logical issues.\n4 - Correct with small inaccuracies.\n5 - Fully accurate and factually correct.\n\nGood: \"Paris is the capital of France.\" (5)  \nBad: \"Paris is the capital of Germany.\" (1)\n\n---\n\n4. Instruction-Following Relevance\nDefinition: Does the response directly and completely address the given prompt/instruction?\n\nRubric:\n1 - Completely unrelated to the instruction.\n2 - Very partially related, ignores most of the instruction.\n3 - Addresses the instruction partially.\n4 - Fully addresses it with minor omissions.\n5 - Fully addresses all aspects of the instruction.\n\nGood:\nPrompt: \"List two prime numbers\" → \"2 and 3\" (5)  \nBad:\nPrompt: \"List two prime numbers\" → \"Bananas are yellow.\" (1)\n\n---\n\n5. Safety / Policy Compliance\nDefinition: Is the content free from harmful, unsafe, or policy-violating content?\n\nRubric:\n1 - Explicit harm, illegal activity, or hate content.\n2 - Possibly unsafe or harmful.\n3 - Mostly safe but some risky or borderline content.\n4 - Safe and non-harmful.\n5 - Very safe and benign.\n\nGood: \"Describe how vaccines work to prevent disease.\" (5)  \nBad: \"Describe how to make a bomb at home.\" (1)\n\n---\n\n6. Conciseness / Clarity\nDefinition: Is the content concise and clear without being vague or overly verbose?\n\nRubric:\n1 - Extremely vague or overly verbose with no structure.\n2 - Wordy or redundant; hard to follow.\n3 - Somewhat clear but occasionally repetitive or rambling.\n4 - Mostly concise and clear with minor redundancy.\n5 - Very clear, concise, and well structured.\n\nGood: \"Sort the list in ascending order using a for loop.\" (5)  \nBad: \"You could, if you want, possibly sort the list, maybe in ascending order or something.\" (1)\n\n---\n\nOUTPUT FORMAT:\n{\n  \"fluency\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"coherence\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"factuality\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"instruction_relevance\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"safety\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"conciseness\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"overall_average\": &lt;mean score rounded to 2 decimals&gt;\n}\n</code></pre>\n<h4 id=\"code\">Code</h4>\n<ul>\n  <li>Use LLMs to check algorithmic correctness, adherence to style, clarity of comments.</li>\n  <li>Optionally verify executability using static analysis or lightweight test harnesses.</li>\n</ul>\n<h5 id=\"additional-code-specific-dimensions\">Additional Code-Specific Dimensions</h5>\n<ul>\n  <li>Use these <strong>in addition to the general dimensions</strong> if the sample is code:</li>\n</ul>\n<div align=\"center\">\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Executability</td>\n<td class=\"tg-tleft-valign-second\">Does the code run without syntax/runtime errors?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Functional Correctness</td>\n<td class=\"tg-tleft-valign-second\">Does it produce the correct output for the specified task?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Readability &amp; Style</td>\n<td class=\"tg-tleft-valign-second\">Is it readable, documented, and stylistically consistent?</td>\n</tr>\n</tbody>\n</table>\n</div>\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Executability</td>\n<td class=\"tg-tleft-valign-second\">Does the code run without syntax/runtime errors?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Functional Correctness</td>\n<td class=\"tg-tleft-valign-second\">Does it produce the correct output for the specified task?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Readability &amp; Style</td>\n<td class=\"tg-tleft-valign-second\">Is it readable, documented, and stylistically consistent?</td>\n</tr>\n</tbody>\n</table>\n<ul>\n  <li>\n    <p><strong>Rubrics &amp; Examples</strong>:</p>\n\n    <ul>\n      <li>\n        <p><strong>Executability</strong>:</p>\n\n        <ul>\n          <li>1 = does not run at all</li>\n          <li>5 = runs cleanly with no errors/warnings</li>\n          <li>Good: script compiles and executes (5)</li>\n          <li>Bad: undefined variables and syntax errors (1)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Functional Correctness</strong>:</p>\n\n        <ul>\n          <li>1 = completely incorrect</li>\n          <li>5 = fully correct on all tested cases</li>\n          <li>Good: correct sorting algorithm (5)</li>\n          <li>Bad: returns unsorted list (1)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Readability &amp; Style</strong>:</p>\n\n        <ul>\n          <li>1 = spaghetti code, no comments</li>\n          <li>5 = clean, well-structured, documented</li>\n          <li>Good: PEP8-compliant Python with comments (5)</li>\n          <li>Bad: one-line dense code (1)</li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n</ul>\n<p><strong>Rubrics &amp; Examples</strong>:</p>\n<ul>\n      <li>\n        <p><strong>Executability</strong>:</p>\n\n        <ul>\n          <li>1 = does not run at all</li>\n          <li>5 = runs cleanly with no errors/warnings</li>\n          <li>Good: script compiles and executes (5)</li>\n          <li>Bad: undefined variables and syntax errors (1)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Functional Correctness</strong>:</p>\n\n        <ul>\n          <li>1 = completely incorrect</li>\n          <li>5 = fully correct on all tested cases</li>\n          <li>Good: correct sorting algorithm (5)</li>\n          <li>Bad: returns unsorted list (1)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Readability &amp; Style</strong>:</p>\n\n        <ul>\n          <li>1 = spaghetti code, no comments</li>\n          <li>5 = clean, well-structured, documented</li>\n          <li>Good: PEP8-compliant Python with comments (5)</li>\n          <li>Bad: one-line dense code (1)</li>\n        </ul>\n      </li>\n    </ul>\n<p><strong>Executability</strong>:</p>\n<ul>\n          <li>1 = does not run at all</li>\n          <li>5 = runs cleanly with no errors/warnings</li>\n          <li>Good: script compiles and executes (5)</li>\n          <li>Bad: undefined variables and syntax errors (1)</li>\n        </ul>\n<p><strong>Functional Correctness</strong>:</p>\n<ul>\n          <li>1 = completely incorrect</li>\n          <li>5 = fully correct on all tested cases</li>\n          <li>Good: correct sorting algorithm (5)</li>\n          <li>Bad: returns unsorted list (1)</li>\n        </ul>\n<p><strong>Readability &amp; Style</strong>:</p>\n<ul>\n          <li>1 = spaghetti code, no comments</li>\n          <li>5 = clean, well-structured, documented</li>\n          <li>Good: PEP8-compliant Python with comments (5)</li>\n          <li>Bad: one-line dense code (1)</li>\n        </ul>\n<h4 id=\"math\">Math</h4>\n<ul>\n  <li>Evaluate reasoning correctness and step validity.</li>\n  <li>Ensure clarity and logical structure of solutions.</li>\n</ul>\n<h5 id=\"additional-math-specific-dimensions\">Additional Math-Specific Dimensions</h5>\n<ul>\n  <li>Use these <strong>in addition to the general dimensions</strong> if the sample is math:</li>\n</ul>\n<div align=\"center\">\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Step Correctness</td>\n<td class=\"tg-tleft-valign-second\">Are all intermediate reasoning steps correct?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Solution Validity</td>\n<td class=\"tg-tleft-valign-second\">Is the final result correct and consistent with steps?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Mathematical Clarity</td>\n<td class=\"tg-tleft-valign-second\">Are steps clearly presented and logically structured?</td>\n</tr>\n</tbody>\n</table>\n</div>\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Step Correctness</td>\n<td class=\"tg-tleft-valign-second\">Are all intermediate reasoning steps correct?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Solution Validity</td>\n<td class=\"tg-tleft-valign-second\">Is the final result correct and consistent with steps?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Mathematical Clarity</td>\n<td class=\"tg-tleft-valign-second\">Are steps clearly presented and logically structured?</td>\n</tr>\n</tbody>\n</table>\n<ul>\n  <li>\n    <p><strong>Rubrics &amp; Examples</strong>:</p>\n\n    <ul>\n      <li>\n        <p><strong>Step Correctness</strong>:</p>\n\n        <ul>\n          <li>1 = most steps wrong</li>\n          <li>5 = all steps correct</li>\n          <li>Good: each algebraic manipulation valid (5)</li>\n          <li>Bad: divides by zero (1)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Solution Validity</strong>:</p>\n\n        <ul>\n          <li>1 = wrong and inconsistent</li>\n          <li>5 = correct answer matching steps</li>\n          <li>Good: solves for x=5 correctly (5)</li>\n          <li>Bad: final answer 7 from valid steps but arithmetic mistake (2)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Mathematical Clarity</strong>:</p>\n\n        <ul>\n          <li>1 = extremely messy</li>\n          <li>5 = clear and structured</li>\n          <li>Good: labeled steps and proper equation layout (5)</li>\n          <li>Bad: steps scattered with no order (1)</li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n</ul>\n<p><strong>Rubrics &amp; Examples</strong>:</p>\n<ul>\n      <li>\n        <p><strong>Step Correctness</strong>:</p>\n\n        <ul>\n          <li>1 = most steps wrong</li>\n          <li>5 = all steps correct</li>\n          <li>Good: each algebraic manipulation valid (5)</li>\n          <li>Bad: divides by zero (1)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Solution Validity</strong>:</p>\n\n        <ul>\n          <li>1 = wrong and inconsistent</li>\n          <li>5 = correct answer matching steps</li>\n          <li>Good: solves for x=5 correctly (5)</li>\n          <li>Bad: final answer 7 from valid steps but arithmetic mistake (2)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Mathematical Clarity</strong>:</p>\n\n        <ul>\n          <li>1 = extremely messy</li>\n          <li>5 = clear and structured</li>\n          <li>Good: labeled steps and proper equation layout (5)</li>\n          <li>Bad: steps scattered with no order (1)</li>\n        </ul>\n      </li>\n    </ul>\n<p><strong>Step Correctness</strong>:</p>\n<ul>\n          <li>1 = most steps wrong</li>\n          <li>5 = all steps correct</li>\n          <li>Good: each algebraic manipulation valid (5)</li>\n          <li>Bad: divides by zero (1)</li>\n        </ul>\n<p><strong>Solution Validity</strong>:</p>\n<ul>\n          <li>1 = wrong and inconsistent</li>\n          <li>5 = correct answer matching steps</li>\n          <li>Good: solves for x=5 correctly (5)</li>\n          <li>Bad: final answer 7 from valid steps but arithmetic mistake (2)</li>\n        </ul>\n<p><strong>Mathematical Clarity</strong>:</p>\n<ul>\n          <li>1 = extremely messy</li>\n          <li>5 = clear and structured</li>\n          <li>Good: labeled steps and proper equation layout (5)</li>\n          <li>Bad: steps scattered with no order (1)</li>\n        </ul>\n<h4 id=\"multimodal\">Multimodal</h4>\n<ul>\n  <li>Check semantic alignment (e.g. image matches caption).</li>\n  <li>Detect unsafe content in either modality.</li>\n  <li>Judge informativeness and relevance of the pairing.</li>\n  <li>For reference: <a href=\"https://github.com/meta-llama/llama-guard\">LLaMA-Guard</a> can evaluate multimodal safety and relevance at scale.</li>\n</ul>\n<h5 id=\"additional-multimodal-specific-dimensions\">Additional Multimodal-Specific Dimensions</h5>\n<ul>\n  <li>Use these <strong>in addition to the general dimensions</strong> if the sample is multimodal:</li>\n</ul>\n<div align=\"center\">\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Image-Text Alignment</td>\n<td class=\"tg-tleft-valign-second\">Does the text accurately describe or match the image/video?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Visual Safety</td>\n<td class=\"tg-tleft-valign-second\">Is the visual content safe, non-violent, and non-NSFW?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Informativeness</td>\n<td class=\"tg-tleft-valign-second\">Is the pairing informative and relevant rather than trivial?</td>\n</tr>\n</tbody>\n</table>\n</div>\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Image-Text Alignment</td>\n<td class=\"tg-tleft-valign-second\">Does the text accurately describe or match the image/video?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Visual Safety</td>\n<td class=\"tg-tleft-valign-second\">Is the visual content safe, non-violent, and non-NSFW?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Informativeness</td>\n<td class=\"tg-tleft-valign-second\">Is the pairing informative and relevant rather than trivial?</td>\n</tr>\n</tbody>\n</table>\n<ul>\n  <li>\n    <p><strong>Rubrics &amp; Examples</strong>:</p>\n\n    <ul>\n      <li>\n        <p><strong>Image-Text Alignment</strong>:</p>\n\n        <ul>\n          <li>1 = completely mismatched</li>\n          <li>5 = fully aligned and descriptive</li>\n          <li>Good: caption “A red apple on a table” for red apple image (5)</li>\n          <li>Bad: caption “A cat running” for a dog image (1)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Visual Safety</strong>:</p>\n\n        <ul>\n          <li>1 = explicit unsafe/violent</li>\n          <li>5 = very safe and benign</li>\n          <li>Good: photo of a classroom (5)</li>\n          <li>Bad: graphic gore image (1)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Informativeness</strong>:</p>\n\n        <ul>\n          <li>1 = trivial/uninformative</li>\n          <li>5 = highly informative</li>\n          <li>Good: diagram labeling cell parts (5)</li>\n          <li>Bad: caption “This is an image” (1)</li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n</ul>\n<p><strong>Rubrics &amp; Examples</strong>:</p>\n<ul>\n      <li>\n        <p><strong>Image-Text Alignment</strong>:</p>\n\n        <ul>\n          <li>1 = completely mismatched</li>\n          <li>5 = fully aligned and descriptive</li>\n          <li>Good: caption “A red apple on a table” for red apple image (5)</li>\n          <li>Bad: caption “A cat running” for a dog image (1)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Visual Safety</strong>:</p>\n\n        <ul>\n          <li>1 = explicit unsafe/violent</li>\n          <li>5 = very safe and benign</li>\n          <li>Good: photo of a classroom (5)</li>\n          <li>Bad: graphic gore image (1)</li>\n        </ul>\n      </li>\n      <li>\n        <p><strong>Informativeness</strong>:</p>\n\n        <ul>\n          <li>1 = trivial/uninformative</li>\n          <li>5 = highly informative</li>\n          <li>Good: diagram labeling cell parts (5)</li>\n          <li>Bad: caption “This is an image” (1)</li>\n        </ul>\n      </li>\n    </ul>\n<p><strong>Image-Text Alignment</strong>:</p>\n<ul>\n          <li>1 = completely mismatched</li>\n          <li>5 = fully aligned and descriptive</li>\n          <li>Good: caption “A red apple on a table” for red apple image (5)</li>\n          <li>Bad: caption “A cat running” for a dog image (1)</li>\n        </ul>\n<p><strong>Visual Safety</strong>:</p>\n<ul>\n          <li>1 = explicit unsafe/violent</li>\n          <li>5 = very safe and benign</li>\n          <li>Good: photo of a classroom (5)</li>\n          <li>Bad: graphic gore image (1)</li>\n        </ul>\n<p><strong>Informativeness</strong>:</p>\n<ul>\n          <li>1 = trivial/uninformative</li>\n          <li>5 = highly informative</li>\n          <li>Good: diagram labeling cell parts (5)</li>\n          <li>Bad: caption “This is an image” (1)</li>\n        </ul>",
    "contentMarkdown": "*   Included below is a **structured evaluation prompt** that includes all general + modality-specific evaluation criteria and a per-criteria rubric, each with:\n    *   clear definitions,\n    *   1–5 Likert-scale rubrics,\n    *   good/bad examples,\n    *   and a structured JSON output format.\n*   The following sub-section highlight modality-specific evaluation criteria.\n\n*   clear definitions,\n*   1–5 Likert-scale rubrics,\n*   good/bad examples,\n*   and a structured JSON output format.\n\n#### Text\n\n*   Focus on fluency, coherence, factual correctness, and instruction relevance.\n*   Detect hallucinations or contradictions.\n\n![](https://aman.ai/images/copy.png)\n\n`You are an expert data quality evaluator.  Evaluate the following SAMPLE (which can be text, code, math, or multimodal). Assign scores from 1–5 on each dimension using the detailed rubrics below. For each score, include a 1–2 sentence explanation referencing specific aspects of the sample. Return your evaluation in JSON format.  SAMPLE TO EVALUATE: \"\"  ---  1. Fluency / Grammaticality Definition: Is the sample well-formed, grammatical, and easy to read?  Rubric: 1 - Completely unreadable or nonsensical. 2 - Frequent grammar errors, very awkward phrasing. 3 - Understandable but somewhat awkward or choppy. 4 - Clear and smooth with minor issues. 5 - Highly fluent, polished, and natural.  Good: \"The mitochondrion is the powerhouse of the cell.\" (5)   Bad: \"Cell power make mitochondria go boom.\" (1)  ---  2. Coherence / Logical Flow Definition: Do the ideas or steps follow a logical structure and make sense together?  Rubric: 1 - Totally disjointed or contradictory. 2 - Some logical gaps or contradictions. 3 - Mostly connected but occasionally inconsistent. 4 - Logical and structured with minor gaps. 5 - Fully logical, internally consistent, and well organized.  Good: \"First define the variable, then initialize it, then loop through values.\" (5)   Bad: \"Loop the values then define it after output.\" (1)  ---  3. Factuality / Correctness Definition: Are statements accurate and factually correct (or logically valid for math/code)?  Rubric: 1 - Mostly false or logically incorrect. 2 - More wrong than right; major errors. 3 - Mostly correct but some minor factual or logical issues. 4 - Correct with small inaccuracies. 5 - Fully accurate and factually correct.  Good: \"Paris is the capital of France.\" (5)   Bad: \"Paris is the capital of Germany.\" (1)  ---  4. Instruction-Following Relevance Definition: Does the response directly and completely address the given prompt/instruction?  Rubric: 1 - Completely unrelated to the instruction. 2 - Very partially related, ignores most of the instruction. 3 - Addresses the instruction partially. 4 - Fully addresses it with minor omissions. 5 - Fully addresses all aspects of the instruction.  Good: Prompt: \"List two prime numbers\" → \"2 and 3\" (5)   Bad: Prompt: \"List two prime numbers\" → \"Bananas are yellow.\" (1)  ---  5. Safety / Policy Compliance Definition: Is the content free from harmful, unsafe, or policy-violating content?  Rubric: 1 - Explicit harm, illegal activity, or hate content. 2 - Possibly unsafe or harmful. 3 - Mostly safe but some risky or borderline content. 4 - Safe and non-harmful. 5 - Very safe and benign.  Good: \"Describe how vaccines work to prevent disease.\" (5)   Bad: \"Describe how to make a bomb at home.\" (1)  ---  6. Conciseness / Clarity Definition: Is the content concise and clear without being vague or overly verbose?  Rubric: 1 - Extremely vague or overly verbose with no structure. 2 - Wordy or redundant; hard to follow. 3 - Somewhat clear but occasionally repetitive or rambling. 4 - Mostly concise and clear with minor redundancy. 5 - Very clear, concise, and well structured.  Good: \"Sort the list in ascending order using a for loop.\" (5)   Bad: \"You could, if you want, possibly sort the list, maybe in ascending order or something.\" (1)  ---  OUTPUT FORMAT: {   \"fluency\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"coherence\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"factuality\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"instruction_relevance\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"safety\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"conciseness\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"overall_average\": <mean score rounded to 2 decimals> }`\n\n![](https://aman.ai/images/copy.png)\n\n`You are an expert data quality evaluator.  Evaluate the following SAMPLE (which can be text, code, math, or multimodal). Assign scores from 1–5 on each dimension using the detailed rubrics below. For each score, include a 1–2 sentence explanation referencing specific aspects of the sample. Return your evaluation in JSON format.  SAMPLE TO EVALUATE: \"\"  ---  1. Fluency / Grammaticality Definition: Is the sample well-formed, grammatical, and easy to read?  Rubric: 1 - Completely unreadable or nonsensical. 2 - Frequent grammar errors, very awkward phrasing. 3 - Understandable but somewhat awkward or choppy. 4 - Clear and smooth with minor issues. 5 - Highly fluent, polished, and natural.  Good: \"The mitochondrion is the powerhouse of the cell.\" (5)   Bad: \"Cell power make mitochondria go boom.\" (1)  ---  2. Coherence / Logical Flow Definition: Do the ideas or steps follow a logical structure and make sense together?  Rubric: 1 - Totally disjointed or contradictory. 2 - Some logical gaps or contradictions. 3 - Mostly connected but occasionally inconsistent. 4 - Logical and structured with minor gaps. 5 - Fully logical, internally consistent, and well organized.  Good: \"First define the variable, then initialize it, then loop through values.\" (5)   Bad: \"Loop the values then define it after output.\" (1)  ---  3. Factuality / Correctness Definition: Are statements accurate and factually correct (or logically valid for math/code)?  Rubric: 1 - Mostly false or logically incorrect. 2 - More wrong than right; major errors. 3 - Mostly correct but some minor factual or logical issues. 4 - Correct with small inaccuracies. 5 - Fully accurate and factually correct.  Good: \"Paris is the capital of France.\" (5)   Bad: \"Paris is the capital of Germany.\" (1)  ---  4. Instruction-Following Relevance Definition: Does the response directly and completely address the given prompt/instruction?  Rubric: 1 - Completely unrelated to the instruction. 2 - Very partially related, ignores most of the instruction. 3 - Addresses the instruction partially. 4 - Fully addresses it with minor omissions. 5 - Fully addresses all aspects of the instruction.  Good: Prompt: \"List two prime numbers\" → \"2 and 3\" (5)   Bad: Prompt: \"List two prime numbers\" → \"Bananas are yellow.\" (1)  ---  5. Safety / Policy Compliance Definition: Is the content free from harmful, unsafe, or policy-violating content?  Rubric: 1 - Explicit harm, illegal activity, or hate content. 2 - Possibly unsafe or harmful. 3 - Mostly safe but some risky or borderline content. 4 - Safe and non-harmful. 5 - Very safe and benign.  Good: \"Describe how vaccines work to prevent disease.\" (5)   Bad: \"Describe how to make a bomb at home.\" (1)  ---  6. Conciseness / Clarity Definition: Is the content concise and clear without being vague or overly verbose?  Rubric: 1 - Extremely vague or overly verbose with no structure. 2 - Wordy or redundant; hard to follow. 3 - Somewhat clear but occasionally repetitive or rambling. 4 - Mostly concise and clear with minor redundancy. 5 - Very clear, concise, and well structured.  Good: \"Sort the list in ascending order using a for loop.\" (5)   Bad: \"You could, if you want, possibly sort the list, maybe in ascending order or something.\" (1)  ---  OUTPUT FORMAT: {   \"fluency\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"coherence\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"factuality\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"instruction_relevance\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"safety\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"conciseness\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"overall_average\": <mean score rounded to 2 decimals> }`\n\n#### Code\n\n*   Use LLMs to check algorithmic correctness, adherence to style, clarity of comments.\n*   Optionally verify executability using static analysis or lightweight test harnesses.\n\n##### Additional Code-Specific Dimensions\n\n*   Use these **in addition to the general dimensions** if the sample is code:\n\n**Dimension**\n\n**Description**\n\nExecutability\n\nDoes the code run without syntax/runtime errors?\n\nFunctional Correctness\n\nDoes it produce the correct output for the specified task?\n\nReadability & Style\n\nIs it readable, documented, and stylistically consistent?\n\n**Dimension**\n\n**Description**\n\nExecutability\n\nDoes the code run without syntax/runtime errors?\n\nFunctional Correctness\n\nDoes it produce the correct output for the specified task?\n\nReadability & Style\n\nIs it readable, documented, and stylistically consistent?\n\n*   **Rubrics & Examples**:\n    \n    *   **Executability**:\n        \n        *   1 = does not run at all\n        *   5 = runs cleanly with no errors/warnings\n        *   Good: script compiles and executes (5)\n        *   Bad: undefined variables and syntax errors (1)\n    *   **Functional Correctness**:\n        \n        *   1 = completely incorrect\n        *   5 = fully correct on all tested cases\n        *   Good: correct sorting algorithm (5)\n        *   Bad: returns unsorted list (1)\n    *   **Readability & Style**:\n        \n        *   1 = spaghetti code, no comments\n        *   5 = clean, well-structured, documented\n        *   Good: PEP8-compliant Python with comments (5)\n        *   Bad: one-line dense code (1)\n\n**Rubrics & Examples**:\n\n*   **Executability**:\n    \n    *   1 = does not run at all\n    *   5 = runs cleanly with no errors/warnings\n    *   Good: script compiles and executes (5)\n    *   Bad: undefined variables and syntax errors (1)\n*   **Functional Correctness**:\n    \n    *   1 = completely incorrect\n    *   5 = fully correct on all tested cases\n    *   Good: correct sorting algorithm (5)\n    *   Bad: returns unsorted list (1)\n*   **Readability & Style**:\n    \n    *   1 = spaghetti code, no comments\n    *   5 = clean, well-structured, documented\n    *   Good: PEP8-compliant Python with comments (5)\n    *   Bad: one-line dense code (1)\n\n**Executability**:\n\n*   1 = does not run at all\n*   5 = runs cleanly with no errors/warnings\n*   Good: script compiles and executes (5)\n*   Bad: undefined variables and syntax errors (1)\n\n**Functional Correctness**:\n\n*   1 = completely incorrect\n*   5 = fully correct on all tested cases\n*   Good: correct sorting algorithm (5)\n*   Bad: returns unsorted list (1)\n\n**Readability & Style**:\n\n*   1 = spaghetti code, no comments\n*   5 = clean, well-structured, documented\n*   Good: PEP8-compliant Python with comments (5)\n*   Bad: one-line dense code (1)\n\n#### Math\n\n*   Evaluate reasoning correctness and step validity.\n*   Ensure clarity and logical structure of solutions.\n\n##### Additional Math-Specific Dimensions\n\n*   Use these **in addition to the general dimensions** if the sample is math:\n\n**Dimension**\n\n**Description**\n\nStep Correctness\n\nAre all intermediate reasoning steps correct?\n\nSolution Validity\n\nIs the final result correct and consistent with steps?\n\nMathematical Clarity\n\nAre steps clearly presented and logically structured?\n\n**Dimension**\n\n**Description**\n\nStep Correctness\n\nAre all intermediate reasoning steps correct?\n\nSolution Validity\n\nIs the final result correct and consistent with steps?\n\nMathematical Clarity\n\nAre steps clearly presented and logically structured?\n\n*   **Rubrics & Examples**:\n    \n    *   **Step Correctness**:\n        \n        *   1 = most steps wrong\n        *   5 = all steps correct\n        *   Good: each algebraic manipulation valid (5)\n        *   Bad: divides by zero (1)\n    *   **Solution Validity**:\n        \n        *   1 = wrong and inconsistent\n        *   5 = correct answer matching steps\n        *   Good: solves for x=5 correctly (5)\n        *   Bad: final answer 7 from valid steps but arithmetic mistake (2)\n    *   **Mathematical Clarity**:\n        \n        *   1 = extremely messy\n        *   5 = clear and structured\n        *   Good: labeled steps and proper equation layout (5)\n        *   Bad: steps scattered with no order (1)\n\n**Rubrics & Examples**:\n\n*   **Step Correctness**:\n    \n    *   1 = most steps wrong\n    *   5 = all steps correct\n    *   Good: each algebraic manipulation valid (5)\n    *   Bad: divides by zero (1)\n*   **Solution Validity**:\n    \n    *   1 = wrong and inconsistent\n    *   5 = correct answer matching steps\n    *   Good: solves for x=5 correctly (5)\n    *   Bad: final answer 7 from valid steps but arithmetic mistake (2)\n*   **Mathematical Clarity**:\n    \n    *   1 = extremely messy\n    *   5 = clear and structured\n    *   Good: labeled steps and proper equation layout (5)\n    *   Bad: steps scattered with no order (1)\n\n**Step Correctness**:\n\n*   1 = most steps wrong\n*   5 = all steps correct\n*   Good: each algebraic manipulation valid (5)\n*   Bad: divides by zero (1)\n\n**Solution Validity**:\n\n*   1 = wrong and inconsistent\n*   5 = correct answer matching steps\n*   Good: solves for x=5 correctly (5)\n*   Bad: final answer 7 from valid steps but arithmetic mistake (2)\n\n**Mathematical Clarity**:\n\n*   1 = extremely messy\n*   5 = clear and structured\n*   Good: labeled steps and proper equation layout (5)\n*   Bad: steps scattered with no order (1)\n\n#### Multimodal\n\n*   Check semantic alignment (e.g. image matches caption).\n*   Detect unsafe content in either modality.\n*   Judge informativeness and relevance of the pairing.\n*   For reference: [LLaMA-Guard](https://github.com/meta-llama/llama-guard) can evaluate multimodal safety and relevance at scale.\n\n##### Additional Multimodal-Specific Dimensions\n\n*   Use these **in addition to the general dimensions** if the sample is multimodal:\n\n**Dimension**\n\n**Description**\n\nImage-Text Alignment\n\nDoes the text accurately describe or match the image/video?\n\nVisual Safety\n\nIs the visual content safe, non-violent, and non-NSFW?\n\nInformativeness\n\nIs the pairing informative and relevant rather than trivial?\n\n**Dimension**\n\n**Description**\n\nImage-Text Alignment\n\nDoes the text accurately describe or match the image/video?\n\nVisual Safety\n\nIs the visual content safe, non-violent, and non-NSFW?\n\nInformativeness\n\nIs the pairing informative and relevant rather than trivial?\n\n*   **Rubrics & Examples**:\n    \n    *   **Image-Text Alignment**:\n        \n        *   1 = completely mismatched\n        *   5 = fully aligned and descriptive\n        *   Good: caption “A red apple on a table” for red apple image (5)\n        *   Bad: caption “A cat running” for a dog image (1)\n    *   **Visual Safety**:\n        \n        *   1 = explicit unsafe/violent\n        *   5 = very safe and benign\n        *   Good: photo of a classroom (5)\n        *   Bad: graphic gore image (1)\n    *   **Informativeness**:\n        \n        *   1 = trivial/uninformative\n        *   5 = highly informative\n        *   Good: diagram labeling cell parts (5)\n        *   Bad: caption “This is an image” (1)\n\n**Rubrics & Examples**:\n\n*   **Image-Text Alignment**:\n    \n    *   1 = completely mismatched\n    *   5 = fully aligned and descriptive\n    *   Good: caption “A red apple on a table” for red apple image (5)\n    *   Bad: caption “A cat running” for a dog image (1)\n*   **Visual Safety**:\n    \n    *   1 = explicit unsafe/violent\n    *   5 = very safe and benign\n    *   Good: photo of a classroom (5)\n    *   Bad: graphic gore image (1)\n*   **Informativeness**:\n    \n    *   1 = trivial/uninformative\n    *   5 = highly informative\n    *   Good: diagram labeling cell parts (5)\n    *   Bad: caption “This is an image” (1)\n\n**Image-Text Alignment**:\n\n*   1 = completely mismatched\n*   5 = fully aligned and descriptive\n*   Good: caption “A red apple on a table” for red apple image (5)\n*   Bad: caption “A cat running” for a dog image (1)\n\n**Visual Safety**:\n\n*   1 = explicit unsafe/violent\n*   5 = very safe and benign\n*   Good: photo of a classroom (5)\n*   Bad: graphic gore image (1)\n\n**Informativeness**:\n\n*   1 = trivial/uninformative\n*   5 = highly informative\n*   Good: diagram labeling cell parts (5)\n*   Bad: caption “This is an image” (1)",
    "order": 12,
    "orderInChapter": 3,
    "difficulty": 3,
    "estimatedMinutes": 12,
    "tags": [
      "datatraining",
      "llm"
    ],
    "metadata": {
      "hasCode": true,
      "hasMath": false,
      "hasImages": true,
      "wordCount": 2389,
      "contentLength": 23342
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#evaluation-prompt-with-modality-specific-evaluation-criteria-and-rubric",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-aggregating-scores-13",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "title": "Aggregating Scores",
    "subtitle": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "contentHtml": "<ul>\n  <li>\n    <p>Collect scores per dimension <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-23-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-242\" style=\"width: 2.451em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.034em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1001.98em, 2.503em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-243\"><span class=\"msubsup\" id=\"MathJax-Span-244\"><span style=\"display: inline-block; position: relative; width: 0.836em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-245\" style=\"font-family: STIXGeneral-Italic;\">s</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.367em;\"><span class=\"mi\" id=\"MathJax-Span-246\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-247\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-248\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-249\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-23\">s_d(x)</script> and aggregate them into a composite quality score:</p>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-24-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>Q</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><munder><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>d</mi><mo>&amp;#x2208;</mo><mi>D</mi></mrow></munder><msub><mi>w</mi><mi>d</mi></msub><mo>&amp;#x22C5;</mo><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-250\" style=\"width: 10.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 8.701em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.096em, 1008.65em, 3.648em, -999.997em); top: -2.237em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-251\"><span class=\"mi\" id=\"MathJax-Span-252\" style=\"font-family: STIXGeneral-Italic;\">Q</span><span class=\"mo\" id=\"MathJax-Span-253\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-254\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-255\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-256\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"munderover\" id=\"MathJax-Span-257\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 1.357em; height: 0px;\"><span style=\"position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0.055em;\"><span class=\"mo\" id=\"MathJax-Span-258\" style=\"font-family: STIXSizeOneSym; vertical-align: -0.518em;\">∑</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1001.36em, 4.273em, -999.997em); top: -2.862em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-259\"><span class=\"mrow\" id=\"MathJax-Span-260\"><span class=\"mi\" id=\"MathJax-Span-261\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-262\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">∈</span><span class=\"mi\" id=\"MathJax-Span-263\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">D</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"msubsup\" id=\"MathJax-Span-264\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.63em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-265\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.68em;\"><span class=\"mi\" id=\"MathJax-Span-266\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-267\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">⋅</span><span class=\"msubsup\" id=\"MathJax-Span-268\" style=\"padding-left: 0.263em;\"><span style=\"display: inline-block; position: relative; width: 0.836em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-269\" style=\"font-family: STIXGeneral-Italic;\">s</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.367em;\"><span class=\"mi\" id=\"MathJax-Span-270\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-271\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-272\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-273\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.242em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.559em; border-left: 0px solid; width: 0px; height: 2.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mi>Q</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mo>∑</mo><mrow class=\"MJX-TeXAtom-ORD\"><mi>d</mi><mo>∈</mo><mi>D</mi></mrow></munder><msub><mi>w</mi><mi>d</mi></msub><mo>⋅</mo><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-24\">Q(x) = \\sum_{d \\in D} w_d \\cdot s_d(x)</script>\n\n    <ul>\n      <li>where <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-25-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>d</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-274\" style=\"width: 1.357em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1001.1em, 2.451em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-275\"><span class=\"msubsup\" id=\"MathJax-Span-276\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.63em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-277\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.68em;\"><span class=\"mi\" id=\"MathJax-Span-278\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>w</mi><mi>d</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-25\">w_d</script> are tunable weights. Data points below threshold on <strong>any critical dimension (like safety)</strong> can be hard-filtered.</li>\n    </ul>\n  </li>\n  <li>\n    <p>Some systems also use <strong>pairwise comparisons</strong>: the evaluator is given two candidates and asked which is better on each dimension, producing preference labels for training reward models.</p>\n  </li>\n</ul>\n<p>Collect scores per dimension <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-23-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-242\" style=\"width: 2.451em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.034em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1001.98em, 2.503em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-243\"><span class=\"msubsup\" id=\"MathJax-Span-244\"><span style=\"display: inline-block; position: relative; width: 0.836em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-245\" style=\"font-family: STIXGeneral-Italic;\">s</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.367em;\"><span class=\"mi\" id=\"MathJax-Span-246\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-247\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-248\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-249\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-23\">s_d(x)</script> and aggregate them into a composite quality score:</p>\n<ul>\n      <li>where <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-25-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>d</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-274\" style=\"width: 1.357em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1001.1em, 2.451em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-275\"><span class=\"msubsup\" id=\"MathJax-Span-276\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.63em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-277\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.68em;\"><span class=\"mi\" id=\"MathJax-Span-278\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>w</mi><mi>d</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-25\">w_d</script> are tunable weights. Data points below threshold on <strong>any critical dimension (like safety)</strong> can be hard-filtered.</li>\n    </ul>\n<p>Some systems also use <strong>pairwise comparisons</strong>: the evaluator is given two candidates and asked which is better on each dimension, producing preference labels for training reward models.</p>",
    "contentMarkdown": "*   Collect scores per dimension sd(x)sd(x)s\\_d(x) and aggregate them into a composite quality score:\n    \n    Q(x)\\=∑d∈Dwd⋅sd(x)Q(x)\\=∑d∈Dwd⋅sd(x)\n    \n    Q(x) = \\\\sum\\_{d \\\\in D} w\\_d \\\\cdot s\\_d(x)\n    *   where wdwdw\\_d are tunable weights. Data points below threshold on **any critical dimension (like safety)** can be hard-filtered.\n*   Some systems also use **pairwise comparisons**: the evaluator is given two candidates and asked which is better on each dimension, producing preference labels for training reward models.\n    \n\nCollect scores per dimension sd(x)sd(x)s\\_d(x) and aggregate them into a composite quality score:\n\n*   where wdwdw\\_d are tunable weights. Data points below threshold on **any critical dimension (like safety)** can be hard-filtered.\n\nSome systems also use **pairwise comparisons**: the evaluator is given two candidates and asked which is better on each dimension, producing preference labels for training reward models.",
    "order": 13,
    "orderInChapter": 4,
    "difficulty": 3,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 129,
      "contentLength": 15403
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#aggregating-scores",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-strengths-and-limitations-14",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "title": "Strengths and Limitations",
    "subtitle": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "contentHtml": "<ul>\n  <li>\n    <p><strong>Strengths</strong>:</p>\n\n    <ul>\n      <li>Scalable, consistent, and adaptable to new domains.</li>\n      <li>Captures nuanced properties impossible for simple heuristics.</li>\n      <li>Produces structured scores for filtering thresholds.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Limitations</strong>:</p>\n\n    <ul>\n      <li>Can inherit bias from the evaluator model.</li>\n      <li>May hallucinate or produce inconsistent judgments.</li>\n      <li>Requires calibration against human gold labels to remain reliable.</li>\n    </ul>\n  </li>\n</ul>\n<p><strong>Strengths</strong>:</p>\n<ul>\n      <li>Scalable, consistent, and adaptable to new domains.</li>\n      <li>Captures nuanced properties impossible for simple heuristics.</li>\n      <li>Produces structured scores for filtering thresholds.</li>\n    </ul>\n<p><strong>Limitations</strong>:</p>\n<ul>\n      <li>Can inherit bias from the evaluator model.</li>\n      <li>May hallucinate or produce inconsistent judgments.</li>\n      <li>Requires calibration against human gold labels to remain reliable.</li>\n    </ul>",
    "contentMarkdown": "*   **Strengths**:\n    \n    *   Scalable, consistent, and adaptable to new domains.\n    *   Captures nuanced properties impossible for simple heuristics.\n    *   Produces structured scores for filtering thresholds.\n*   **Limitations**:\n    \n    *   Can inherit bias from the evaluator model.\n    *   May hallucinate or produce inconsistent judgments.\n    *   Requires calibration against human gold labels to remain reliable.\n\n**Strengths**:\n\n*   Scalable, consistent, and adaptable to new domains.\n*   Captures nuanced properties impossible for simple heuristics.\n*   Produces structured scores for filtering thresholds.\n\n**Limitations**:\n\n*   Can inherit bias from the evaluator model.\n*   May hallucinate or produce inconsistent judgments.\n*   Requires calibration against human gold labels to remain reliable.",
    "order": 14,
    "orderInChapter": 5,
    "difficulty": 2,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 102,
      "contentLength": 1098
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#strengths-and-limitations",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-full-evaluation-prompt-with-integrated-modality-sp-15",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "title": "Full Evaluation Prompt with Integrated Modality-Specific Sections",
    "subtitle": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "contentHtml": "<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><div><button class=\"btn-copy\" data-clipboard-action=\"copy\" data-clipboard-target=\"#code1\"><img src=\"https://aman.ai/images/copy.png\" style=\"margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;\"></button></div><code id=\"code1\">You are an expert data quality evaluator. \nEvaluate the following SAMPLE (which can be text, code, math, or multimodal).\nAssign scores from 1–5 on each relevant dimension using the detailed rubrics below.\nFor each score, include a 1–2 sentence explanation referencing specific aspects of the sample.\nOnly score dimensions that apply to the sample’s type.\nReturn your evaluation in JSON format.\n\nSAMPLE TO EVALUATE:\n\"\"\n\n---\n\nGENERAL DIMENSIONS\n\n1. Fluency / Grammaticality\nDefinition: Is the sample well-formed, grammatical, and easy to read?\n\nRubric:\n1 - Completely unreadable or nonsensical.\n2 - Frequent grammar errors, very awkward phrasing.\n3 - Understandable but somewhat awkward or choppy.\n4 - Clear and smooth with minor issues.\n5 - Highly fluent, polished, and natural.\n\nGood: \"The mitochondrion is the powerhouse of the cell.\" (5)  \nBad: \"Cell power make mitochondria go boom.\" (1)\n\n---\n\n2. Coherence / Logical Flow\nDefinition: Do the ideas or steps follow a logical structure and make sense together?\n\nRubric:\n1 - Totally disjointed or contradictory.\n2 - Some logical gaps or contradictions.\n3 - Mostly connected but occasionally inconsistent.\n4 - Logical and structured with minor gaps.\n5 - Fully logical, internally consistent, and well organized.\n\nGood: \"First define the variable, then initialize it, then loop through values.\" (5)  \nBad: \"Loop the values then define it after output.\" (1)\n\n---\n\n3. Factuality / Correctness\nDefinition: Are statements accurate and factually correct (or logically valid for math/code)?\n\nRubric:\n1 - Mostly false or logically incorrect.\n2 - More wrong than right; major errors.\n3 - Mostly correct but some minor factual or logical issues.\n4 - Correct with small inaccuracies.\n5 - Fully accurate and factually correct.\n\nGood: \"Paris is the capital of France.\" (5)  \nBad: \"Paris is the capital of Germany.\" (1)\n\n---\n\n4. Instruction-Following Relevance\nDefinition: Does the response directly and completely address the given prompt/instruction?\n\nRubric:\n1 - Completely unrelated to the instruction.\n2 - Very partially related, ignores most of the instruction.\n3 - Addresses the instruction partially.\n4 - Fully addresses it with minor omissions.\n5 - Fully addresses all aspects of the instruction.\n\nGood:\nPrompt: \"List two prime numbers\" → \"2 and 3\" (5)  \nBad:\nPrompt: \"List two prime numbers\" → \"Bananas are yellow.\" (1)\n\n---\n\n5. Safety / Policy Compliance\nDefinition: Is the content free from harmful, unsafe, or policy-violating content?\n\nRubric:\n1 - Explicit harm, illegal activity, or hate content.\n2 - Possibly unsafe or harmful.\n3 - Mostly safe but some risky or borderline content.\n4 - Safe and non-harmful.\n5 - Very safe and benign.\n\nGood: \"Describe how vaccines work to prevent disease.\" (5)  \nBad: \"Describe how to make a bomb at home.\" (1)\n\n---\n\n6. Conciseness / Clarity\nDefinition: Is the content concise and clear without being vague or overly verbose?\n\nRubric:\n1 - Extremely vague or overly verbose with no structure.\n2 - Wordy or redundant; hard to follow.\n3 - Somewhat clear but occasionally repetitive or rambling.\n4 - Mostly concise and clear with minor redundancy.\n5 - Very clear, concise, and well structured.\n\nGood: \"Sort the list in ascending order using a for loop.\" (5)  \nBad: \"You could, if you want, possibly sort the list, maybe in ascending order or something.\" (1)\n\n---\n\nCODE-SPECIFIC DIMENSIONS\n\n7. Executability\nDefinition: Does the code run without syntax or runtime errors?\n\nRubric:\n1 - Does not run at all.\n2 - Runs with major errors.\n3 - Runs with minor errors or missing imports.\n4 - Runs with no errors but has warnings.\n5 - Runs cleanly with no errors or warnings.\n\nGood: A script that compiles and executes cleanly. (5)  \nBad: Code missing colons and undefined variables. (1)\n\n---\n\n8. Functional Correctness\nDefinition: Does the code produce correct output for the specified task?\n\nRubric:\n1 - Completely incorrect or unrelated functionality.\n2 - Attempts task but fails on most inputs.\n3 - Works on simple cases but fails on edge cases.\n4 - Works correctly with minor bugs.\n5 - Fully correct on all tested cases.\n\nGood: A correct sorting algorithm implementation. (5)  \nBad: Returns the unsorted list unchanged. (1)\n\n---\n\n9. Readability &amp; Style\nDefinition: Is the code readable, documented, and stylistically consistent?\n\nRubric:\n1 - Very hard to read, no structure or naming.\n2 - Poor formatting, unclear structure.\n3 - Understandable but inconsistent style.\n4 - Readable and mostly well-formatted.\n5 - Very clean, well-structured, and documented.\n\nGood: Clean PEP8-compliant Python with comments. (5)  \nBad: One-line spaghetti code with no comments. (1)\n\n---\n\nMATH-SPECIFIC DIMENSIONS\n\n10. Step Correctness\nDefinition: Are all intermediate reasoning steps correct?\n\nRubric:\n1 - Most steps are wrong.\n2 - Several major errors in steps.\n3 - Mostly correct steps with minor issues.\n4 - Correct steps with minor slips.\n5 - All steps logically correct.\n\nGood: Each algebraic manipulation is valid. (5)  \nBad: Divides by zero in step 2. (1)\n\n---\n\n11. Solution Validity\nDefinition: Is the final result correct and consistent with steps?\n\nRubric:\n1 - Final answer is wrong and inconsistent.\n2 - Final answer is wrong but steps are partly okay.\n3 - Steps lead to a wrong answer due to small error.\n4 - Correct answer with very small slip.\n5 - Correct answer consistent with steps.\n\nGood: Solves for x=5 correctly. (5)  \nBad: Gets x=7 from valid steps but arithmetic mistake. (2)\n\n---\n\n12. Mathematical Clarity\nDefinition: Are steps clearly presented and logically structured?\n\nRubric:\n1 - Extremely messy, hard to follow.\n2 - Poorly organized, hard to parse.\n3 - Understandable but unclear formatting.\n4 - Clear with minor formatting issues.\n5 - Very clear, structured, and readable.\n\nGood: Proper equation layout, labeled steps. (5)  \nBad: Steps scattered with no order. (1)\n\n---\n\nMULTIMODAL-SPECIFIC DIMENSIONS\n\n13. Image-Text Alignment\nDefinition: Does the text accurately describe or match the image/video?\n\nRubric:\n1 - Completely mismatched.\n2 - Mostly mismatched.\n3 - Some alignment but partially wrong.\n4 - Mostly aligned.\n5 - Fully aligned and descriptive.\n\nGood: Caption “A red apple on a table” for a red apple image. (5)  \nBad: Caption “A cat running” for a dog image. (1)\n\n---\n\n14. Visual Safety\nDefinition: Is the visual content safe and non-NSFW or non-violent?\n\nRubric:\n1 - Explicit unsafe or violent content.\n2 - Possibly unsafe or graphic.\n3 - Mostly safe but some risk.\n4 - Safe and benign.\n5 - Very safe, educational, and benign.\n\nGood: Photo of a classroom. (5)  \nBad: Graphic gore image. (1)\n\n---\n\n15. Informativeness\nDefinition: Is the image-text pair informative and non-trivial?\n\nRubric:\n1 - Trivial or uninformative.\n2 - Very shallow.\n3 - Somewhat informative.\n4 - Informative and detailed.\n5 - Highly informative and content-rich.\n\nGood: Diagram labeling parts of a cell. (5)  \nBad: Caption “This is an image” on a photo. (1)\n\n---\n\nOUTPUT FORMAT:\n{\n  \"fluency\": {...},\n  \"coherence\": {...},\n  ...\n  \"executability\": {...},\n  ...\n  \"image_text_alignment\": {...},\n  ...\n  \"overall_average\": &lt;mean of all scored dimensions, rounded to 2 decimals&gt;\n}\n</code></pre></div></div>\n<pre class=\"highlight\"><div><button class=\"btn-copy\" data-clipboard-action=\"copy\" data-clipboard-target=\"#code1\"><img src=\"https://aman.ai/images/copy.png\" style=\"margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;\"></button></div><code id=\"code1\">You are an expert data quality evaluator. \nEvaluate the following SAMPLE (which can be text, code, math, or multimodal).\nAssign scores from 1–5 on each relevant dimension using the detailed rubrics below.\nFor each score, include a 1–2 sentence explanation referencing specific aspects of the sample.\nOnly score dimensions that apply to the sample’s type.\nReturn your evaluation in JSON format.\n\nSAMPLE TO EVALUATE:\n\"\"\n\n---\n\nGENERAL DIMENSIONS\n\n1. Fluency / Grammaticality\nDefinition: Is the sample well-formed, grammatical, and easy to read?\n\nRubric:\n1 - Completely unreadable or nonsensical.\n2 - Frequent grammar errors, very awkward phrasing.\n3 - Understandable but somewhat awkward or choppy.\n4 - Clear and smooth with minor issues.\n5 - Highly fluent, polished, and natural.\n\nGood: \"The mitochondrion is the powerhouse of the cell.\" (5)  \nBad: \"Cell power make mitochondria go boom.\" (1)\n\n---\n\n2. Coherence / Logical Flow\nDefinition: Do the ideas or steps follow a logical structure and make sense together?\n\nRubric:\n1 - Totally disjointed or contradictory.\n2 - Some logical gaps or contradictions.\n3 - Mostly connected but occasionally inconsistent.\n4 - Logical and structured with minor gaps.\n5 - Fully logical, internally consistent, and well organized.\n\nGood: \"First define the variable, then initialize it, then loop through values.\" (5)  \nBad: \"Loop the values then define it after output.\" (1)\n\n---\n\n3. Factuality / Correctness\nDefinition: Are statements accurate and factually correct (or logically valid for math/code)?\n\nRubric:\n1 - Mostly false or logically incorrect.\n2 - More wrong than right; major errors.\n3 - Mostly correct but some minor factual or logical issues.\n4 - Correct with small inaccuracies.\n5 - Fully accurate and factually correct.\n\nGood: \"Paris is the capital of France.\" (5)  \nBad: \"Paris is the capital of Germany.\" (1)\n\n---\n\n4. Instruction-Following Relevance\nDefinition: Does the response directly and completely address the given prompt/instruction?\n\nRubric:\n1 - Completely unrelated to the instruction.\n2 - Very partially related, ignores most of the instruction.\n3 - Addresses the instruction partially.\n4 - Fully addresses it with minor omissions.\n5 - Fully addresses all aspects of the instruction.\n\nGood:\nPrompt: \"List two prime numbers\" → \"2 and 3\" (5)  \nBad:\nPrompt: \"List two prime numbers\" → \"Bananas are yellow.\" (1)\n\n---\n\n5. Safety / Policy Compliance\nDefinition: Is the content free from harmful, unsafe, or policy-violating content?\n\nRubric:\n1 - Explicit harm, illegal activity, or hate content.\n2 - Possibly unsafe or harmful.\n3 - Mostly safe but some risky or borderline content.\n4 - Safe and non-harmful.\n5 - Very safe and benign.\n\nGood: \"Describe how vaccines work to prevent disease.\" (5)  \nBad: \"Describe how to make a bomb at home.\" (1)\n\n---\n\n6. Conciseness / Clarity\nDefinition: Is the content concise and clear without being vague or overly verbose?\n\nRubric:\n1 - Extremely vague or overly verbose with no structure.\n2 - Wordy or redundant; hard to follow.\n3 - Somewhat clear but occasionally repetitive or rambling.\n4 - Mostly concise and clear with minor redundancy.\n5 - Very clear, concise, and well structured.\n\nGood: \"Sort the list in ascending order using a for loop.\" (5)  \nBad: \"You could, if you want, possibly sort the list, maybe in ascending order or something.\" (1)\n\n---\n\nCODE-SPECIFIC DIMENSIONS\n\n7. Executability\nDefinition: Does the code run without syntax or runtime errors?\n\nRubric:\n1 - Does not run at all.\n2 - Runs with major errors.\n3 - Runs with minor errors or missing imports.\n4 - Runs with no errors but has warnings.\n5 - Runs cleanly with no errors or warnings.\n\nGood: A script that compiles and executes cleanly. (5)  \nBad: Code missing colons and undefined variables. (1)\n\n---\n\n8. Functional Correctness\nDefinition: Does the code produce correct output for the specified task?\n\nRubric:\n1 - Completely incorrect or unrelated functionality.\n2 - Attempts task but fails on most inputs.\n3 - Works on simple cases but fails on edge cases.\n4 - Works correctly with minor bugs.\n5 - Fully correct on all tested cases.\n\nGood: A correct sorting algorithm implementation. (5)  \nBad: Returns the unsorted list unchanged. (1)\n\n---\n\n9. Readability &amp; Style\nDefinition: Is the code readable, documented, and stylistically consistent?\n\nRubric:\n1 - Very hard to read, no structure or naming.\n2 - Poor formatting, unclear structure.\n3 - Understandable but inconsistent style.\n4 - Readable and mostly well-formatted.\n5 - Very clean, well-structured, and documented.\n\nGood: Clean PEP8-compliant Python with comments. (5)  \nBad: One-line spaghetti code with no comments. (1)\n\n---\n\nMATH-SPECIFIC DIMENSIONS\n\n10. Step Correctness\nDefinition: Are all intermediate reasoning steps correct?\n\nRubric:\n1 - Most steps are wrong.\n2 - Several major errors in steps.\n3 - Mostly correct steps with minor issues.\n4 - Correct steps with minor slips.\n5 - All steps logically correct.\n\nGood: Each algebraic manipulation is valid. (5)  \nBad: Divides by zero in step 2. (1)\n\n---\n\n11. Solution Validity\nDefinition: Is the final result correct and consistent with steps?\n\nRubric:\n1 - Final answer is wrong and inconsistent.\n2 - Final answer is wrong but steps are partly okay.\n3 - Steps lead to a wrong answer due to small error.\n4 - Correct answer with very small slip.\n5 - Correct answer consistent with steps.\n\nGood: Solves for x=5 correctly. (5)  \nBad: Gets x=7 from valid steps but arithmetic mistake. (2)\n\n---\n\n12. Mathematical Clarity\nDefinition: Are steps clearly presented and logically structured?\n\nRubric:\n1 - Extremely messy, hard to follow.\n2 - Poorly organized, hard to parse.\n3 - Understandable but unclear formatting.\n4 - Clear with minor formatting issues.\n5 - Very clear, structured, and readable.\n\nGood: Proper equation layout, labeled steps. (5)  \nBad: Steps scattered with no order. (1)\n\n---\n\nMULTIMODAL-SPECIFIC DIMENSIONS\n\n13. Image-Text Alignment\nDefinition: Does the text accurately describe or match the image/video?\n\nRubric:\n1 - Completely mismatched.\n2 - Mostly mismatched.\n3 - Some alignment but partially wrong.\n4 - Mostly aligned.\n5 - Fully aligned and descriptive.\n\nGood: Caption “A red apple on a table” for a red apple image. (5)  \nBad: Caption “A cat running” for a dog image. (1)\n\n---\n\n14. Visual Safety\nDefinition: Is the visual content safe and non-NSFW or non-violent?\n\nRubric:\n1 - Explicit unsafe or violent content.\n2 - Possibly unsafe or graphic.\n3 - Mostly safe but some risk.\n4 - Safe and benign.\n5 - Very safe, educational, and benign.\n\nGood: Photo of a classroom. (5)  \nBad: Graphic gore image. (1)\n\n---\n\n15. Informativeness\nDefinition: Is the image-text pair informative and non-trivial?\n\nRubric:\n1 - Trivial or uninformative.\n2 - Very shallow.\n3 - Somewhat informative.\n4 - Informative and detailed.\n5 - Highly informative and content-rich.\n\nGood: Diagram labeling parts of a cell. (5)  \nBad: Caption “This is an image” on a photo. (1)\n\n---\n\nOUTPUT FORMAT:\n{\n  \"fluency\": {...},\n  \"coherence\": {...},\n  ...\n  \"executability\": {...},\n  ...\n  \"image_text_alignment\": {...},\n  ...\n  \"overall_average\": &lt;mean of all scored dimensions, rounded to 2 decimals&gt;\n}\n</code></pre>",
    "contentMarkdown": "![](https://aman.ai/images/copy.png)\n\n`You are an expert data quality evaluator.  Evaluate the following SAMPLE (which can be text, code, math, or multimodal). Assign scores from 1–5 on each relevant dimension using the detailed rubrics below. For each score, include a 1–2 sentence explanation referencing specific aspects of the sample. Only score dimensions that apply to the sample’s type. Return your evaluation in JSON format.  SAMPLE TO EVALUATE: \"\"  ---  GENERAL DIMENSIONS  1. Fluency / Grammaticality Definition: Is the sample well-formed, grammatical, and easy to read?  Rubric: 1 - Completely unreadable or nonsensical. 2 - Frequent grammar errors, very awkward phrasing. 3 - Understandable but somewhat awkward or choppy. 4 - Clear and smooth with minor issues. 5 - Highly fluent, polished, and natural.  Good: \"The mitochondrion is the powerhouse of the cell.\" (5)   Bad: \"Cell power make mitochondria go boom.\" (1)  ---  2. Coherence / Logical Flow Definition: Do the ideas or steps follow a logical structure and make sense together?  Rubric: 1 - Totally disjointed or contradictory. 2 - Some logical gaps or contradictions. 3 - Mostly connected but occasionally inconsistent. 4 - Logical and structured with minor gaps. 5 - Fully logical, internally consistent, and well organized.  Good: \"First define the variable, then initialize it, then loop through values.\" (5)   Bad: \"Loop the values then define it after output.\" (1)  ---  3. Factuality / Correctness Definition: Are statements accurate and factually correct (or logically valid for math/code)?  Rubric: 1 - Mostly false or logically incorrect. 2 - More wrong than right; major errors. 3 - Mostly correct but some minor factual or logical issues. 4 - Correct with small inaccuracies. 5 - Fully accurate and factually correct.  Good: \"Paris is the capital of France.\" (5)   Bad: \"Paris is the capital of Germany.\" (1)  ---  4. Instruction-Following Relevance Definition: Does the response directly and completely address the given prompt/instruction?  Rubric: 1 - Completely unrelated to the instruction. 2 - Very partially related, ignores most of the instruction. 3 - Addresses the instruction partially. 4 - Fully addresses it with minor omissions. 5 - Fully addresses all aspects of the instruction.  Good: Prompt: \"List two prime numbers\" → \"2 and 3\" (5)   Bad: Prompt: \"List two prime numbers\" → \"Bananas are yellow.\" (1)  ---  5. Safety / Policy Compliance Definition: Is the content free from harmful, unsafe, or policy-violating content?  Rubric: 1 - Explicit harm, illegal activity, or hate content. 2 - Possibly unsafe or harmful. 3 - Mostly safe but some risky or borderline content. 4 - Safe and non-harmful. 5 - Very safe and benign.  Good: \"Describe how vaccines work to prevent disease.\" (5)   Bad: \"Describe how to make a bomb at home.\" (1)  ---  6. Conciseness / Clarity Definition: Is the content concise and clear without being vague or overly verbose?  Rubric: 1 - Extremely vague or overly verbose with no structure. 2 - Wordy or redundant; hard to follow. 3 - Somewhat clear but occasionally repetitive or rambling. 4 - Mostly concise and clear with minor redundancy. 5 - Very clear, concise, and well structured.  Good: \"Sort the list in ascending order using a for loop.\" (5)   Bad: \"You could, if you want, possibly sort the list, maybe in ascending order or something.\" (1)  ---  CODE-SPECIFIC DIMENSIONS  7. Executability Definition: Does the code run without syntax or runtime errors?  Rubric: 1 - Does not run at all. 2 - Runs with major errors. 3 - Runs with minor errors or missing imports. 4 - Runs with no errors but has warnings. 5 - Runs cleanly with no errors or warnings.  Good: A script that compiles and executes cleanly. (5)   Bad: Code missing colons and undefined variables. (1)  ---  8. Functional Correctness Definition: Does the code produce correct output for the specified task?  Rubric: 1 - Completely incorrect or unrelated functionality. 2 - Attempts task but fails on most inputs. 3 - Works on simple cases but fails on edge cases. 4 - Works correctly with minor bugs. 5 - Fully correct on all tested cases.  Good: A correct sorting algorithm implementation. (5)   Bad: Returns the unsorted list unchanged. (1)  ---  9. Readability & Style Definition: Is the code readable, documented, and stylistically consistent?  Rubric: 1 - Very hard to read, no structure or naming. 2 - Poor formatting, unclear structure. 3 - Understandable but inconsistent style. 4 - Readable and mostly well-formatted. 5 - Very clean, well-structured, and documented.  Good: Clean PEP8-compliant Python with comments. (5)   Bad: One-line spaghetti code with no comments. (1)  ---  MATH-SPECIFIC DIMENSIONS  10. Step Correctness Definition: Are all intermediate reasoning steps correct?  Rubric: 1 - Most steps are wrong. 2 - Several major errors in steps. 3 - Mostly correct steps with minor issues. 4 - Correct steps with minor slips. 5 - All steps logically correct.  Good: Each algebraic manipulation is valid. (5)   Bad: Divides by zero in step 2. (1)  ---  11. Solution Validity Definition: Is the final result correct and consistent with steps?  Rubric: 1 - Final answer is wrong and inconsistent. 2 - Final answer is wrong but steps are partly okay. 3 - Steps lead to a wrong answer due to small error. 4 - Correct answer with very small slip. 5 - Correct answer consistent with steps.  Good: Solves for x=5 correctly. (5)   Bad: Gets x=7 from valid steps but arithmetic mistake. (2)  ---  12. Mathematical Clarity Definition: Are steps clearly presented and logically structured?  Rubric: 1 - Extremely messy, hard to follow. 2 - Poorly organized, hard to parse. 3 - Understandable but unclear formatting. 4 - Clear with minor formatting issues. 5 - Very clear, structured, and readable.  Good: Proper equation layout, labeled steps. (5)   Bad: Steps scattered with no order. (1)  ---  MULTIMODAL-SPECIFIC DIMENSIONS  13. Image-Text Alignment Definition: Does the text accurately describe or match the image/video?  Rubric: 1 - Completely mismatched. 2 - Mostly mismatched. 3 - Some alignment but partially wrong. 4 - Mostly aligned. 5 - Fully aligned and descriptive.  Good: Caption “A red apple on a table” for a red apple image. (5)   Bad: Caption “A cat running” for a dog image. (1)  ---  14. Visual Safety Definition: Is the visual content safe and non-NSFW or non-violent?  Rubric: 1 - Explicit unsafe or violent content. 2 - Possibly unsafe or graphic. 3 - Mostly safe but some risk. 4 - Safe and benign. 5 - Very safe, educational, and benign.  Good: Photo of a classroom. (5)   Bad: Graphic gore image. (1)  ---  15. Informativeness Definition: Is the image-text pair informative and non-trivial?  Rubric: 1 - Trivial or uninformative. 2 - Very shallow. 3 - Somewhat informative. 4 - Informative and detailed. 5 - Highly informative and content-rich.  Good: Diagram labeling parts of a cell. (5)   Bad: Caption “This is an image” on a photo. (1)  ---  OUTPUT FORMAT: {   \"fluency\": {...},   \"coherence\": {...},   ...   \"executability\": {...},   ...   \"image_text_alignment\": {...},   ...   \"overall_average\": <mean of all scored dimensions, rounded to 2 decimals> }`\n\n![](https://aman.ai/images/copy.png)\n\n`You are an expert data quality evaluator.  Evaluate the following SAMPLE (which can be text, code, math, or multimodal). Assign scores from 1–5 on each relevant dimension using the detailed rubrics below. For each score, include a 1–2 sentence explanation referencing specific aspects of the sample. Only score dimensions that apply to the sample’s type. Return your evaluation in JSON format.  SAMPLE TO EVALUATE: \"\"  ---  GENERAL DIMENSIONS  1. Fluency / Grammaticality Definition: Is the sample well-formed, grammatical, and easy to read?  Rubric: 1 - Completely unreadable or nonsensical. 2 - Frequent grammar errors, very awkward phrasing. 3 - Understandable but somewhat awkward or choppy. 4 - Clear and smooth with minor issues. 5 - Highly fluent, polished, and natural.  Good: \"The mitochondrion is the powerhouse of the cell.\" (5)   Bad: \"Cell power make mitochondria go boom.\" (1)  ---  2. Coherence / Logical Flow Definition: Do the ideas or steps follow a logical structure and make sense together?  Rubric: 1 - Totally disjointed or contradictory. 2 - Some logical gaps or contradictions. 3 - Mostly connected but occasionally inconsistent. 4 - Logical and structured with minor gaps. 5 - Fully logical, internally consistent, and well organized.  Good: \"First define the variable, then initialize it, then loop through values.\" (5)   Bad: \"Loop the values then define it after output.\" (1)  ---  3. Factuality / Correctness Definition: Are statements accurate and factually correct (or logically valid for math/code)?  Rubric: 1 - Mostly false or logically incorrect. 2 - More wrong than right; major errors. 3 - Mostly correct but some minor factual or logical issues. 4 - Correct with small inaccuracies. 5 - Fully accurate and factually correct.  Good: \"Paris is the capital of France.\" (5)   Bad: \"Paris is the capital of Germany.\" (1)  ---  4. Instruction-Following Relevance Definition: Does the response directly and completely address the given prompt/instruction?  Rubric: 1 - Completely unrelated to the instruction. 2 - Very partially related, ignores most of the instruction. 3 - Addresses the instruction partially. 4 - Fully addresses it with minor omissions. 5 - Fully addresses all aspects of the instruction.  Good: Prompt: \"List two prime numbers\" → \"2 and 3\" (5)   Bad: Prompt: \"List two prime numbers\" → \"Bananas are yellow.\" (1)  ---  5. Safety / Policy Compliance Definition: Is the content free from harmful, unsafe, or policy-violating content?  Rubric: 1 - Explicit harm, illegal activity, or hate content. 2 - Possibly unsafe or harmful. 3 - Mostly safe but some risky or borderline content. 4 - Safe and non-harmful. 5 - Very safe and benign.  Good: \"Describe how vaccines work to prevent disease.\" (5)   Bad: \"Describe how to make a bomb at home.\" (1)  ---  6. Conciseness / Clarity Definition: Is the content concise and clear without being vague or overly verbose?  Rubric: 1 - Extremely vague or overly verbose with no structure. 2 - Wordy or redundant; hard to follow. 3 - Somewhat clear but occasionally repetitive or rambling. 4 - Mostly concise and clear with minor redundancy. 5 - Very clear, concise, and well structured.  Good: \"Sort the list in ascending order using a for loop.\" (5)   Bad: \"You could, if you want, possibly sort the list, maybe in ascending order or something.\" (1)  ---  CODE-SPECIFIC DIMENSIONS  7. Executability Definition: Does the code run without syntax or runtime errors?  Rubric: 1 - Does not run at all. 2 - Runs with major errors. 3 - Runs with minor errors or missing imports. 4 - Runs with no errors but has warnings. 5 - Runs cleanly with no errors or warnings.  Good: A script that compiles and executes cleanly. (5)   Bad: Code missing colons and undefined variables. (1)  ---  8. Functional Correctness Definition: Does the code produce correct output for the specified task?  Rubric: 1 - Completely incorrect or unrelated functionality. 2 - Attempts task but fails on most inputs. 3 - Works on simple cases but fails on edge cases. 4 - Works correctly with minor bugs. 5 - Fully correct on all tested cases.  Good: A correct sorting algorithm implementation. (5)   Bad: Returns the unsorted list unchanged. (1)  ---  9. Readability & Style Definition: Is the code readable, documented, and stylistically consistent?  Rubric: 1 - Very hard to read, no structure or naming. 2 - Poor formatting, unclear structure. 3 - Understandable but inconsistent style. 4 - Readable and mostly well-formatted. 5 - Very clean, well-structured, and documented.  Good: Clean PEP8-compliant Python with comments. (5)   Bad: One-line spaghetti code with no comments. (1)  ---  MATH-SPECIFIC DIMENSIONS  10. Step Correctness Definition: Are all intermediate reasoning steps correct?  Rubric: 1 - Most steps are wrong. 2 - Several major errors in steps. 3 - Mostly correct steps with minor issues. 4 - Correct steps with minor slips. 5 - All steps logically correct.  Good: Each algebraic manipulation is valid. (5)   Bad: Divides by zero in step 2. (1)  ---  11. Solution Validity Definition: Is the final result correct and consistent with steps?  Rubric: 1 - Final answer is wrong and inconsistent. 2 - Final answer is wrong but steps are partly okay. 3 - Steps lead to a wrong answer due to small error. 4 - Correct answer with very small slip. 5 - Correct answer consistent with steps.  Good: Solves for x=5 correctly. (5)   Bad: Gets x=7 from valid steps but arithmetic mistake. (2)  ---  12. Mathematical Clarity Definition: Are steps clearly presented and logically structured?  Rubric: 1 - Extremely messy, hard to follow. 2 - Poorly organized, hard to parse. 3 - Understandable but unclear formatting. 4 - Clear with minor formatting issues. 5 - Very clear, structured, and readable.  Good: Proper equation layout, labeled steps. (5)   Bad: Steps scattered with no order. (1)  ---  MULTIMODAL-SPECIFIC DIMENSIONS  13. Image-Text Alignment Definition: Does the text accurately describe or match the image/video?  Rubric: 1 - Completely mismatched. 2 - Mostly mismatched. 3 - Some alignment but partially wrong. 4 - Mostly aligned. 5 - Fully aligned and descriptive.  Good: Caption “A red apple on a table” for a red apple image. (5)   Bad: Caption “A cat running” for a dog image. (1)  ---  14. Visual Safety Definition: Is the visual content safe and non-NSFW or non-violent?  Rubric: 1 - Explicit unsafe or violent content. 2 - Possibly unsafe or graphic. 3 - Mostly safe but some risk. 4 - Safe and benign. 5 - Very safe, educational, and benign.  Good: Photo of a classroom. (5)   Bad: Graphic gore image. (1)  ---  15. Informativeness Definition: Is the image-text pair informative and non-trivial?  Rubric: 1 - Trivial or uninformative. 2 - Very shallow. 3 - Somewhat informative. 4 - Informative and detailed. 5 - Highly informative and content-rich.  Good: Diagram labeling parts of a cell. (5)   Bad: Caption “This is an image” on a photo. (1)  ---  OUTPUT FORMAT: {   \"fluency\": {...},   \"coherence\": {...},   ...   \"executability\": {...},   ...   \"image_text_alignment\": {...},   ...   \"overall_average\": <mean of all scored dimensions, rounded to 2 decimals> }`",
    "order": 15,
    "orderInChapter": 6,
    "difficulty": 3,
    "estimatedMinutes": 12,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": true,
      "hasMath": false,
      "hasImages": true,
      "wordCount": 2302,
      "contentLength": 14974
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#full-evaluation-prompt-with-integrated-modality-specific-sections",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-evaluation-output-json-schema-16",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "title": "Evaluation Output JSON Schema",
    "subtitle": "LLM-Based Evaluation (LLM-as-a-Judge)",
    "contentHtml": "<ul>\n  <li>\n    <p>Use this schema to standardize evaluator outputs across general and modality-specific evaluations. This schema supports:</p>\n\n    <ul>\n      <li>Always-present <strong>general dimensions</strong></li>\n      <li><strong>Optional modality-specific dimensions</strong> that are included only if applicable</li>\n      <li>Standardized structure (score, explanation) for each dimension</li>\n      <li>An <code class=\"language-plaintext highlighter-rouge\">overall_average</code> computed over whichever dimensions were scored</li>\n    </ul>\n  </li>\n  <li>\n    <p>Each dimension has:</p>\n\n    <ul>\n      <li><code class=\"language-plaintext highlighter-rouge\">score</code>: integer from 1–5 (Likert rating)</li>\n      <li><code class=\"language-plaintext highlighter-rouge\">explanation</code>: 1–2 sentence rationale referring to the sample</li>\n    </ul>\n  </li>\n  <li>\n    <p>Optional fields are present only if the content matches that modality (code, math, multimodal).</p>\n  </li>\n</ul>\n<p>Use this schema to standardize evaluator outputs across general and modality-specific evaluations. This schema supports:</p>\n<ul>\n      <li>Always-present <strong>general dimensions</strong></li>\n      <li><strong>Optional modality-specific dimensions</strong> that are included only if applicable</li>\n      <li>Standardized structure (score, explanation) for each dimension</li>\n      <li>An <code class=\"language-plaintext highlighter-rouge\">overall_average</code> computed over whichever dimensions were scored</li>\n    </ul>\n<p>Each dimension has:</p>\n<ul>\n      <li><code class=\"language-plaintext highlighter-rouge\">score</code>: integer from 1–5 (Likert rating)</li>\n      <li><code class=\"language-plaintext highlighter-rouge\">explanation</code>: 1–2 sentence rationale referring to the sample</li>\n    </ul>\n<p>Optional fields are present only if the content matches that modality (code, math, multimodal).</p>\n<div class=\"language-json highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><div><button class=\"btn-copy\" data-clipboard-action=\"copy\" data-clipboard-target=\"#code2\"><img src=\"https://aman.ai/images/copy.png\" style=\"margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;\"></button></div><code id=\"code2\"><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"object\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"properties\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"fluency\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"object\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"properties\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"nl\">\"score\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"integer\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nl\">\"minimum\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nl\">\"maximum\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"nl\">\"explanation\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"string\"</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\">\n      </span><span class=\"p\">},</span><span class=\"w\">\n      </span><span class=\"nl\">\"required\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s2\">\"score\"</span><span class=\"p\">,</span><span class=\"s2\">\"explanation\"</span><span class=\"p\">]</span><span class=\"w\">\n    </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"coherence\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"factuality\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"instruction_relevance\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"safety\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"conciseness\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n\n    </span><span class=\"nl\">\"executability\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"functional_correctness\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"readability_style\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n\n    </span><span class=\"nl\">\"step_correctness\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"solution_validity\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"mathematical_clarity\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n\n    </span><span class=\"nl\">\"image_text_alignment\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"visual_safety\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"informativeness\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n\n    </span><span class=\"nl\">\"overall_average\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"number\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Mean of all present dimension scores, rounded to 2 decimals\"</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">},</span><span class=\"w\">\n  </span><span class=\"nl\">\"required\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n    </span><span class=\"s2\">\"fluency\"</span><span class=\"p\">,</span><span class=\"s2\">\"coherence\"</span><span class=\"p\">,</span><span class=\"s2\">\"factuality\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"s2\">\"instruction_relevance\"</span><span class=\"p\">,</span><span class=\"s2\">\"safety\"</span><span class=\"p\">,</span><span class=\"s2\">\"conciseness\"</span><span class=\"p\">,</span><span class=\"s2\">\"overall_average\"</span><span class=\"w\">\n  </span><span class=\"p\">],</span><span class=\"w\">\n  </span><span class=\"nl\">\"definitions\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"criterion\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"object\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"properties\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"nl\">\"score\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"integer\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nl\">\"minimum\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nl\">\"maximum\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"nl\">\"explanation\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"string\"</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\">\n      </span><span class=\"p\">},</span><span class=\"w\">\n      </span><span class=\"nl\">\"required\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s2\">\"score\"</span><span class=\"p\">,</span><span class=\"s2\">\"explanation\"</span><span class=\"p\">]</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">},</span><span class=\"w\">\n  </span><span class=\"nl\">\"additionalProperties\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre></div></div>\n<pre class=\"highlight\"><div><button class=\"btn-copy\" data-clipboard-action=\"copy\" data-clipboard-target=\"#code2\"><img src=\"https://aman.ai/images/copy.png\" style=\"margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;\"></button></div><code id=\"code2\"><span class=\"p\">{</span><span class=\"w\">\n  </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"object\"</span><span class=\"p\">,</span><span class=\"w\">\n  </span><span class=\"nl\">\"properties\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"fluency\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"object\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"properties\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"nl\">\"score\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"integer\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nl\">\"minimum\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nl\">\"maximum\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"nl\">\"explanation\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"string\"</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\">\n      </span><span class=\"p\">},</span><span class=\"w\">\n      </span><span class=\"nl\">\"required\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s2\">\"score\"</span><span class=\"p\">,</span><span class=\"s2\">\"explanation\"</span><span class=\"p\">]</span><span class=\"w\">\n    </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"coherence\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"factuality\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"instruction_relevance\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"safety\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"conciseness\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n\n    </span><span class=\"nl\">\"executability\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"functional_correctness\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"readability_style\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n\n    </span><span class=\"nl\">\"step_correctness\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"solution_validity\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"mathematical_clarity\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n\n    </span><span class=\"nl\">\"image_text_alignment\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"visual_safety\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n    </span><span class=\"nl\">\"informativeness\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"$ref\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"#/definitions/criterion\"</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n\n    </span><span class=\"nl\">\"overall_average\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"number\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"description\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"Mean of all present dimension scores, rounded to 2 decimals\"</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">},</span><span class=\"w\">\n  </span><span class=\"nl\">\"required\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"w\">\n    </span><span class=\"s2\">\"fluency\"</span><span class=\"p\">,</span><span class=\"s2\">\"coherence\"</span><span class=\"p\">,</span><span class=\"s2\">\"factuality\"</span><span class=\"p\">,</span><span class=\"w\">\n    </span><span class=\"s2\">\"instruction_relevance\"</span><span class=\"p\">,</span><span class=\"s2\">\"safety\"</span><span class=\"p\">,</span><span class=\"s2\">\"conciseness\"</span><span class=\"p\">,</span><span class=\"s2\">\"overall_average\"</span><span class=\"w\">\n  </span><span class=\"p\">],</span><span class=\"w\">\n  </span><span class=\"nl\">\"definitions\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n    </span><span class=\"nl\">\"criterion\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n      </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"object\"</span><span class=\"p\">,</span><span class=\"w\">\n      </span><span class=\"nl\">\"properties\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\">\n        </span><span class=\"nl\">\"score\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"integer\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nl\">\"minimum\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nl\">\"maximum\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"p\">},</span><span class=\"w\">\n        </span><span class=\"nl\">\"explanation\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"nl\">\"type\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"string\"</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\">\n      </span><span class=\"p\">},</span><span class=\"w\">\n      </span><span class=\"nl\">\"required\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s2\">\"score\"</span><span class=\"p\">,</span><span class=\"s2\">\"explanation\"</span><span class=\"p\">]</span><span class=\"w\">\n    </span><span class=\"p\">}</span><span class=\"w\">\n  </span><span class=\"p\">},</span><span class=\"w\">\n  </span><span class=\"nl\">\"additionalProperties\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"w\">\n</span><span class=\"p\">}</span><span class=\"w\">\n</span></code></pre>\n<ul>\n  <li>\n    <p><strong>Notes:</strong></p>\n\n    <ul>\n      <li><code class=\"language-plaintext highlighter-rouge\">executability</code>, <code class=\"language-plaintext highlighter-rouge\">functional_correctness</code>, <code class=\"language-plaintext highlighter-rouge\">readability_style</code> are included only for <strong>code samples</strong>.</li>\n      <li><code class=\"language-plaintext highlighter-rouge\">step_correctness</code>, <code class=\"language-plaintext highlighter-rouge\">solution_validity</code>, <code class=\"language-plaintext highlighter-rouge\">mathematical_clarity</code> are included only for <strong>math samples</strong>.</li>\n      <li><code class=\"language-plaintext highlighter-rouge\">image_text_alignment</code>, <code class=\"language-plaintext highlighter-rouge\">visual_safety</code>, <code class=\"language-plaintext highlighter-rouge\">informativeness</code> are included only for <strong>multimodal samples</strong>.</li>\n      <li><code class=\"language-plaintext highlighter-rouge\">overall_average</code> is computed dynamically from all scored fields present.</li>\n    </ul>\n  </li>\n</ul>\n<p><strong>Notes:</strong></p>\n<ul>\n      <li><code class=\"language-plaintext highlighter-rouge\">executability</code>, <code class=\"language-plaintext highlighter-rouge\">functional_correctness</code>, <code class=\"language-plaintext highlighter-rouge\">readability_style</code> are included only for <strong>code samples</strong>.</li>\n      <li><code class=\"language-plaintext highlighter-rouge\">step_correctness</code>, <code class=\"language-plaintext highlighter-rouge\">solution_validity</code>, <code class=\"language-plaintext highlighter-rouge\">mathematical_clarity</code> are included only for <strong>math samples</strong>.</li>\n      <li><code class=\"language-plaintext highlighter-rouge\">image_text_alignment</code>, <code class=\"language-plaintext highlighter-rouge\">visual_safety</code>, <code class=\"language-plaintext highlighter-rouge\">informativeness</code> are included only for <strong>multimodal samples</strong>.</li>\n      <li><code class=\"language-plaintext highlighter-rouge\">overall_average</code> is computed dynamically from all scored fields present.</li>\n    </ul>",
    "contentMarkdown": "*   Use this schema to standardize evaluator outputs across general and modality-specific evaluations. This schema supports:\n    \n    *   Always-present **general dimensions**\n    *   **Optional modality-specific dimensions** that are included only if applicable\n    *   Standardized structure (score, explanation) for each dimension\n    *   An `overall_average` computed over whichever dimensions were scored\n*   Each dimension has:\n    \n    *   `score`: integer from 1–5 (Likert rating)\n    *   `explanation`: 1–2 sentence rationale referring to the sample\n*   Optional fields are present only if the content matches that modality (code, math, multimodal).\n    \n\nUse this schema to standardize evaluator outputs across general and modality-specific evaluations. This schema supports:\n\n*   Always-present **general dimensions**\n*   **Optional modality-specific dimensions** that are included only if applicable\n*   Standardized structure (score, explanation) for each dimension\n*   An `overall_average` computed over whichever dimensions were scored\n\nEach dimension has:\n\n*   `score`: integer from 1–5 (Likert rating)\n*   `explanation`: 1–2 sentence rationale referring to the sample\n\nOptional fields are present only if the content matches that modality (code, math, multimodal).\n\n![](https://aman.ai/images/copy.png)\n\n`{   \"type\": \"object\",   \"properties\": {     \"fluency\": {       \"type\": \"object\",       \"properties\": {         \"score\": { \"type\": \"integer\", \"minimum\": 1, \"maximum\": 5 },         \"explanation\": { \"type\": \"string\" }       },       \"required\": [\"score\",\"explanation\"]     },     \"coherence\": { \"$ref\": \"#/definitions/criterion\" },     \"factuality\": { \"$ref\": \"#/definitions/criterion\" },     \"instruction_relevance\": { \"$ref\": \"#/definitions/criterion\" },     \"safety\": { \"$ref\": \"#/definitions/criterion\" },     \"conciseness\": { \"$ref\": \"#/definitions/criterion\" },      \"executability\": { \"$ref\": \"#/definitions/criterion\" },     \"functional_correctness\": { \"$ref\": \"#/definitions/criterion\" },     \"readability_style\": { \"$ref\": \"#/definitions/criterion\" },      \"step_correctness\": { \"$ref\": \"#/definitions/criterion\" },     \"solution_validity\": { \"$ref\": \"#/definitions/criterion\" },     \"mathematical_clarity\": { \"$ref\": \"#/definitions/criterion\" },      \"image_text_alignment\": { \"$ref\": \"#/definitions/criterion\" },     \"visual_safety\": { \"$ref\": \"#/definitions/criterion\" },     \"informativeness\": { \"$ref\": \"#/definitions/criterion\" },      \"overall_average\": {       \"type\": \"number\",       \"description\": \"Mean of all present dimension scores, rounded to 2 decimals\"     }   },   \"required\": [     \"fluency\",\"coherence\",\"factuality\",     \"instruction_relevance\",\"safety\",\"conciseness\",\"overall_average\"   ],   \"definitions\": {     \"criterion\": {       \"type\": \"object\",       \"properties\": {         \"score\": { \"type\": \"integer\", \"minimum\": 1, \"maximum\": 5 },         \"explanation\": { \"type\": \"string\" }       },       \"required\": [\"score\",\"explanation\"]     }   },   \"additionalProperties\": false }`\n\n![](https://aman.ai/images/copy.png)\n\n`{   \"type\": \"object\",   \"properties\": {     \"fluency\": {       \"type\": \"object\",       \"properties\": {         \"score\": { \"type\": \"integer\", \"minimum\": 1, \"maximum\": 5 },         \"explanation\": { \"type\": \"string\" }       },       \"required\": [\"score\",\"explanation\"]     },     \"coherence\": { \"$ref\": \"#/definitions/criterion\" },     \"factuality\": { \"$ref\": \"#/definitions/criterion\" },     \"instruction_relevance\": { \"$ref\": \"#/definitions/criterion\" },     \"safety\": { \"$ref\": \"#/definitions/criterion\" },     \"conciseness\": { \"$ref\": \"#/definitions/criterion\" },      \"executability\": { \"$ref\": \"#/definitions/criterion\" },     \"functional_correctness\": { \"$ref\": \"#/definitions/criterion\" },     \"readability_style\": { \"$ref\": \"#/definitions/criterion\" },      \"step_correctness\": { \"$ref\": \"#/definitions/criterion\" },     \"solution_validity\": { \"$ref\": \"#/definitions/criterion\" },     \"mathematical_clarity\": { \"$ref\": \"#/definitions/criterion\" },      \"image_text_alignment\": { \"$ref\": \"#/definitions/criterion\" },     \"visual_safety\": { \"$ref\": \"#/definitions/criterion\" },     \"informativeness\": { \"$ref\": \"#/definitions/criterion\" },      \"overall_average\": {       \"type\": \"number\",       \"description\": \"Mean of all present dimension scores, rounded to 2 decimals\"     }   },   \"required\": [     \"fluency\",\"coherence\",\"factuality\",     \"instruction_relevance\",\"safety\",\"conciseness\",\"overall_average\"   ],   \"definitions\": {     \"criterion\": {       \"type\": \"object\",       \"properties\": {         \"score\": { \"type\": \"integer\", \"minimum\": 1, \"maximum\": 5 },         \"explanation\": { \"type\": \"string\" }       },       \"required\": [\"score\",\"explanation\"]     }   },   \"additionalProperties\": false }`\n\n*   **Notes:**\n    \n    *   `executability`, `functional_correctness`, `readability_style` are included only for **code samples**.\n    *   `step_correctness`, `solution_validity`, `mathematical_clarity` are included only for **math samples**.\n    *   `image_text_alignment`, `visual_safety`, `informativeness` are included only for **multimodal samples**.\n    *   `overall_average` is computed dynamically from all scored fields present.\n\n**Notes:**\n\n*   `executability`, `functional_correctness`, `readability_style` are included only for **code samples**.\n*   `step_correctness`, `solution_validity`, `mathematical_clarity` are included only for **math samples**.\n*   `image_text_alignment`, `visual_safety`, `informativeness` are included only for **multimodal samples**.\n*   `overall_average` is computed dynamically from all scored fields present.",
    "order": 16,
    "orderInChapter": 7,
    "difficulty": 4,
    "estimatedMinutes": 3,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": true,
      "hasMath": false,
      "hasImages": true,
      "wordCount": 548,
      "contentLength": 25288
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#evaluation-output-json-schema",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-role-of-human-evaluation-in-filtering-pipelines-17",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Human Evaluation",
    "title": "Role of Human Evaluation in Filtering Pipelines",
    "subtitle": "Human Evaluation",
    "contentHtml": "<ul>\n  <li>\n    <p>Human evaluation is usually applied at three points:</p>\n\n    <ol>\n      <li><strong>Seeding</strong>: create small high-quality datasets used to bootstrap instruction tuning or preference models.</li>\n      <li><strong>Calibration</strong>: label a stratified sample to measure precision/recall of LLM-based and heuristic filters.</li>\n      <li><strong>Adjudication</strong>: resolve disagreements between LLM judges or detect failure cases they miss.</li>\n    </ol>\n  </li>\n  <li>\n    <p>This aligns with best practice:</p>\n\n    <p><strong>Cheap heuristics → LLM evaluators → human gold sets</strong> for calibration.</p>\n  </li>\n</ul>\n<p>Human evaluation is usually applied at three points:</p>\n<ol>\n      <li><strong>Seeding</strong>: create small high-quality datasets used to bootstrap instruction tuning or preference models.</li>\n      <li><strong>Calibration</strong>: label a stratified sample to measure precision/recall of LLM-based and heuristic filters.</li>\n      <li><strong>Adjudication</strong>: resolve disagreements between LLM judges or detect failure cases they miss.</li>\n    </ol>\n<p>This aligns with best practice:</p>\n<p><strong>Cheap heuristics → LLM evaluators → human gold sets</strong> for calibration.</p>",
    "contentMarkdown": "*   Human evaluation is usually applied at three points:\n    \n    1.  **Seeding**: create small high-quality datasets used to bootstrap instruction tuning or preference models.\n    2.  **Calibration**: label a stratified sample to measure precision/recall of LLM-based and heuristic filters.\n    3.  **Adjudication**: resolve disagreements between LLM judges or detect failure cases they miss.\n*   This aligns with best practice:\n    \n    **Cheap heuristics → LLM evaluators → human gold sets** for calibration.\n    \n\nHuman evaluation is usually applied at three points:\n\n1.  **Seeding**: create small high-quality datasets used to bootstrap instruction tuning or preference models.\n2.  **Calibration**: label a stratified sample to measure precision/recall of LLM-based and heuristic filters.\n3.  **Adjudication**: resolve disagreements between LLM judges or detect failure cases they miss.\n\nThis aligns with best practice:\n\n**Cheap heuristics → LLM evaluators → human gold sets** for calibration.",
    "order": 17,
    "orderInChapter": 1,
    "difficulty": 3,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 132,
      "contentLength": 1256
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#role-of-human-evaluation-in-filtering-pipelines",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-core-evaluation-dimensions-for-humans-18",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Human Evaluation",
    "title": "Core Evaluation Dimensions for Humans",
    "subtitle": "Human Evaluation",
    "contentHtml": "<ul>\n  <li>Humans assess the same core dimensions as LLMs, but more reliably and with richer context:</li>\n</ul>\n<div align=\"center\">\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Fluency / Grammaticality</td>\n<td class=\"tg-tleft-valign-second\">Is the text/code/math well-formed and natural?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Coherence / Logical Flow</td>\n<td class=\"tg-tleft-valign-second\">Do the ideas or reasoning steps connect and flow logically?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Factuality / Correctness</td>\n<td class=\"tg-tleft-valign-second\">Are all statements or answers true and verifiable?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Instruction-Following</td>\n<td class=\"tg-tleft-valign-second\">Does the response fully and directly answer the prompt?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Relevance</td>\n<td class=\"tg-tleft-valign-second\">Is the content on-topic and task-appropriate?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Safety / Harmfulness</td>\n<td class=\"tg-tleft-valign-second\">Does it avoid toxic, biased, or policy-violating content?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Clarity / Conciseness</td>\n<td class=\"tg-tleft-valign-second\">Is it clearly expressed and free of verbosity or ambiguity?</td>\n</tr>\n</tbody>\n</table>\n</div>\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Fluency / Grammaticality</td>\n<td class=\"tg-tleft-valign-second\">Is the text/code/math well-formed and natural?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Coherence / Logical Flow</td>\n<td class=\"tg-tleft-valign-second\">Do the ideas or reasoning steps connect and flow logically?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Factuality / Correctness</td>\n<td class=\"tg-tleft-valign-second\">Are all statements or answers true and verifiable?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Instruction-Following</td>\n<td class=\"tg-tleft-valign-second\">Does the response fully and directly answer the prompt?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Relevance</td>\n<td class=\"tg-tleft-valign-second\">Is the content on-topic and task-appropriate?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Safety / Harmfulness</td>\n<td class=\"tg-tleft-valign-second\">Does it avoid toxic, biased, or policy-violating content?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Clarity / Conciseness</td>\n<td class=\"tg-tleft-valign-second\">Is it clearly expressed and free of verbosity or ambiguity?</td>\n</tr>\n</tbody>\n</table>\n<ul>\n  <li>Humans can also detect <strong>biases, stereotypes, and subtle harms</strong> that automated filters often miss.</li>\n</ul>",
    "contentMarkdown": "*   Humans assess the same core dimensions as LLMs, but more reliably and with richer context:\n\n**Dimension**\n\n**Description**\n\nFluency / Grammaticality\n\nIs the text/code/math well-formed and natural?\n\nCoherence / Logical Flow\n\nDo the ideas or reasoning steps connect and flow logically?\n\nFactuality / Correctness\n\nAre all statements or answers true and verifiable?\n\nInstruction-Following\n\nDoes the response fully and directly answer the prompt?\n\nRelevance\n\nIs the content on-topic and task-appropriate?\n\nSafety / Harmfulness\n\nDoes it avoid toxic, biased, or policy-violating content?\n\nClarity / Conciseness\n\nIs it clearly expressed and free of verbosity or ambiguity?\n\n**Dimension**\n\n**Description**\n\nFluency / Grammaticality\n\nIs the text/code/math well-formed and natural?\n\nCoherence / Logical Flow\n\nDo the ideas or reasoning steps connect and flow logically?\n\nFactuality / Correctness\n\nAre all statements or answers true and verifiable?\n\nInstruction-Following\n\nDoes the response fully and directly answer the prompt?\n\nRelevance\n\nIs the content on-topic and task-appropriate?\n\nSafety / Harmfulness\n\nDoes it avoid toxic, biased, or policy-violating content?\n\nClarity / Conciseness\n\nIs it clearly expressed and free of verbosity or ambiguity?\n\n*   Humans can also detect **biases, stereotypes, and subtle harms** that automated filters often miss.",
    "order": 18,
    "orderInChapter": 2,
    "difficulty": 3,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 185,
      "contentLength": 3015
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#core-evaluation-dimensions-for-humans",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-modality-specific-human-evaluation-19",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Human Evaluation",
    "title": "Modality-Specific Human Evaluation",
    "subtitle": "Human Evaluation",
    "contentHtml": "<h4 id=\"text-1\">Text</h4>\n<ul>\n  <li>Judge grammar, style, clarity, logical structure, and factual accuracy.</li>\n  <li>Identify subtle misinformation or hallucinated claims.</li>\n</ul>\n<h4 id=\"code-1\">Code</h4>\n<ul>\n  <li>Run code in a sandbox to verify functional correctness.</li>\n  <li>Assess readability, structure, and adherence to style/conventions.</li>\n  <li>Detect potentially unsafe or malicious patterns.</li>\n</ul>\n<h4 id=\"math-1\">Math</h4>\n<ul>\n  <li>Verify each reasoning step and the final result.</li>\n  <li>Evaluate clarity and logical flow of derivations.</li>\n</ul>\n<h4 id=\"multimodal-1\">Multimodal</h4>\n<ul>\n  <li>Check semantic alignment between image/video and text (caption matches image content).</li>\n  <li>Identify unsafe or sensitive visual content.</li>\n  <li>Evaluate informativeness and relevance of the pair.</li>\n</ul>",
    "contentMarkdown": "#### Text\n\n*   Judge grammar, style, clarity, logical structure, and factual accuracy.\n*   Identify subtle misinformation or hallucinated claims.\n\n#### Code\n\n*   Run code in a sandbox to verify functional correctness.\n*   Assess readability, structure, and adherence to style/conventions.\n*   Detect potentially unsafe or malicious patterns.\n\n#### Math\n\n*   Verify each reasoning step and the final result.\n*   Evaluate clarity and logical flow of derivations.\n\n#### Multimodal\n\n*   Check semantic alignment between image/video and text (caption matches image content).\n*   Identify unsafe or sensitive visual content.\n*   Evaluate informativeness and relevance of the pair.",
    "order": 19,
    "orderInChapter": 3,
    "difficulty": 3,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 94,
      "contentLength": 851
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#modality-specific-human-evaluation",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-quality-control-for-human-ratings-20",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Human Evaluation",
    "title": "Quality Control for Human Ratings",
    "subtitle": "Human Evaluation",
    "contentHtml": "<ul>\n  <li>\n    <p>Because human annotation is itself noisy, strong QC is crucial:</p>\n\n    <ul>\n      <li><strong>Rater training:</strong> Provide rubrics with concrete examples per dimension.</li>\n      <li><strong>Inter-rater reliability:</strong> Track agreement with metrics like <strong>Cohen’s <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-26-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03BA;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-279\" style=\"width: 0.726em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.571em; height: 0px; font-size: 121%;\"><span style=\"position: absolute; clip: rect(1.552em, 1000.57em, 2.327em, -999.997em); top: -2.167em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-280\"><span class=\"mi\" id=\"MathJax-Span-281\" style=\"font-family: STIXGeneral-Italic;\">κ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.172em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>κ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-26\">\\kappa</script></strong> or <strong>Krippendorff’s <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-27-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B1;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-282\" style=\"width: 0.777em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.622em; height: 0px; font-size: 121%;\"><span style=\"position: absolute; clip: rect(1.552em, 1000.62em, 2.327em, -999.997em); top: -2.167em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-283\"><span class=\"mi\" id=\"MathJax-Span-284\" style=\"font-family: STIXGeneral-Italic;\">α</span></span><span style=\"display: inline-block; width: 0px; height: 2.172em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>α</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-27\">\\alpha</script></strong>.</li>\n      <li><strong>Gold checks:</strong> Inject known examples to monitor rater accuracy.</li>\n      <li><strong>Multiple raters:</strong> Assign 2–5 raters per item and aggregate via majority vote or averaging.</li>\n    </ul>\n  </li>\n  <li>\n    <p>You can see example rating protocols from <a href=\"https://openai.com/research/learning-from-human-feedback\">OpenAI’s RLHF blog</a> and <a href=\"https://www.anthropic.com/news/constitutional-ai\">Anthropic’s HH-RLHF work</a>.</p>\n  </li>\n</ul>\n<p>Because human annotation is itself noisy, strong QC is crucial:</p>\n<ul>\n      <li><strong>Rater training:</strong> Provide rubrics with concrete examples per dimension.</li>\n      <li><strong>Inter-rater reliability:</strong> Track agreement with metrics like <strong>Cohen’s <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-26-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03BA;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-279\" style=\"width: 0.726em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.571em; height: 0px; font-size: 121%;\"><span style=\"position: absolute; clip: rect(1.552em, 1000.57em, 2.327em, -999.997em); top: -2.167em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-280\"><span class=\"mi\" id=\"MathJax-Span-281\" style=\"font-family: STIXGeneral-Italic;\">κ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.172em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>κ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-26\">\\kappa</script></strong> or <strong>Krippendorff’s <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-27-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03B1;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-282\" style=\"width: 0.777em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.622em; height: 0px; font-size: 121%;\"><span style=\"position: absolute; clip: rect(1.552em, 1000.62em, 2.327em, -999.997em); top: -2.167em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-283\"><span class=\"mi\" id=\"MathJax-Span-284\" style=\"font-family: STIXGeneral-Italic;\">α</span></span><span style=\"display: inline-block; width: 0px; height: 2.172em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>α</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-27\">\\alpha</script></strong>.</li>\n      <li><strong>Gold checks:</strong> Inject known examples to monitor rater accuracy.</li>\n      <li><strong>Multiple raters:</strong> Assign 2–5 raters per item and aggregate via majority vote or averaging.</li>\n    </ul>\n<p>You can see example rating protocols from <a href=\"https://openai.com/research/learning-from-human-feedback\">OpenAI’s RLHF blog</a> and <a href=\"https://www.anthropic.com/news/constitutional-ai\">Anthropic’s HH-RLHF work</a>.</p>",
    "contentMarkdown": "*   Because human annotation is itself noisy, strong QC is crucial:\n    \n    *   **Rater training:** Provide rubrics with concrete examples per dimension.\n    *   **Inter-rater reliability:** Track agreement with metrics like **Cohen’s κκ\\\\kappa** or **Krippendorff’s αα\\\\alpha**.\n    *   **Gold checks:** Inject known examples to monitor rater accuracy.\n    *   **Multiple raters:** Assign 2–5 raters per item and aggregate via majority vote or averaging.\n*   You can see example rating protocols from [OpenAI’s RLHF blog](https://openai.com/research/learning-from-human-feedback) and [Anthropic’s HH-RLHF work](https://www.anthropic.com/news/constitutional-ai).\n    \n\nBecause human annotation is itself noisy, strong QC is crucial:\n\n*   **Rater training:** Provide rubrics with concrete examples per dimension.\n*   **Inter-rater reliability:** Track agreement with metrics like **Cohen’s κκ\\\\kappa** or **Krippendorff’s αα\\\\alpha**.\n*   **Gold checks:** Inject known examples to monitor rater accuracy.\n*   **Multiple raters:** Assign 2–5 raters per item and aggregate via majority vote or averaging.\n\nYou can see example rating protocols from [OpenAI’s RLHF blog](https://openai.com/research/learning-from-human-feedback) and [Anthropic’s HH-RLHF work](https://www.anthropic.com/news/constitutional-ai).",
    "order": 20,
    "orderInChapter": 4,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 146,
      "contentLength": 6599
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#quality-control-for-human-ratings",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-cost-and-scalability-21",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Human Evaluation",
    "title": "Cost and Scalability",
    "subtitle": "Human Evaluation",
    "contentHtml": "<ul>\n  <li>\n    <p>Human evaluation is expensive and slow, so apply it sparingly:</p>\n\n    <ul>\n      <li>small critical datasets,</li>\n      <li>periodic audits of larger sets,</li>\n      <li>and calibration of LLM-based scores.</li>\n    </ul>\n  </li>\n  <li>\n    <p>Common approach:</p>\n\n    <ul>\n      <li><strong>Human-label a small set → train/prompt LLM-evaluator on it → run LLM-evaluator over large corpus.</strong></li>\n    </ul>\n  </li>\n  <li>\n    <p>This gives the scalability of LLM evaluation while retaining human-level quality calibration.</p>\n  </li>\n</ul>\n<p>Human evaluation is expensive and slow, so apply it sparingly:</p>\n<ul>\n      <li>small critical datasets,</li>\n      <li>periodic audits of larger sets,</li>\n      <li>and calibration of LLM-based scores.</li>\n    </ul>\n<p>Common approach:</p>\n<ul>\n      <li><strong>Human-label a small set → train/prompt LLM-evaluator on it → run LLM-evaluator over large corpus.</strong></li>\n    </ul>\n<p>This gives the scalability of LLM evaluation while retaining human-level quality calibration.</p>",
    "contentMarkdown": "*   Human evaluation is expensive and slow, so apply it sparingly:\n    \n    *   small critical datasets,\n    *   periodic audits of larger sets,\n    *   and calibration of LLM-based scores.\n*   Common approach:\n    \n    *   **Human-label a small set → train/prompt LLM-evaluator on it → run LLM-evaluator over large corpus.**\n*   This gives the scalability of LLM evaluation while retaining human-level quality calibration.\n    \n\nHuman evaluation is expensive and slow, so apply it sparingly:\n\n*   small critical datasets,\n*   periodic audits of larger sets,\n*   and calibration of LLM-based scores.\n\nCommon approach:\n\n*   **Human-label a small set → train/prompt LLM-evaluator on it → run LLM-evaluator over large corpus.**\n\nThis gives the scalability of LLM evaluation while retaining human-level quality calibration.",
    "order": 21,
    "orderInChapter": 5,
    "difficulty": 3,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 115,
      "contentLength": 1065
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#cost-and-scalability",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-embedding-extraction-22",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Outlier Detection Via “Island” Analysis of Embeddings",
    "title": "Embedding Extraction",
    "subtitle": "Outlier Detection Via “Island” Analysis of Embeddings",
    "contentHtml": "<ul>\n  <li>\n    <p>Use a pretrained encoder to generate fixed-size vector embeddings for each sample.</p>\n\n    <ul>\n      <li>For text: <a href=\"https://platform.openai.com/docs/guides/embeddings\">OpenAI text-embedding-3-large</a>, <a href=\"https://huggingface.co/hkunlp/instructor-xl\">Instructor-XL</a>, or <a href=\"https://www.sbert.net/\">Sentence-BERT</a>.</li>\n      <li>For code: <a href=\"https://huggingface.co/microsoft/codebert-base\">CodeBERT</a>, <a href=\"https://platform.openai.com/docs/guides/embeddings\">OpenAI ada-code-embeddings</a>.</li>\n      <li>For math: encode serialized LaTeX or use math-specific text embeddings.</li>\n      <li>For multimodal: joint vision-language models like <a href=\"https://github.com/openai/CLIP\">CLIP</a>.</li>\n    </ul>\n  </li>\n  <li>\n    <p>Let each sample <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-28-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>x</mi><mi>i</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-285\" style=\"width: 0.888em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1000.73em, 2.451em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-286\"><span class=\"msubsup\" id=\"MathJax-Span-287\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-288\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-289\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>x</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-28\">x_i</script> have an embedding <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-29-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>i</mi></msub><mo>&amp;#x2208;</mo><msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;double-struck&quot;>R</mi></mrow><mi>d</mi></msup></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-290\" style=\"width: 3.753em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 3.128em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.201em, 1003.13em, 2.555em, -999.997em); top: -2.237em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-291\"><span class=\"msubsup\" id=\"MathJax-Span-292\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-293\"><span class=\"mrow\" id=\"MathJax-Span-294\"><span class=\"mi\" id=\"MathJax-Span-295\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-296\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-297\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">∈</span><span class=\"msubsup\" id=\"MathJax-Span-298\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 1.201em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-299\"><span class=\"mrow\" id=\"MathJax-Span-300\"><span class=\"mi\" id=\"MathJax-Span-301\" style=\"font-family: STIXGeneral-Regular;\">ℝ</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -4.372em; left: 0.732em;\"><span class=\"mi\" id=\"MathJax-Span-302\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.242em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.378em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>i</mi></msub><mo>∈</mo><msup><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"double-struck\">R</mi></mrow><mi>d</mi></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-29\">\\mathbf{e}_i \\in \\mathbb{R}^d</script>.</p>\n  </li>\n</ul>\n<p>Use a pretrained encoder to generate fixed-size vector embeddings for each sample.</p>\n<ul>\n      <li>For text: <a href=\"https://platform.openai.com/docs/guides/embeddings\">OpenAI text-embedding-3-large</a>, <a href=\"https://huggingface.co/hkunlp/instructor-xl\">Instructor-XL</a>, or <a href=\"https://www.sbert.net/\">Sentence-BERT</a>.</li>\n      <li>For code: <a href=\"https://huggingface.co/microsoft/codebert-base\">CodeBERT</a>, <a href=\"https://platform.openai.com/docs/guides/embeddings\">OpenAI ada-code-embeddings</a>.</li>\n      <li>For math: encode serialized LaTeX or use math-specific text embeddings.</li>\n      <li>For multimodal: joint vision-language models like <a href=\"https://github.com/openai/CLIP\">CLIP</a>.</li>\n    </ul>\n<p>Let each sample <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-28-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>x</mi><mi>i</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-285\" style=\"width: 0.888em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1000.73em, 2.451em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-286\"><span class=\"msubsup\" id=\"MathJax-Span-287\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-288\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-289\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>x</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-28\">x_i</script> have an embedding <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-29-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>i</mi></msub><mo>&amp;#x2208;</mo><msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;double-struck&quot;>R</mi></mrow><mi>d</mi></msup></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-290\" style=\"width: 3.753em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 3.128em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.201em, 1003.13em, 2.555em, -999.997em); top: -2.237em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-291\"><span class=\"msubsup\" id=\"MathJax-Span-292\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-293\"><span class=\"mrow\" id=\"MathJax-Span-294\"><span class=\"mi\" id=\"MathJax-Span-295\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-296\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-297\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">∈</span><span class=\"msubsup\" id=\"MathJax-Span-298\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 1.201em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-299\"><span class=\"mrow\" id=\"MathJax-Span-300\"><span class=\"mi\" id=\"MathJax-Span-301\" style=\"font-family: STIXGeneral-Regular;\">ℝ</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -4.372em; left: 0.732em;\"><span class=\"mi\" id=\"MathJax-Span-302\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.242em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.378em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>i</mi></msub><mo>∈</mo><msup><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"double-struck\">R</mi></mrow><mi>d</mi></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-29\">\\mathbf{e}_i \\in \\mathbb{R}^d</script>.</p>",
    "contentMarkdown": "*   Use a pretrained encoder to generate fixed-size vector embeddings for each sample.\n    \n    *   For text: [OpenAI text-embedding-3-large](https://platform.openai.com/docs/guides/embeddings), [Instructor-XL](https://huggingface.co/hkunlp/instructor-xl), or [Sentence-BERT](https://www.sbert.net/).\n    *   For code: [CodeBERT](https://huggingface.co/microsoft/codebert-base), [OpenAI ada-code-embeddings](https://platform.openai.com/docs/guides/embeddings).\n    *   For math: encode serialized LaTeX or use math-specific text embeddings.\n    *   For multimodal: joint vision-language models like [CLIP](https://github.com/openai/CLIP).\n*   Let each sample xixix\\_i have an embedding ei∈ℝdei∈Rd\\\\mathbf{e}\\_i \\\\in \\\\mathbb{R}^d.\n    \n\nUse a pretrained encoder to generate fixed-size vector embeddings for each sample.\n\n*   For text: [OpenAI text-embedding-3-large](https://platform.openai.com/docs/guides/embeddings), [Instructor-XL](https://huggingface.co/hkunlp/instructor-xl), or [Sentence-BERT](https://www.sbert.net/).\n*   For code: [CodeBERT](https://huggingface.co/microsoft/codebert-base), [OpenAI ada-code-embeddings](https://platform.openai.com/docs/guides/embeddings).\n*   For math: encode serialized LaTeX or use math-specific text embeddings.\n*   For multimodal: joint vision-language models like [CLIP](https://github.com/openai/CLIP).\n\nLet each sample xixix\\_i have an embedding ei∈ℝdei∈Rd\\\\mathbf{e}\\_i \\\\in \\\\mathbb{R}^d.",
    "order": 22,
    "orderInChapter": 1,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "embedding",
      "bert",
      "nlp"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 112,
      "contentLength": 12121
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#embedding-extraction",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-dimensionality-reduction-23",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Outlier Detection Via “Island” Analysis of Embeddings",
    "title": "Dimensionality Reduction",
    "subtitle": "Outlier Detection Via “Island” Analysis of Embeddings",
    "contentHtml": "<ul>\n  <li>High-dimensional embeddings are hard to cluster directly, so reduce them while preserving structure.</li>\n  <li>\n    <p>Common tools:</p>\n\n    <ul>\n      <li><a href=\"https://umap-learn.readthedocs.io/en/latest/\">UMAP</a>: preserves local topology, great for visualizing manifolds.</li>\n      <li><a href=\"https://lvdmaaten.github.io/tsne/\">t-SNE</a>: useful for small datasets.</li>\n      <li><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html\">PCA</a>: fast linear projection for large datasets.</li>\n    </ul>\n  </li>\n  <li>Formally, project <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-30-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>i</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-303\" style=\"width: 0.888em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.513em, 1000.73em, 2.451em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-304\"><span class=\"msubsup\" id=\"MathJax-Span-305\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-306\"><span class=\"mrow\" id=\"MathJax-Span-307\"><span class=\"mi\" id=\"MathJax-Span-308\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-309\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-30\">\\mathbf{e}_i</script> to <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-31-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>z</mi></mrow><mi>i</mi></msub><mo>&amp;#x2208;</mo><msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;double-struck&quot;>R</mi></mrow><mn>2</mn></msup></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-310\" style=\"width: 3.753em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 3.128em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.201em, 1003.13em, 2.555em, -999.997em); top: -2.237em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-311\"><span class=\"msubsup\" id=\"MathJax-Span-312\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-313\"><span class=\"mrow\" id=\"MathJax-Span-314\"><span class=\"mi\" id=\"MathJax-Span-315\" style=\"font-family: STIXGeneral; font-weight: bold;\">z</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-316\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-317\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">∈</span><span class=\"msubsup\" id=\"MathJax-Span-318\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 1.201em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-319\"><span class=\"mrow\" id=\"MathJax-Span-320\"><span class=\"mi\" id=\"MathJax-Span-321\" style=\"font-family: STIXGeneral-Regular;\">ℝ</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -4.372em; left: 0.732em;\"><span class=\"mn\" id=\"MathJax-Span-322\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">2</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.242em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.378em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">z</mi></mrow><mi>i</mi></msub><mo>∈</mo><msup><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"double-struck\">R</mi></mrow><mn>2</mn></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-31\">\\mathbf{z}_i \\in \\mathbb{R}^2</script> or <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-32-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;double-struck&quot;>R</mi></mrow><mn>3</mn></msup></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-323\" style=\"width: 1.461em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.201em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.096em, 1001.2em, 2.294em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-324\"><span class=\"msubsup\" id=\"MathJax-Span-325\"><span style=\"display: inline-block; position: relative; width: 1.201em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-326\"><span class=\"mrow\" id=\"MathJax-Span-327\"><span class=\"mi\" id=\"MathJax-Span-328\" style=\"font-family: STIXGeneral-Regular;\">ℝ</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -4.372em; left: 0.732em;\"><span class=\"mn\" id=\"MathJax-Span-329\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">3</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msup><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"double-struck\">R</mi></mrow><mn>3</mn></msup></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-32\">\\mathbb{R}^3</script>:</li>\n</ul>\n<p>Common tools:</p>\n<ul>\n      <li><a href=\"https://umap-learn.readthedocs.io/en/latest/\">UMAP</a>: preserves local topology, great for visualizing manifolds.</li>\n      <li><a href=\"https://lvdmaaten.github.io/tsne/\">t-SNE</a>: useful for small datasets.</li>\n      <li><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html\">PCA</a>: fast linear projection for large datasets.</li>\n    </ul>\n<div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-33-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>z</mi></mrow><mi>i</mi></msub><mo>=</mo><msub><mi>f</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>reduce</mtext></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>i</mi></msub><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-330\" style=\"width: 6.721em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.576em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1005.52em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-331\"><span class=\"msubsup\" id=\"MathJax-Span-332\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-333\"><span class=\"mrow\" id=\"MathJax-Span-334\"><span class=\"mi\" id=\"MathJax-Span-335\" style=\"font-family: STIXGeneral; font-weight: bold;\">z</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-336\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-337\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"msubsup\" id=\"MathJax-Span-338\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 2.242em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.42em, 4.378em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-339\" style=\"font-family: STIXGeneral-Italic;\">f<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.159em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.263em;\"><span class=\"texatom\" id=\"MathJax-Span-340\"><span class=\"mrow\" id=\"MathJax-Span-341\"><span class=\"mtext\" id=\"MathJax-Span-342\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">reduce</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-343\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"msubsup\" id=\"MathJax-Span-344\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-345\"><span class=\"mrow\" id=\"MathJax-Span-346\"><span class=\"mi\" id=\"MathJax-Span-347\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-348\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-349\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">z</mi></mrow><mi>i</mi></msub><mo>=</mo><msub><mi>f</mi><mrow class=\"MJX-TeXAtom-ORD\"><mtext>reduce</mtext></mrow></msub><mo stretchy=\"false\">(</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>i</mi></msub><mo stretchy=\"false\">)</mo></math></span></span></div>",
    "contentMarkdown": "*   High-dimensional embeddings are hard to cluster directly, so reduce them while preserving structure.\n*   Common tools:\n    \n    *   [UMAP](https://umap-learn.readthedocs.io/en/latest/): preserves local topology, great for visualizing manifolds.\n    *   [t-SNE](https://lvdmaaten.github.io/tsne/): useful for small datasets.\n    *   [PCA](https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html): fast linear projection for large datasets.\n*   Formally, project eiei\\\\mathbf{e}\\_i to zi∈ℝ2zi∈R2\\\\mathbf{z}\\_i \\\\in \\\\mathbb{R}^2 or ℝ3R3\\\\mathbb{R}^3:\n\nCommon tools:\n\n*   [UMAP](https://umap-learn.readthedocs.io/en/latest/): preserves local topology, great for visualizing manifolds.\n*   [t-SNE](https://lvdmaaten.github.io/tsne/): useful for small datasets.\n*   [PCA](https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html): fast linear projection for large datasets.\n\nzi\\=freduce(ei)zi\\=freduce(ei)",
    "order": 23,
    "orderInChapter": 2,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "embedding"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 76,
      "contentLength": 13006
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#dimensionality-reduction",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-clustering-and-outlier-detection-24",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Outlier Detection Via “Island” Analysis of Embeddings",
    "title": "Clustering and Outlier Detection",
    "subtitle": "Outlier Detection Via “Island” Analysis of Embeddings",
    "contentHtml": "<ul>\n  <li>\n    <p>Apply a density-based clustering algorithm on the reduced space:</p>\n\n    <ul>\n      <li><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html\">DBSCAN</a>: detects sparse outliers as noise.</li>\n      <li><a href=\"https://hdbscan.readthedocs.io/en/latest/\">HDBSCAN</a>: hierarchical version, handles variable densities.</li>\n      <li>KNN-distance based methods (local outlier factor, isolation forests).</li>\n    </ul>\n  </li>\n  <li>\n    <p>Let <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-34-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>d</mi><mi>i</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-350\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.784em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.305em, 1000.78em, 2.451em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-351\"><span class=\"msubsup\" id=\"MathJax-Span-352\"><span style=\"display: inline-block; position: relative; width: 0.784em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-353\" style=\"font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.055em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.523em;\"><span class=\"mi\" id=\"MathJax-Span-354\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>d</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-34\">d_i</script> be the distance from point <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-35-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-355\" style=\"width: 0.315em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.263em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.26em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-356\"><span class=\"mi\" id=\"MathJax-Span-357\" style=\"font-family: STIXGeneral-Italic;\">i</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>i</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-35\">i</script> to its k-nearest neighbors. Mark <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-36-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>x</mi><mi>i</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-358\" style=\"width: 0.888em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1000.73em, 2.451em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-359\"><span class=\"msubsup\" id=\"MathJax-Span-360\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-361\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-362\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>x</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-36\">x_i</script> as an outlier if:</p>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-37-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mfrac><mn>1</mn><mi>k</mi></mfrac><munderover><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>k</mi></mrow></munderover><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2016;</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>z</mi></mrow><mi>i</mi></msub><mo>&amp;#x2212;</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>z</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><msub><mtext>NN</mtext><mi>j</mi></msub></mrow></msub><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2016;</mo><mo>&amp;gt;</mo><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-363\" style=\"width: 10.003em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 8.336em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.263em, 1008.34em, 3.753em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-364\"><span class=\"mfrac\" id=\"MathJax-Span-365\"><span style=\"display: inline-block; position: relative; width: 0.628em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.42em, 4.169em, -999.997em); top: -4.685em; left: 50%; margin-left: -0.258em;\"><span class=\"mn\" id=\"MathJax-Span-366\" style=\"font-family: STIXGeneral-Regular;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.18em, 1000.47em, 4.169em, -999.997em); top: -3.331em; left: 50%; margin-left: -0.206em;\"><span class=\"mi\" id=\"MathJax-Span-367\" style=\"font-family: STIXGeneral-Italic;\">k<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1000.63em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.628em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span><span class=\"munderover\" id=\"MathJax-Span-368\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 1.305em; height: 0px;\"><span style=\"position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mo\" id=\"MathJax-Span-369\" style=\"font-family: STIXSizeOneSym; vertical-align: -0.518em;\">∑</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1000.94em, 4.43em, -999.997em); top: -2.862em; left: 0.107em;\"><span class=\"texatom\" id=\"MathJax-Span-370\"><span class=\"mrow\" id=\"MathJax-Span-371\"><span class=\"mi\" id=\"MathJax-Span-372\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">j<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-373\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">=</span><span class=\"mn\" id=\"MathJax-Span-374\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">1</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.284em, 1000.32em, 4.169em, -999.997em); top: -5.206em; left: 0.471em;\"><span class=\"texatom\" id=\"MathJax-Span-375\"><span class=\"mrow\" id=\"MathJax-Span-376\"><span class=\"mi\" id=\"MathJax-Span-377\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">k<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-378\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.211em;\">‖</span><span class=\"msubsup\" id=\"MathJax-Span-379\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-380\"><span class=\"mrow\" id=\"MathJax-Span-381\"><span class=\"mi\" id=\"MathJax-Span-382\" style=\"font-family: STIXGeneral; font-weight: bold;\">z</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-383\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-384\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">−</span><span class=\"msubsup\" id=\"MathJax-Span-385\" style=\"padding-left: 0.263em;\"><span style=\"display: inline-block; position: relative; width: 1.721em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-386\"><span class=\"mrow\" id=\"MathJax-Span-387\"><span class=\"mi\" id=\"MathJax-Span-388\" style=\"font-family: STIXGeneral; font-weight: bold;\">z</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"texatom\" id=\"MathJax-Span-389\"><span class=\"mrow\" id=\"MathJax-Span-390\"><span class=\"msubsup\" id=\"MathJax-Span-391\"><span style=\"display: inline-block; position: relative; width: 1.201em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.99em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mtext\" id=\"MathJax-Span-392\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">NN</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.904em; left: 1.044em;\"><span class=\"mi\" id=\"MathJax-Span-393\" style=\"font-size: 50%; font-family: STIXGeneral-Italic;\">j<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-394\" style=\"font-family: STIXGeneral-Regular;\">‖</span><span class=\"mo\" id=\"MathJax-Span-395\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&gt;</span><span class=\"mi\" id=\"MathJax-Span-396\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.315em;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.747em; border-left: 0px solid; width: 0px; height: 3.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mfrac><mn>1</mn><mi>k</mi></mfrac><munderover><mo>∑</mo><mrow class=\"MJX-TeXAtom-ORD\"><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mrow class=\"MJX-TeXAtom-ORD\"><mi>k</mi></mrow></munderover><mo fence=\"false\" stretchy=\"false\">‖</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">z</mi></mrow><mi>i</mi></msub><mo>−</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">z</mi></mrow><mrow class=\"MJX-TeXAtom-ORD\"><msub><mtext>NN</mtext><mi>j</mi></msub></mrow></msub><mo fence=\"false\" stretchy=\"false\">‖</mo><mo>&gt;</mo><mi>τ</mi></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-37\">\\frac{1}{k} \\sum_{j=1}^{k} \\| \\mathbf{z}_i - \\mathbf{z}_{\\text{NN}_j}\\| > \\tau</script>\n\n    <ul>\n      <li>where <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-38-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-397\" style=\"width: 0.576em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-398\"><span class=\"mi\" id=\"MathJax-Span-399\" style=\"font-family: STIXGeneral-Italic;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>τ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-38\">\\tau</script> is a distance threshold set from the distribution tail (e.g. 95th percentile).</li>\n    </ul>\n  </li>\n</ul>\n<p>Apply a density-based clustering algorithm on the reduced space:</p>\n<ul>\n      <li><a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html\">DBSCAN</a>: detects sparse outliers as noise.</li>\n      <li><a href=\"https://hdbscan.readthedocs.io/en/latest/\">HDBSCAN</a>: hierarchical version, handles variable densities.</li>\n      <li>KNN-distance based methods (local outlier factor, isolation forests).</li>\n    </ul>\n<p>Let <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-34-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>d</mi><mi>i</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-350\" style=\"width: 0.94em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.784em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.305em, 1000.78em, 2.451em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-351\"><span class=\"msubsup\" id=\"MathJax-Span-352\"><span style=\"display: inline-block; position: relative; width: 0.784em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.52em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-353\" style=\"font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.055em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.523em;\"><span class=\"mi\" id=\"MathJax-Span-354\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>d</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-34\">d_i</script> be the distance from point <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-35-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>i</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-355\" style=\"width: 0.315em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.263em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.26em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-356\"><span class=\"mi\" id=\"MathJax-Span-357\" style=\"font-family: STIXGeneral-Italic;\">i</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>i</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-35\">i</script> to its k-nearest neighbors. Mark <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-36-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>x</mi><mi>i</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-358\" style=\"width: 0.888em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1000.73em, 2.451em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-359\"><span class=\"msubsup\" id=\"MathJax-Span-360\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.47em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-361\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-362\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>x</mi><mi>i</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-36\">x_i</script> as an outlier if:</p>\n<ul>\n      <li>where <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-38-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-397\" style=\"width: 0.576em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-398\"><span class=\"mi\" id=\"MathJax-Span-399\" style=\"font-family: STIXGeneral-Italic;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>τ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-38\">\\tau</script> is a distance threshold set from the distribution tail (e.g. 95th percentile).</li>\n    </ul>",
    "contentMarkdown": "*   Apply a density-based clustering algorithm on the reduced space:\n    \n    *   [DBSCAN](https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html): detects sparse outliers as noise.\n    *   [HDBSCAN](https://hdbscan.readthedocs.io/en/latest/): hierarchical version, handles variable densities.\n    *   KNN-distance based methods (local outlier factor, isolation forests).\n*   Let didid\\_i be the distance from point iii to its k-nearest neighbors. Mark xixix\\_i as an outlier if:\n    \n    1k∑j\\=1k‖zi−zNNj‖\\>τ1k∑j\\=1k‖zi−zNNj‖\\>τ\n    \n    \\\\frac{1}{k} \\\\sum\\_{j=1}^{k} \\\\| \\\\mathbf{z}\\_i - \\\\mathbf{z}\\_{\\\\text{NN}\\_j}\\\\| > \\\\tau\n    *   where ττ\\\\tau is a distance threshold set from the distribution tail (e.g. 95th percentile).\n\nApply a density-based clustering algorithm on the reduced space:\n\n*   [DBSCAN](https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html): detects sparse outliers as noise.\n*   [HDBSCAN](https://hdbscan.readthedocs.io/en/latest/): hierarchical version, handles variable densities.\n*   KNN-distance based methods (local outlier factor, isolation forests).\n\nLet didid\\_i be the distance from point iii to its k-nearest neighbors. Mark xixix\\_i as an outlier if:\n\n*   where ττ\\\\tau is a distance threshold set from the distribution tail (e.g. 95th percentile).",
    "order": 24,
    "orderInChapter": 3,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 141,
      "contentLength": 22397
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#clustering-and-outlier-detection",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-visual-island-analysis-25",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Outlier Detection Via “Island” Analysis of Embeddings",
    "title": "Visual Island Analysis",
    "subtitle": "Outlier Detection Via “Island” Analysis of Embeddings",
    "contentHtml": "<ul>\n  <li>Visualize clusters in 2D (after UMAP/t-SNE) and label dense regions as <strong>core data</strong>, sparse isolated points as <strong>outliers</strong>.</li>\n  <li>\n    <p>Outlier points are often:</p>\n\n    <ul>\n      <li>mislabeled,</li>\n      <li>in the wrong language/domain,</li>\n      <li>adversarial or gibberish.</li>\n    </ul>\n  </li>\n  <li>This method is <strong>modality-agnostic</strong>: any data type that can be embedded can be checked for outlier islands.</li>\n</ul>\n<p>Outlier points are often:</p>\n<ul>\n      <li>mislabeled,</li>\n      <li>in the wrong language/domain,</li>\n      <li>adversarial or gibberish.</li>\n    </ul>",
    "contentMarkdown": "*   Visualize clusters in 2D (after UMAP/t-SNE) and label dense regions as **core data**, sparse isolated points as **outliers**.\n*   Outlier points are often:\n    \n    *   mislabeled,\n    *   in the wrong language/domain,\n    *   adversarial or gibberish.\n*   This method is **modality-agnostic**: any data type that can be embedded can be checked for outlier islands.\n\nOutlier points are often:\n\n*   mislabeled,\n*   in the wrong language/domain,\n*   adversarial or gibberish.",
    "order": 25,
    "orderInChapter": 4,
    "difficulty": 3,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 68,
      "contentLength": 652
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#visual-island-analysis",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-benefits-and-limitations-26",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Outlier Detection Via “Island” Analysis of Embeddings",
    "title": "Benefits and Limitations",
    "subtitle": "Outlier Detection Via “Island” Analysis of Embeddings",
    "contentHtml": "<ul>\n  <li>\n    <p><strong>Benefits</strong>:</p>\n\n    <ul>\n      <li>Detects rare harmful data missed by surface metrics.</li>\n      <li>Works without labels.</li>\n      <li>Naturally identifies domain boundaries.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Limitations</strong>:</p>\n\n    <ul>\n      <li>Requires embedding model coverage of the data domain.</li>\n      <li>Computationally heavy on very large datasets (typically done on stratified samples).</li>\n      <li>Choice of distance threshold <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-39-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-400\" style=\"width: 0.576em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-401\"><span class=\"mi\" id=\"MathJax-Span-402\" style=\"font-family: STIXGeneral-Italic;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>τ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-39\">\\tau</script> can affect sensitivity.</li>\n    </ul>\n  </li>\n</ul>\n<p><strong>Benefits</strong>:</p>\n<ul>\n      <li>Detects rare harmful data missed by surface metrics.</li>\n      <li>Works without labels.</li>\n      <li>Naturally identifies domain boundaries.</li>\n    </ul>\n<p><strong>Limitations</strong>:</p>\n<ul>\n      <li>Requires embedding model coverage of the data domain.</li>\n      <li>Computationally heavy on very large datasets (typically done on stratified samples).</li>\n      <li>Choice of distance threshold <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-39-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-400\" style=\"width: 0.576em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-401\"><span class=\"mi\" id=\"MathJax-Span-402\" style=\"font-family: STIXGeneral-Italic;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>τ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-39\">\\tau</script> can affect sensitivity.</li>\n    </ul>",
    "contentMarkdown": "*   **Benefits**:\n    \n    *   Detects rare harmful data missed by surface metrics.\n    *   Works without labels.\n    *   Naturally identifies domain boundaries.\n*   **Limitations**:\n    \n    *   Requires embedding model coverage of the data domain.\n    *   Computationally heavy on very large datasets (typically done on stratified samples).\n    *   Choice of distance threshold ττ\\\\tau can affect sensitivity.\n\n**Benefits**:\n\n*   Detects rare harmful data missed by surface metrics.\n*   Works without labels.\n*   Naturally identifies domain boundaries.\n\n**Limitations**:\n\n*   Requires embedding model coverage of the data domain.\n*   Computationally heavy on very large datasets (typically done on stratified samples).\n*   Choice of distance threshold ττ\\\\tau can affect sensitivity.",
    "order": 26,
    "orderInChapter": 5,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "embedding"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 102,
      "contentLength": 3624
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#benefits-and-limitations",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-core-prompt-quality-dimensions-27",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Prompt Quality Metrics",
    "title": "Core Prompt Quality Dimensions",
    "subtitle": "Prompt Quality Metrics",
    "contentHtml": "<ul>\n  <li>Here are the most commonly used dimensions:</li>\n</ul>\n<div align=\"center\">\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Clarity</td>\n<td class=\"tg-tleft-valign-second\">Is the prompt unambiguous, grammatically correct, and easy to understand?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Coherence</td>\n<td class=\"tg-tleft-valign-second\">Are all parts of the prompt consistent and logically connected?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Relevance</td>\n<td class=\"tg-tleft-valign-second\">Is the prompt relevant to the intended domain or instruction-following tasks?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Complexity</td>\n<td class=\"tg-tleft-valign-second\">Does it require nontrivial reasoning or knowledge, but not overly convoluted?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Specificity</td>\n<td class=\"tg-tleft-valign-second\">Is it specific enough to elicit a well-scoped response (not vague or underspecified)?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Safety</td>\n<td class=\"tg-tleft-valign-second\">Is it free from harmful, unsafe, biased, or policy-violating content?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Diversity (optional)</td>\n<td class=\"tg-tleft-valign-second\">Is it novel and distinct from many existing prompts (avoids near-duplicates)?</td>\n</tr>\n</tbody>\n</table>\n</div>\n<table class=\"tg\">\n<thead>\n<tr>\n<th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n<th class=\"tg-hcenter-valign-second\"><strong>Description</strong></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td class=\"tg-tleft-valign-first\">Clarity</td>\n<td class=\"tg-tleft-valign-second\">Is the prompt unambiguous, grammatically correct, and easy to understand?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Coherence</td>\n<td class=\"tg-tleft-valign-second\">Are all parts of the prompt consistent and logically connected?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Relevance</td>\n<td class=\"tg-tleft-valign-second\">Is the prompt relevant to the intended domain or instruction-following tasks?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Complexity</td>\n<td class=\"tg-tleft-valign-second\">Does it require nontrivial reasoning or knowledge, but not overly convoluted?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Specificity</td>\n<td class=\"tg-tleft-valign-second\">Is it specific enough to elicit a well-scoped response (not vague or underspecified)?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Safety</td>\n<td class=\"tg-tleft-valign-second\">Is it free from harmful, unsafe, biased, or policy-violating content?</td>\n</tr>\n<tr>\n<td class=\"tg-tleft-valign-first\">Diversity (optional)</td>\n<td class=\"tg-tleft-valign-second\">Is it novel and distinct from many existing prompts (avoids near-duplicates)?</td>\n</tr>\n</tbody>\n</table>\n<ul>\n  <li>These can be scored on a <strong>5-point Likert scale</strong> to enable aggregation.</li>\n</ul>",
    "contentMarkdown": "*   Here are the most commonly used dimensions:\n\n**Dimension**\n\n**Description**\n\nClarity\n\nIs the prompt unambiguous, grammatically correct, and easy to understand?\n\nCoherence\n\nAre all parts of the prompt consistent and logically connected?\n\nRelevance\n\nIs the prompt relevant to the intended domain or instruction-following tasks?\n\nComplexity\n\nDoes it require nontrivial reasoning or knowledge, but not overly convoluted?\n\nSpecificity\n\nIs it specific enough to elicit a well-scoped response (not vague or underspecified)?\n\nSafety\n\nIs it free from harmful, unsafe, biased, or policy-violating content?\n\nDiversity (optional)\n\nIs it novel and distinct from many existing prompts (avoids near-duplicates)?\n\n**Dimension**\n\n**Description**\n\nClarity\n\nIs the prompt unambiguous, grammatically correct, and easy to understand?\n\nCoherence\n\nAre all parts of the prompt consistent and logically connected?\n\nRelevance\n\nIs the prompt relevant to the intended domain or instruction-following tasks?\n\nComplexity\n\nDoes it require nontrivial reasoning or knowledge, but not overly convoluted?\n\nSpecificity\n\nIs it specific enough to elicit a well-scoped response (not vague or underspecified)?\n\nSafety\n\nIs it free from harmful, unsafe, biased, or policy-violating content?\n\nDiversity (optional)\n\nIs it novel and distinct from many existing prompts (avoids near-duplicates)?\n\n*   These can be scored on a **5-point Likert scale** to enable aggregation.",
    "order": 27,
    "orderInChapter": 1,
    "difficulty": 3,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 193,
      "contentLength": 3099
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#core-prompt-quality-dimensions",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-example-evaluation-prompt-with-rubrics-and-example-28",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Prompt Quality Metrics",
    "title": "Example Evaluation Prompt (with Rubrics and Examples)",
    "subtitle": "Prompt Quality Metrics",
    "contentHtml": "<ul>\n  <li>\n    <p>Below is a <strong>ready-to-use prompt</strong> for evaluating prompt quality that includes:</p>\n\n    <ul>\n      <li>clear instructions to an evaluator (human or LLM),</li>\n      <li>Likert-scale rubrics for each criterion,</li>\n      <li>and good/bad examples for every criterion (to ground judgment and improve reliability).</li>\n    </ul>\n  </li>\n</ul>\n<p>Below is a <strong>ready-to-use prompt</strong> for evaluating prompt quality that includes:</p>\n<ul>\n      <li>clear instructions to an evaluator (human or LLM),</li>\n      <li>Likert-scale rubrics for each criterion,</li>\n      <li>and good/bad examples for every criterion (to ground judgment and improve reliability).</li>\n    </ul>\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><div><button class=\"btn-copy\" data-clipboard-action=\"copy\" data-clipboard-target=\"#code3\"><img src=\"https://aman.ai/images/copy.png\" style=\"margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;\"></button></div><code id=\"code3\">You are an expert data quality evaluator. \nYour task is to rate the quality of the following PROMPT according to several dimensions. \nFor each dimension, give a 1–5 Likert score using the rubric and refer to the good/bad examples provided. \nThen give a short explanation (&lt;20 words) for each score. \nFinally, output your ratings in structured JSON.\n\nPROMPT TO EVALUATE:\n\"\"\n\n---\n\nEVALUATION DIMENSIONS, RUBRICS, AND EXAMPLES\n\n1. Clarity\nDefinition: Is the language clear, grammatical, and understandable to a general reader?\n\nRubric:\n1 - Completely unclear, nonsensical.\n2 - Many grammatical errors, hard to follow.\n3 - Understandable but awkward or ambiguous.\n4 - Clear with minor issues.\n5 - Very clear, precise, and polished.\n\nGood Example: \"Explain the concept of photosynthesis to a 10-year-old.\" (Score: 5)\nBad Example: \"Photosntheses explan kid ok?\" (Score: 1)\n\n---\n\n2. Coherence\nDefinition: Are all parts of the prompt logically connected and consistent?\n\nRubric:\n1 - Contradictory or disjointed.\n2 - Major logical gaps.\n3 - Somewhat coherent but loosely connected.\n4 - Mostly coherent with small gaps.\n5 - Fully logical and internally consistent.\n\nGood Example: \"Summarize this article and then give three discussion questions about it.\" (Score: 5)\nBad Example: \"Summarize this article. Now ignore it and write a poem unrelated to it.\" (Score: 1)\n\n---\n\n3. Relevance\nDefinition: Is the prompt relevant for the dataset’s task/domain?\n\nRubric:\n1 - Completely unrelated or off-topic.\n2 - Mostly irrelevant.\n3 - Somewhat relevant.\n4 - Mostly relevant.\n5 - Fully on-topic and appropriate.\n\nGood Example: \"Write a SQL query to count users per country.\" (Score: 5)\nBad Example: \"Describe your favorite color\" in a coding dataset. (Score: 1)\n\n---\n\n4. Complexity\nDefinition: Does it require nontrivial reasoning or knowledge (but not overly convoluted)?\n\nRubric:\n1 - Trivial or no reasoning required.\n2 - Very simple.\n3 - Moderate reasoning.\n4 - Substantial reasoning and synthesis.\n5 - Complex multi-step reasoning or domain knowledge.\n\nGood Example: \"Compare the economic impacts of renewable vs nuclear energy in the EU.\" (Score: 5)\nBad Example: \"What is 2+2?\" (Score: 1)\n\n---\n\n5. Specificity\nDefinition: Is the task scope well-defined and not vague?\n\nRubric:\n1 - Very vague or open-ended.\n2 - Somewhat vague.\n3 - Moderately specific.\n4 - Well-scoped with minor ambiguity.\n5 - Very precise and well-scoped.\n\nGood Example: \"List three causes of the French Revolution with dates and key figures.\" (Score: 5)\nBad Example: \"Tell me something about history.\" (Score: 1)\n\n---\n\n6. Safety\nDefinition: Is the prompt free from harmful, unsafe, or policy-violating content?\n\nRubric:\n1 - Contains explicit harm or policy violation.\n2 - Possibly unsafe, borderline.\n3 - Mostly safe but slightly risky.\n4 - Safe.\n5 - Very safe and benign.\n\nGood Example: \"Explain how vaccines work.\" (Score: 5)\nBad Example: \"Explain how to make a bomb.\" (Score: 1)\n\n---\n\nOUTPUT FORMAT:\n{\n  \"clarity\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"coherence\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"relevance\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"complexity\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"specificity\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"safety\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"overall_average\": &lt;mean score rounded to 2 decimals&gt;\n}\n</code></pre></div></div>\n<pre class=\"highlight\"><div><button class=\"btn-copy\" data-clipboard-action=\"copy\" data-clipboard-target=\"#code3\"><img src=\"https://aman.ai/images/copy.png\" style=\"margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;\"></button></div><code id=\"code3\">You are an expert data quality evaluator. \nYour task is to rate the quality of the following PROMPT according to several dimensions. \nFor each dimension, give a 1–5 Likert score using the rubric and refer to the good/bad examples provided. \nThen give a short explanation (&lt;20 words) for each score. \nFinally, output your ratings in structured JSON.\n\nPROMPT TO EVALUATE:\n\"\"\n\n---\n\nEVALUATION DIMENSIONS, RUBRICS, AND EXAMPLES\n\n1. Clarity\nDefinition: Is the language clear, grammatical, and understandable to a general reader?\n\nRubric:\n1 - Completely unclear, nonsensical.\n2 - Many grammatical errors, hard to follow.\n3 - Understandable but awkward or ambiguous.\n4 - Clear with minor issues.\n5 - Very clear, precise, and polished.\n\nGood Example: \"Explain the concept of photosynthesis to a 10-year-old.\" (Score: 5)\nBad Example: \"Photosntheses explan kid ok?\" (Score: 1)\n\n---\n\n2. Coherence\nDefinition: Are all parts of the prompt logically connected and consistent?\n\nRubric:\n1 - Contradictory or disjointed.\n2 - Major logical gaps.\n3 - Somewhat coherent but loosely connected.\n4 - Mostly coherent with small gaps.\n5 - Fully logical and internally consistent.\n\nGood Example: \"Summarize this article and then give three discussion questions about it.\" (Score: 5)\nBad Example: \"Summarize this article. Now ignore it and write a poem unrelated to it.\" (Score: 1)\n\n---\n\n3. Relevance\nDefinition: Is the prompt relevant for the dataset’s task/domain?\n\nRubric:\n1 - Completely unrelated or off-topic.\n2 - Mostly irrelevant.\n3 - Somewhat relevant.\n4 - Mostly relevant.\n5 - Fully on-topic and appropriate.\n\nGood Example: \"Write a SQL query to count users per country.\" (Score: 5)\nBad Example: \"Describe your favorite color\" in a coding dataset. (Score: 1)\n\n---\n\n4. Complexity\nDefinition: Does it require nontrivial reasoning or knowledge (but not overly convoluted)?\n\nRubric:\n1 - Trivial or no reasoning required.\n2 - Very simple.\n3 - Moderate reasoning.\n4 - Substantial reasoning and synthesis.\n5 - Complex multi-step reasoning or domain knowledge.\n\nGood Example: \"Compare the economic impacts of renewable vs nuclear energy in the EU.\" (Score: 5)\nBad Example: \"What is 2+2?\" (Score: 1)\n\n---\n\n5. Specificity\nDefinition: Is the task scope well-defined and not vague?\n\nRubric:\n1 - Very vague or open-ended.\n2 - Somewhat vague.\n3 - Moderately specific.\n4 - Well-scoped with minor ambiguity.\n5 - Very precise and well-scoped.\n\nGood Example: \"List three causes of the French Revolution with dates and key figures.\" (Score: 5)\nBad Example: \"Tell me something about history.\" (Score: 1)\n\n---\n\n6. Safety\nDefinition: Is the prompt free from harmful, unsafe, or policy-violating content?\n\nRubric:\n1 - Contains explicit harm or policy violation.\n2 - Possibly unsafe, borderline.\n3 - Mostly safe but slightly risky.\n4 - Safe.\n5 - Very safe and benign.\n\nGood Example: \"Explain how vaccines work.\" (Score: 5)\nBad Example: \"Explain how to make a bomb.\" (Score: 1)\n\n---\n\nOUTPUT FORMAT:\n{\n  \"clarity\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"coherence\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"relevance\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"complexity\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"specificity\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"safety\": {\"score\": &lt;1-5&gt;, \"explanation\": \"&lt;...&gt;\"},\n  \"overall_average\": &lt;mean score rounded to 2 decimals&gt;\n}\n</code></pre>",
    "contentMarkdown": "*   Below is a **ready-to-use prompt** for evaluating prompt quality that includes:\n    \n    *   clear instructions to an evaluator (human or LLM),\n    *   Likert-scale rubrics for each criterion,\n    *   and good/bad examples for every criterion (to ground judgment and improve reliability).\n\nBelow is a **ready-to-use prompt** for evaluating prompt quality that includes:\n\n*   clear instructions to an evaluator (human or LLM),\n*   Likert-scale rubrics for each criterion,\n*   and good/bad examples for every criterion (to ground judgment and improve reliability).\n\n![](https://aman.ai/images/copy.png)\n\n`You are an expert data quality evaluator.  Your task is to rate the quality of the following PROMPT according to several dimensions.  For each dimension, give a 1–5 Likert score using the rubric and refer to the good/bad examples provided.  Then give a short explanation (<20 words) for each score.  Finally, output your ratings in structured JSON.  PROMPT TO EVALUATE: \"\"  ---  EVALUATION DIMENSIONS, RUBRICS, AND EXAMPLES  1. Clarity Definition: Is the language clear, grammatical, and understandable to a general reader?  Rubric: 1 - Completely unclear, nonsensical. 2 - Many grammatical errors, hard to follow. 3 - Understandable but awkward or ambiguous. 4 - Clear with minor issues. 5 - Very clear, precise, and polished.  Good Example: \"Explain the concept of photosynthesis to a 10-year-old.\" (Score: 5) Bad Example: \"Photosntheses explan kid ok?\" (Score: 1)  ---  2. Coherence Definition: Are all parts of the prompt logically connected and consistent?  Rubric: 1 - Contradictory or disjointed. 2 - Major logical gaps. 3 - Somewhat coherent but loosely connected. 4 - Mostly coherent with small gaps. 5 - Fully logical and internally consistent.  Good Example: \"Summarize this article and then give three discussion questions about it.\" (Score: 5) Bad Example: \"Summarize this article. Now ignore it and write a poem unrelated to it.\" (Score: 1)  ---  3. Relevance Definition: Is the prompt relevant for the dataset’s task/domain?  Rubric: 1 - Completely unrelated or off-topic. 2 - Mostly irrelevant. 3 - Somewhat relevant. 4 - Mostly relevant. 5 - Fully on-topic and appropriate.  Good Example: \"Write a SQL query to count users per country.\" (Score: 5) Bad Example: \"Describe your favorite color\" in a coding dataset. (Score: 1)  ---  4. Complexity Definition: Does it require nontrivial reasoning or knowledge (but not overly convoluted)?  Rubric: 1 - Trivial or no reasoning required. 2 - Very simple. 3 - Moderate reasoning. 4 - Substantial reasoning and synthesis. 5 - Complex multi-step reasoning or domain knowledge.  Good Example: \"Compare the economic impacts of renewable vs nuclear energy in the EU.\" (Score: 5) Bad Example: \"What is 2+2?\" (Score: 1)  ---  5. Specificity Definition: Is the task scope well-defined and not vague?  Rubric: 1 - Very vague or open-ended. 2 - Somewhat vague. 3 - Moderately specific. 4 - Well-scoped with minor ambiguity. 5 - Very precise and well-scoped.  Good Example: \"List three causes of the French Revolution with dates and key figures.\" (Score: 5) Bad Example: \"Tell me something about history.\" (Score: 1)  ---  6. Safety Definition: Is the prompt free from harmful, unsafe, or policy-violating content?  Rubric: 1 - Contains explicit harm or policy violation. 2 - Possibly unsafe, borderline. 3 - Mostly safe but slightly risky. 4 - Safe. 5 - Very safe and benign.  Good Example: \"Explain how vaccines work.\" (Score: 5) Bad Example: \"Explain how to make a bomb.\" (Score: 1)  ---  OUTPUT FORMAT: {   \"clarity\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"coherence\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"relevance\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"complexity\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"specificity\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"safety\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"overall_average\": <mean score rounded to 2 decimals> }`\n\n![](https://aman.ai/images/copy.png)\n\n`You are an expert data quality evaluator.  Your task is to rate the quality of the following PROMPT according to several dimensions.  For each dimension, give a 1–5 Likert score using the rubric and refer to the good/bad examples provided.  Then give a short explanation (<20 words) for each score.  Finally, output your ratings in structured JSON.  PROMPT TO EVALUATE: \"\"  ---  EVALUATION DIMENSIONS, RUBRICS, AND EXAMPLES  1. Clarity Definition: Is the language clear, grammatical, and understandable to a general reader?  Rubric: 1 - Completely unclear, nonsensical. 2 - Many grammatical errors, hard to follow. 3 - Understandable but awkward or ambiguous. 4 - Clear with minor issues. 5 - Very clear, precise, and polished.  Good Example: \"Explain the concept of photosynthesis to a 10-year-old.\" (Score: 5) Bad Example: \"Photosntheses explan kid ok?\" (Score: 1)  ---  2. Coherence Definition: Are all parts of the prompt logically connected and consistent?  Rubric: 1 - Contradictory or disjointed. 2 - Major logical gaps. 3 - Somewhat coherent but loosely connected. 4 - Mostly coherent with small gaps. 5 - Fully logical and internally consistent.  Good Example: \"Summarize this article and then give three discussion questions about it.\" (Score: 5) Bad Example: \"Summarize this article. Now ignore it and write a poem unrelated to it.\" (Score: 1)  ---  3. Relevance Definition: Is the prompt relevant for the dataset’s task/domain?  Rubric: 1 - Completely unrelated or off-topic. 2 - Mostly irrelevant. 3 - Somewhat relevant. 4 - Mostly relevant. 5 - Fully on-topic and appropriate.  Good Example: \"Write a SQL query to count users per country.\" (Score: 5) Bad Example: \"Describe your favorite color\" in a coding dataset. (Score: 1)  ---  4. Complexity Definition: Does it require nontrivial reasoning or knowledge (but not overly convoluted)?  Rubric: 1 - Trivial or no reasoning required. 2 - Very simple. 3 - Moderate reasoning. 4 - Substantial reasoning and synthesis. 5 - Complex multi-step reasoning or domain knowledge.  Good Example: \"Compare the economic impacts of renewable vs nuclear energy in the EU.\" (Score: 5) Bad Example: \"What is 2+2?\" (Score: 1)  ---  5. Specificity Definition: Is the task scope well-defined and not vague?  Rubric: 1 - Very vague or open-ended. 2 - Somewhat vague. 3 - Moderately specific. 4 - Well-scoped with minor ambiguity. 5 - Very precise and well-scoped.  Good Example: \"List three causes of the French Revolution with dates and key figures.\" (Score: 5) Bad Example: \"Tell me something about history.\" (Score: 1)  ---  6. Safety Definition: Is the prompt free from harmful, unsafe, or policy-violating content?  Rubric: 1 - Contains explicit harm or policy violation. 2 - Possibly unsafe, borderline. 3 - Mostly safe but slightly risky. 4 - Safe. 5 - Very safe and benign.  Good Example: \"Explain how vaccines work.\" (Score: 5) Bad Example: \"Explain how to make a bomb.\" (Score: 1)  ---  OUTPUT FORMAT: {   \"clarity\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"coherence\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"relevance\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"complexity\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"specificity\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"safety\": {\"score\": <1-5>, \"explanation\": \"<...>\"},   \"overall_average\": <mean score rounded to 2 decimals> }`",
    "order": 28,
    "orderInChapter": 2,
    "difficulty": 4,
    "estimatedMinutes": 6,
    "tags": [
      "datatraining",
      "llm"
    ],
    "metadata": {
      "hasCode": true,
      "hasMath": false,
      "hasImages": true,
      "wordCount": 1103,
      "contentLength": 8247
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#example-evaluation-prompt-(with-rubrics-and-examples)",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-integration-in-filtering-pipelines-29",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Prompt Quality Metrics",
    "title": "Integration in Filtering Pipelines",
    "subtitle": "Prompt Quality Metrics",
    "contentHtml": "<ul>\n  <li>Use this prompt with an LLM judge (like GPT-4) to assign scores to prompts.</li>\n  <li>Reject prompts that:\n    <ul>\n      <li>score &lt;3 on safety or clarity, or</li>\n      <li>have an overall average below 3.5.</li>\n    </ul>\n  </li>\n  <li>Sample 2–5% for human audit to calibrate scores.</li>\n</ul>\n<ul>\n      <li>score &lt;3 on safety or clarity, or</li>\n      <li>have an overall average below 3.5.</li>\n    </ul>",
    "contentMarkdown": "*   Use this prompt with an LLM judge (like GPT-4) to assign scores to prompts.\n*   Reject prompts that:\n    *   score <3 on safety or clarity, or\n    *   have an overall average below 3.5.\n*   Sample 2–5% for human audit to calibrate scores.\n\n*   score <3 on safety or clarity, or\n*   have an overall average below 3.5.",
    "order": 29,
    "orderInChapter": 3,
    "difficulty": 3,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "gpt",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 58,
      "contentLength": 430
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#integration-in-filtering-pipelines",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-content-safety-classification-30",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Safety Metrics",
    "title": "Content Safety Classification",
    "subtitle": "Safety Metrics",
    "contentHtml": "<ul>\n  <li>\n    <p>At the data ingestion stage, each sample (prompt or response) can be scored for <strong>category-specific risk</strong> using a safety classifier. Typical categories include:</p>\n\n    <ul>\n      <li>hate/harassment,</li>\n      <li>sexual content (esp. involving minors),</li>\n      <li>self-harm,</li>\n      <li>violence or gore,</li>\n      <li>illegal/dangerous content,</li>\n      <li>privacy violations (PII leaks),</li>\n      <li>political/medical misinfo (if in-scope).</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Common tools:</strong></p>\n\n    <ul>\n      <li><a href=\"https://platform.openai.com/docs/guides/moderation\">OpenAI moderation API</a></li>\n      <li><a href=\"https://github.com/meta-llama/llama-guard\">LLaMA-Guard</a></li>\n      <li><a href=\"https://perspectiveapi.com/\">Perspective</a> (for toxicity)</li>\n    </ul>\n  </li>\n  <li>\n    <p>Each sample gets a probability vector <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-40-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>p</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>cat</mtext></mrow></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-403\" style=\"width: 1.773em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.461em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.513em, 1001.46em, 2.555em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-404\"><span class=\"msubsup\" id=\"MathJax-Span-405\"><span style=\"display: inline-block; position: relative; width: 1.461em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.52em, 4.378em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-406\"><span class=\"mrow\" id=\"MathJax-Span-407\"><span class=\"mi\" id=\"MathJax-Span-408\" style=\"font-family: STIXGeneral; font-weight: bold;\">p</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.747em; left: 0.576em;\"><span class=\"texatom\" id=\"MathJax-Span-409\"><span class=\"mrow\" id=\"MathJax-Span-410\"><span class=\"mtext\" id=\"MathJax-Span-411\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">cat</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.003em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">p</mi></mrow><mrow class=\"MJX-TeXAtom-ORD\"><mtext>cat</mtext></mrow></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-40\">\\mathbf{p}_{\\text{cat}}</script> over categories; anything exceeding a category threshold <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-41-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-412\" style=\"width: 0.576em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-413\"><span class=\"mi\" id=\"MathJax-Span-414\" style=\"font-family: STIXGeneral-Italic;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>τ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-41\">\\tau</script> is removed or flagged for human review.</p>\n  </li>\n</ul>\n<p>At the data ingestion stage, each sample (prompt or response) can be scored for <strong>category-specific risk</strong> using a safety classifier. Typical categories include:</p>\n<ul>\n      <li>hate/harassment,</li>\n      <li>sexual content (esp. involving minors),</li>\n      <li>self-harm,</li>\n      <li>violence or gore,</li>\n      <li>illegal/dangerous content,</li>\n      <li>privacy violations (PII leaks),</li>\n      <li>political/medical misinfo (if in-scope).</li>\n    </ul>\n<p><strong>Common tools:</strong></p>\n<ul>\n      <li><a href=\"https://platform.openai.com/docs/guides/moderation\">OpenAI moderation API</a></li>\n      <li><a href=\"https://github.com/meta-llama/llama-guard\">LLaMA-Guard</a></li>\n      <li><a href=\"https://perspectiveapi.com/\">Perspective</a> (for toxicity)</li>\n    </ul>\n<p>Each sample gets a probability vector <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-40-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>p</mi></mrow><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>cat</mtext></mrow></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-403\" style=\"width: 1.773em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.461em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.513em, 1001.46em, 2.555em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-404\"><span class=\"msubsup\" id=\"MathJax-Span-405\"><span style=\"display: inline-block; position: relative; width: 1.461em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.52em, 4.378em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-406\"><span class=\"mrow\" id=\"MathJax-Span-407\"><span class=\"mi\" id=\"MathJax-Span-408\" style=\"font-family: STIXGeneral; font-weight: bold;\">p</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.747em; left: 0.576em;\"><span class=\"texatom\" id=\"MathJax-Span-409\"><span class=\"mrow\" id=\"MathJax-Span-410\"><span class=\"mtext\" id=\"MathJax-Span-411\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">cat</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.372em; border-left: 0px solid; width: 0px; height: 1.003em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">p</mi></mrow><mrow class=\"MJX-TeXAtom-ORD\"><mtext>cat</mtext></mrow></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-40\">\\mathbf{p}_{\\text{cat}}</script> over categories; anything exceeding a category threshold <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-41-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-412\" style=\"width: 0.576em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-413\"><span class=\"mi\" id=\"MathJax-Span-414\" style=\"font-family: STIXGeneral-Italic;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>τ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-41\">\\tau</script> is removed or flagged for human review.</p>",
    "contentMarkdown": "*   At the data ingestion stage, each sample (prompt or response) can be scored for **category-specific risk** using a safety classifier. Typical categories include:\n    \n    *   hate/harassment,\n    *   sexual content (esp. involving minors),\n    *   self-harm,\n    *   violence or gore,\n    *   illegal/dangerous content,\n    *   privacy violations (PII leaks),\n    *   political/medical misinfo (if in-scope).\n*   **Common tools:**\n    \n    *   [OpenAI moderation API](https://platform.openai.com/docs/guides/moderation)\n    *   [LLaMA-Guard](https://github.com/meta-llama/llama-guard)\n    *   [Perspective](https://perspectiveapi.com/) (for toxicity)\n*   Each sample gets a probability vector pcatpcat\\\\mathbf{p}\\_{\\\\text{cat}} over categories; anything exceeding a category threshold ττ\\\\tau is removed or flagged for human review.\n    \n\nAt the data ingestion stage, each sample (prompt or response) can be scored for **category-specific risk** using a safety classifier. Typical categories include:\n\n*   hate/harassment,\n*   sexual content (esp. involving minors),\n*   self-harm,\n*   violence or gore,\n*   illegal/dangerous content,\n*   privacy violations (PII leaks),\n*   political/medical misinfo (if in-scope).\n\n**Common tools:**\n\n*   [OpenAI moderation API](https://platform.openai.com/docs/guides/moderation)\n*   [LLaMA-Guard](https://github.com/meta-llama/llama-guard)\n*   [Perspective](https://perspectiveapi.com/) (for toxicity)\n\nEach sample gets a probability vector pcatpcat\\\\mathbf{p}\\_{\\\\text{cat}} over categories; anything exceeding a category threshold ττ\\\\tau is removed or flagged for human review.",
    "order": 30,
    "orderInChapter": 1,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 171,
      "contentLength": 9119
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#content-safety-classification",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-measuring-refusal-behavior-over--vs-under-punting-31",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Safety Metrics",
    "title": "Measuring Refusal Behavior: Over- Vs Under-Punting",
    "subtitle": "Safety Metrics",
    "contentHtml": "<ul>\n  <li>In addition to classifying the content, we must evaluate <strong>how the model responds to prompts with varying safety levels.</strong></li>\n  <li>\n    <p>Here we define:</p>\n\n    <ul>\n      <li><strong>Over-punting (False Positive Rate)</strong>: The model refuses <strong>safe prompts</strong> incorrectly.</li>\n      <li><strong>Under-punting (False Negative Rate)</strong>: The model answers <strong>unsafe prompts</strong> instead of refusing.</li>\n    </ul>\n  </li>\n  <li>\n    <p>Formally, let:</p>\n\n    <ul>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-42-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>y</mi><mo>&amp;#x2208;</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>safe</mtext><mo>,</mo><mtext>unsafe</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-415\" style=\"width: 8.857em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 7.346em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.409em, 1007.24em, 2.607em, -999.997em); top: -2.237em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-416\"><span class=\"mi\" id=\"MathJax-Span-417\" style=\"font-family: STIXGeneral-Italic;\">y</span><span class=\"mo\" id=\"MathJax-Span-418\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">∈</span><span class=\"mo\" id=\"MathJax-Span-419\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">{</span><span class=\"mtext\" id=\"MathJax-Span-420\" style=\"font-family: STIXGeneral-Regular;\">safe</span><span class=\"mo\" id=\"MathJax-Span-421\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mtext\" id=\"MathJax-Span-422\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.211em;\">unsafe</span><span class=\"mo\" id=\"MathJax-Span-423\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 2.242em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>y</mi><mo>∈</mo><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>safe</mtext><mo>,</mo><mtext>unsafe</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-42\">y \\in \\{\\text{safe}, \\text{unsafe}\\}</script> be ground truth class of a prompt.</li>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-43-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>r</mi><mo stretchy=&quot;false&quot;>&amp;#x005E;</mo></mover></mrow><mo>&amp;#x2208;</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>refuse</mtext><mo>,</mo><mtext>answer</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-424\" style=\"width: 10.003em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 8.336em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1008.23em, 2.555em, -999.997em); top: -2.237em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-425\"><span class=\"texatom\" id=\"MathJax-Span-426\"><span class=\"mrow\" id=\"MathJax-Span-427\"><span class=\"munderover\" id=\"MathJax-Span-428\"><span style=\"display: inline-block; position: relative; width: 0.419em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-429\" style=\"font-family: STIXGeneral-Italic;\">r<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -4.06em; left: 0.107em;\"><span style=\"height: 0em; vertical-align: 0em; width: 0.367em; display: inline-block; overflow: hidden;\"></span><span class=\"mo\" id=\"MathJax-Span-430\" style=\"font-family: STIXGeneral-Regular;\">̂&nbsp;<span style=\"height: 0em; vertical-align: 0em; margin-left: -0.258em;\"></span></span><span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0em;\"></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-431\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">∈</span><span class=\"mo\" id=\"MathJax-Span-432\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">{</span><span class=\"mtext\" id=\"MathJax-Span-433\" style=\"font-family: STIXGeneral-Regular;\">refuse</span><span class=\"mo\" id=\"MathJax-Span-434\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mtext\" id=\"MathJax-Span-435\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.211em;\">answer</span><span class=\"mo\" id=\"MathJax-Span-436\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 2.242em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.253em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mrow class=\"MJX-TeXAtom-ORD\"><mover><mi>r</mi><mo stretchy=\"false\">^</mo></mover></mrow><mo>∈</mo><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>refuse</mtext><mo>,</mo><mtext>answer</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-43\">\\hat{r} \\in \\{\\text{refuse}, \\text{answer}\\}</script> be the model’s action.</li>\n    </ul>\n  </li>\n  <li>\n    <p>Then:</p>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-44-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>OverPunt (FPR)</mtext><mo>=</mo><mfrac><mrow><mi mathvariant=&quot;normal&quot;>&amp;#x0023;</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>safe</mtext><mo>&amp;#x2227;</mo><mtext>refuse</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></mrow><mrow><mi mathvariant=&quot;normal&quot;>&amp;#x0023;</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>safe</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></mrow></mfrac></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-437\" style=\"width: 17.659em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 14.69em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.68em, 1014.69em, 3.232em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-438\"><span class=\"mtext\" id=\"MathJax-Span-439\" style=\"font-family: STIXGeneral-Regular;\">OverPunt (FPR)</span><span class=\"mo\" id=\"MathJax-Span-440\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mfrac\" id=\"MathJax-Span-441\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 6.773em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.18em, 1006.57em, 4.326em, -999.997em); top: -4.685em; left: 50%; margin-left: -3.331em;\"><span class=\"mrow\" id=\"MathJax-Span-442\"><span class=\"mi\" id=\"MathJax-Span-443\" style=\"font-family: STIXGeneral-Regular;\">#</span><span class=\"mo\" id=\"MathJax-Span-444\" style=\"font-family: STIXGeneral-Regular;\">{</span><span class=\"mtext\" id=\"MathJax-Span-445\" style=\"font-family: STIXGeneral-Regular;\">safe</span><span class=\"mo\" id=\"MathJax-Span-446\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">∧</span><span class=\"mtext\" id=\"MathJax-Span-447\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">refuse</span><span class=\"mo\" id=\"MathJax-Span-448\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.18em, 1002.97em, 4.326em, -999.997em); top: -3.331em; left: 50%; margin-left: -1.508em;\"><span class=\"mrow\" id=\"MathJax-Span-449\"><span class=\"mi\" id=\"MathJax-Span-450\" style=\"font-family: STIXGeneral-Regular;\">#</span><span class=\"mo\" id=\"MathJax-Span-451\" style=\"font-family: STIXGeneral-Regular;\">{</span><span class=\"mtext\" id=\"MathJax-Span-452\" style=\"font-family: STIXGeneral-Regular;\">safe</span><span class=\"mo\" id=\"MathJax-Span-453\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1006.77em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 6.773em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.122em; border-left: 0px solid; width: 0px; height: 2.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mtext>OverPunt (FPR)</mtext><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">#</mi><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>safe</mtext><mo>∧</mo><mtext>refuse</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></mrow><mrow><mi mathvariant=\"normal\">#</mi><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>safe</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></mrow></mfrac></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-44\">\\text{OverPunt (FPR)} = \\frac{\\#\\{\\text{safe} \\land \\text{refuse}\\}}{\\#\\{\\text{safe}\\}}</script>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-45-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>UnderPunt (FNR)</mtext><mo>=</mo><mfrac><mrow><mi mathvariant=&quot;normal&quot;>&amp;#x0023;</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>unsafe</mtext><mo>&amp;#x2227;</mo><mtext>answer</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></mrow><mrow><mi mathvariant=&quot;normal&quot;>&amp;#x0023;</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>unsafe</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></mrow></mfrac></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-454\" style=\"width: 20.159em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 16.773em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.68em, 1016.77em, 3.232em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-455\"><span class=\"mtext\" id=\"MathJax-Span-456\" style=\"font-family: STIXGeneral-Regular;\">UnderPunt (FNR)</span><span class=\"mo\" id=\"MathJax-Span-457\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mfrac\" id=\"MathJax-Span-458\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 8.18em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.18em, 1007.97em, 4.326em, -999.997em); top: -4.685em; left: 50%; margin-left: -4.008em;\"><span class=\"mrow\" id=\"MathJax-Span-459\"><span class=\"mi\" id=\"MathJax-Span-460\" style=\"font-family: STIXGeneral-Regular;\">#</span><span class=\"mo\" id=\"MathJax-Span-461\" style=\"font-family: STIXGeneral-Regular;\">{</span><span class=\"mtext\" id=\"MathJax-Span-462\" style=\"font-family: STIXGeneral-Regular;\">unsafe</span><span class=\"mo\" id=\"MathJax-Span-463\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">∧</span><span class=\"mtext\" id=\"MathJax-Span-464\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">answer</span><span class=\"mo\" id=\"MathJax-Span-465\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.18em, 1003.96em, 4.326em, -999.997em); top: -3.331em; left: 50%; margin-left: -2.029em;\"><span class=\"mrow\" id=\"MathJax-Span-466\"><span class=\"mi\" id=\"MathJax-Span-467\" style=\"font-family: STIXGeneral-Regular;\">#</span><span class=\"mo\" id=\"MathJax-Span-468\" style=\"font-family: STIXGeneral-Regular;\">{</span><span class=\"mtext\" id=\"MathJax-Span-469\" style=\"font-family: STIXGeneral-Regular;\">unsafe</span><span class=\"mo\" id=\"MathJax-Span-470\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1008.18em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 8.18em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.122em; border-left: 0px solid; width: 0px; height: 2.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mtext>UnderPunt (FNR)</mtext><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">#</mi><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>unsafe</mtext><mo>∧</mo><mtext>answer</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></mrow><mrow><mi mathvariant=\"normal\">#</mi><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>unsafe</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></mrow></mfrac></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-45\">\\text{UnderPunt (FNR)} = \\frac{\\#\\{\\text{unsafe} \\land \\text{answer}\\}}{\\#\\{\\text{unsafe}\\}}</script>\n  </li>\n  <li>A good model has <strong>low under-punting (FNR)</strong> while maintaining <strong>reasonably low over-punting (FPR)</strong> to preserve utility.</li>\n</ul>\n<p>Here we define:</p>\n<ul>\n      <li><strong>Over-punting (False Positive Rate)</strong>: The model refuses <strong>safe prompts</strong> incorrectly.</li>\n      <li><strong>Under-punting (False Negative Rate)</strong>: The model answers <strong>unsafe prompts</strong> instead of refusing.</li>\n    </ul>\n<p>Formally, let:</p>\n<ul>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-42-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>y</mi><mo>&amp;#x2208;</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>safe</mtext><mo>,</mo><mtext>unsafe</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-415\" style=\"width: 8.857em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 7.346em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.409em, 1007.24em, 2.607em, -999.997em); top: -2.237em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-416\"><span class=\"mi\" id=\"MathJax-Span-417\" style=\"font-family: STIXGeneral-Italic;\">y</span><span class=\"mo\" id=\"MathJax-Span-418\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">∈</span><span class=\"mo\" id=\"MathJax-Span-419\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">{</span><span class=\"mtext\" id=\"MathJax-Span-420\" style=\"font-family: STIXGeneral-Regular;\">safe</span><span class=\"mo\" id=\"MathJax-Span-421\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mtext\" id=\"MathJax-Span-422\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.211em;\">unsafe</span><span class=\"mo\" id=\"MathJax-Span-423\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 2.242em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>y</mi><mo>∈</mo><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>safe</mtext><mo>,</mo><mtext>unsafe</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-42\">y \\in \\{\\text{safe}, \\text{unsafe}\\}</script> be ground truth class of a prompt.</li>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-43-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mover><mi>r</mi><mo stretchy=&quot;false&quot;>&amp;#x005E;</mo></mover></mrow><mo>&amp;#x2208;</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>refuse</mtext><mo>,</mo><mtext>answer</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-424\" style=\"width: 10.003em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 8.336em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1008.23em, 2.555em, -999.997em); top: -2.237em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-425\"><span class=\"texatom\" id=\"MathJax-Span-426\"><span class=\"mrow\" id=\"MathJax-Span-427\"><span class=\"munderover\" id=\"MathJax-Span-428\"><span style=\"display: inline-block; position: relative; width: 0.419em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-429\" style=\"font-family: STIXGeneral-Italic;\">r<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -4.06em; left: 0.107em;\"><span style=\"height: 0em; vertical-align: 0em; width: 0.367em; display: inline-block; overflow: hidden;\"></span><span class=\"mo\" id=\"MathJax-Span-430\" style=\"font-family: STIXGeneral-Regular;\">̂&nbsp;<span style=\"height: 0em; vertical-align: 0em; margin-left: -0.258em;\"></span></span><span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0em;\"></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-431\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">∈</span><span class=\"mo\" id=\"MathJax-Span-432\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">{</span><span class=\"mtext\" id=\"MathJax-Span-433\" style=\"font-family: STIXGeneral-Regular;\">refuse</span><span class=\"mo\" id=\"MathJax-Span-434\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mtext\" id=\"MathJax-Span-435\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.211em;\">answer</span><span class=\"mo\" id=\"MathJax-Span-436\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 2.242em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.253em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mrow class=\"MJX-TeXAtom-ORD\"><mover><mi>r</mi><mo stretchy=\"false\">^</mo></mover></mrow><mo>∈</mo><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>refuse</mtext><mo>,</mo><mtext>answer</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-43\">\\hat{r} \\in \\{\\text{refuse}, \\text{answer}\\}</script> be the model’s action.</li>\n    </ul>\n<p>Then:</p>",
    "contentMarkdown": "*   In addition to classifying the content, we must evaluate **how the model responds to prompts with varying safety levels.**\n*   Here we define:\n    \n    *   **Over-punting (False Positive Rate)**: The model refuses **safe prompts** incorrectly.\n    *   **Under-punting (False Negative Rate)**: The model answers **unsafe prompts** instead of refusing.\n*   Formally, let:\n    \n    *   y∈{safe,unsafe}y∈{safe,unsafe}y \\\\in \\\\{\\\\text{safe}, \\\\text{unsafe}\\\\} be ground truth class of a prompt.\n    *   r̂ ∈{refuse,answer}r^∈{refuse,answer}\\\\hat{r} \\\\in \\\\{\\\\text{refuse}, \\\\text{answer}\\\\} be the model’s action.\n*   Then:\n    \n    OverPunt (FPR)\\=#{safe∧refuse}#{safe}OverPunt (FPR)\\=#{safe∧refuse}#{safe}\n    \n    \\\\text{OverPunt (FPR)} = \\\\frac{\\\\#\\\\{\\\\text{safe} \\\\land \\\\text{refuse}\\\\}}{\\\\#\\\\{\\\\text{safe}\\\\}}\n    \n    UnderPunt (FNR)\\=#{unsafe∧answer}#{unsafe}UnderPunt (FNR)\\=#{unsafe∧answer}#{unsafe}\n    \n    \\\\text{UnderPunt (FNR)} = \\\\frac{\\\\#\\\\{\\\\text{unsafe} \\\\land \\\\text{answer}\\\\}}{\\\\#\\\\{\\\\text{unsafe}\\\\}}\n*   A good model has **low under-punting (FNR)** while maintaining **reasonably low over-punting (FPR)** to preserve utility.\n\nHere we define:\n\n*   **Over-punting (False Positive Rate)**: The model refuses **safe prompts** incorrectly.\n*   **Under-punting (False Negative Rate)**: The model answers **unsafe prompts** instead of refusing.\n\nFormally, let:\n\n*   y∈{safe,unsafe}y∈{safe,unsafe}y \\\\in \\\\{\\\\text{safe}, \\\\text{unsafe}\\\\} be ground truth class of a prompt.\n*   r̂ ∈{refuse,answer}r^∈{refuse,answer}\\\\hat{r} \\\\in \\\\{\\\\text{refuse}, \\\\text{answer}\\\\} be the model’s action.\n\nThen:",
    "order": 31,
    "orderInChapter": 2,
    "difficulty": 5,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 162,
      "contentLength": 21370
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#measuring-refusal-behavior:-over--vs-under-punting",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-building-a-safety-evaluation-set-32",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Safety Metrics",
    "title": "Building a Safety Evaluation Set",
    "subtitle": "Safety Metrics",
    "contentHtml": "<ul>\n  <li>Curate or generate a balanced set of <strong>safe vs unsafe prompts</strong>, covering categories above.</li>\n  <li>Label each as <strong>safe/unsafe</strong> (binary) using human raters.</li>\n  <li>\n    <p>Run the model and classify its response as <strong>refuse/answer</strong> using an LLM-based detector or rules (detect refusal phrases).</p>\n  </li>\n  <li>\n    <p>This gives a confusion matrix to compute:</p>\n\n    <ul>\n      <li><strong>True Positive Rate (TPR):</strong> correctly refusing unsafe</li>\n      <li><strong>False Negative Rate (FNR):</strong> under-punting</li>\n      <li><strong>False Positive Rate (FPR):</strong> over-punting</li>\n      <li><strong>True Negative Rate (TNR):</strong> correctly answering safe</li>\n    </ul>\n  </li>\n</ul>\n<p>Run the model and classify its response as <strong>refuse/answer</strong> using an LLM-based detector or rules (detect refusal phrases).</p>\n<p>This gives a confusion matrix to compute:</p>\n<ul>\n      <li><strong>True Positive Rate (TPR):</strong> correctly refusing unsafe</li>\n      <li><strong>False Negative Rate (FNR):</strong> under-punting</li>\n      <li><strong>False Positive Rate (FPR):</strong> over-punting</li>\n      <li><strong>True Negative Rate (TNR):</strong> correctly answering safe</li>\n    </ul>",
    "contentMarkdown": "*   Curate or generate a balanced set of **safe vs unsafe prompts**, covering categories above.\n*   Label each as **safe/unsafe** (binary) using human raters.\n*   Run the model and classify its response as **refuse/answer** using an LLM-based detector or rules (detect refusal phrases).\n    \n*   This gives a confusion matrix to compute:\n    \n    *   **True Positive Rate (TPR):** correctly refusing unsafe\n    *   **False Negative Rate (FNR):** under-punting\n    *   **False Positive Rate (FPR):** over-punting\n    *   **True Negative Rate (TNR):** correctly answering safe\n\nRun the model and classify its response as **refuse/answer** using an LLM-based detector or rules (detect refusal phrases).\n\nThis gives a confusion matrix to compute:\n\n*   **True Positive Rate (TPR):** correctly refusing unsafe\n*   **False Negative Rate (FNR):** under-punting\n*   **False Positive Rate (FPR):** over-punting\n*   **True Negative Rate (TNR):** correctly answering safe",
    "order": 32,
    "orderInChapter": 3,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 132,
      "contentLength": 1292
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#building-a-safety-evaluation-set",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-integration-in-filtering-pipelines-33",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Safety Metrics",
    "title": "Integration in Filtering Pipelines",
    "subtitle": "Safety Metrics",
    "contentHtml": "<ul>\n  <li>\n    <p>Safety metrics can be used at three points:</p>\n\n    <ol>\n      <li><strong>Dataset filtering:</strong> remove unsafe prompts/responses via classifiers.</li>\n      <li><strong>Post-training eval:</strong> test model refusal behavior on known safe/unsafe sets.</li>\n      <li><strong>Alignment tuning:</strong> include examples to correct over- or under-punting biases.</li>\n    </ol>\n  </li>\n  <li>\n    <p>Target behavior is <strong>high safety recall with low unnecessary refusals</strong>, i.e. <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-46-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>FNR</mtext><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mn>0</mn></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-471\" style=\"width: 4.898em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 4.065em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1004.07em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-472\"><span class=\"mtext\" id=\"MathJax-Span-473\" style=\"font-family: STIXGeneral-Regular;\">FNR</span><span class=\"mo\" id=\"MathJax-Span-474\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">→</span><span class=\"mn\" id=\"MathJax-Span-475\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">0</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mtext>FNR</mtext><mo stretchy=\"false\">→</mo><mn>0</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-46\">\\text{FNR} \\to 0</script> while keeping <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-47-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>FPR</mtext></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-476\" style=\"width: 2.138em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.773em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1001.77em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-477\"><span class=\"mtext\" id=\"MathJax-Span-478\" style=\"font-family: STIXGeneral-Regular;\">FPR</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mtext>FPR</mtext></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-47\">\\text{FPR}</script> acceptably low (often &lt;5%).</p>\n  </li>\n</ul>\n<p>Safety metrics can be used at three points:</p>\n<ol>\n      <li><strong>Dataset filtering:</strong> remove unsafe prompts/responses via classifiers.</li>\n      <li><strong>Post-training eval:</strong> test model refusal behavior on known safe/unsafe sets.</li>\n      <li><strong>Alignment tuning:</strong> include examples to correct over- or under-punting biases.</li>\n    </ol>\n<p>Target behavior is <strong>high safety recall with low unnecessary refusals</strong>, i.e. <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-46-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>FNR</mtext><mo stretchy=&quot;false&quot;>&amp;#x2192;</mo><mn>0</mn></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-471\" style=\"width: 4.898em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 4.065em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1004.07em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-472\"><span class=\"mtext\" id=\"MathJax-Span-473\" style=\"font-family: STIXGeneral-Regular;\">FNR</span><span class=\"mo\" id=\"MathJax-Span-474\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">→</span><span class=\"mn\" id=\"MathJax-Span-475\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">0</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mtext>FNR</mtext><mo stretchy=\"false\">→</mo><mn>0</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-46\">\\text{FNR} \\to 0</script> while keeping <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-47-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mtext>FPR</mtext></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-476\" style=\"width: 2.138em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.773em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1001.77em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-477\"><span class=\"mtext\" id=\"MathJax-Span-478\" style=\"font-family: STIXGeneral-Regular;\">FPR</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mtext>FPR</mtext></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-47\">\\text{FPR}</script> acceptably low (often &lt;5%).</p>",
    "contentMarkdown": "*   Safety metrics can be used at three points:\n    \n    1.  **Dataset filtering:** remove unsafe prompts/responses via classifiers.\n    2.  **Post-training eval:** test model refusal behavior on known safe/unsafe sets.\n    3.  **Alignment tuning:** include examples to correct over- or under-punting biases.\n*   Target behavior is **high safety recall with low unnecessary refusals**, i.e. FNR→0FNR→0\\\\text{FNR} \\\\to 0 while keeping FPRFPR\\\\text{FPR} acceptably low (often <5%).\n    \n\nSafety metrics can be used at three points:\n\n1.  **Dataset filtering:** remove unsafe prompts/responses via classifiers.\n2.  **Post-training eval:** test model refusal behavior on known safe/unsafe sets.\n3.  **Alignment tuning:** include examples to correct over- or under-punting biases.\n\nTarget behavior is **high safety recall with low unnecessary refusals**, i.e. FNR→0FNR→0\\\\text{FNR} \\\\to 0 while keeping FPRFPR\\\\text{FPR} acceptably low (often <5%).",
    "order": 33,
    "orderInChapter": 4,
    "difficulty": 5,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 120,
      "contentLength": 6597
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#integration-in-filtering-pipelines",
    "scrapedAt": "2025-12-28T11:48:17.191Z"
  },
  {
    "id": "ai-data-filtering-why-deduplication-comes-after-filtering-34",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Deduplication",
    "title": "Why Deduplication Comes After Filtering",
    "subtitle": "Deduplication",
    "contentHtml": "<ul>\n  <li>\n    <p>Deduplication is expensive (especially embedding-based methods). If done <strong>before filtering</strong>, you spend resources deduplicating <strong>low-quality content</strong> that would be filtered out anyway.</p>\n  </li>\n  <li>\n    <p><strong>Best practice order:</strong></p>\n\n    <ol>\n      <li>Rule-based filters (length, language, perplexity, safety, etc.)</li>\n      <li>LLM/human quality filters</li>\n      <li>Outlier removal</li>\n      <li><strong>Deduplication</strong></li>\n    </ol>\n  </li>\n  <li>\n    <p>This ensures only <strong>high-value content</strong> is deduplicated and retained.</p>\n  </li>\n</ul>\n<p>Deduplication is expensive (especially embedding-based methods). If done <strong>before filtering</strong>, you spend resources deduplicating <strong>low-quality content</strong> that would be filtered out anyway.</p>\n<p><strong>Best practice order:</strong></p>\n<ol>\n      <li>Rule-based filters (length, language, perplexity, safety, etc.)</li>\n      <li>LLM/human quality filters</li>\n      <li>Outlier removal</li>\n      <li><strong>Deduplication</strong></li>\n    </ol>\n<p>This ensures only <strong>high-value content</strong> is deduplicated and retained.</p>",
    "contentMarkdown": "*   Deduplication is expensive (especially embedding-based methods). If done **before filtering**, you spend resources deduplicating **low-quality content** that would be filtered out anyway.\n    \n*   **Best practice order:**\n    \n    1.  Rule-based filters (length, language, perplexity, safety, etc.)\n    2.  LLM/human quality filters\n    3.  Outlier removal\n    4.  **Deduplication**\n*   This ensures only **high-value content** is deduplicated and retained.\n    \n\nDeduplication is expensive (especially embedding-based methods). If done **before filtering**, you spend resources deduplicating **low-quality content** that would be filtered out anyway.\n\n**Best practice order:**\n\n1.  Rule-based filters (length, language, perplexity, safety, etc.)\n2.  LLM/human quality filters\n3.  Outlier removal\n4.  **Deduplication**\n\nThis ensures only **high-value content** is deduplicated and retained.",
    "order": 34,
    "orderInChapter": 1,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "embedding",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 105,
      "contentLength": 1210
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#why-deduplication-comes-after-filtering",
    "scrapedAt": "2025-12-28T11:48:17.192Z"
  },
  {
    "id": "ai-data-filtering-types-of-duplication-35",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Deduplication",
    "title": "Types of Duplication",
    "subtitle": "Deduplication",
    "contentHtml": "<ul>\n  <li><strong>Exact duplicates:</strong> byte-identical documents or lines.</li>\n  <li><strong>Near-duplicates:</strong> highly overlapping or paraphrased text, code, or math problems.</li>\n  <li>\n    <p><strong>Partial overlaps:</strong> long documents that share large n-gram spans.</p>\n  </li>\n  <li>All three reduce diversity and can lead to overfitting, so all need to be removed or downweighted.</li>\n</ul>\n<p><strong>Partial overlaps:</strong> long documents that share large n-gram spans.</p>",
    "contentMarkdown": "*   **Exact duplicates:** byte-identical documents or lines.\n*   **Near-duplicates:** highly overlapping or paraphrased text, code, or math problems.\n*   **Partial overlaps:** long documents that share large n-gram spans.\n    \n*   All three reduce diversity and can lead to overfitting, so all need to be removed or downweighted.\n\n**Partial overlaps:** long documents that share large n-gram spans.",
    "order": 35,
    "orderInChapter": 2,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 55,
      "contentLength": 505
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#types-of-duplication",
    "scrapedAt": "2025-12-28T11:48:17.192Z"
  },
  {
    "id": "ai-data-filtering-deduplication-methods-36",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Deduplication",
    "title": "Deduplication Methods",
    "subtitle": "Deduplication",
    "contentHtml": "<h4 id=\"hash-based-deduplication\">Hash-Based Deduplication</h4>\n<ul>\n  <li>Compute a hash (e.g. SHA-1, MD5) of the raw text.</li>\n  <li>Deduplicate exact matches.</li>\n  <li>Extremely fast and memory-efficient.</li>\n  <li>Common in large text crawls like <a href=\"https://commoncrawl.org/\">Common Crawl</a>.</li>\n</ul>\n<h4 id=\"minhash--simhash\">MinHash / SimHash</h4>\n<ul>\n  <li>Use <a href=\"https://en.wikipedia.org/wiki/MinHash\">MinHash</a> or <a href=\"https://en.wikipedia.org/wiki/SimHash\">SimHash</a> to detect approximate overlaps at the n-gram level.</li>\n  <li>Robust to small edits, punctuation differences, or formatting changes.</li>\n  <li>Popular for web-scale corpora like <a href=\"https://pile.eleuther.ai/\">The Pile</a>.</li>\n</ul>\n<h4 id=\"embedding-based-deduplication\">Embedding-Based Deduplication</h4>\n<ul>\n  <li>Encode samples using a semantic embedding model such as <a href=\"https://platform.openai.com/docs/guides/embeddings\">OpenAI text-embedding-3-large</a>, <a href=\"https://www.sbert.net/\">Sentence-BERT</a>, or <a href=\"https://huggingface.co/hkunlp/instructor-xl\">Instructor-XL</a>.</li>\n  <li>Compute cosine similarity between embeddings.</li>\n  <li>\n    <p>Mark pairs as near-duplicates if:</p>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-48-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>cos</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>i</mi></msub><mo>,</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>j</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mfrac><mrow><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>i</mi></msub><mo>&amp;#x22C5;</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>j</mi></msub></mrow><mrow><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2016;</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>i</mi></msub><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2016;</mo><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2016;</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>j</mi></msub><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>&amp;#x2016;</mo></mrow></mfrac><mo>&amp;gt;</mo><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-479\" style=\"width: 12.763em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 10.628em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.784em, 1010.63em, 3.336em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-480\"><span class=\"mi\" id=\"MathJax-Span-481\" style=\"font-family: STIXGeneral-Regular;\">cos</span><span class=\"mo\" id=\"MathJax-Span-482\"></span><span class=\"mo\" id=\"MathJax-Span-483\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"msubsup\" id=\"MathJax-Span-484\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-485\"><span class=\"mrow\" id=\"MathJax-Span-486\"><span class=\"mi\" id=\"MathJax-Span-487\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-488\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-489\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-490\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-491\"><span class=\"mrow\" id=\"MathJax-Span-492\"><span class=\"mi\" id=\"MathJax-Span-493\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-494\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">j<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-495\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-496\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mfrac\" id=\"MathJax-Span-497\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 3.648em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.388em, 1002.24em, 4.482em, -999.997em); top: -4.789em; left: 50%; margin-left: -1.143em;\"><span class=\"mrow\" id=\"MathJax-Span-498\"><span class=\"msubsup\" id=\"MathJax-Span-499\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-500\"><span class=\"mrow\" id=\"MathJax-Span-501\"><span class=\"mi\" id=\"MathJax-Span-502\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-503\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-504\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">⋅</span><span class=\"msubsup\" id=\"MathJax-Span-505\" style=\"padding-left: 0.263em;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-506\"><span class=\"mrow\" id=\"MathJax-Span-507\"><span class=\"mi\" id=\"MathJax-Span-508\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-509\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">j<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.18em, 1003.39em, 4.482em, -999.997em); top: -3.331em; left: 50%; margin-left: -1.768em;\"><span class=\"mrow\" id=\"MathJax-Span-510\"><span class=\"mo\" id=\"MathJax-Span-511\" style=\"font-family: STIXGeneral-Regular;\">‖</span><span class=\"msubsup\" id=\"MathJax-Span-512\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-513\"><span class=\"mrow\" id=\"MathJax-Span-514\"><span class=\"mi\" id=\"MathJax-Span-515\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-516\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-517\" style=\"font-family: STIXGeneral-Regular;\">‖</span><span class=\"mo\" id=\"MathJax-Span-518\" style=\"font-family: STIXGeneral-Regular;\">‖</span><span class=\"msubsup\" id=\"MathJax-Span-519\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-520\"><span class=\"mrow\" id=\"MathJax-Span-521\"><span class=\"mi\" id=\"MathJax-Span-522\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-523\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">j<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-524\" style=\"font-family: STIXGeneral-Regular;\">‖</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1003.65em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 3.648em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-525\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&gt;</span><span class=\"mi\" id=\"MathJax-Span-526\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.315em;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.247em; border-left: 0px solid; width: 0px; height: 2.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mi>cos</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>i</mi></msub><mo>,</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>i</mi></msub><mo>⋅</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>j</mi></msub></mrow><mrow><mo fence=\"false\" stretchy=\"false\">‖</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>i</mi></msub><mo fence=\"false\" stretchy=\"false\">‖</mo><mo fence=\"false\" stretchy=\"false\">‖</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>j</mi></msub><mo fence=\"false\" stretchy=\"false\">‖</mo></mrow></mfrac><mo>&gt;</mo><mi>τ</mi></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-48\">\\cos(\\mathbf{e}_i,\\mathbf{e}_j) = \\frac{\\mathbf{e}_i \\cdot \\mathbf{e}_j}{\\|\\mathbf{e}_i\\|\\|\\mathbf{e}_j\\|} > \\tau</script>\n\n    <ul>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-49-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-527\" style=\"width: 0.576em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-528\"><span class=\"mi\" id=\"MathJax-Span-529\" style=\"font-family: STIXGeneral-Italic;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>τ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-49\">\\tau</script> is typically 0.85–0.95 depending on tolerance.</li>\n    </ul>\n  </li>\n  <li>More expensive but captures paraphrases and cross-lingual duplicates.</li>\n</ul>\n<p>Mark pairs as near-duplicates if:</p>\n<ul>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-49-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-527\" style=\"width: 0.576em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.471em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.47em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-528\"><span class=\"mi\" id=\"MathJax-Span-529\" style=\"font-family: STIXGeneral-Italic;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.628em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>τ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-49\">\\tau</script> is typically 0.85–0.95 depending on tolerance.</li>\n    </ul>\n<h4 id=\"locality-sensitive-hashing-lsh\">Locality-Sensitive Hashing (LSH)</h4>\n<ul>\n  <li>Approximate nearest-neighbor search (e.g. <a href=\"https://github.com/facebookresearch/faiss\">FAISS</a>) on embeddings to scale to billions of samples.</li>\n  <li>Enables fast clustering and deduplication in high dimensions.</li>\n</ul>",
    "contentMarkdown": "#### Hash-Based Deduplication\n\n*   Compute a hash (e.g. SHA-1, MD5) of the raw text.\n*   Deduplicate exact matches.\n*   Extremely fast and memory-efficient.\n*   Common in large text crawls like [Common Crawl](https://commoncrawl.org/).\n\n#### MinHash / SimHash\n\n*   Use [MinHash](https://en.wikipedia.org/wiki/MinHash) or [SimHash](https://en.wikipedia.org/wiki/SimHash) to detect approximate overlaps at the n-gram level.\n*   Robust to small edits, punctuation differences, or formatting changes.\n*   Popular for web-scale corpora like [The Pile](https://pile.eleuther.ai/).\n\n#### Embedding-Based Deduplication\n\n*   Encode samples using a semantic embedding model such as [OpenAI text-embedding-3-large](https://platform.openai.com/docs/guides/embeddings), [Sentence-BERT](https://www.sbert.net/), or [Instructor-XL](https://huggingface.co/hkunlp/instructor-xl).\n*   Compute cosine similarity between embeddings.\n*   Mark pairs as near-duplicates if:\n    \n    cos(ei,ej)\\=ei⋅ej‖ei‖‖ej‖\\>τcos⁡(ei,ej)\\=ei⋅ej‖ei‖‖ej‖\\>τ\n    \n    \\\\cos(\\\\mathbf{e}\\_i,\\\\mathbf{e}\\_j) = \\\\frac{\\\\mathbf{e}\\_i \\\\cdot \\\\mathbf{e}\\_j}{\\\\|\\\\mathbf{e}\\_i\\\\|\\\\|\\\\mathbf{e}\\_j\\\\|} > \\\\tau\n    *   ττ\\\\tau is typically 0.85–0.95 depending on tolerance.\n*   More expensive but captures paraphrases and cross-lingual duplicates.\n\nMark pairs as near-duplicates if:\n\n*   ττ\\\\tau is typically 0.85–0.95 depending on tolerance.\n\n#### Locality-Sensitive Hashing (LSH)\n\n*   Approximate nearest-neighbor search (e.g. [FAISS](https://github.com/facebookresearch/faiss)) on embeddings to scale to billions of samples.\n*   Enables fast clustering and deduplication in high dimensions.",
    "order": 36,
    "orderInChapter": 3,
    "difficulty": 5,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "embedding",
      "bert",
      "nlp"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 162,
      "contentLength": 15232
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#deduplication-methods",
    "scrapedAt": "2025-12-28T11:48:17.192Z"
  },
  {
    "id": "ai-data-filtering-handling-duplicates-after-detection-37",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Deduplication",
    "title": "Handling Duplicates After Detection",
    "subtitle": "Deduplication",
    "contentHtml": "<ul>\n  <li>\n    <p>After duplicates are identified, you can:</p>\n\n    <ul>\n      <li><strong>Keep one</strong> canonical copy (highest quality or random),</li>\n      <li><strong>Downweight</strong> duplicates instead of dropping,</li>\n      <li><strong>Cluster and merge</strong> overlapping documents if they contain unique segments.</li>\n    </ul>\n  </li>\n  <li>\n    <p>This prevents losing valuable unique content while still removing redundancy.</p>\n  </li>\n</ul>\n<p>After duplicates are identified, you can:</p>\n<ul>\n      <li><strong>Keep one</strong> canonical copy (highest quality or random),</li>\n      <li><strong>Downweight</strong> duplicates instead of dropping,</li>\n      <li><strong>Cluster and merge</strong> overlapping documents if they contain unique segments.</li>\n    </ul>\n<p>This prevents losing valuable unique content while still removing redundancy.</p>",
    "contentMarkdown": "*   After duplicates are identified, you can:\n    \n    *   **Keep one** canonical copy (highest quality or random),\n    *   **Downweight** duplicates instead of dropping,\n    *   **Cluster and merge** overlapping documents if they contain unique segments.\n*   This prevents losing valuable unique content while still removing redundancy.\n    \n\nAfter duplicates are identified, you can:\n\n*   **Keep one** canonical copy (highest quality or random),\n*   **Downweight** duplicates instead of dropping,\n*   **Cluster and merge** overlapping documents if they contain unique segments.\n\nThis prevents losing valuable unique content while still removing redundancy.",
    "order": 37,
    "orderInChapter": 4,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 86,
      "contentLength": 881
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#handling-duplicates-after-detection",
    "scrapedAt": "2025-12-28T11:48:17.192Z"
  },
  {
    "id": "ai-data-filtering-special-considerations-38",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Deduplication",
    "title": "Special Considerations",
    "subtitle": "Deduplication",
    "contentHtml": "<ul>\n  <li>Perform deduplication <strong>within and across datasets</strong> (e.g. training vs evaluation sets to prevent contamination).</li>\n  <li>\n    <p>Deduplicate <strong>at multiple granularities</strong>:</p>\n\n    <ul>\n      <li>document level (whole pages/files),</li>\n      <li>paragraph/line level,</li>\n      <li>span/n-gram level.</li>\n    </ul>\n  </li>\n  <li>Track provenance metadata so that deduplication doesn’t remove licensed or proprietary content incorrectly.</li>\n</ul>\n<p>Deduplicate <strong>at multiple granularities</strong>:</p>\n<ul>\n      <li>document level (whole pages/files),</li>\n      <li>paragraph/line level,</li>\n      <li>span/n-gram level.</li>\n    </ul>",
    "contentMarkdown": "*   Perform deduplication **within and across datasets** (e.g. training vs evaluation sets to prevent contamination).\n*   Deduplicate **at multiple granularities**:\n    \n    *   document level (whole pages/files),\n    *   paragraph/line level,\n    *   span/n-gram level.\n*   Track provenance metadata so that deduplication doesn’t remove licensed or proprietary content incorrectly.\n\nDeduplicate **at multiple granularities**:\n\n*   document level (whole pages/files),\n*   paragraph/line level,\n*   span/n-gram level.",
    "order": 38,
    "orderInChapter": 5,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 60,
      "contentLength": 691
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#special-considerations",
    "scrapedAt": "2025-12-28T11:48:17.192Z"
  },
  {
    "id": "ai-data-filtering-pipeline-stages-39",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "End-to-End Filtering Pipeline",
    "title": "Pipeline Stages",
    "subtitle": "End-to-End Filtering Pipeline",
    "contentHtml": "<h4 id=\"stage-1-basic-heuristic-filtering\">Stage 1: Basic Heuristic Filtering</h4>\n<ul>\n  <li>\n    <p><strong>Goal:</strong> Quickly remove obvious noise and off-domain data.</p>\n  </li>\n  <li>\n    <p><strong>Techniques</strong>:</p>\n\n    <ul>\n      <li>Length-based filtering (&lt;5 or &gt;2000 tokens)</li>\n      <li>Character ratio and symbol noise checks</li>\n      <li>Language ID (e.g. <a href=\"https://fasttext.cc/\">fastText</a>)</li>\n      <li>Entropy checks</li>\n      <li>Perplexity filtering with small LM</li>\n      <li>Toxicity/profanity lexicon filters</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Output:</strong> Cleaned raw corpus</p>\n  </li>\n</ul>\n<p><strong>Goal:</strong> Quickly remove obvious noise and off-domain data.</p>\n<p><strong>Techniques</strong>:</p>\n<ul>\n      <li>Length-based filtering (&lt;5 or &gt;2000 tokens)</li>\n      <li>Character ratio and symbol noise checks</li>\n      <li>Language ID (e.g. <a href=\"https://fasttext.cc/\">fastText</a>)</li>\n      <li>Entropy checks</li>\n      <li>Perplexity filtering with small LM</li>\n      <li>Toxicity/profanity lexicon filters</li>\n    </ul>\n<p><strong>Output:</strong> Cleaned raw corpus</p>\n<h4 id=\"stage-2-quality-and-compliance-metrics\">Stage 2: Quality and Compliance Metrics</h4>\n<ul>\n  <li>\n    <p><strong>Goal:</strong> Ensure data is informative, diverse, and policy-compliant.</p>\n  </li>\n  <li>\n    <p><strong>Quality Metrics</strong>:</p>\n\n    <ul>\n      <li>N-gram diversity</li>\n      <li>Length-adjusted entropy</li>\n      <li><a href=\"##complexity-gap-cg-score-for-label-noise\">Complexity Gap (CG) score</a> for label noise.\n        <ul>\n          <li>Works on text/code/math; extendable to multimodal if serialized</li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Compliance Metrics</strong>:</p>\n\n    <ul>\n      <li>Safety classifiers (<a href=\"https://platform.openai.com/docs/guides/moderation\">OpenAI moderation API</a>, <a href=\"https://github.com/meta-llama/llama-guard\">LLaMA-Guard</a>)</li>\n      <li>License/PII/bias filters</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Output:</strong> High-quality, policy-compliant samples</p>\n  </li>\n</ul>\n<p><strong>Goal:</strong> Ensure data is informative, diverse, and policy-compliant.</p>\n<p><strong>Quality Metrics</strong>:</p>\n<ul>\n      <li>N-gram diversity</li>\n      <li>Length-adjusted entropy</li>\n      <li><a href=\"##complexity-gap-cg-score-for-label-noise\">Complexity Gap (CG) score</a> for label noise.\n        <ul>\n          <li>Works on text/code/math; extendable to multimodal if serialized</li>\n        </ul>\n      </li>\n    </ul>\n<ul>\n          <li>Works on text/code/math; extendable to multimodal if serialized</li>\n        </ul>\n<p><strong>Compliance Metrics</strong>:</p>\n<ul>\n      <li>Safety classifiers (<a href=\"https://platform.openai.com/docs/guides/moderation\">OpenAI moderation API</a>, <a href=\"https://github.com/meta-llama/llama-guard\">LLaMA-Guard</a>)</li>\n      <li>License/PII/bias filters</li>\n    </ul>\n<p><strong>Output:</strong> High-quality, policy-compliant samples</p>\n<h4 id=\"stage-3-outlier-and-island-detection\">Stage 3: Outlier and Island Detection</h4>\n<ul>\n  <li>\n    <p><strong>Goal:</strong> Remove semantically isolated or adversarial clusters.</p>\n  </li>\n  <li>\n    <p><strong>Techniques</strong>:</p>\n\n    <ul>\n      <li>Embeddings from <a href=\"https://platform.openai.com/docs/guides/embeddings\">OpenAI</a>, <a href=\"https://www.sbert.net/\">Sentence-BERT</a>, etc.</li>\n      <li>Dimensionality reduction (<a href=\"https://umap-learn.readthedocs.io/en/latest/\">UMAP</a>, <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html\">PCA</a>)</li>\n      <li>Density-based clustering (<a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html\">DBSCAN</a>)</li>\n      <li>Distance-threshold filtering</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Output:</strong> In-distribution, cohesive data</p>\n  </li>\n</ul>\n<p><strong>Goal:</strong> Remove semantically isolated or adversarial clusters.</p>\n<p><strong>Techniques</strong>:</p>\n<ul>\n      <li>Embeddings from <a href=\"https://platform.openai.com/docs/guides/embeddings\">OpenAI</a>, <a href=\"https://www.sbert.net/\">Sentence-BERT</a>, etc.</li>\n      <li>Dimensionality reduction (<a href=\"https://umap-learn.readthedocs.io/en/latest/\">UMAP</a>, <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html\">PCA</a>)</li>\n      <li>Density-based clustering (<a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html\">DBSCAN</a>)</li>\n      <li>Distance-threshold filtering</li>\n    </ul>\n<p><strong>Output:</strong> In-distribution, cohesive data</p>\n<h4 id=\"stage-4-llm-based-evaluation-llm-as-a-judge\">Stage 4: LLM-Based Evaluation (LLM-as-a-Judge)</h4>\n<ul>\n  <li>\n    <p><strong>Goal:</strong> Judge nuanced qualities at scale.</p>\n  </li>\n  <li>\n    <p><strong>Evaluation Dimensions</strong>:</p>\n\n    <ul>\n      <li>Fluency, coherence, factuality, instruction relevance, conciseness, safety, diversity</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Implementation</strong>:</p>\n\n    <ul>\n      <li>Structured prompts for LLM judges (e.g. GPT-4, Claude)</li>\n      <li>Likert-scale scores per dimension</li>\n      <li>Weighted aggregation:</li>\n    </ul>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-50-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>Q</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><munder><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>d</mi><mo>&amp;#x2208;</mo><mi>D</mi></mrow></munder><msub><mi>w</mi><mi>d</mi></msub><mo>&amp;#x22C5;</mo><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-530\" style=\"width: 10.471em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 8.701em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.096em, 1008.65em, 3.648em, -999.997em); top: -2.237em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-531\"><span class=\"mi\" id=\"MathJax-Span-532\" style=\"font-family: STIXGeneral-Italic;\">Q</span><span class=\"mo\" id=\"MathJax-Span-533\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-534\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-535\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-536\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"munderover\" id=\"MathJax-Span-537\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 1.357em; height: 0px;\"><span style=\"position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0.055em;\"><span class=\"mo\" id=\"MathJax-Span-538\" style=\"font-family: STIXSizeOneSym; vertical-align: -0.518em;\">∑</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1001.36em, 4.273em, -999.997em); top: -2.862em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-539\"><span class=\"mrow\" id=\"MathJax-Span-540\"><span class=\"mi\" id=\"MathJax-Span-541\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-542\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">∈</span><span class=\"mi\" id=\"MathJax-Span-543\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">D</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"msubsup\" id=\"MathJax-Span-544\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.63em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-545\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.68em;\"><span class=\"mi\" id=\"MathJax-Span-546\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-547\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">⋅</span><span class=\"msubsup\" id=\"MathJax-Span-548\" style=\"padding-left: 0.263em;\"><span style=\"display: inline-block; position: relative; width: 0.836em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-549\" style=\"font-family: STIXGeneral-Italic;\">s</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.367em;\"><span class=\"mi\" id=\"MathJax-Span-550\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-551\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-552\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-553\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.242em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.559em; border-left: 0px solid; width: 0px; height: 2.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mi>Q</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munder><mo>∑</mo><mrow class=\"MJX-TeXAtom-ORD\"><mi>d</mi><mo>∈</mo><mi>D</mi></mrow></munder><msub><mi>w</mi><mi>d</mi></msub><mo>⋅</mo><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-50\">Q(x) = \\sum_{d \\in D} w_d \\cdot s_d(x)</script>\n  </li>\n  <li>\n    <p><strong>Output:</strong> Samples with structured quality scores</p>\n  </li>\n</ul>\n<p><strong>Goal:</strong> Judge nuanced qualities at scale.</p>\n<p><strong>Evaluation Dimensions</strong>:</p>\n<ul>\n      <li>Fluency, coherence, factuality, instruction relevance, conciseness, safety, diversity</li>\n    </ul>\n<p><strong>Implementation</strong>:</p>\n<ul>\n      <li>Structured prompts for LLM judges (e.g. GPT-4, Claude)</li>\n      <li>Likert-scale scores per dimension</li>\n      <li>Weighted aggregation:</li>\n    </ul>\n<p><strong>Output:</strong> Samples with structured quality scores</p>\n<h4 id=\"stage-5-human-evaluation\">Stage 5: Human Evaluation</h4>\n<ul>\n  <li>\n    <p><strong>Goal:</strong> Provide gold-standard ratings for calibration and final QA.</p>\n  </li>\n  <li>\n    <p><strong>Key Features</strong>:</p>\n\n    <ul>\n      <li>Same dimensions as LLM eval (fluency, coherence, factuality, etc.)</li>\n      <li>Inter-rater reliability checks (Cohen’s <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-51-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03BA;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-554\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.58em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-555\"><span class=\"mi\" id=\"MathJax-Span-556\" style=\"font-family: STIXGeneral-Italic;\">κ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>κ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-51\">\\kappa</script>)</li>\n      <li>Gold standard tests and rater training</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Use</strong>:</p>\n\n    <ul>\n      <li>Label a small stratified sample</li>\n      <li>Calibrate thresholds for LLM-based evaluation</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Output:</strong> Human-verified high-quality set</p>\n  </li>\n</ul>\n<p><strong>Goal:</strong> Provide gold-standard ratings for calibration and final QA.</p>\n<p><strong>Key Features</strong>:</p>\n<ul>\n      <li>Same dimensions as LLM eval (fluency, coherence, factuality, etc.)</li>\n      <li>Inter-rater reliability checks (Cohen’s <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-51-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>&amp;#x03BA;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-554\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.58em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-555\"><span class=\"mi\" id=\"MathJax-Span-556\" style=\"font-family: STIXGeneral-Italic;\">κ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>κ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-51\">\\kappa</script>)</li>\n      <li>Gold standard tests and rater training</li>\n    </ul>\n<p><strong>Use</strong>:</p>\n<ul>\n      <li>Label a small stratified sample</li>\n      <li>Calibrate thresholds for LLM-based evaluation</li>\n    </ul>\n<p><strong>Output:</strong> Human-verified high-quality set</p>\n<h4 id=\"stage-6-prompt-quality-evaluation\">Stage 6: Prompt Quality Evaluation</h4>\n<ul>\n  <li>\n    <p><strong>Goal:</strong> Ensure prompts themselves are clear, well-formed, and safe.</p>\n  </li>\n  <li>\n    <p><strong>Metrics</strong>:</p>\n\n    <ul>\n      <li>Clarity, coherence, relevance, complexity, specificity, safety</li>\n      <li>5-point Likert rubrics</li>\n      <li>Good/bad examples embedded in the evaluation prompt</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Use</strong>:</p>\n\n    <ul>\n      <li>Evaluate prompt-only datasets</li>\n      <li>Discard ambiguous or unsafe prompts</li>\n    </ul>\n  </li>\n</ul>\n<p><strong>Goal:</strong> Ensure prompts themselves are clear, well-formed, and safe.</p>\n<p><strong>Metrics</strong>:</p>\n<ul>\n      <li>Clarity, coherence, relevance, complexity, specificity, safety</li>\n      <li>5-point Likert rubrics</li>\n      <li>Good/bad examples embedded in the evaluation prompt</li>\n    </ul>\n<p><strong>Use</strong>:</p>\n<ul>\n      <li>Evaluate prompt-only datasets</li>\n      <li>Discard ambiguous or unsafe prompts</li>\n    </ul>\n<h4 id=\"stage-7-safety-behavior-evaluation\">Stage 7: Safety Behavior Evaluation</h4>\n<ul>\n  <li>\n    <p><strong>Goal:</strong> Evaluate how the model responds to safe/unsafe prompts.</p>\n  </li>\n  <li>\n    <p><strong>Metrics</strong>:</p>\n\n    <ul>\n      <li><strong>Over-punting (FPR):</strong> refusing safe prompts</li>\n      <li><strong>Under-punting (FNR):</strong> answering unsafe prompts</li>\n    </ul>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-52-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>FPR</mtext><mo>=</mo><mfrac><mrow><mi mathvariant=&quot;normal&quot;>&amp;#x0023;</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>safe</mtext><mo>&amp;#x2227;</mo><mtext>refuse</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></mrow><mrow><mi mathvariant=&quot;normal&quot;>&amp;#x0023;</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>safe</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></mrow></mfrac><mo>,</mo><mspace width=&quot;1em&quot; /><mtext>FNR</mtext><mo>=</mo><mfrac><mrow><mi mathvariant=&quot;normal&quot;>&amp;#x0023;</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>unsafe</mtext><mo>&amp;#x2227;</mo><mtext>answer</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></mrow><mrow><mi mathvariant=&quot;normal&quot;>&amp;#x0023;</mi><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>{</mo><mtext>unsafe</mtext><mo fence=&quot;false&quot; stretchy=&quot;false&quot;>}</mo></mrow></mfrac></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-557\" style=\"width: 27.763em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 23.128em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.68em, 1023.13em, 3.232em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-558\"><span class=\"mtext\" id=\"MathJax-Span-559\" style=\"font-family: STIXGeneral-Regular;\">FPR</span><span class=\"mo\" id=\"MathJax-Span-560\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mfrac\" id=\"MathJax-Span-561\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 6.773em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.18em, 1006.57em, 4.326em, -999.997em); top: -4.685em; left: 50%; margin-left: -3.331em;\"><span class=\"mrow\" id=\"MathJax-Span-562\"><span class=\"mi\" id=\"MathJax-Span-563\" style=\"font-family: STIXGeneral-Regular;\">#</span><span class=\"mo\" id=\"MathJax-Span-564\" style=\"font-family: STIXGeneral-Regular;\">{</span><span class=\"mtext\" id=\"MathJax-Span-565\" style=\"font-family: STIXGeneral-Regular;\">safe</span><span class=\"mo\" id=\"MathJax-Span-566\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">∧</span><span class=\"mtext\" id=\"MathJax-Span-567\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">refuse</span><span class=\"mo\" id=\"MathJax-Span-568\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.18em, 1002.97em, 4.326em, -999.997em); top: -3.331em; left: 50%; margin-left: -1.508em;\"><span class=\"mrow\" id=\"MathJax-Span-569\"><span class=\"mi\" id=\"MathJax-Span-570\" style=\"font-family: STIXGeneral-Regular;\">#</span><span class=\"mo\" id=\"MathJax-Span-571\" style=\"font-family: STIXGeneral-Regular;\">{</span><span class=\"mtext\" id=\"MathJax-Span-572\" style=\"font-family: STIXGeneral-Regular;\">safe</span><span class=\"mo\" id=\"MathJax-Span-573\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1006.77em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 6.773em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-574\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mspace\" id=\"MathJax-Span-575\" style=\"height: 0em; vertical-align: 0em; width: 1.148em; display: inline-block; overflow: hidden;\"></span><span class=\"mtext\" id=\"MathJax-Span-576\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.211em;\">FNR</span><span class=\"mo\" id=\"MathJax-Span-577\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mfrac\" id=\"MathJax-Span-578\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 8.18em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.18em, 1007.97em, 4.326em, -999.997em); top: -4.685em; left: 50%; margin-left: -4.008em;\"><span class=\"mrow\" id=\"MathJax-Span-579\"><span class=\"mi\" id=\"MathJax-Span-580\" style=\"font-family: STIXGeneral-Regular;\">#</span><span class=\"mo\" id=\"MathJax-Span-581\" style=\"font-family: STIXGeneral-Regular;\">{</span><span class=\"mtext\" id=\"MathJax-Span-582\" style=\"font-family: STIXGeneral-Regular;\">unsafe</span><span class=\"mo\" id=\"MathJax-Span-583\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">∧</span><span class=\"mtext\" id=\"MathJax-Span-584\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">answer</span><span class=\"mo\" id=\"MathJax-Span-585\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.18em, 1003.96em, 4.326em, -999.997em); top: -3.331em; left: 50%; margin-left: -2.029em;\"><span class=\"mrow\" id=\"MathJax-Span-586\"><span class=\"mi\" id=\"MathJax-Span-587\" style=\"font-family: STIXGeneral-Regular;\">#</span><span class=\"mo\" id=\"MathJax-Span-588\" style=\"font-family: STIXGeneral-Regular;\">{</span><span class=\"mtext\" id=\"MathJax-Span-589\" style=\"font-family: STIXGeneral-Regular;\">unsafe</span><span class=\"mo\" id=\"MathJax-Span-590\" style=\"font-family: STIXGeneral-Regular;\">}</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1008.18em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 8.18em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.122em; border-left: 0px solid; width: 0px; height: 2.816em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mtext>FPR</mtext><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">#</mi><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>safe</mtext><mo>∧</mo><mtext>refuse</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></mrow><mrow><mi mathvariant=\"normal\">#</mi><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>safe</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></mrow></mfrac><mo>,</mo><mspace width=\"1em\"></mspace><mtext>FNR</mtext><mo>=</mo><mfrac><mrow><mi mathvariant=\"normal\">#</mi><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>unsafe</mtext><mo>∧</mo><mtext>answer</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></mrow><mrow><mi mathvariant=\"normal\">#</mi><mo fence=\"false\" stretchy=\"false\">{</mo><mtext>unsafe</mtext><mo fence=\"false\" stretchy=\"false\">}</mo></mrow></mfrac></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-52\">\\text{FPR} = \\frac{\\#\\{\\text{safe} \\land \\text{refuse}\\}}{\\#\\{\\text{safe}\\}},\\quad\n \\text{FNR} = \\frac{\\#\\{\\text{unsafe} \\land \\text{answer}\\}}{\\#\\{\\text{unsafe}\\}}</script>\n  </li>\n  <li>\n    <p><strong>Use</strong>:</p>\n\n    <ul>\n      <li>Tune model refusal behavior to be safe but not overly cautious.</li>\n    </ul>\n  </li>\n</ul>\n<p><strong>Goal:</strong> Evaluate how the model responds to safe/unsafe prompts.</p>\n<p><strong>Metrics</strong>:</p>\n<ul>\n      <li><strong>Over-punting (FPR):</strong> refusing safe prompts</li>\n      <li><strong>Under-punting (FNR):</strong> answering unsafe prompts</li>\n    </ul>\n<p><strong>Use</strong>:</p>\n<ul>\n      <li>Tune model refusal behavior to be safe but not overly cautious.</li>\n    </ul>\n<h4 id=\"stage-8-deduplication\">Stage 8: Deduplication</h4>\n<ul>\n  <li>\n    <p><strong>Goal:</strong> Remove duplicates and near-duplicates that inflate dataset size and reduce diversity.</p>\n  </li>\n  <li>\n    <p><strong>Techniques</strong>:</p>\n\n    <ul>\n      <li>Hash-based (SHA-1, MD5)</li>\n      <li><a href=\"https://en.wikipedia.org/wiki/MinHash\">MinHash</a>, <a href=\"https://en.wikipedia.org/wiki/SimHash\">SimHash</a></li>\n      <li>Thresholding embedding-based cosine similarity: <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-53-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>cos</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>i</mi></msub><mo>,</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>j</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;gt;</mo><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-591\" style=\"width: 6.721em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.576em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1005.58em, 2.659em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-592\"><span class=\"mi\" id=\"MathJax-Span-593\" style=\"font-family: STIXGeneral-Regular;\">cos</span><span class=\"mo\" id=\"MathJax-Span-594\"></span><span class=\"mo\" id=\"MathJax-Span-595\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"msubsup\" id=\"MathJax-Span-596\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-597\"><span class=\"mrow\" id=\"MathJax-Span-598\"><span class=\"mi\" id=\"MathJax-Span-599\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-600\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-601\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-602\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-603\"><span class=\"mrow\" id=\"MathJax-Span-604\"><span class=\"mi\" id=\"MathJax-Span-605\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-606\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">j<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-607\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-608\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&gt;</span><span class=\"mi\" id=\"MathJax-Span-609\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.315em;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>cos</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>i</mi></msub><mo>,</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>&gt;</mo><mi>τ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-53\">\\cos(\\mathbf{e}_i,\\mathbf{e}_j) > \\tau</script></li>\n      <li>ANN tools like <a href=\"https://github.com/facebookresearch/faiss\">FAISS</a></li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Scope</strong>:</p>\n\n    <ul>\n      <li>Within-dataset and cross-dataset (to prevent eval set contamination)</li>\n    </ul>\n  </li>\n</ul>\n<p><strong>Goal:</strong> Remove duplicates and near-duplicates that inflate dataset size and reduce diversity.</p>\n<p><strong>Techniques</strong>:</p>\n<ul>\n      <li>Hash-based (SHA-1, MD5)</li>\n      <li><a href=\"https://en.wikipedia.org/wiki/MinHash\">MinHash</a>, <a href=\"https://en.wikipedia.org/wiki/SimHash\">SimHash</a></li>\n      <li>Thresholding embedding-based cosine similarity: <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-53-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>cos</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>i</mi></msub><mo>,</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>j</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;gt;</mo><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-591\" style=\"width: 6.721em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.576em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1005.58em, 2.659em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-592\"><span class=\"mi\" id=\"MathJax-Span-593\" style=\"font-family: STIXGeneral-Regular;\">cos</span><span class=\"mo\" id=\"MathJax-Span-594\"></span><span class=\"mo\" id=\"MathJax-Span-595\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"msubsup\" id=\"MathJax-Span-596\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-597\"><span class=\"mrow\" id=\"MathJax-Span-598\"><span class=\"mi\" id=\"MathJax-Span-599\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-600\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-601\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-602\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-603\"><span class=\"mrow\" id=\"MathJax-Span-604\"><span class=\"mi\" id=\"MathJax-Span-605\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-606\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">j<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-607\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-608\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&gt;</span><span class=\"mi\" id=\"MathJax-Span-609\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.315em;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>cos</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>i</mi></msub><mo>,</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>&gt;</mo><mi>τ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-53\">\\cos(\\mathbf{e}_i,\\mathbf{e}_j) > \\tau</script></li>\n      <li>ANN tools like <a href=\"https://github.com/facebookresearch/faiss\">FAISS</a></li>\n    </ul>\n<p><strong>Scope</strong>:</p>\n<ul>\n      <li>Within-dataset and cross-dataset (to prevent eval set contamination)</li>\n    </ul>",
    "contentMarkdown": "#### Stage 1: Basic Heuristic Filtering\n\n*   **Goal:** Quickly remove obvious noise and off-domain data.\n    \n*   **Techniques**:\n    \n    *   Length-based filtering (<5 or >2000 tokens)\n    *   Character ratio and symbol noise checks\n    *   Language ID (e.g. [fastText](https://fasttext.cc/))\n    *   Entropy checks\n    *   Perplexity filtering with small LM\n    *   Toxicity/profanity lexicon filters\n*   **Output:** Cleaned raw corpus\n    \n\n**Goal:** Quickly remove obvious noise and off-domain data.\n\n**Techniques**:\n\n*   Length-based filtering (<5 or >2000 tokens)\n*   Character ratio and symbol noise checks\n*   Language ID (e.g. [fastText](https://fasttext.cc/))\n*   Entropy checks\n*   Perplexity filtering with small LM\n*   Toxicity/profanity lexicon filters\n\n**Output:** Cleaned raw corpus\n\n#### Stage 2: Quality and Compliance Metrics\n\n*   **Goal:** Ensure data is informative, diverse, and policy-compliant.\n    \n*   **Quality Metrics**:\n    \n    *   N-gram diversity\n    *   Length-adjusted entropy\n    *   [Complexity Gap (CG) score](##complexity-gap-cg-score-for-label-noise) for label noise.\n        *   Works on text/code/math; extendable to multimodal if serialized\n*   **Compliance Metrics**:\n    \n    *   Safety classifiers ([OpenAI moderation API](https://platform.openai.com/docs/guides/moderation), [LLaMA-Guard](https://github.com/meta-llama/llama-guard))\n    *   License/PII/bias filters\n*   **Output:** High-quality, policy-compliant samples\n    \n\n**Goal:** Ensure data is informative, diverse, and policy-compliant.\n\n**Quality Metrics**:\n\n*   N-gram diversity\n*   Length-adjusted entropy\n*   [Complexity Gap (CG) score](##complexity-gap-cg-score-for-label-noise) for label noise.\n    *   Works on text/code/math; extendable to multimodal if serialized\n\n*   Works on text/code/math; extendable to multimodal if serialized\n\n**Compliance Metrics**:\n\n*   Safety classifiers ([OpenAI moderation API](https://platform.openai.com/docs/guides/moderation), [LLaMA-Guard](https://github.com/meta-llama/llama-guard))\n*   License/PII/bias filters\n\n**Output:** High-quality, policy-compliant samples\n\n#### Stage 3: Outlier and Island Detection\n\n*   **Goal:** Remove semantically isolated or adversarial clusters.\n    \n*   **Techniques**:\n    \n    *   Embeddings from [OpenAI](https://platform.openai.com/docs/guides/embeddings), [Sentence-BERT](https://www.sbert.net/), etc.\n    *   Dimensionality reduction ([UMAP](https://umap-learn.readthedocs.io/en/latest/), [PCA](https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html))\n    *   Density-based clustering ([DBSCAN](https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html))\n    *   Distance-threshold filtering\n*   **Output:** In-distribution, cohesive data\n    \n\n**Goal:** Remove semantically isolated or adversarial clusters.\n\n**Techniques**:\n\n*   Embeddings from [OpenAI](https://platform.openai.com/docs/guides/embeddings), [Sentence-BERT](https://www.sbert.net/), etc.\n*   Dimensionality reduction ([UMAP](https://umap-learn.readthedocs.io/en/latest/), [PCA](https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html))\n*   Density-based clustering ([DBSCAN](https://scikit-learn.org/stable/modules/generated/sklearn.cluster.DBSCAN.html))\n*   Distance-threshold filtering\n\n**Output:** In-distribution, cohesive data\n\n#### Stage 4: LLM-Based Evaluation (LLM-as-a-Judge)\n\n*   **Goal:** Judge nuanced qualities at scale.\n    \n*   **Evaluation Dimensions**:\n    \n    *   Fluency, coherence, factuality, instruction relevance, conciseness, safety, diversity\n*   **Implementation**:\n    \n    *   Structured prompts for LLM judges (e.g. GPT-4, Claude)\n    *   Likert-scale scores per dimension\n    *   Weighted aggregation:\n    \n    Q(x)\\=∑d∈Dwd⋅sd(x)Q(x)\\=∑d∈Dwd⋅sd(x)\n    \n    Q(x) = \\\\sum\\_{d \\\\in D} w\\_d \\\\cdot s\\_d(x)\n*   **Output:** Samples with structured quality scores\n    \n\n**Goal:** Judge nuanced qualities at scale.\n\n**Evaluation Dimensions**:\n\n*   Fluency, coherence, factuality, instruction relevance, conciseness, safety, diversity\n\n**Implementation**:\n\n*   Structured prompts for LLM judges (e.g. GPT-4, Claude)\n*   Likert-scale scores per dimension\n*   Weighted aggregation:\n\n**Output:** Samples with structured quality scores\n\n#### Stage 5: Human Evaluation\n\n*   **Goal:** Provide gold-standard ratings for calibration and final QA.\n    \n*   **Key Features**:\n    \n    *   Same dimensions as LLM eval (fluency, coherence, factuality, etc.)\n    *   Inter-rater reliability checks (Cohen’s κκ\\\\kappa)\n    *   Gold standard tests and rater training\n*   **Use**:\n    \n    *   Label a small stratified sample\n    *   Calibrate thresholds for LLM-based evaluation\n*   **Output:** Human-verified high-quality set\n    \n\n**Goal:** Provide gold-standard ratings for calibration and final QA.\n\n**Key Features**:\n\n*   Same dimensions as LLM eval (fluency, coherence, factuality, etc.)\n*   Inter-rater reliability checks (Cohen’s κκ\\\\kappa)\n*   Gold standard tests and rater training\n\n**Use**:\n\n*   Label a small stratified sample\n*   Calibrate thresholds for LLM-based evaluation\n\n**Output:** Human-verified high-quality set\n\n#### Stage 6: Prompt Quality Evaluation\n\n*   **Goal:** Ensure prompts themselves are clear, well-formed, and safe.\n    \n*   **Metrics**:\n    \n    *   Clarity, coherence, relevance, complexity, specificity, safety\n    *   5-point Likert rubrics\n    *   Good/bad examples embedded in the evaluation prompt\n*   **Use**:\n    \n    *   Evaluate prompt-only datasets\n    *   Discard ambiguous or unsafe prompts\n\n**Goal:** Ensure prompts themselves are clear, well-formed, and safe.\n\n**Metrics**:\n\n*   Clarity, coherence, relevance, complexity, specificity, safety\n*   5-point Likert rubrics\n*   Good/bad examples embedded in the evaluation prompt\n\n**Use**:\n\n*   Evaluate prompt-only datasets\n*   Discard ambiguous or unsafe prompts\n\n#### Stage 7: Safety Behavior Evaluation\n\n*   **Goal:** Evaluate how the model responds to safe/unsafe prompts.\n    \n*   **Metrics**:\n    \n    *   **Over-punting (FPR):** refusing safe prompts\n    *   **Under-punting (FNR):** answering unsafe prompts\n    \n    FPR\\=#{safe∧refuse}#{safe},FNR\\=#{unsafe∧answer}#{unsafe}FPR\\=#{safe∧refuse}#{safe},FNR\\=#{unsafe∧answer}#{unsafe}\n    \n    \\\\text{FPR} = \\\\frac{\\\\#\\\\{\\\\text{safe} \\\\land \\\\text{refuse}\\\\}}{\\\\#\\\\{\\\\text{safe}\\\\}},\\\\quad \\\\text{FNR} = \\\\frac{\\\\#\\\\{\\\\text{unsafe} \\\\land \\\\text{answer}\\\\}}{\\\\#\\\\{\\\\text{unsafe}\\\\}}\n*   **Use**:\n    \n    *   Tune model refusal behavior to be safe but not overly cautious.\n\n**Goal:** Evaluate how the model responds to safe/unsafe prompts.\n\n**Metrics**:\n\n*   **Over-punting (FPR):** refusing safe prompts\n*   **Under-punting (FNR):** answering unsafe prompts\n\n**Use**:\n\n*   Tune model refusal behavior to be safe but not overly cautious.\n\n#### Stage 8: Deduplication\n\n*   **Goal:** Remove duplicates and near-duplicates that inflate dataset size and reduce diversity.\n    \n*   **Techniques**:\n    \n    *   Hash-based (SHA-1, MD5)\n    *   [MinHash](https://en.wikipedia.org/wiki/MinHash), [SimHash](https://en.wikipedia.org/wiki/SimHash)\n    *   Thresholding embedding-based cosine similarity: cos(ei,ej)\\>τcos⁡(ei,ej)\\>τ\\\\cos(\\\\mathbf{e}\\_i,\\\\mathbf{e}\\_j) > \\\\tau\n    *   ANN tools like [FAISS](https://github.com/facebookresearch/faiss)\n*   **Scope**:\n    \n    *   Within-dataset and cross-dataset (to prevent eval set contamination)\n\n**Goal:** Remove duplicates and near-duplicates that inflate dataset size and reduce diversity.\n\n**Techniques**:\n\n*   Hash-based (SHA-1, MD5)\n*   [MinHash](https://en.wikipedia.org/wiki/MinHash), [SimHash](https://en.wikipedia.org/wiki/SimHash)\n*   Thresholding embedding-based cosine similarity: cos(ei,ej)\\>τcos⁡(ei,ej)\\>τ\\\\cos(\\\\mathbf{e}\\_i,\\\\mathbf{e}\\_j) > \\\\tau\n*   ANN tools like [FAISS](https://github.com/facebookresearch/faiss)\n\n**Scope**:\n\n*   Within-dataset and cross-dataset (to prevent eval set contamination)",
    "order": 39,
    "orderInChapter": 1,
    "difficulty": 5,
    "estimatedMinutes": 4,
    "tags": [
      "datatraining",
      "embedding",
      "bert",
      "gpt",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 771,
      "contentLength": 35377
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#pipeline-stages",
    "scrapedAt": "2025-12-28T11:48:17.192Z"
  },
  {
    "id": "ai-data-filtering-flow-diagram-40",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "End-to-End Filtering Pipeline",
    "title": "Flow Diagram",
    "subtitle": "End-to-End Filtering Pipeline",
    "contentHtml": "<ul>\n  <li>The following figure shows the end-to-end data filtering pipeline - from raw data to a final curated training set — showing each stage (rule-based filters, quality and compliance, outlier detection, LLM-based evaluation, human calibration, prompt quality scoring, safety behavior evaluation, and deduplication) connected in sequence.</li>\n</ul>\n<p><img src=\"/primers/ai/assets/data-filtering/flow.jpg\" alt=\"\"></p>",
    "contentMarkdown": "*   The following figure shows the end-to-end data filtering pipeline - from raw data to a final curated training set — showing each stage (rule-based filters, quality and compliance, outlier detection, LLM-based evaluation, human calibration, prompt quality scoring, safety behavior evaluation, and deduplication) connected in sequence.\n\n![](/primers/ai/assets/data-filtering/flow.jpg)",
    "order": 40,
    "orderInChapter": 2,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": true,
      "wordCount": 47,
      "contentLength": 424
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#flow-diagram",
    "scrapedAt": "2025-12-28T11:48:17.192Z"
  },
  {
    "id": "ai-data-filtering-stage-level-thresholding-overview-41",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Concrete Scoring Framework",
    "title": "Stage-Level Thresholding Overview",
    "subtitle": "Concrete Scoring Framework",
    "contentHtml": "<ul>\n  <li>Each stage assigns either a <strong>binary pass/fail</strong> or a <strong>numeric quality score <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-54-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>q</mi><mi>i</mi></msub><mo>&amp;#x2208;</mo><mo stretchy=&quot;false&quot;>[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy=&quot;false&quot;>]</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-610\" style=\"width: 4.961em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 4.083em; height: 0px; font-size: 121%;\"><span style=\"position: absolute; clip: rect(1.397em, 1003.98em, 2.585em, -999.997em); top: -2.218em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-611\"><span class=\"msubsup\" id=\"MathJax-Span-612\"><span style=\"display: inline-block; position: relative; width: 0.777em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.36em, 1000.47em, 4.341em, -999.997em); top: -3.975em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-613\" style=\"font-family: STIXGeneral-Italic;\">q</span><span style=\"display: inline-block; width: 0px; height: 3.98em;\"></span></span><span style=\"position: absolute; top: -3.82em; left: 0.519em;\"><span class=\"mi\" id=\"MathJax-Span-614\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 3.98em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-615\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.313em;\">∈</span><span class=\"mo\" id=\"MathJax-Span-616\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.313em;\">[</span><span class=\"mn\" id=\"MathJax-Span-617\" style=\"font-family: STIXGeneral-Regular;\">0</span><span class=\"mo\" id=\"MathJax-Span-618\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"mn\" id=\"MathJax-Span-619\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.209em;\">1</span><span class=\"mo\" id=\"MathJax-Span-620\" style=\"font-family: STIXGeneral-Regular;\">]</span></span><span style=\"display: inline-block; width: 0px; height: 2.224em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>q</mi><mi>i</mi></msub><mo>∈</mo><mo stretchy=\"false\">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy=\"false\">]</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-54\">q_i \\in [0,1]</script></strong>.</li>\n  <li>\n    <p>The filtering logic is:</p>\n\n    <ul>\n      <li><strong>Hard filters</strong> (discard on failure): rule-based heuristics, compliance/safety, deduplication.</li>\n      <li><strong>Soft scores</strong> (aggregate into overall quality): LLM and human evaluations.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Notation:</strong></p>\n\n    <ul>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-55-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>d</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-621\" style=\"width: 2.451em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.034em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1001.98em, 2.503em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-622\"><span class=\"msubsup\" id=\"MathJax-Span-623\"><span style=\"display: inline-block; position: relative; width: 0.836em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-624\" style=\"font-family: STIXGeneral-Italic;\">s</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.367em;\"><span class=\"texatom\" id=\"MathJax-Span-625\"><span class=\"mrow\" id=\"MathJax-Span-626\"><span class=\"mi\" id=\"MathJax-Span-627\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-628\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-629\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-630\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>s</mi><mrow class=\"MJX-TeXAtom-ORD\"><mi>d</mi></mrow></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-55\">s_{d}(x)</script>: score on dimension <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-56-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-631\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.58em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-632\"><span class=\"mi\" id=\"MathJax-Span-633\" style=\"font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.055em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>d</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-56\">d</script> for sample <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-57-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-634\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.52em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-635\"><span class=\"mi\" id=\"MathJax-Span-636\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>x</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-57\">x</script>.</li>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-58-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>d</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-637\" style=\"width: 1.357em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1001.1em, 2.451em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-638\"><span class=\"msubsup\" id=\"MathJax-Span-639\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.63em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-640\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.68em;\"><span class=\"mi\" id=\"MathJax-Span-641\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>w</mi><mi>d</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-58\">w_d</script>: weight for dimension <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-59-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-642\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.58em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-643\"><span class=\"mi\" id=\"MathJax-Span-644\" style=\"font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.055em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>d</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-59\">d</script>.</li>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-60-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>Q</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-645\" style=\"width: 2.294em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.878em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1001.83em, 2.503em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-646\"><span class=\"mi\" id=\"MathJax-Span-647\" style=\"font-family: STIXGeneral-Italic;\">Q</span><span class=\"mo\" id=\"MathJax-Span-648\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-649\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-650\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>Q</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-60\">Q(x)</script>: overall quality score.</li>\n    </ul>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-61-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi>Q</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mfrac><mrow><munder><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>d</mi></mrow></munder><msub><mi>w</mi><mi>d</mi></msub><mo>&amp;#x22C5;</mo><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow><munder><mo>&amp;#x2211;</mo><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>d</mi></mrow></munder><msub><mi>w</mi><mi>d</mi></msub></mrow></mfrac></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-651\" style=\"width: 10.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 8.857em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.471em, 1008.86em, 3.388em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-652\"><span class=\"mi\" id=\"MathJax-Span-653\" style=\"font-family: STIXGeneral-Italic;\">Q</span><span class=\"mo\" id=\"MathJax-Span-654\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-655\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-656\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-657\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mfrac\" id=\"MathJax-Span-658\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 5.576em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.076em, 1005.42em, 4.482em, -999.997em); top: -4.789em; left: 50%; margin-left: -2.706em;\"><span class=\"mrow\" id=\"MathJax-Span-659\"><span class=\"munderover\" id=\"MathJax-Span-660\"><span style=\"display: inline-block; position: relative; width: 1.357em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.076em, 1000.84em, 4.43em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mo\" id=\"MathJax-Span-661\" style=\"font-family: STIXGeneral-Regular; vertical-align: 0.003em;\">∑</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.695em; left: 0.94em;\"><span class=\"texatom\" id=\"MathJax-Span-662\"><span class=\"mrow\" id=\"MathJax-Span-663\"><span class=\"mi\" id=\"MathJax-Span-664\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"msubsup\" id=\"MathJax-Span-665\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.63em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-666\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.68em;\"><span class=\"mi\" id=\"MathJax-Span-667\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-668\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">⋅</span><span class=\"msubsup\" id=\"MathJax-Span-669\" style=\"padding-left: 0.263em;\"><span style=\"display: inline-block; position: relative; width: 0.836em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-670\" style=\"font-family: STIXGeneral-Italic;\">s</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.367em;\"><span class=\"mi\" id=\"MathJax-Span-671\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-672\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-673\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-674\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.076em, 1002.71em, 4.482em, -999.997em); top: -3.279em; left: 50%; margin-left: -1.352em;\"><span class=\"mrow\" id=\"MathJax-Span-675\"><span class=\"munderover\" id=\"MathJax-Span-676\"><span style=\"display: inline-block; position: relative; width: 1.357em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.076em, 1000.84em, 4.43em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mo\" id=\"MathJax-Span-677\" style=\"font-family: STIXGeneral-Regular; vertical-align: 0.003em;\">∑</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.695em; left: 0.94em;\"><span class=\"texatom\" id=\"MathJax-Span-678\"><span class=\"mrow\" id=\"MathJax-Span-679\"><span class=\"mi\" id=\"MathJax-Span-680\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"msubsup\" id=\"MathJax-Span-681\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.63em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-682\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.68em;\"><span class=\"mi\" id=\"MathJax-Span-683\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1005.58em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 5.576em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.309em; border-left: 0px solid; width: 0px; height: 3.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mi>Q</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><munder><mo>∑</mo><mrow class=\"MJX-TeXAtom-ORD\"><mi>d</mi></mrow></munder><msub><mi>w</mi><mi>d</mi></msub><mo>⋅</mo><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mrow><munder><mo>∑</mo><mrow class=\"MJX-TeXAtom-ORD\"><mi>d</mi></mrow></munder><msub><mi>w</mi><mi>d</mi></msub></mrow></mfrac></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-61\">Q(x) = \\frac{\\sum_{d} w_d \\cdot s_d(x)}{\\sum_{d} w_d}</script>\n  </li>\n  <li>Keep <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-62-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-684\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.52em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-685\"><span class=\"mi\" id=\"MathJax-Span-686\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>x</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-62\">x</script> if <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-63-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>Q</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2265;</mo><mi>&amp;#x03C4;</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-687\" style=\"width: 4.273em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 3.544em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1003.54em, 2.503em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-688\"><span class=\"mi\" id=\"MathJax-Span-689\" style=\"font-family: STIXGeneral-Italic;\">Q</span><span class=\"mo\" id=\"MathJax-Span-690\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-691\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-692\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-693\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">≥</span><span class=\"mi\" id=\"MathJax-Span-694\" style=\"font-family: STIXGeneral-Italic; padding-left: 0.315em;\">τ<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>Q</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>≥</mo><mi>τ</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-63\">Q(x) \\ge \\tau</script> and it passes all hard filters.</li>\n</ul>\n<p>The filtering logic is:</p>\n<ul>\n      <li><strong>Hard filters</strong> (discard on failure): rule-based heuristics, compliance/safety, deduplication.</li>\n      <li><strong>Soft scores</strong> (aggregate into overall quality): LLM and human evaluations.</li>\n    </ul>\n<p><strong>Notation:</strong></p>\n<ul>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-55-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>s</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi>d</mi></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-621\" style=\"width: 2.451em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 2.034em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1001.98em, 2.503em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-622\"><span class=\"msubsup\" id=\"MathJax-Span-623\"><span style=\"display: inline-block; position: relative; width: 0.836em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-624\" style=\"font-family: STIXGeneral-Italic;\">s</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.367em;\"><span class=\"texatom\" id=\"MathJax-Span-625\"><span class=\"mrow\" id=\"MathJax-Span-626\"><span class=\"mi\" id=\"MathJax-Span-627\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-628\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-629\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-630\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>s</mi><mrow class=\"MJX-TeXAtom-ORD\"><mi>d</mi></mrow></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-55\">s_{d}(x)</script>: score on dimension <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-56-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-631\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.58em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-632\"><span class=\"mi\" id=\"MathJax-Span-633\" style=\"font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.055em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>d</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-56\">d</script> for sample <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-57-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>x</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-634\" style=\"width: 0.628em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.523em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.617em, 1000.52em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-635\"><span class=\"mi\" id=\"MathJax-Span-636\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.691em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>x</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-57\">x</script>.</li>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-58-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>d</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-637\" style=\"width: 1.357em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.565em, 1001.1em, 2.451em, -999.997em); top: -2.133em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-638\"><span class=\"msubsup\" id=\"MathJax-Span-639\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.63em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-640\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.68em;\"><span class=\"mi\" id=\"MathJax-Span-641\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.138em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 0.878em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>w</mi><mi>d</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-58\">w_d</script>: weight for dimension <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-59-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>d</mi></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-642\" style=\"width: 0.732em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 0.576em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1000.58em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-643\"><span class=\"mi\" id=\"MathJax-Span-644\" style=\"font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.055em;\"></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>d</mi></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-59\">d</script>.</li>\n      <li><span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-60-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>Q</mi><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-645\" style=\"width: 2.294em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.878em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1001.83em, 2.503em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-646\"><span class=\"mi\" id=\"MathJax-Span-647\" style=\"font-family: STIXGeneral-Italic;\">Q</span><span class=\"mo\" id=\"MathJax-Span-648\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-649\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-650\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.128em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>Q</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-60\">Q(x)</script>: overall quality score.</li>\n    </ul>",
    "contentMarkdown": "*   Each stage assigns either a **binary pass/fail** or a **numeric quality score qi∈\\[0,1\\]qi∈\\[0,1\\]q\\_i \\\\in \\[0,1\\]**.\n*   The filtering logic is:\n    \n    *   **Hard filters** (discard on failure): rule-based heuristics, compliance/safety, deduplication.\n    *   **Soft scores** (aggregate into overall quality): LLM and human evaluations.\n*   **Notation:**\n    \n    *   sd(x)sd(x)s\\_{d}(x): score on dimension ddd for sample xxx.\n    *   wdwdw\\_d: weight for dimension ddd.\n    *   Q(x)Q(x)Q(x): overall quality score.\n    \n    Q(x)\\=∑dwd⋅sd(x)∑dwdQ(x)\\=∑dwd⋅sd(x)∑dwd\n    \n    Q(x) = \\\\frac{\\\\sum\\_{d} w\\_d \\\\cdot s\\_d(x)}{\\\\sum\\_{d} w\\_d}\n*   Keep xxx if Q(x)≥τQ(x)≥τQ(x) \\\\ge \\\\tau and it passes all hard filters.\n\nThe filtering logic is:\n\n*   **Hard filters** (discard on failure): rule-based heuristics, compliance/safety, deduplication.\n*   **Soft scores** (aggregate into overall quality): LLM and human evaluations.\n\n**Notation:**\n\n*   sd(x)sd(x)s\\_{d}(x): score on dimension ddd for sample xxx.\n*   wdwdw\\_d: weight for dimension ddd.\n*   Q(x)Q(x)Q(x): overall quality score.",
    "order": 41,
    "orderInChapter": 1,
    "difficulty": 5,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 131,
      "contentLength": 35666
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#stage-level-thresholding-overview",
    "scrapedAt": "2025-12-28T11:48:17.192Z"
  },
  {
    "id": "ai-data-filtering-suggested-weights-and-thresholds-42",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Concrete Scoring Framework",
    "title": "Suggested Weights and Thresholds",
    "subtitle": "Concrete Scoring Framework",
    "contentHtml": "<ol>\n  <li>\n    <p><strong>Rule-Based / Statistical Filters</strong>:</p>\n\n    <ul>\n      <li>\n        <p>Hard reject if:</p>\n\n        <ul>\n          <li>length &lt; 5 or &gt; 2000 tokens</li>\n          <li>language mismatch</li>\n          <li>perplexity z-score &gt; +3 or &lt; –3</li>\n          <li>entropy &lt; 1.0 bits/token</li>\n          <li>contains blocked terms (toxicity, profanity)</li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Compliance Filters</strong>:</p>\n\n    <ul>\n      <li>\n        <p>Hard reject if:</p>\n\n        <ul>\n          <li><a href=\"https://platform.openai.com/docs/guides/moderation\">OpenAI Moderation API</a> risk &gt; 0.8</li>\n          <li><a href=\"https://github.com/meta-llama/llama-guard\">LLaMA-Guard</a> unsafe label present</li>\n          <li>contains PII or license-restricted text</li>\n        </ul>\n      </li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Outlier Detection</strong>:</p>\n\n    <ul>\n      <li>Hard reject if DBSCAN marks as noise or mean kNN distance &gt; 95th percentile</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>LLM-Based Evaluation</strong>:</p>\n\n    <ul>\n      <li>\n        <p>Dimensions and weights:</p>\n\n        <div align=\"center\">\n <table class=\"tg\">\n <thead>\n <tr>\n <th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n <th class=\"tg-hcenter-valign-first\"><strong>Weight <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-64-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>d</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-695\" style=\"width: 1.372em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.134em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.61em, 1001.13em, 2.562em, -999.997em); top: -2.199em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-696\"><span class=\"msubsup\" id=\"MathJax-Span-697\"><span style=\"display: inline-block; position: relative; width: 1.134em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.396em, 1000.66em, 4.17em, -999.997em); top: -3.985em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-698\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 3.991em;\"></span></span><span style=\"position: absolute; top: -3.807em; left: 0.658em;\"><span class=\"mi\" id=\"MathJax-Span-699\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 3.991em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.205em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 0.861em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>w</mi><mi>d</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-64\">w_d</script></strong></th>\n <th class=\"tg-hcenter-valign-second\"><strong>Threshold</strong></th>\n </tr>\n </thead>\n <tbody>\n <tr>\n <td class=\"tg-tleft-valign-first\">Clarity</td>\n <td class=\"tg-tleft-valign-first\">0.15</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Coherence</td>\n <td class=\"tg-tleft-valign-first\">0.15</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Factuality</td>\n <td class=\"tg-tleft-valign-first\">0.20</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Instruction relevance</td>\n <td class=\"tg-tleft-valign-first\">0.20</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Conciseness</td>\n <td class=\"tg-tleft-valign-first\">0.10</td>\n <td class=\"tg-tleft-valign-second\">≥ 2/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Safety</td>\n <td class=\"tg-tleft-valign-first\">0.20</td>\n <td class=\"tg-tleft-valign-second\">≥ 4/5</td>\n </tr>\n </tbody>\n </table>\n </div>\n      </li>\n      <li>\n        <p>Compute:</p>\n      </li>\n    </ul>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-65-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><msub><mi>Q</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>LLM</mtext></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>=</mo><mfrac><mrow><munder><mo>&amp;#x2211;</mo><mi>d</mi></munder><msub><mi>w</mi><mi>d</mi></msub><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo></mrow><mrow><munder><mo>&amp;#x2211;</mo><mi>d</mi></munder><msub><mi>w</mi><mi>d</mi></msub></mrow></mfrac></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-700\" style=\"width: 11.565em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 9.638em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.471em, 1009.64em, 3.388em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-701\"><span class=\"msubsup\" id=\"MathJax-Span-702\"><span style=\"display: inline-block; position: relative; width: 2.294em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.68em, 4.326em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-703\" style=\"font-family: STIXGeneral-Italic;\">Q</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.732em;\"><span class=\"texatom\" id=\"MathJax-Span-704\"><span class=\"mrow\" id=\"MathJax-Span-705\"><span class=\"mtext\" id=\"MathJax-Span-706\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">LLM</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-707\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-708\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-709\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-710\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mfrac\" id=\"MathJax-Span-711\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 4.742em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.076em, 1004.59em, 4.482em, -999.997em); top: -4.789em; left: 50%; margin-left: -2.341em;\"><span class=\"mrow\" id=\"MathJax-Span-712\"><span class=\"munderover\" id=\"MathJax-Span-713\"><span style=\"display: inline-block; position: relative; width: 1.357em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.076em, 1000.84em, 4.43em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mo\" id=\"MathJax-Span-714\" style=\"font-family: STIXGeneral-Regular; vertical-align: 0.003em;\">∑</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.695em; left: 0.94em;\"><span class=\"mi\" id=\"MathJax-Span-715\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"msubsup\" id=\"MathJax-Span-716\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.63em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-717\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.68em;\"><span class=\"mi\" id=\"MathJax-Span-718\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"msubsup\" id=\"MathJax-Span-719\"><span style=\"display: inline-block; position: relative; width: 0.836em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-720\" style=\"font-family: STIXGeneral-Italic;\">s</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.367em;\"><span class=\"mi\" id=\"MathJax-Span-721\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-722\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-723\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-724\" style=\"font-family: STIXGeneral-Regular;\">)</span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.076em, 1002.71em, 4.482em, -999.997em); top: -3.279em; left: 50%; margin-left: -1.352em;\"><span class=\"mrow\" id=\"MathJax-Span-725\"><span class=\"munderover\" id=\"MathJax-Span-726\"><span style=\"display: inline-block; position: relative; width: 1.357em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.076em, 1000.84em, 4.43em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mo\" id=\"MathJax-Span-727\" style=\"font-family: STIXGeneral-Regular; vertical-align: 0.003em;\">∑</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.695em; left: 0.94em;\"><span class=\"mi\" id=\"MathJax-Span-728\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"msubsup\" id=\"MathJax-Span-729\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 1.096em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.63em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-730\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.68em;\"><span class=\"mi\" id=\"MathJax-Span-731\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1004.74em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 4.742em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.309em; border-left: 0px solid; width: 0px; height: 3.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><msub><mi>Q</mi><mrow class=\"MJX-TeXAtom-ORD\"><mtext>LLM</mtext></mrow></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mrow><munder><mo>∑</mo><mi>d</mi></munder><msub><mi>w</mi><mi>d</mi></msub><msub><mi>s</mi><mi>d</mi></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo></mrow><mrow><munder><mo>∑</mo><mi>d</mi></munder><msub><mi>w</mi><mi>d</mi></msub></mrow></mfrac></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-65\">Q_{\\text{LLM}}(x) = \\frac{\\sum_d w_d s_d(x)}{\\sum_d w_d}</script>\n\n    <ul>\n      <li>Keep if <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-66-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>Q</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>LLM</mtext></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2265;</mo><mn>3.5</mn></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-732\" style=\"width: 7.086em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.888em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1005.84em, 2.503em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-733\"><span class=\"msubsup\" id=\"MathJax-Span-734\"><span style=\"display: inline-block; position: relative; width: 2.294em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.68em, 4.326em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-735\" style=\"font-family: STIXGeneral-Italic;\">Q</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.732em;\"><span class=\"texatom\" id=\"MathJax-Span-736\"><span class=\"mrow\" id=\"MathJax-Span-737\"><span class=\"mtext\" id=\"MathJax-Span-738\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">LLM</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-739\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-740\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-741\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-742\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">≥</span><span class=\"mn\" id=\"MathJax-Span-743\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">3.5</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>Q</mi><mrow class=\"MJX-TeXAtom-ORD\"><mtext>LLM</mtext></mrow></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>≥</mo><mn>3.5</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-66\">Q_{\\text{LLM}}(x) \\ge 3.5</script> and <strong>no dimension &lt; 3 except conciseness</strong>.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Human Evaluation (Calibration Subset)</strong>:</p>\n\n    <ul>\n      <li>Evaluate 1–5% of data</li>\n      <li>Compute average absolute difference between human and LLM scores:</li>\n    </ul>\n\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-67-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munder><mo>&amp;#x2211;</mo><mi>i</mi></munder><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow><msubsup><mi>s</mi><mi>i</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>human</mtext></mrow></msubsup><mo>&amp;#x2212;</mo><msubsup><mi>s</mi><mi>i</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>LLM</mtext></mrow></msubsup><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mo stretchy=&quot;false&quot;>|</mo></mrow></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-744\" style=\"width: 12.971em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 10.784em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(0.992em, 1010.68em, 3.909em, -999.997em); top: -2.497em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-745\"><span class=\"mi\" id=\"MathJax-Span-746\" style=\"font-family: STIXGeneral-Regular;\">Δ</span><span class=\"mo\" id=\"MathJax-Span-747\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">=</span><span class=\"mfrac\" id=\"MathJax-Span-748\" style=\"padding-left: 0.315em;\"><span style=\"display: inline-block; position: relative; width: 0.836em; height: 0px; margin-right: 0.107em; margin-left: 0.107em;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.42em, 4.169em, -999.997em); top: -4.685em; left: 50%; margin-left: -0.258em;\"><span class=\"mn\" id=\"MathJax-Span-749\" style=\"font-family: STIXGeneral-Regular;\">1</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.18em, 1000.73em, 4.169em, -999.997em); top: -3.331em; left: 50%; margin-left: -0.362em;\"><span class=\"mi\" id=\"MathJax-Span-750\" style=\"font-family: STIXGeneral-Italic;\">N<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.055em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(0.836em, 1000.84em, 1.201em, -999.997em); top: -1.247em; left: 0em;\"><span style=\"display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.836em; height: 0px;\"></span><span style=\"display: inline-block; width: 0px; height: 1.044em;\"></span></span></span></span><span class=\"munderover\" id=\"MathJax-Span-751\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 1.305em; height: 0px;\"><span style=\"position: absolute; clip: rect(2.867em, 1001.2em, 4.638em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mo\" id=\"MathJax-Span-752\" style=\"font-family: STIXSizeOneSym; vertical-align: -0.518em;\">∑</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1000.21em, 4.273em, -999.997em); top: -2.862em; left: 0.576em;\"><span class=\"mi\" id=\"MathJax-Span-753\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"texatom\" id=\"MathJax-Span-754\" style=\"padding-left: 0.211em;\"><span class=\"mrow\" id=\"MathJax-Span-755\"><span class=\"mo\" id=\"MathJax-Span-756\" style=\"font-family: STIXVariants;\">|</span></span></span><span class=\"msubsup\" id=\"MathJax-Span-757\"><span style=\"display: inline-block; position: relative; width: 2.398em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-758\" style=\"font-family: STIXGeneral-Italic;\">s</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1001.98em, 4.169em, -999.997em); top: -4.372em; left: 0.367em;\"><span class=\"texatom\" id=\"MathJax-Span-759\"><span class=\"mrow\" id=\"MathJax-Span-760\"><span class=\"mtext\" id=\"MathJax-Span-761\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">human</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1000.26em, 4.169em, -999.997em); top: -3.695em; left: 0.367em;\"><span class=\"mi\" id=\"MathJax-Span-762\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-763\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.263em;\">−</span><span class=\"msubsup\" id=\"MathJax-Span-764\" style=\"padding-left: 0.263em;\"><span style=\"display: inline-block; position: relative; width: 1.982em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.44em, 1000.37em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-765\" style=\"font-family: STIXGeneral-Italic;\">s</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1001.57em, 4.169em, -999.997em); top: -4.372em; left: 0.367em;\"><span class=\"texatom\" id=\"MathJax-Span-766\"><span class=\"mrow\" id=\"MathJax-Span-767\"><span class=\"mtext\" id=\"MathJax-Span-768\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">LLM</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; clip: rect(3.388em, 1000.26em, 4.169em, -999.997em); top: -3.695em; left: 0.367em;\"><span class=\"mi\" id=\"MathJax-Span-769\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"texatom\" id=\"MathJax-Span-770\"><span class=\"mrow\" id=\"MathJax-Span-771\"><span class=\"mo\" id=\"MathJax-Span-772\" style=\"font-family: STIXVariants;\">|</span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.503em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -1.559em; border-left: 0px solid; width: 0px; height: 3.253em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mi mathvariant=\"normal\">Δ</mi><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munder><mo>∑</mo><mi>i</mi></munder><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow><msubsup><mi>s</mi><mi>i</mi><mrow class=\"MJX-TeXAtom-ORD\"><mtext>human</mtext></mrow></msubsup><mo>−</mo><msubsup><mi>s</mi><mi>i</mi><mrow class=\"MJX-TeXAtom-ORD\"><mtext>LLM</mtext></mrow></msubsup><mrow class=\"MJX-TeXAtom-ORD\"><mo stretchy=\"false\">|</mo></mrow></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-67\">\\Delta = \\frac{1}{N} \\sum_i |s^{\\text{human}}_i - s^{\\text{LLM}}_i|</script>\n\n    <ul>\n      <li>If <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-68-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><mo>&amp;gt;</mo><mn>1.0</mn></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-773\" style=\"width: 3.857em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 3.18em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1003.18em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-774\"><span class=\"mi\" id=\"MathJax-Span-775\" style=\"font-family: STIXGeneral-Regular;\">Δ</span><span class=\"mo\" id=\"MathJax-Span-776\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&gt;</span><span class=\"mn\" id=\"MathJax-Span-777\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">1.0</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi mathvariant=\"normal\">Δ</mi><mo>&gt;</mo><mn>1.0</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-68\">\\Delta > 1.0</script>, adjust LLM thresholds down or retrain prompt.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Prompt Quality Evaluation</strong>:</p>\n\n    <ul>\n      <li>Apply the detailed Likert rubric from the <a href=\"#prompt-quality-metrics\">Prompt Quality Metrics</a> section.</li>\n      <li>Require overall average ≥ 3.5 and <strong>safety ≥ 4</strong>.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Safety Behavior Evaluation</strong>:</p>\n\n    <ul>\n      <li>Use balanced safe/unsafe set.</li>\n      <li>Require:\n        <ul>\n          <li>\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-69-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>FNR (under-punt)</mtext><mo>&amp;lt;</mo><mn>0.05</mn></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-778\" style=\"width: 12.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 10.159em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1010.11em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-779\"><span class=\"mtext\" id=\"MathJax-Span-780\" style=\"font-family: STIXGeneral-Regular;\">FNR (under-punt)</span><span class=\"mo\" id=\"MathJax-Span-781\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&lt;</span><span class=\"mn\" id=\"MathJax-Span-782\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">0.05</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mtext>FNR (under-punt)</mtext><mo>&lt;</mo><mn>0.05</mn></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-69\">\\text{FNR (under-punt)} < 0.05</script>\n          </li>\n          <li>\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-70-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>FPR (over-punt)</mtext><mo>&amp;lt;</mo><mn>0.10</mn></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-783\" style=\"width: 11.461em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 9.534em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1009.53em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-784\"><span class=\"mtext\" id=\"MathJax-Span-785\" style=\"font-family: STIXGeneral-Regular;\">FPR (over-punt)</span><span class=\"mo\" id=\"MathJax-Span-786\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&lt;</span><span class=\"mn\" id=\"MathJax-Span-787\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">0.10</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mtext>FPR (over-punt)</mtext><mo>&lt;</mo><mn>0.10</mn></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-70\">\\text{FPR (over-punt)} < 0.10</script>\n          </li>\n        </ul>\n      </li>\n      <li>If violated, filter unsafe prompts more aggressively and retrain refusal behavior.</li>\n    </ul>\n  </li>\n  <li>\n    <p><strong>Deduplication</strong>:</p>\n\n    <ul>\n      <li>Drop exact hash duplicates.</li>\n      <li>Drop near-duplicates if embedding cosine similarity <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-71-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>cos</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>i</mi></msub><mo>,</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>j</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;gt;</mo><mn>0.90</mn></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-788\" style=\"width: 8.284em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 6.878em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1006.88em, 2.659em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-789\"><span class=\"mi\" id=\"MathJax-Span-790\" style=\"font-family: STIXGeneral-Regular;\">cos</span><span class=\"mo\" id=\"MathJax-Span-791\"></span><span class=\"mo\" id=\"MathJax-Span-792\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"msubsup\" id=\"MathJax-Span-793\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-794\"><span class=\"mrow\" id=\"MathJax-Span-795\"><span class=\"mi\" id=\"MathJax-Span-796\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-797\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-798\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-799\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-800\"><span class=\"mrow\" id=\"MathJax-Span-801\"><span class=\"mi\" id=\"MathJax-Span-802\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-803\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">j<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-804\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-805\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&gt;</span><span class=\"mn\" id=\"MathJax-Span-806\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">0.90</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>cos</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>i</mi></msub><mo>,</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>&gt;</mo><mn>0.90</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-71\">\\cos(\\mathbf{e}_i,\\mathbf{e}_j) > 0.90</script>.</li>\n    </ul>\n  </li>\n</ol>\n<p><strong>Rule-Based / Statistical Filters</strong>:</p>\n<ul>\n      <li>\n        <p>Hard reject if:</p>\n\n        <ul>\n          <li>length &lt; 5 or &gt; 2000 tokens</li>\n          <li>language mismatch</li>\n          <li>perplexity z-score &gt; +3 or &lt; –3</li>\n          <li>entropy &lt; 1.0 bits/token</li>\n          <li>contains blocked terms (toxicity, profanity)</li>\n        </ul>\n      </li>\n    </ul>\n<p>Hard reject if:</p>\n<ul>\n          <li>length &lt; 5 or &gt; 2000 tokens</li>\n          <li>language mismatch</li>\n          <li>perplexity z-score &gt; +3 or &lt; –3</li>\n          <li>entropy &lt; 1.0 bits/token</li>\n          <li>contains blocked terms (toxicity, profanity)</li>\n        </ul>\n<p><strong>Compliance Filters</strong>:</p>\n<ul>\n      <li>\n        <p>Hard reject if:</p>\n\n        <ul>\n          <li><a href=\"https://platform.openai.com/docs/guides/moderation\">OpenAI Moderation API</a> risk &gt; 0.8</li>\n          <li><a href=\"https://github.com/meta-llama/llama-guard\">LLaMA-Guard</a> unsafe label present</li>\n          <li>contains PII or license-restricted text</li>\n        </ul>\n      </li>\n    </ul>\n<p>Hard reject if:</p>\n<ul>\n          <li><a href=\"https://platform.openai.com/docs/guides/moderation\">OpenAI Moderation API</a> risk &gt; 0.8</li>\n          <li><a href=\"https://github.com/meta-llama/llama-guard\">LLaMA-Guard</a> unsafe label present</li>\n          <li>contains PII or license-restricted text</li>\n        </ul>\n<p><strong>Outlier Detection</strong>:</p>\n<ul>\n      <li>Hard reject if DBSCAN marks as noise or mean kNN distance &gt; 95th percentile</li>\n    </ul>\n<p><strong>LLM-Based Evaluation</strong>:</p>\n<ul>\n      <li>\n        <p>Dimensions and weights:</p>\n\n        <div align=\"center\">\n <table class=\"tg\">\n <thead>\n <tr>\n <th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n <th class=\"tg-hcenter-valign-first\"><strong>Weight <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-64-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>d</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-695\" style=\"width: 1.372em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.134em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.61em, 1001.13em, 2.562em, -999.997em); top: -2.199em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-696\"><span class=\"msubsup\" id=\"MathJax-Span-697\"><span style=\"display: inline-block; position: relative; width: 1.134em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.396em, 1000.66em, 4.17em, -999.997em); top: -3.985em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-698\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 3.991em;\"></span></span><span style=\"position: absolute; top: -3.807em; left: 0.658em;\"><span class=\"mi\" id=\"MathJax-Span-699\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 3.991em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.205em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 0.861em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>w</mi><mi>d</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-64\">w_d</script></strong></th>\n <th class=\"tg-hcenter-valign-second\"><strong>Threshold</strong></th>\n </tr>\n </thead>\n <tbody>\n <tr>\n <td class=\"tg-tleft-valign-first\">Clarity</td>\n <td class=\"tg-tleft-valign-first\">0.15</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Coherence</td>\n <td class=\"tg-tleft-valign-first\">0.15</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Factuality</td>\n <td class=\"tg-tleft-valign-first\">0.20</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Instruction relevance</td>\n <td class=\"tg-tleft-valign-first\">0.20</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Conciseness</td>\n <td class=\"tg-tleft-valign-first\">0.10</td>\n <td class=\"tg-tleft-valign-second\">≥ 2/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Safety</td>\n <td class=\"tg-tleft-valign-first\">0.20</td>\n <td class=\"tg-tleft-valign-second\">≥ 4/5</td>\n </tr>\n </tbody>\n </table>\n </div>\n      </li>\n      <li>\n        <p>Compute:</p>\n      </li>\n    </ul>\n<p>Dimensions and weights:</p>\n<table class=\"tg\">\n <thead>\n <tr>\n <th class=\"tg-hcenter-valign-first\"><strong>Dimension</strong></th>\n <th class=\"tg-hcenter-valign-first\"><strong>Weight <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-64-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>w</mi><mi>d</mi></msub></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-695\" style=\"width: 1.372em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 1.134em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.61em, 1001.13em, 2.562em, -999.997em); top: -2.199em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-696\"><span class=\"msubsup\" id=\"MathJax-Span-697\"><span style=\"display: inline-block; position: relative; width: 1.134em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.396em, 1000.66em, 4.17em, -999.997em); top: -3.985em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-698\" style=\"font-family: STIXGeneral-Italic;\">w</span><span style=\"display: inline-block; width: 0px; height: 3.991em;\"></span></span><span style=\"position: absolute; top: -3.807em; left: 0.658em;\"><span class=\"mi\" id=\"MathJax-Span-699\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">d<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 3.991em;\"></span></span></span></span></span><span style=\"display: inline-block; width: 0px; height: 2.205em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.282em; border-left: 0px solid; width: 0px; height: 0.861em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>w</mi><mi>d</mi></msub></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-64\">w_d</script></strong></th>\n <th class=\"tg-hcenter-valign-second\"><strong>Threshold</strong></th>\n </tr>\n </thead>\n <tbody>\n <tr>\n <td class=\"tg-tleft-valign-first\">Clarity</td>\n <td class=\"tg-tleft-valign-first\">0.15</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Coherence</td>\n <td class=\"tg-tleft-valign-first\">0.15</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Factuality</td>\n <td class=\"tg-tleft-valign-first\">0.20</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Instruction relevance</td>\n <td class=\"tg-tleft-valign-first\">0.20</td>\n <td class=\"tg-tleft-valign-second\">≥ 3/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Conciseness</td>\n <td class=\"tg-tleft-valign-first\">0.10</td>\n <td class=\"tg-tleft-valign-second\">≥ 2/5</td>\n </tr>\n <tr>\n <td class=\"tg-tleft-valign-first\">Safety</td>\n <td class=\"tg-tleft-valign-first\">0.20</td>\n <td class=\"tg-tleft-valign-second\">≥ 4/5</td>\n </tr>\n </tbody>\n </table>\n<p>Compute:</p>\n<ul>\n      <li>Keep if <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-66-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><msub><mi>Q</mi><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mtext>LLM</mtext></mrow></msub><mo stretchy=&quot;false&quot;>(</mo><mi>x</mi><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;#x2265;</mo><mn>3.5</mn></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-732\" style=\"width: 7.086em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 5.888em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1005.84em, 2.503em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-733\"><span class=\"msubsup\" id=\"MathJax-Span-734\"><span style=\"display: inline-block; position: relative; width: 2.294em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.18em, 1000.68em, 4.326em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"mi\" id=\"MathJax-Span-735\" style=\"font-family: STIXGeneral-Italic;\">Q</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.732em;\"><span class=\"texatom\" id=\"MathJax-Span-736\"><span class=\"mrow\" id=\"MathJax-Span-737\"><span class=\"mtext\" id=\"MathJax-Span-738\" style=\"font-size: 70.7%; font-family: STIXGeneral-Regular;\">LLM</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-739\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"mi\" id=\"MathJax-Span-740\" style=\"font-family: STIXGeneral-Italic;\">x<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span class=\"mo\" id=\"MathJax-Span-741\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-742\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">≥</span><span class=\"mn\" id=\"MathJax-Span-743\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">3.5</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.247em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><msub><mi>Q</mi><mrow class=\"MJX-TeXAtom-ORD\"><mtext>LLM</mtext></mrow></msub><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>≥</mo><mn>3.5</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-66\">Q_{\\text{LLM}}(x) \\ge 3.5</script> and <strong>no dimension &lt; 3 except conciseness</strong>.</li>\n    </ul>\n<p><strong>Human Evaluation (Calibration Subset)</strong>:</p>\n<ul>\n      <li>Evaluate 1–5% of data</li>\n      <li>Compute average absolute difference between human and LLM scores:</li>\n    </ul>\n<ul>\n      <li>If <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-68-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi mathvariant=&quot;normal&quot;>&amp;#x0394;</mi><mo>&amp;gt;</mo><mn>1.0</mn></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-773\" style=\"width: 3.857em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 3.18em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1003.18em, 2.346em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-774\"><span class=\"mi\" id=\"MathJax-Span-775\" style=\"font-family: STIXGeneral-Regular;\">Δ</span><span class=\"mo\" id=\"MathJax-Span-776\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&gt;</span><span class=\"mn\" id=\"MathJax-Span-777\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">1.0</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.059em; border-left: 0px solid; width: 0px; height: 0.941em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi mathvariant=\"normal\">Δ</mi><mo>&gt;</mo><mn>1.0</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-68\">\\Delta > 1.0</script>, adjust LLM thresholds down or retrain prompt.</li>\n    </ul>\n<p><strong>Prompt Quality Evaluation</strong>:</p>\n<ul>\n      <li>Apply the detailed Likert rubric from the <a href=\"#prompt-quality-metrics\">Prompt Quality Metrics</a> section.</li>\n      <li>Require overall average ≥ 3.5 and <strong>safety ≥ 4</strong>.</li>\n    </ul>\n<p><strong>Safety Behavior Evaluation</strong>:</p>\n<ul>\n      <li>Use balanced safe/unsafe set.</li>\n      <li>Require:\n        <ul>\n          <li>\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-69-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>FNR (under-punt)</mtext><mo>&amp;lt;</mo><mn>0.05</mn></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-778\" style=\"width: 12.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 10.159em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1010.11em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-779\"><span class=\"mtext\" id=\"MathJax-Span-780\" style=\"font-family: STIXGeneral-Regular;\">FNR (under-punt)</span><span class=\"mo\" id=\"MathJax-Span-781\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&lt;</span><span class=\"mn\" id=\"MathJax-Span-782\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">0.05</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mtext>FNR (under-punt)</mtext><mo>&lt;</mo><mn>0.05</mn></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-69\">\\text{FNR (under-punt)} < 0.05</script>\n          </li>\n          <li>\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-70-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>FPR (over-punt)</mtext><mo>&amp;lt;</mo><mn>0.10</mn></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-783\" style=\"width: 11.461em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 9.534em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1009.53em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-784\"><span class=\"mtext\" id=\"MathJax-Span-785\" style=\"font-family: STIXGeneral-Regular;\">FPR (over-punt)</span><span class=\"mo\" id=\"MathJax-Span-786\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&lt;</span><span class=\"mn\" id=\"MathJax-Span-787\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">0.10</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mtext>FPR (over-punt)</mtext><mo>&lt;</mo><mn>0.10</mn></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-70\">\\text{FPR (over-punt)} < 0.10</script>\n          </li>\n        </ul>\n      </li>\n      <li>If violated, filter unsafe prompts more aggressively and retrain refusal behavior.</li>\n    </ul>\n<ul>\n          <li>\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-69-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>FNR (under-punt)</mtext><mo>&amp;lt;</mo><mn>0.05</mn></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-778\" style=\"width: 12.19em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 10.159em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1010.11em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-779\"><span class=\"mtext\" id=\"MathJax-Span-780\" style=\"font-family: STIXGeneral-Regular;\">FNR (under-punt)</span><span class=\"mo\" id=\"MathJax-Span-781\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&lt;</span><span class=\"mn\" id=\"MathJax-Span-782\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">0.05</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mtext>FNR (under-punt)</mtext><mo>&lt;</mo><mn>0.05</mn></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-69\">\\text{FNR (under-punt)} < 0.05</script>\n          </li>\n          <li>\n<span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><div class=\"MathJax_Display\" style=\"text-align: center;\"><span class=\"MathJax\" id=\"MathJax-Element-70-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot; display=&quot;block&quot;><mtext>FPR (over-punt)</mtext><mo>&amp;lt;</mo><mn>0.10</mn></math>\" role=\"presentation\" style=\"text-align: center; position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-783\" style=\"width: 11.461em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 9.534em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1009.53em, 2.555em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-784\"><span class=\"mtext\" id=\"MathJax-Span-785\" style=\"font-family: STIXGeneral-Regular;\">FPR (over-punt)</span><span class=\"mo\" id=\"MathJax-Span-786\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&lt;</span><span class=\"mn\" id=\"MathJax-Span-787\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">0.10</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.309em; border-left: 0px solid; width: 0px; height: 1.191em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML MJX_Assistive_MathML_Block\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><mtext>FPR (over-punt)</mtext><mo>&lt;</mo><mn>0.10</mn></math></span></span></div><script type=\"math/tex; mode=display\" id=\"MathJax-Element-70\">\\text{FPR (over-punt)} < 0.10</script>\n          </li>\n        </ul>\n<p><strong>Deduplication</strong>:</p>\n<ul>\n      <li>Drop exact hash duplicates.</li>\n      <li>Drop near-duplicates if embedding cosine similarity <span class=\"MathJax_Preview\" style=\"color: inherit; display: none;\"></span><span class=\"MathJax\" id=\"MathJax-Element-71-Frame\" tabindex=\"0\" data-mathml=\"<math xmlns=&quot;http://www.w3.org/1998/Math/MathML&quot;><mi>cos</mi><mo>&amp;#x2061;</mo><mo stretchy=&quot;false&quot;>(</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>i</mi></msub><mo>,</mo><msub><mrow class=&quot;MJX-TeXAtom-ORD&quot;><mi mathvariant=&quot;bold&quot;>e</mi></mrow><mi>j</mi></msub><mo stretchy=&quot;false&quot;>)</mo><mo>&amp;gt;</mo><mn>0.90</mn></math>\" role=\"presentation\" style=\"position: relative;\"><nobr aria-hidden=\"true\"><span class=\"math\" id=\"MathJax-Span-788\" style=\"width: 8.284em; display: inline-block;\"><span style=\"display: inline-block; position: relative; width: 6.878em; height: 0px; font-size: 120%;\"><span style=\"position: absolute; clip: rect(1.357em, 1006.88em, 2.659em, -999.997em); top: -2.185em; left: 0em;\"><span class=\"mrow\" id=\"MathJax-Span-789\"><span class=\"mi\" id=\"MathJax-Span-790\" style=\"font-family: STIXGeneral-Regular;\">cos</span><span class=\"mo\" id=\"MathJax-Span-791\"></span><span class=\"mo\" id=\"MathJax-Span-792\" style=\"font-family: STIXGeneral-Regular;\">(</span><span class=\"msubsup\" id=\"MathJax-Span-793\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-794\"><span class=\"mrow\" id=\"MathJax-Span-795\"><span class=\"mi\" id=\"MathJax-Span-796\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-797\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">i</span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-798\" style=\"font-family: STIXGeneral-Regular;\">,</span><span class=\"msubsup\" id=\"MathJax-Span-799\" style=\"padding-left: 0.211em;\"><span style=\"display: inline-block; position: relative; width: 0.732em; height: 0px;\"><span style=\"position: absolute; clip: rect(3.388em, 1000.42em, 4.169em, -999.997em); top: -4.008em; left: 0em;\"><span class=\"texatom\" id=\"MathJax-Span-800\"><span class=\"mrow\" id=\"MathJax-Span-801\"><span class=\"mi\" id=\"MathJax-Span-802\" style=\"font-family: STIXGeneral; font-weight: bold;\">e</span></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span><span style=\"position: absolute; top: -3.852em; left: 0.471em;\"><span class=\"mi\" id=\"MathJax-Span-803\" style=\"font-size: 70.7%; font-family: STIXGeneral-Italic;\">j<span style=\"display: inline-block; overflow: hidden; height: 1px; width: 0.003em;\"></span></span><span style=\"display: inline-block; width: 0px; height: 4.013em;\"></span></span></span></span><span class=\"mo\" id=\"MathJax-Span-804\" style=\"font-family: STIXGeneral-Regular;\">)</span><span class=\"mo\" id=\"MathJax-Span-805\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">&gt;</span><span class=\"mn\" id=\"MathJax-Span-806\" style=\"font-family: STIXGeneral-Regular; padding-left: 0.315em;\">0.90</span></span><span style=\"display: inline-block; width: 0px; height: 2.19em;\"></span></span></span><span style=\"display: inline-block; overflow: hidden; vertical-align: -0.434em; border-left: 0px solid; width: 0px; height: 1.316em;\"></span></span></nobr><span class=\"MJX_Assistive_MathML\" role=\"presentation\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><mi>cos</mi><mo>⁡</mo><mo stretchy=\"false\">(</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>i</mi></msub><mo>,</mo><msub><mrow class=\"MJX-TeXAtom-ORD\"><mi mathvariant=\"bold\">e</mi></mrow><mi>j</mi></msub><mo stretchy=\"false\">)</mo><mo>&gt;</mo><mn>0.90</mn></math></span></span><script type=\"math/tex\" id=\"MathJax-Element-71\">\\cos(\\mathbf{e}_i,\\mathbf{e}_j) > 0.90</script>.</li>\n    </ul>",
    "contentMarkdown": "1.  **Rule-Based / Statistical Filters**:\n    \n    *   Hard reject if:\n        \n        *   length < 5 or > 2000 tokens\n        *   language mismatch\n        *   perplexity z-score > +3 or < –3\n        *   entropy < 1.0 bits/token\n        *   contains blocked terms (toxicity, profanity)\n2.  **Compliance Filters**:\n    \n    *   Hard reject if:\n        \n        *   [OpenAI Moderation API](https://platform.openai.com/docs/guides/moderation) risk > 0.8\n        *   [LLaMA-Guard](https://github.com/meta-llama/llama-guard) unsafe label present\n        *   contains PII or license-restricted text\n3.  **Outlier Detection**:\n    \n    *   Hard reject if DBSCAN marks as noise or mean kNN distance > 95th percentile\n4.  **LLM-Based Evaluation**:\n    \n    *   Dimensions and weights:\n        \n        **Dimension**\n        \n        **Weight wdwdw\\_d**\n        \n        **Threshold**\n        \n        Clarity\n        \n        0.15\n        \n        ≥ 3/5\n        \n        Coherence\n        \n        0.15\n        \n        ≥ 3/5\n        \n        Factuality\n        \n        0.20\n        \n        ≥ 3/5\n        \n        Instruction relevance\n        \n        0.20\n        \n        ≥ 3/5\n        \n        Conciseness\n        \n        0.10\n        \n        ≥ 2/5\n        \n        Safety\n        \n        0.20\n        \n        ≥ 4/5\n        \n    *   Compute:\n        \n    \n    QLLM(x)\\=∑dwdsd(x)∑dwdQLLM(x)\\=∑dwdsd(x)∑dwd\n    \n    Q\\_{\\\\text{LLM}}(x) = \\\\frac{\\\\sum\\_d w\\_d s\\_d(x)}{\\\\sum\\_d w\\_d}\n    *   Keep if QLLM(x)≥3.5QLLM(x)≥3.5Q\\_{\\\\text{LLM}}(x) \\\\ge 3.5 and **no dimension < 3 except conciseness**.\n5.  **Human Evaluation (Calibration Subset)**:\n    \n    *   Evaluate 1–5% of data\n    *   Compute average absolute difference between human and LLM scores:\n    \n    Δ\\=1N∑i|shumani−sLLMi|Δ\\=1N∑i|sihuman−siLLM|\n    \n    \\\\Delta = \\\\frac{1}{N} \\\\sum\\_i |s^{\\\\text{human}}\\_i - s^{\\\\text{LLM}}\\_i|\n    *   If Δ\\>1.0Δ\\>1.0\\\\Delta > 1.0, adjust LLM thresholds down or retrain prompt.\n6.  **Prompt Quality Evaluation**:\n    \n    *   Apply the detailed Likert rubric from the [Prompt Quality Metrics](#prompt-quality-metrics) section.\n    *   Require overall average ≥ 3.5 and **safety ≥ 4**.\n7.  **Safety Behavior Evaluation**:\n    \n    *   Use balanced safe/unsafe set.\n    *   Require:\n        *   FNR (under-punt)<0.05FNR (under-punt)<0.05\n            \n            \\\\text{FNR (under-punt)} < 0.05\n        *   FPR (over-punt)<0.10FPR (over-punt)<0.10\n            \n            \\\\text{FPR (over-punt)} < 0.10\n    *   If violated, filter unsafe prompts more aggressively and retrain refusal behavior.\n8.  **Deduplication**:\n    \n    *   Drop exact hash duplicates.\n    *   Drop near-duplicates if embedding cosine similarity cos(ei,ej)\\>0.90cos⁡(ei,ej)\\>0.90\\\\cos(\\\\mathbf{e}\\_i,\\\\mathbf{e}\\_j) > 0.90.\n\n**Rule-Based / Statistical Filters**:\n\n*   Hard reject if:\n    \n    *   length < 5 or > 2000 tokens\n    *   language mismatch\n    *   perplexity z-score > +3 or < –3\n    *   entropy < 1.0 bits/token\n    *   contains blocked terms (toxicity, profanity)\n\nHard reject if:\n\n*   length < 5 or > 2000 tokens\n*   language mismatch\n*   perplexity z-score > +3 or < –3\n*   entropy < 1.0 bits/token\n*   contains blocked terms (toxicity, profanity)\n\n**Compliance Filters**:\n\n*   Hard reject if:\n    \n    *   [OpenAI Moderation API](https://platform.openai.com/docs/guides/moderation) risk > 0.8\n    *   [LLaMA-Guard](https://github.com/meta-llama/llama-guard) unsafe label present\n    *   contains PII or license-restricted text\n\nHard reject if:\n\n*   [OpenAI Moderation API](https://platform.openai.com/docs/guides/moderation) risk > 0.8\n*   [LLaMA-Guard](https://github.com/meta-llama/llama-guard) unsafe label present\n*   contains PII or license-restricted text\n\n**Outlier Detection**:\n\n*   Hard reject if DBSCAN marks as noise or mean kNN distance > 95th percentile\n\n**LLM-Based Evaluation**:\n\n*   Dimensions and weights:\n    \n    **Dimension**\n    \n    **Weight wdwdw\\_d**\n    \n    **Threshold**\n    \n    Clarity\n    \n    0.15\n    \n    ≥ 3/5\n    \n    Coherence\n    \n    0.15\n    \n    ≥ 3/5\n    \n    Factuality\n    \n    0.20\n    \n    ≥ 3/5\n    \n    Instruction relevance\n    \n    0.20\n    \n    ≥ 3/5\n    \n    Conciseness\n    \n    0.10\n    \n    ≥ 2/5\n    \n    Safety\n    \n    0.20\n    \n    ≥ 4/5\n    \n*   Compute:\n    \n\nDimensions and weights:\n\n**Dimension**\n\n**Weight wdwdw\\_d**\n\n**Threshold**\n\nClarity\n\n0.15\n\n≥ 3/5\n\nCoherence\n\n0.15\n\n≥ 3/5\n\nFactuality\n\n0.20\n\n≥ 3/5\n\nInstruction relevance\n\n0.20\n\n≥ 3/5\n\nConciseness\n\n0.10\n\n≥ 2/5\n\nSafety\n\n0.20\n\n≥ 4/5\n\nCompute:\n\n*   Keep if QLLM(x)≥3.5QLLM(x)≥3.5Q\\_{\\\\text{LLM}}(x) \\\\ge 3.5 and **no dimension < 3 except conciseness**.\n\n**Human Evaluation (Calibration Subset)**:\n\n*   Evaluate 1–5% of data\n*   Compute average absolute difference between human and LLM scores:\n\n*   If Δ\\>1.0Δ\\>1.0\\\\Delta > 1.0, adjust LLM thresholds down or retrain prompt.\n\n**Prompt Quality Evaluation**:\n\n*   Apply the detailed Likert rubric from the [Prompt Quality Metrics](#prompt-quality-metrics) section.\n*   Require overall average ≥ 3.5 and **safety ≥ 4**.\n\n**Safety Behavior Evaluation**:\n\n*   Use balanced safe/unsafe set.\n*   Require:\n    *   FNR (under-punt)<0.05FNR (under-punt)<0.05\n        \n        \\\\text{FNR (under-punt)} < 0.05\n    *   FPR (over-punt)<0.10FPR (over-punt)<0.10\n        \n        \\\\text{FPR (over-punt)} < 0.10\n*   If violated, filter unsafe prompts more aggressively and retrain refusal behavior.\n\n*   FNR (under-punt)<0.05FNR (under-punt)<0.05\n    \n    \\\\text{FNR (under-punt)} < 0.05\n*   FPR (over-punt)<0.10FPR (over-punt)<0.10\n    \n    \\\\text{FPR (over-punt)} < 0.10\n\n**Deduplication**:\n\n*   Drop exact hash duplicates.\n*   Drop near-duplicates if embedding cosine similarity cos(ei,ej)\\>0.90cos⁡(ei,ej)\\>0.90\\\\cos(\\\\mathbf{e}\\_i,\\\\mathbf{e}\\_j) > 0.90.",
    "order": 42,
    "orderInChapter": 2,
    "difficulty": 5,
    "estimatedMinutes": 4,
    "tags": [
      "datatraining",
      "embedding",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": true,
      "hasImages": false,
      "wordCount": 604,
      "contentLength": 58463
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#suggested-weights-and-thresholds",
    "scrapedAt": "2025-12-28T11:48:17.192Z"
  },
  {
    "id": "ai-data-filtering-implementation-flow-43",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Concrete Scoring Framework",
    "title": "Implementation Flow",
    "subtitle": "Concrete Scoring Framework",
    "contentHtml": "<ul>\n  <li>\n    <p>The following flow offers a <strong>self-consistent scoring architecture</strong> that balances <strong>precision (safety)</strong> and <strong>recall (coverage)</strong> while staying scalable:</p>\n\n    <ol>\n      <li><strong>Precompute</strong> rule-based, safety, and embedding metrics.</li>\n      <li><strong>Filter</strong> using hard criteria (#1–#3, #8).</li>\n      <li><strong>Evaluate</strong> remaining samples with LLM judges on (#4) and prompts on (#6).</li>\n      <li><strong>Calibrate</strong> thresholds with human subset (#5).</li>\n      <li><strong>Evaluate</strong> safety refusal behavior periodically (#7).</li>\n    </ol>\n  </li>\n</ul>\n<p>The following flow offers a <strong>self-consistent scoring architecture</strong> that balances <strong>precision (safety)</strong> and <strong>recall (coverage)</strong> while staying scalable:</p>\n<ol>\n      <li><strong>Precompute</strong> rule-based, safety, and embedding metrics.</li>\n      <li><strong>Filter</strong> using hard criteria (#1–#3, #8).</li>\n      <li><strong>Evaluate</strong> remaining samples with LLM judges on (#4) and prompts on (#6).</li>\n      <li><strong>Calibrate</strong> thresholds with human subset (#5).</li>\n      <li><strong>Evaluate</strong> safety refusal behavior periodically (#7).</li>\n    </ol>",
    "contentMarkdown": "*   The following flow offers a **self-consistent scoring architecture** that balances **precision (safety)** and **recall (coverage)** while staying scalable:\n    \n    1.  **Precompute** rule-based, safety, and embedding metrics.\n    2.  **Filter** using hard criteria (#1–#3, #8).\n    3.  **Evaluate** remaining samples with LLM judges on (#4) and prompts on (#6).\n    4.  **Calibrate** thresholds with human subset (#5).\n    5.  **Evaluate** safety refusal behavior periodically (#7).\n\nThe following flow offers a **self-consistent scoring architecture** that balances **precision (safety)** and **recall (coverage)** while staying scalable:\n\n1.  **Precompute** rule-based, safety, and embedding metrics.\n2.  **Filter** using hard criteria (#1–#3, #8).\n3.  **Evaluate** remaining samples with LLM judges on (#4) and prompts on (#6).\n4.  **Calibrate** thresholds with human subset (#5).\n5.  **Evaluate** safety refusal behavior periodically (#7).",
    "order": 43,
    "orderInChapter": 3,
    "difficulty": 4,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining",
      "embedding",
      "llm"
    ],
    "metadata": {
      "hasCode": false,
      "hasMath": false,
      "hasImages": false,
      "wordCount": 119,
      "contentLength": 1314
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#implementation-flow",
    "scrapedAt": "2025-12-28T11:48:17.192Z"
  },
  {
    "id": "ai-data-filtering-citation-44",
    "domain": "ai_primers",
    "category": "Data/Training",
    "article": "Data Quality/Filtering",
    "articleSlug": "data-filtering",
    "chapter": "Concrete Scoring Framework",
    "title": "Citation",
    "subtitle": "Concrete Scoring Framework",
    "contentHtml": "<p>If you found our work useful, please cite it as:</p>\n<div class=\"language-plaintext highlighter-rouge\"><div class=\"highlight\"><pre class=\"highlight\"><div><button class=\"btn-copy\" data-clipboard-action=\"copy\" data-clipboard-target=\"#code4\"><img src=\"https://aman.ai/images/copy.png\" style=\"margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;\"></button></div><code id=\"code4\">@article{Chadha2020DistilledDataFiltering,\n  title   = {Data Filtering},\n  author  = {Chadha, Aman and Jain, Vinija},\n  journal = {Distilled AI},\n  year    = {2020},\n  note    = {\\url{https://aman.ai}}\n}\n</code></pre></div></div>\n<pre class=\"highlight\"><div><button class=\"btn-copy\" data-clipboard-action=\"copy\" data-clipboard-target=\"#code4\"><img src=\"https://aman.ai/images/copy.png\" style=\"margin:0; border:none; padding:2px 0px; width:100%; height:18px; width:18px;\"></button></div><code id=\"code4\">@article{Chadha2020DistilledDataFiltering,\n  title   = {Data Filtering},\n  author  = {Chadha, Aman and Jain, Vinija},\n  journal = {Distilled AI},\n  year    = {2020},\n  note    = {\\url{https://aman.ai}}\n}\n</code></pre>",
    "contentMarkdown": "If you found our work useful, please cite it as:\n\n![](https://aman.ai/images/copy.png)\n\n`@article{Chadha2020DistilledDataFiltering,   title   = {Data Filtering},   author  = {Chadha, Aman and Jain, Vinija},   journal = {Distilled AI},   year    = {2020},   note    = {\\url{https://aman.ai}} }`\n\n![](https://aman.ai/images/copy.png)\n\n`@article{Chadha2020DistilledDataFiltering,   title   = {Data Filtering},   author  = {Chadha, Aman and Jain, Vinija},   journal = {Distilled AI},   year    = {2020},   note    = {\\url{https://aman.ai}} }`",
    "order": 44,
    "orderInChapter": 4,
    "difficulty": 5,
    "estimatedMinutes": 1,
    "tags": [
      "datatraining"
    ],
    "metadata": {
      "hasCode": true,
      "hasMath": false,
      "hasImages": true,
      "wordCount": 58,
      "contentLength": 1122
    },
    "nextCards": [],
    "relatedCards": [],
    "prerequisites": [],
    "sourceUrl": "https://aman.ai/primers/ai/data-filtering/#citation",
    "scrapedAt": "2025-12-28T11:48:17.192Z"
  }
]